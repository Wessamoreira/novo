swagger: '2.0'
info:
  description: >-
    Esta API é responsável por fornecer os dados de integração do SEI para o
    Moodle
  version: 1.0.0
  title: API de Integração SEI x Moodle
  contact:
    email: pedrorenan@prte.com
  license:
    name: Apache 2.0
    url: 'http://www.apache.org/licenses/LICENSE-2.0.html'
tags:
  - name: Pessoas
    description: Chamadas relacionadas com Pessoas
  - name: Cursos
    description: 'Chamadas relacionadas com Cursos, Turmas e Disciplinas / Módulos'
  - name: Vinculações
    description: >-
      Chamadas relacionadas com matrículas de alunos, professores e
      coordenadores.
paths:
  '/moodle/pessoas/{horas}':
    get:
      tags:
        - Pessoas
      summary: >-
        Retorna todas as pessoas as quais algum dado foi alterado no intervalo
        de horas informado.
      operationId: getPessoas
      description: >
        Ao passar um número inteiro como parâmetro devem ser retornadas todas as
        pessoas que tiveram algum dado alterado no sistema do momento atual
        decrementado do número inteiro de horas informado. Ex. /pessoas/1 deve
        retornar as pessoas que tiveram algum dado alterado na última hora.
      produces:
        - application/json
      parameters:
        - in: header
          name: authorization
          type: string
          default: TOKEN
          description: TOKEN
          required: true
        - in: header
          name: Content-Type
          type: string
          default: application/json
          description: Usar application/json
          required: true
        - in: path
          name: horas
          description: número inteiro de horas a serem pesquisadas
          required: true
          type: integer
      responses:
        '200':
          description: Foram econtradas altearções em Pessoas
          schema:
            type: array
            items:
              $ref: '#/definitions/PessoasItem'
        '400':
          description: Paramêtro incorreto
        '404':
          description: Não Foram econtradas altearções em Pessoas
        '500':
          description: Erro Interno do Servidor
  '/moodle/cursos/{horas}':
    get:
      tags:
        - Cursos
      summary: >-
        Retorna todos os cursos, turmas e/ou módulos/disciplinas as quais algum
        dado foi alterado no intervalo de horas informado.
      operationId: getCursos
      description: >
        Ao passar um número inteiro como parâmetro devem ser retornadas todos os
        cursos, turmas e/ou módulos/disciplinas que tiveram algum dado alterado
        no sistema do momento atual decrementado do número inteiro de horas
        informado. Ex. /cursos/1 deve retornar os os cursos, turmas e
        módulos/disciplinas que tiveram algum dado alterado na última hora.
      produces:
        - application/json
      parameters:
        - in: header
          name: authorization
          type: string
          default: TOKEN
          description: TOKEN
          required: true
        - in: header
          name: Content-Type
          type: string
          default: application/json
          description: Usar application/json
          required: true
        - in: path
          name: horas
          description: Número Inteiro de Horas a Serem Pesquisadas
          required: true
          type: integer
      responses:
        '200':
          description: >-
            Foram econtradas altearções em Cursos, Turmas e/ou
            Módulos/Disciplinas
          schema:
            type: array
            items:
              $ref: '#/definitions/CursosItem'
        '400':
          description: Paramêtro incorreto
        '404':
          description: >-
            Não Foram econtradas altearções em Cursos, Turmas e/ou
            Módulos/Disciplinas
        '500':
          description: Erro Interno do Servidor
  '/moodle/vinculacoes/alunos/{horas}':
    get:
      tags:
        - Vinculações
      summary: >-
        Retorna todas as matículas de alunos as quais algum dado foi alterado no
        intervalo de horas informado.
      operationId: getVinculacoesAlunos
      description: >
        Ao passar um número inteiro como parâmetro devem ser retornadas todas as
        matículas de alunos que tiveram algum dado alterado no sistema do
        momento atual decrementado do número inteiro de horas informado. Ex.
        /vinculacoes/alunos/1 deve retornar todas as matículas de alunos que
        tiveram algum dado alterado na última hora.
      produces:
        - application/json
      parameters:
        - in: header
          name: authorization
          type: string
          default: TOKEN
          description: TOKEN
          required: true
        - in: header
          name: Content-Type
          type: string
          default: application/json
          description: Usar application/json
          required: true
        - in: path
          name: horas
          description: Número Inteiro de Horas a Serem Pesquisadas
          required: true
          type: integer
      responses:
        '200':
          description: Foram econtradas altearções em Matículas de Alunos
          schema:
            type: array
            items:
              $ref: '#/definitions/VinculosItem'
        '400':
          description: Paramêtro incorreto
        '404':
          description: Não Foram econtradas altearções em Matículas de Alunos
        '500':
          description: Erro Interno do Servidor
  '/moodle/vinculacoes/professores/{horas}':
    get:
      tags:
        - Vinculações
      summary: >-
        Retorna todos os agendamentos de professores os quais algum dado foi
        alterado no intervalo de horas informado.
      operationId: getVinculacoesProfessores
      description: >
        Ao passar um número inteiro como parâmetro devem ser retornadas todos os
        agendamentos de professores que tiveram algum dado alterado no sistema
        do momento atual decrementado do número inteiro de horas informado. Ex.
        /vinculacoes/professores/1 deve retornar todos os agendamentos de
        professores que tiveram algum dado alterado na última hora.
      produces:
        - application/json
      parameters:
        - in: header
          name: authorization
          type: string
          default: TOKEN
          description: TOKEN
          required: true
        - in: header
          name: Content-Type
          type: string
          default: application/json
          description: Usar application/json
          required: true
        - in: path
          name: horas
          description: Número Inteiro de Horas a Serem Pesquisadas
          required: true
          type: integer
      responses:
        '200':
          description: Foram econtradas altearções em Agendamentos de Professores
          schema:
            type: array
            items:
              $ref: '#/definitions/VinculosItem'
        '400':
          description: Paramêtro incorreto
        '404':
          description: Não Foram econtradas altearções em Agendamentos de Professores
        '500':
          description: Erro Interno do Servidor
  '/moodle/vinculacoes/coordenadores/{horas}':
    get:
      tags:
        - Vinculações
      summary: >-
        Retorna todas as vinculações de coordenadores as quais algum dado foi
        alterado no intervalo de horas informado.
      operationId: getVinculacoesCoordenadores
      description: >
        Ao passar um número inteiro como parâmetro devem ser retornadas todas as
        vinculações de coordenadores que tiveram algum dado alterado no sistema
        do momento atual decrementado do número inteiro de horas informado. Ex.
        /vinculacoes/coordenadores/1 deve retornar todas as vinculações de
        coordenadores que tiveram algum dado alterado na última hora.
      produces:
        - application/json
      parameters:
        - in: header
          name: authorization
          type: string
          default: TOKEN
          description: TOKEN
          required: true
        - in: header
          name: Content-Type
          type: string
          default: application/json
          description: Usar application/json
          required: true
        - in: path
          name: horas
          description: Número Inteiro de Horas a Serem Pesquisadas
          required: true
          type: integer
      responses:
        '200':
          description: Foram econtradas alterações em Vinculações de Coordenadores
          schema:
            type: array
            items:
              $ref: '#/definitions/VinculosItem'
        '400':
          description: Paramêtro incorreto
        '404':
          description: Não Foram econtradas alterações em Vinculações de Coordenadores
        '500':
          description: Erro Interno do Servidor
  /moodle/vinculacoes/notas:
    post:
      tags:
        - Vinculações
      summary: Envia nota de aluno para o SEI
      operationId: setNotaAluno
      description: >-
        Insere as notas do alunos no SEI quando são informados os dados dos
        alunos, cursos, turmas, módulos/disciplinas, notas e frequências.
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - in: header
          name: authorization
          type: string
          default: TOKEN
          description: TOKEN
          required: true
        - in: header
          name: Content-Type
          type: string
          default: application/json
          description: Usar application/json
          required: true
        - in: body
          name: body
          schema:
            properties:
              notas:
                type: array
                items:
                  $ref: '#/definitions/NotasItem'
      responses:
        '200':
          description: Notas Inseridas com Sucesso
          schema:
            properties:
              notas_inseridas:
                type: array
                items:
                  $ref: '#/definitions/NotasItem'
              notas_nao_inseridas:
                type: array
                items:
                  $ref: '#/definitions/NotasMotivoItem'
        '400':
          description: 'Dados Ínvalidos, Verifique os Parâmetros Informados'
        '404':
          description: Nenhuma Nota foi Inserida pois os Dados não foram Encontrados.
        '500':
          description: Erro Interno do Servidor
definitions:
  PessoasItem:
    type: object
    required:
      - codigo
      - cpf
      - nome
      - email
      - senha
    properties:
      codigo:
        type: integer
        example: 123456789
        description: Corresponde ao codigo da pessoa no SEI usada para realizar a integracao do login, aonde o mesmo e enviado como parametro na url de login de forma criptografa ex - <url login moddo> ?tokensei=kjdhfkjdshfksjdfhsdkjfhscvb85
      cpf:
        type: string
        example: 00446894117
        description: CPF sem Números ou Traços
      nome:
        type: string
        example: Pedro Renan Ferreira de Santana
        description: Nome Completo em UTF-8
      email:
        type: string
        example: pedrorenan@gmail.com
      senha:
        type: string
        example: 36afd15faa2d18332a87daddcafa4ac49379b002f61f4c308f340e7619bc0963
        description: Hash SHA-256 da Senha
  CursosItem:
    type: object
    required:
      - curso
      - turma
      - modulo
    properties:
      curso:
        type: array
        items:
          $ref: '#/definitions/CursoItem'
      turma:
        type: array
        items:
          $ref: '#/definitions/TurmaItem'
      modulo:
        type: array
        items:
          $ref: '#/definitions/ModuloItem'
  CursoItem:
    type: object
    required:
      - curso_codigo
      - curso_nome
      - modalidade_codigo
      - modalidade_nome
    properties:
      curso_codigo:
        type: integer
        example: 123
        description: Código do Curso no formato inteiro
      curso_nome:
        type: string
        example: Computação Forense e Perícia Digital
        description: Nome Completo do Curso em UTF-8
      modalidade_codigo:
        type: integer
        example: 456
        description: Código da Modalidade no formato inteiro
      modalidade_nome:
        type: string
        example: Pós Graduação
        description: Nome Completo da Modalidade em UTF-8
  TurmaItem:
    type: object
    required:
      - turma_codigo
      - turma_nome
      - turma_inicio
      - turma_fim
    properties:
      turma_codigo:
        type: integer
        example: 456
        description: Código do Turma no formato inteiro
      turma_nome:
        type: string
        example: GYNPC0012
        description: Nome Completo do Turma em UTF-8
      turma_inicio:
        type: integer
        example: 1513601433
        description: Timestamp Unix da Data de Início da Turma
      turma_fim:
        type: integer
        example: 1513814400
        description: Timestamp Unix da data de Término da Turma
  ModuloItem:
    type: object
    required:
      - modulo_codigo
      - modulo_nome
      - modulo_inicio
      - modulo_fim
    properties:
      modulo_codigo:
        type: integer
        example: 789
        description: Código do Módulo/Disciplina no formato inteiro
      modulo_nome:
        type: string
        example: Análise da Rede Mundial de Computadores
        description: Nome Completo do Módulo/Disciplina em UTF-8
      modulo_inicio:
        type: integer
        example: 1513601433
        description: Timestamp Unix da Data de Início do Módulo/Disciplina
      modulo_fim:
        type: integer
        example: 1513814400
        description: Timestamp Unix da data de Término do Módulo/Disciplina
  VinculosItem:
    type: object
    required:
      - cpf
      - curso_codigo
      - turma_codigo
      - modulo_codigo
    properties:
      cpf:
        type: string
        example: 00446894117
        description: CPF sem Números ou Traços
      curso_codigo:
        type: integer
        example: 123
        description: Código do Curso no formato inteiro
      turma_codigo:
        type: integer
        example: 456
        description: Código da Turma no formato inteiro
      modulo_codigo:
        type: integer
        example: 789
        description: Código do Módulo/Disciplina no formato inteiro
      vinculo_inicio:
        type: integer
        example: 1513601433
        description: Timestamp Unix da Data de Início do Vínculo
      vinculo_fim:
        type: integer
        example: 1513814400
        description: Timestamp Unix da data de Término do Vínculo
  NotasItem:
    type: object
    required:
      - cpf
      - curso_codigo
      - turma_codigo
      - modulo_codigo
      - nota
      - frequencia
    properties:
      cpf:
        type: string
        example: 00446894117
        description: CPF sem Números ou Traços
      curso_codigo:
        type: integer
        example: 123
        description: Código do Curso no formato inteiro
      turma_codigo:
        type: integer
        example: 456
        description: Código da Turma no formato inteiro
      modulo_codigo:
        type: integer
        example: 789
        description: Código do Módulo/Disciplina no formato inteiro
      nota:
        type: integer
        example: 10
        description: 'Inteiro da nota do aluno com base decimal, de 0 a 10.'
      frequencia:
        type: integer
        example: 100
        description: 'Inteiro do percentual de frequência do aluno, pode ir de 0 a 100.'
  NotasMotivoItem:
    type: object
    required:
      - cpf
      - curso_codigo
      - turma_codigo
      - modulo_codigo
      - nota
      - frequencia
    properties:
      cpf:
        type: string
        example: 00446894117
        description: CPF sem Números ou Traços
      curso_codigo:
        type: integer
        example: 123
        description: Código do Curso no formato inteiro
      turma_codigo:
        type: integer
        example: 456
        description: Código da Turma no formato inteiro
      modulo_codigo:
        type: integer
        example: 789
        description: Código do Módulo/Disciplina no formato inteiro
      nota:
        type: integer
        example: 10
        description: 'Inteiro da nota do aluno com base decimal, de 0 a 10.'
      frequencia:
        type: integer
        example: 100
        description: 'Inteiro do percentual de frequência do aluno, pode ir de 0 a 100.'
      motivo:
        type: string
        description: Texto em UTF-8 que explica o motivo pelo qual a nota não foi inserida.
        example: Aluno com pendências.
schemes:
  - https
basePath: /webservice/
host: <dominio_aplicacao_sei>
