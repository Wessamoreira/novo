<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:p="http://primefaces.org/ui" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
   xmlns:otm="http://java.sun.com/jsf/composite/otm" xmlns:otm2="http://www.otimize-ti.com.br" xmlns:fn="http://java.sun.com/jsp/jstl/functions" xmlns:composite="http://java.sun.com/jsf/composite">
<composite:interface>	
	<composite:attribute name="id" required="true" type="java.lang.String"/>	
	<composite:attribute name="apresentarBotaoGerar" required="true" type="java.lang.Boolean" />
	<composite:attribute name="apresentarBotaoVisualizar" required="true" type="java.lang.Boolean" />
	<composite:attribute name="permitirBtnGravarSalaAulaBlackboard" required="true" type="java.lang.Boolean" />
	<composite:attribute name="bean" required="true" type="java.lang.Object" />
	<composite:attribute name="action" required="true" default="#" method-signature="java.lang.String action()" />
	<composite:attribute name="retornoUpdate" required="true" type="java.lang.String" />
	<composite:attribute name="salaAulaBlackboardVO" required="true" type="negocio.comuns.blackboard.SalaAulaBlackboardVO" />
	
</composite:interface>

<composite:implementation>
	<h:panelGroup layout="block">		

		<p:commandButton id="btnBlackboardGerar" styleClass="botoes" action="#{cc.attrs.action}" update="formSalaAulaBlackboard" oncomplete="PF('panelSalaAulaBlackboard').show()" rendered="#{cc.attrs.apresentarBotaoGerar}" image="#{resource['/imagens/blackboard_logo_inativo.png']}" style="width:25px; height:25px;">
			<p:tooltip value="Gerar Blackboard." />
		</p:commandButton>
		
		<p:commandButton id="btnBlackboardVisualizar" styleClass="botoes" action="#{cc.attrs.action}" update="formSalaAulaBlackboard" oncomplete="PF('panelSalaAulaBlackboard').show()" rendered="#{cc.attrs.apresentarBotaoVisualizar}" image="#{resource['/imagens/blackboard_logo.png']}" style="width:25px; height:25px;">
			<p:tooltip value="Visualizar Blackboard." />
		</p:commandButton>

		<p:dialog modal="true" hideEffect="fade" closeOnEscape="true" showEffect="fade" id="panelSalaAulaBlackboard" widgetVar="panelSalaAulaBlackboard"  width="870" height="330">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="Sala de Aula Blackboard"></h:outputText>
				</h:panelGroup>
			</f:facet>
			<h:form prependId="false" id="formSalaAulaBlackboard">
				<h:panelGroup id="panelGroupSalaAulaBlackboard" layout="block" styleClass="row">
					<h:panelGroup layout="block" styleClass="row">
						<h:panelGroup layout="block" styleClass="row" rendered="#{cc.attrs.salaAulaBlackboardVO.codigo ne 0}">
							<h:panelGroup layout="block" styleClass="col-md-4">
								<h:outputText value="Código do Classroom" styleClass="field control-label tituloCampos" />
								<h:inputText size="72" styleClass="form-control camposSomenteLeitura" readonly="true" value="#{cc.attrs.salaAulaBlackboardVO.idSalaAulaBlackboard}" />
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="col-md-8">
								<h:outputText value="Turma" styleClass="field control-label tituloCampos" />
								<h:inputText size="72" styleClass="form-control camposSomenteLeitura" readonly="true" value="#{cc.attrs.salaAulaBlackboardVO.turmaVO.identificadorTurma}" />
							</h:panelGroup>
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="row" rendered="#{cc.attrs.salaAulaBlackboardVO.codigo eq 0}">
							<h:panelGroup layout="block" styleClass="col-md-12">
								<h:outputText value="Turma" styleClass="field control-label tituloCampos" />
								<h:inputText size="72" styleClass="form-control camposSomenteLeitura" readonly="true" value="#{cc.attrs.salaAulaBlackboardVO.turmaVO.identificadorTurma}" />
							</h:panelGroup>
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="row">
							<h:panelGroup layout="block" styleClass="col-md-12">
								<h:outputText value="Disciplina" styleClass="field control-label tituloCampos" />
								<h:inputText size="72" styleClass="form-control camposSomenteLeitura" readonly="true" value="#{cc.attrs.salaAulaBlackboardVO.disciplinaVO.nome}" />
							</h:panelGroup>
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="row">
							<h:panelGroup layout="block" styleClass="col-md-12 text-center m5">
								<otm:commandImage id="btnGravarSalaAulaBlackboard" action="#{cc.attrs.bean.realizarGeracaoSalaAulaBlackboard}" update="listaCargaHoraria:0:btnPanelBlackboard:panelGroupSalaAulaBlackboard" value="Gerar Sala Aula Blackboard" rendered="#{cc.attrs.salaAulaBlackboardVO.codigo eq 0 and cc.attrs.permitirBtnGravarSalaAulaBlackboard}" image="#{resource['/imagens/blackboard_logo.png']}" style="margin-left:5px" />
								<otm:commandImage id="btnEntrarSalaAulaBlackboard" value="Entrar" tooltip="Realizar login na Sala Aula Blackboard" rendered="#{cc.attrs.salaAulaBlackboardVO.codigo ne 0}" image="#{resource['/imagens/blackboard_logo.png']}" style="margin-left:5px;" oncomplete="navegacaoIde('#{cc.attrs.salaAulaBlackboardVO.linkSalaAulaBlackboard}')" />
								<otm:commandButton id="btnBuscarAlunoSalaAulaBlackboard" rendered="#{cc.attrs.salaAulaBlackboardVO.codigo ne 0}" icon="#{msg_botoes.btn_icon_lupa_embutido}" value="Buscar Alunos" oncomplete="PF('panelBlackboardAlunos').show()" update="formBlackboardAlunos" action="#{cc.attrs.bean.realizarBuscaAlunoBlackboard}" styleClass="btn btn-default" style="margin-left:5px" />
								<otm:commandButton id="btnAtualizarSalaAulaBlackboard" rendered="#{cc.attrs.salaAulaBlackboardVO.codigo ne 0}" tooltip="Realizar a Atualização dos Dados do Blackboard" icon="#{msg_botoes.btn_icon_atualizar_embutido}" value="Atualizar" update="listaCargaHoraria:0:btnPanelBlackboard:panelGroupSalaAulaBlackboard" action="#{cc.attrs.bean.realizarAtualizacaoBlackboard}" styleClass="btn btn-default btn-atualizar" style="margin-left:5px" />
								<otm:commandButton id="btnAtualizarAlunosSalaAulaBlackboard" rendered="#{cc.attrs.salaAulaBlackboardVO.codigo ne 0}" tooltip="Realizar a Atualização dos Dados dos Alunos do Blackboard" icon="#{msg_botoes.btn_icon_atualizar_embutido}" value="Atualizar Alunos" update="listaCargaHoraria:0:btnPanelBlackboard:panelGroupSalaAulaBlackboard" action="#{cc.attrs.bean.realizarAtualizacaoAlunoBlackboard}" styleClass="btn btn-default btn-atualizar" style="margin-left:10px" />
								<otm:commandButton id="btnExcluirSalaAulaBlackboard" rendered="#{cc.attrs.salaAulaBlackboardVO.codigo ne 0}" oncomplete="PF('panelExcluirBlackboard').show();" update="formExcluirBlackboard" value="Excluir" styleClass="btn btn-danger" icon="#{msg_botoes.btn_icon_remver_embutido}" style="margin-left:5px" />
								<otm:commandButton id="btnFecharSalaAulaBlackboard" value="Fechar" onclick="PF('panelSalaAulaBlackboard').hide();" icon="#{msg_botoes.btn_icon_fechar_embutido}" update="#{cc.attrs.retornoUpdate}" styleClass="btn btn-dark" style="margin-left:10px" />
							</h:panelGroup>
						</h:panelGroup>
					</h:panelGroup>
					<h:panelGroup id="panelMsgBlackboard" layout="block" styleClass="pn col-md-12 text-left mt10 mb10">
						<otm:mensagem bean="#{cc.attrs.bean}"></otm:mensagem>
					</h:panelGroup>
				</h:panelGroup>
			<p:growl escape="false" showDetail="true" showSummary="false"  globalOnly="true" ></p:growl></h:form>
		</p:dialog>

		<p:dialog modal="true" hideEffect="fade" closeOnEscape="true" showEffect="fade" id="panelExcluirBlackboard" widgetVar="panelExcluirBlackboard"  width="400">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="Excluir Sala de Aula  Blackboard"></h:outputText>
				</h:panelGroup>
			</f:facet>
			<h:form prependId="false" id="formExcluirBlackboard">
				<h:panelGroup layout="block" styleClass="row">
					<h:panelGroup layout="block" styleClass="row">
						<h:panelGroup layout="block" styleClass="col-md-12">
							<h:outputText value="Confirma a Exclusão?" styleClass="field control-label tituloCampos" />
						</h:panelGroup>
					</h:panelGroup>
				</h:panelGroup>
<!--				<h:panelGroup layout="block" styleClass="row mt10 mb10 text-center">-->
<!--					<otm:commandButton value="Sim" update="formSalaAulaBlackboard,formExcluirBlackboard" oncomplete="PF('panelExcluirBlackboard').hide();" styleClass="btn btn-danger btn-sim" icon="#{msg_botoes.btn_icon_remver_embutido}"  action="#{cc.attrs.bean.excluirBlackboard}" rendered="#{cc.attrs.permitirBtnGravarSalaAulaBlackboard}" />-->
<!--					<otm:commandButton value="Sim" update="formSalaAulaBlackboard,formExcluirBlackboard, #{cc.attrs.retornoUpdate}" onclick="PF('panelExcluirBlackboard').hide();PF('panelSalaAulaBlackboard').hide();" styleClass="btn btn-danger btn-sim" icon="#{msg_botoes.btn_icon_remver_embutido}"  action="#{cc.attrs.bean.excluirBlackboard}" rendered="#{!cc.attrs.permitirBtnGravarSalaAulaBlackboard}" />-->
<!--					<otm:commandButton value="Não" update="formSalaAulaBlackboard,formExcluirBlackboard" oncomplete="PF('panelExcluirBlackboard').hide();" styleClass="btn btn-dark btn-nao ml10" icon="#{msg_botoes.btn_icon_cancelar_embutido}" />-->

<!--				</h:panelGroup>-->
			<p:growl escape="false" showDetail="true" showSummary="false"  globalOnly="true" ></p:growl></h:form>
		</p:dialog>

		<p:dialog modal="true" hideEffect="fade" closeOnEscape="true" showEffect="fade" id="panelBlackboardAlunos" widgetVar="panelBlackboardAlunos"  width="800" height="800">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="Blackboard Alunos"></h:outputText>
				</h:panelGroup>
			</f:facet>
			<h:form prependId="false" id="formBlackboardAlunos">
				<h:panelGroup columns="1" width="100%" columnClasses="colunaEsquerda" styleClass="tabForm">
					<h:panelGroup layout="block" styleClass="col-md-12 text-center m5" rendered="#{empty cc.attrs.salaAulaBlackboardVO.listaAlunos}">
						<h:outputText value="Não foi localizado nenhum aluno para essa sala aula."></h:outputText>
					</h:panelGroup>
					<p:dataTable paginator="true" paginatorPosition="bottom" paginatorAlwaysVisible="false"  id="listaBlackboardAlunos" width="100%"  rows="10" rendered="#{!empty cc.attrs.salaAulaBlackboardVO.listaAlunos}" value="#{cc.attrs.salaAulaBlackboardVO.listaAlunos}" var="pessoaEmailInstitucionalItens">
						<f:facet name="header">
							<h:outputText value="Lista dos Estudantes" />
						</f:facet>
						<p:column filterBy="#{pessoaEmailInstitucionalItens.matricula}" filterFunction="#{FilterFactory.filter('matricula', 'matricula', 'TEXTO').accept}" filterValue="#{FilterFactory.filter('matricula', 'matricula', 'TEXTO').filtro}">
							<f:facet name="header">
								<h:panelGroup layout="block" style="width:100%">
									<h:outputText value="#{msg_aplic.prt_MatriculaPeriodo_matricula}" />
								</h:panelGroup>
							</f:facet>
							<h:outputText value="#{pessoaEmailInstitucionalItens.matricula}" />
						</p:column>
						<p:column filterBy="#{pessoaEmailInstitucionalItens.pessoaVO.nome}" filterFunction="#{FilterFactory.filter('pessoaVO_nome', 'pessoaVO.nome', 'TEXTO').accept}" filterValue="#{FilterFactory.filter('pessoaVO_nome', 'pessoaVO.nome', 'TEXTO').filtro}">
							<f:facet name="header">
								<h:panelGroup layout="block" style="width:100%">
									<h:outputText value="#{msg_aplic.prt_MatriculaPeriodo_aluno}" />
								</h:panelGroup>
							</f:facet>
							<h:outputText value="#{pessoaEmailInstitucionalItens.pessoaVO.nome}" />
						</p:column>
						<p:column filterBy="#{pessoaEmailInstitucionalItens.email}" filterFunction="#{FilterFactory.filter('email', 'email', 'TEXTO').accept}" filterValue="#{FilterFactory.filter('email', 'email', 'TEXTO').filtro}">
							<f:facet name="header">
								<h:panelGroup layout="block" style="width:100%">
									<h:outputText value="#{msg_aplic.prt_Filiacao_email}" />
								</h:panelGroup>
							</f:facet>
							<h:outputText value="#{pessoaEmailInstitucionalItens.email}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								<h:panelGroup layout="block">
									<h:outputText value="Alunos Confirmados" />
									<h:commandButton id="helpAlunosConfirmados" image="#{resource['V2/imagens/70.png']}" />
									<p:tooltip followMouse="true" style="width:350px; height:100px;" for="helpAlunosConfirmados" showDelay="500">
										<h:panelGroup columns="1" columnClasses="colunaEsquerda, tituloCamposReduzidos">
											<h:panelGroup layout="block">
												<otm:spacer width="1px" />
												<h:outputText styleClass="tituloCamposReduzidos" value="Caso algum alunos não esteja na Sala de Aula você poderá enviar um convite manualmente para que ele participe da sala." />
											</h:panelGroup>
										</h:panelGroup>
									</p:tooltip>
								</h:panelGroup>
							</f:facet>
							<h:outputText value="#{pessoaEmailInstitucionalItens.pessoaEmailInstitucionalTexto}" />
						</p:column>
						<p:column style="position: relative; text-align: center;">
							<f:facet name="header">
								<h:outputText value="#{msg_botoes.btn_opcoes}" />
							</f:facet>
							<otm:commandIcon action="#{cc.attrs.bean.realizarEnvioConviteAlunoBlackboard}" update="formBlackboardAlunos" icon="#{msg_botoes.btn_icon_enviar_email} iconePequeno" tooltip="Enviar Convite Para o Aluno" />
						</p:column>
						<f:facet name="footer">
							<div style="">
							</div>
						</f:facet>
					</p:dataTable>
					<h:panelGroup id="panelMsgBlackboardAluno" layout="block" styleClass="pn col-md-12 text-left mt10 mb10">
						<otm:mensagem bean="#{cc.attrs.bean}"></otm:mensagem>
					</h:panelGroup>
				</h:panelGroup>
			<p:growl escape="false" showDetail="true" showSummary="false"  globalOnly="true" ></p:growl></h:form>
		</p:dialog>
	</h:panelGroup>
</composite:implementation>
</html>
