<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"  xmlns:p="http://primefaces.org/ui" xmlns:otm="http://java.sun.com/jsf/composite/otm">
<h:head>
</h:head>
<ui:composition template="/visaoAluno/template/visaoAluno.xhtml">
	<ui:define name="tituloPagina">
		<h:outputText value="Atividade Discursiva"></h:outputText>
	</ui:define>
	<ui:define name="conteudo">
		<style type="text/css">
.rich-dtascroller-table {
	-moz-border-radius: 5px;
	-webkit-border-radius: 5px;
	border-radius: 5px;
}

.rich-datascr-button {
	border: none;
}

.rich-datascr-button-dsbld {
	background-color: transparent;
}

.tabForm {
	border-spacing: 0px;
	border-color: #fff;
	font: 12px arial;
	padding: 3px;
	border: 0px solid #fff;
	vertical-align: top;
}

.panelUnidade {
	width: 100%;
	min-height: 50px;
	height: 100%;
	float: left;
	margin-top: 5px;
	border: 1px solid #b3b3b3;
	background-color: #FFFFFF;
	-moz-border-radius: 3px;
	-webkit-border-radius: 3px;
	border-radius: 3px;
	text-align: left;
}

.panelUnidadeImpar {
	width: 100%;
	min-height: 50px;
	height: 100%;
	float: left;
	margin-top: 5px;
	border: 1px solid gray;
	background-color: #F4F4F4;
	-moz-border-radius: 3px;
	-webkit-border-radius: 3px;
	border-radius: 3px;
	text-align: left;
}

.interacaoForum {
	text-decoration: none;
	text-align: left;
	line-height: normal;
	font-family: "Lucida Grande", "Lucida Sans Unicode", Verdana, Arial,
		Helvetica, sans-serif;
	font-size: 12px;
	color: #424242;
	min-height: 150px;
	border: 1px solid gray;
	background-color: #FFFFFF;
	-moz-border-radius: 3px;
	-webkit-border-radius: 3px;
	border-radius: 3px;
	width: 100%;
}

.interacaoForumEdit {
	text-decoration: none;
	text-align: left;
	line-height: normal;
	font-family: "Lucida Grande", "Lucida Sans Unicode", Verdana, Arial,
		Helvetica, sans-serif;
	font-size: 12px;
	color: #424242;
	min-height: 200px;
	border: 1px solid gray;
	background-color: #F4F4F4;
	-moz-border-radius: 3px;
	-webkit-border-radius: 3px;
	border-radius: 3px;
	width: 100%;
}
</style>
		<h:form id="form">
			<h:commandLink action="#{AtividadeDiscursivaControle.liberarBackingBeanMemoria}" id="idLiberarBackingBeanMemoria" style="display: none" />
			<h:panelGroup id="panelGridForm">
				<h:panelGroup id="dadosBasicos">
					<h:panelGroup layout="block" styleClass="col-md-12 pn">
						<h:panelGroup layout="block" styleClass="col-md-1">
							<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_AtividadeDiscursiva_codigo}" />
							<h:inputText readonly="true" styleClass="form-control camposSomenteLeitura" value="#{AtividadeDiscursivaControle.atividadeDiscursivaRespostaAlunoVO.atividadeDiscursivaVO.codigo}" />
						</h:panelGroup>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-6">
						<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_AtividadeDiscursiva_turma}" />
						<h:inputText readonly="true" styleClass="form-control camposSomenteLeitura" value="#{AtividadeDiscursivaControle.atividadeDiscursivaRespostaAlunoVO.atividadeDiscursivaVO.turmaVO.identificadorTurma}" />
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-6">
						<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_AtividadeDiscursiva_disciplina}" />
						<h:inputText readonly="true" id="disciplinasTurma" styleClass="form-control camposSomenteLeitura" value="#{AtividadeDiscursivaControle.atividadeDiscursivaRespostaAlunoVO.atividadeDiscursivaVO.disciplinaVO.nome}" />
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-2">
						<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_AtividadeDiscursiva_dataliberacaoresposta}" />
						<h:inputText styleClass="form-control camposSomenteLeitura" readonly="true" value="#{AtividadeDiscursivaControle.atividadeDiscursivaRespostaAlunoVO.dataInicioAtividade}">
							<f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss" />
						</h:inputText>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-2">
						<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_AtividadeDiscursiva_datalimiteentrega}" />
						<h:inputText styleClass="form-control camposSomenteLeitura" readonly="true" value="#{AtividadeDiscursivaControle.atividadeDiscursivaRespostaAlunoVO.dataLimiteEntrega}">
							<f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss" />
						</h:inputText>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-2">
						<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_AtividadeDiscursiva_matricula}" />
						<h:inputText value="#{AtividadeDiscursivaControle.atividadeDiscursivaRespostaAlunoVO.matriculaPeriodoTurmaDisciplinaVO.matriculaObjetoVO.matricula}" readonly="true" styleClass="form-control camposSomenteLeitura" />
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-6">
						<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_AtividadeDiscursiva_aluno}" />
						<h:inputText value="#{AtividadeDiscursivaControle.atividadeDiscursivaRespostaAlunoVO.matriculaPeriodoTurmaDisciplinaVO.matriculaObjetoVO.aluno.nome}" readonly="true" styleClass="form-control camposSomenteLeitura" />
					</h:panelGroup>
					<h:panelGroup id="situacao">
						<h:panelGroup layout="block" styleClass="col-md-4">
							<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_AtividadeDiscursiva_situacao}" />
							<h:inputText value="#{AtividadeDiscursivaControle.atividadeDiscursivaRespostaAlunoVO.situacaoRespostaAtividadeDiscursiva_Apresentar}" readonly="true" styleClass="form-control camposSomenteLeitura" />
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="col-md-2">
							<h:outputText styleClass="field control-label tituloCampos" value="Data Alteração" />
							<h:inputText styleClass="form-control camposSomenteLeitura" readonly="true" value="#{AtividadeDiscursivaControle.atividadeDiscursivaRespostaAlunoVO.dataUpload}">
								<f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss" />
							</h:inputText>
						</h:panelGroup>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-12 pn">
						<h:panelGroup layout="block" styleClass="col-md-6">
							<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_AtividadeDiscursiva_enunciado}" />
							<h:inputTextarea style="height:300px" value="#{AtividadeDiscursivaControle.atividadeDiscursivaRespostaAlunoVO.atividadeDiscursivaVO.enunciado}" readonly="true" styleClass="form-control camposSomenteLeitura" />
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="col-md-6" rendered="#{AtividadeDiscursivaControle.atividadeDiscursivaRespostaAlunoVO.atividadeDiscursivaVO.isApresentarArtefatoEntregaTextual}">
							<h:outputText styleClass="field control-label tituloCampos" value="Resposta" rendered="#{AtividadeDiscursivaControle.atividadeDiscursivaRespostaAlunoVO.atividadeDiscursivaVO.isApresentarArtefatoEntregaTextual}" />
							<h:inputTextarea style="height:300px" rendered="#{AtividadeDiscursivaControle.atividadeDiscursivaRespostaAlunoVO.atividadeDiscursivaVO.isApresentarArtefatoEntregaTextual}" value="#{AtividadeDiscursivaControle.atividadeDiscursivaRespostaAlunoVO.resposta}" styleClass="form-control campos" readonly="#{AtividadeDiscursivaControle.atividadeDiscursivaRespostaAlunoVO.isEncobrirRespostaSeDataLimiteEntregaExpirar}" disabled="#{!AtividadeDiscursivaControle.atividadeDiscursivaRespostaAlunoVO.isApresentarBotaoSolicitarAvaliacaoProfessor}" />
						</h:panelGroup>
					</h:panelGroup>
					<h:outputText styleClass="field control-label tituloCampos" value="" />
					<h:panelGroup layout="block" style="margin-top:2px">
						<<p:dataTable> id="listaArquivo" width="100%" headerClass="consulta" rowClasses="linhaImpar, linhaPar" columnClasses="colunaAlinhamento, colunaAlinhamento" value="#{AtividadeDiscursivaControle.atividadeDiscursivaRespostaAlunoVO.atividadeDiscursivaVO.listaMaterialDeApoio}" rows="5" var="materialApoio" rendered="#{!empty AtividadeDiscursivaControle.atividadeDiscursivaRespostaAlunoVO.atividadeDiscursivaVO.listaMaterialDeApoio}">
							<rich:column style="text-align: center;">
								<f:facet name="header">
									<h:outputText value="Material de Apoio" />
								</f:facet>
								<h:outputText value="#{materialApoio.descricao}" />
							</rich:column>
							<rich:column style="text-align: center;">
								<f:facet name="header">
									<h:outputText value="#{msg_bt.btn_opcoes}" />
								</f:facet>
								<h:commandLink action="#{AtividadeDiscursivaControle.selecionarArquivoApoioParaDownload}">
									<span class="#{msg_botoes.btn_icon_download} iconePequeno rounded" style="margin-right: 0.8em; position: relative; top: 1px; font-size: 14px;" />									
								</h:commandLink>
							</rich:column>
						</<p:dataTable>>
						<h:panelGroup columns="1" style="text-align: center;" width="100%">
							<rich:dataScroller align="center" for="form:listaArquivo" maxPages="10" id="scResultadoAluno" rendered="#{!empty AtividadeDiscursivaControle.atividadeDiscursivaRespostaAlunoVO.atividadeDiscursivaVO.listaMaterialDeApoio}" />
						</h:panelGroup>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-12" id="imagens" rendered="#{AtividadeDiscursivaControle.atividadeDiscursivaRespostaAlunoVO.atividadeDiscursivaVO.isApresentarArtefatoEntregaUploadArquivo}">
						<otm:outputHelp tooltip="#{msg.msg_AtitivadeDiscursiva_tipoArquivosPermitidos}" id="Upload" styleClass="field control-label tituloCampos" value="Upload" />
						<rich:fileUpload disabled="#{AtividadeDiscursivaControle.matriculaPeriodoVO.situacaoMatriculaPeriodo ne 'AT'}" rendered="#{AtividadeDiscursivaControle.atividadeDiscursivaRespostaAlunoVO.atividadeDiscursivaVO.isApresentarArtefatoEntregaUploadArquivo}" listHeight="100" listWidth="200" acceptedTypes="pdf, doc, ppt, xls, zip, rar" noDuplicate="true" fileUploadListener="#{AtividadeDiscursivaControle.uploadArquivoAtividadeDiscursivaRespostaAluno}" maxFilesQuantity="1" addLabel="Selecionar Arquivo" doneLabel="Pronto" sizeExceededLabel="Arquivo não Enviado. Tamanho Máximo Permitido #{AtividadeDiscursivaControle.configuracaoGeralPadraoSistema.tamanhoMaximoUpload}MB." uploadLabel="Enviar" clearAllLabel="Limpar lista" onupload="return validarTamanhoUploadArquivo(event, 'form', #{AtividadeDiscursivaControle.configuracaoGeralPadraoSistema.tamanhoMaximoUpload});" serverErrorLabel="Falha de Transmissão" immediateUpload="true" id="upload">
							<a4j:ajax event="uploadcomplete" render="form:imagens, panelGridMensagens, form:nomeArquivo" />
							<a4j:ajax event="typerejected" oncomplete="alert('Arquivo não Enviado. Formato inválido do arquivo');" render="upload" />
							<a4j:ajax event="clear" render="upload" />
						</rich:fileUpload>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-6" rendered="#{AtividadeDiscursivaControle.atividadeDiscursivaRespostaAlunoVO.atividadeDiscursivaVO.isApresentarArtefatoEntregaUploadArquivo}">
						<h:outputText styleClass="field control-label tituloCampos" value="Arquivo" rendered="#{AtividadeDiscursivaControle.atividadeDiscursivaRespostaAlunoVO.atividadeDiscursivaVO.isApresentarArtefatoEntregaUploadArquivo}" />
						<h:inputText id="nomeArquivo" rendered="#{AtividadeDiscursivaControle.atividadeDiscursivaRespostaAlunoVO.atividadeDiscursivaVO.isApresentarArtefatoEntregaUploadArquivo}" value="#{AtividadeDiscursivaControle.atividadeDiscursivaRespostaAlunoVO.nomeArquivoApresentar}" styleClass="form-control camposSomenteLeitura" readonly="true" />
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-12 text-center" style="margin:10px">
						<otm:commandButton style="margin-right:5px" id="solicitar" disabled="#{AtividadeDiscursivaControle.matriculaPeriodoVO.situacaoMatriculaPeriodo ne 'AT'}" render="form:panelGridMensagens, form:dadosBasicos" action="#{AtividadeDiscursivaControle.solicitarAvaliacaoProfessor}" image="#{resource['/imagens/ead/solicitarAvaliacaoProfessor.png']}" icon="#{msg_botoes.btn_icon_lupa_embutido}" styleClass="btn btn-default" value="Solicitar Avaliação Professor" accesskey="2" rendered="#{AtividadeDiscursivaControle.atividadeDiscursivaRespostaAlunoVO.isApresentarBotaoSolicitarAvaliacaoProfessor}" />
						<otm:commandButton id="voltar" icon="#{msg_botoes.btn_icon_lupa_embutido}" action="#{AtividadeDiscursivaControle.inicializarAtividadeDiscursivaAlunoEstudoOnline}" image="#{resource['/imagens/voltar.png']}" styleClass="btn btn-default" value="#{msg.msg_consultar_dados}" accesskey="2" />
					</h:panelGroup>
				</h:panelGroup>
				<otm:spacer height="10px" />
				<p:panel header="Interações Aluno/Professor" style="text-align:left;width:900px;height:100%;margin-top:5px;float:left;padding:5px">
					<h:panelGroup id="panelGridInteracao" columns="1" styleClass="tabForm" width="100%">
						<h:panelGroup id="textoInteracao" styleClass="panelUnidadeImpar" layout="block" style="text-align:left;width:840px;height:100%;margin-top:5px;float:left;padding:5px">
							<script type="text/javascript" charset="utf-8">
								(function($) {
									$(document)
											.ready(
													function() {

														$(".interacaoForum")
																.watermark(
																		"Envie uma nova interação");

														$(".interacaoForum")
																.click(
																		function() {

																			$(
																					this)
																					.attr(
																							'class',
																							'interacaoForumEdit');
																		});
														$("form:enviar")
																.click(
																		function() {
																			$(
																					".interacaoForum")
																					.attr(
																							'class',
																							'interacaoForum');
																			return true;
																		});
													});
								}(jQuery));
							</script>
							<h:panelGroup rendered="#{AtividadeDiscursivaControle.atividadeDiscursivaRespostaAlunoVO.situacaoRespostaAtividadeDiscursiva ne 'AVALIADO'}" style="text-align:left;width:700px;" styleClass="colunaCentralizada">
								<h:inputTextarea styleClass="interacaoForum" rows="1" value="#{AtividadeDiscursivaControle.atividadeDiscursivaInteracaoVO.interacao}" disabled="#{!AtividadeDiscursivaControle.atividadeDiscursivaRespostaAlunoVO.isApresentarBotaoSolicitarAvaliacaoProfessor}" />
								<otm:spacer height="5px" />
								<h:panelGroup layout="block" styleClass="col-md-12 text-center">
									<otm:commandButton id="enviar" render="form:panelGridInteracao" image="#{resource['imagens/botaoEnviar.png']}" value="Enviar" icon="#{msg_botoes.btn_icon_enviar_email_embutido}" styleClass="btn btn-default" action="#{AtividadeDiscursivaControle.gravarInteracao}" disabled="#{!AtividadeDiscursivaControle.atividadeDiscursivaRespostaAlunoVO.isApresentarBotaoSolicitarAvaliacaoProfessor}" />
								</h:panelGroup>
							</h:panelGroup>
							<rich:list id="items" rowKeyVar="row" value="#{AtividadeDiscursivaControle.controleConsultaInteracao}" rows="10" var="atividadeInteracao">
								<h:panelGroup layout="block" styleClass="#{row % 2 gt 0 ? 'panelUnidade' : 'panelUnidadeImpar'}" style="text-align:left;width:100%;height:90%;vertical-align:left;">
									<h:panelGroup style="text-align:center;width:90px;height:100%;float:left;vertical-align:middle;margin-top:5px;">
										<h:graphicImage rendered="#{atividadeInteracao.usuarioVO.pessoa.existeImagem}" style="position:relative; left:0px; top:0px; width:55px; height:55px; display:inline-block; background-color: transparent; border: 0px solid;vertical-align:middle;" width="55" height="55" value="#{AtividadeDiscursivaControle.caminhoBaseFoto}/imagem/#{atividadeInteracao.usuarioVO.pessoa.arquivoImagem.nome}" />
										<h:graphicImage rendered="#{!atividadeInteracao.usuarioVO.pessoa.existeImagem}" width="55" height="55" value="#{resource['/imagens/visao/foto_usuario.png']}" style="position:relative; left:0px; top:0px; width:55px; height:55px;vertical-align:middle; 
											background-color: transparent; border: 0px solid;display:inline-block">
										</h:graphicImage>
									</h:panelGroup>
									<h:panelGroup layout="block" style="text-align:left;width:87%;float:left; min-width: 590px; padding-top:5px; border-left: 1px solid gray;padding-left:5px;padding-bottom:5px;">
										<h:panelGroup styleClass="title" style="text-align:left;width:50%;float:left;">
											<h:outputText style="font-weight: 900; font-size: 12px;" styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Forum_criadoPor}: " />
											<h:outputText style="font-weight: 900; font-size: 10px;" styleClass="field control-label tituloCampos" value="#{atividadeInteracao.usuarioVO.pessoa.nome}" />
										</h:panelGroup>
										<h:panelGroup styleClass="title" style="text-align:left;width:50%;float:left;">
											<h:outputText style="font-weight: 900; font-size: 12px;" styleClass="field control-label tituloCampos" value="Data Interação: " />
											<h:outputText style="font-weight: 900; font-size: 10px;" styleClass="field control-label tituloCampos" value="#{atividadeInteracao.dataInteracao}">
												<f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss" />
											</h:outputText>
										</h:panelGroup>
										<h:panelGroup layout="block" styleClass="#{row % 2> 0 ? 'panelUnidadeImpar' : 'panelUnidade'} expand" style="text-align:left;width:100%;padding:2px;height:45px;float:left;overflow:auto;min-height:80px;">
											<script type="text/javascript" charset="utf-8">
												(function($) {
													$(document)
															.ready(
																	function() {
																		$(
																				".expand")
																				.click(
																						function() {
																							$(
																									".expand")
																									.each(
																											function() {
																												$(
																														this)
																														.attr(
																																'style',
																																'width:100%;float:left;min-height:80px;height:45px;overflow:auto;padding:2px;text-align:left;');
																											});
																							$(
																									this)
																									.attr(
																											'style',
																											'width:100%;min-height:65px;max-height:400px;height:auto;float:left;margin-bottom:3px;overflow:auto;padding:2px;text-align:left;');
																						});
																	});

												}(jQuery));
											</script>
											<h:outputText styleClass="tituloCamposResultado" escape="false" style="word-wrap: break-word;text-align: justify;" value="#{atividadeInteracao.interacao}" />
										</h:panelGroup>
									</h:panelGroup>
								</h:panelGroup>
							</rich:list>
							<rich:dataScroller align="center" for="form:items" style="border:none; background-color:transparent; margin-top:5px" render="itens, panelGridMensagens" id="scResultadoConsulta" scrollListener="#{AtividadeDiscursivaControle.scrollListenerInteracao}" rendered="#{AtividadeDiscursivaControle.controleConsultaInteracao.apresentarDatascroller}" selectedStyle="border:none;background-color:transparent;" pagesVar="pages" boundaryControls="hide" fastControls="hide" inactiveStyle="border:none; background-color:transparent;">
								<f:facet name="previous">
									<h:outputText style="width:100px;text-align:center;display:block;" styleClass="scrollLast" value="Mais Recentes" />
								</f:facet>
								<f:facet name="next">
									<h:outputText style="width:100px;display:block;text-align:center;" styleClass="scrollNext" value="Mais Antigas" />
								</f:facet>
								<f:facet name="pages">
									<h:outputText style="width:200px;display:block;text-align:center;" styleClass="tituloCamposResultado" value="#{AtividadeDiscursivaControle.controleConsultaInteracao.paginaAtual}/#{pages}" />
								</f:facet>
							</rich:dataScroller>
						</h:panelGroup>
					</h:panelGroup>
				</p:panel>
				<otm:spacer height="10px" />
				<h:panelGroup id="panelGridMensagens">
					<otm:mensagem bean="#{AtividadeDiscursivaControle}"></otm:mensagem>
				</h:panelGroup>
			</h:panelGroup>
		</h:form>
	</ui:define>
</ui:composition>
</html>
