<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"  xmlns:p="http://primefaces.org/ui" xmlns:otm="http://java.sun.com/jsf/composite/otm" xmlns:otm2="http://www.otimize-ti.com.br" xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">
<h:head>
</h:head>
<ui:composition template="/visaoAluno/template/visaoAluno.xhtml">
	<ui:define name="tituloNavegador">
		<h:outputText value="#{msg_aplic.prt_ProjetoIntegradorForm}" />
	</ui:define>
	<!-- 	<ui:define name="tituloPagina"> -->
	<!-- 		<h:outputText value="#{msg_aplic.prt_Estagio_tituloForm}" />		 -->
	<!-- 	</ui:define> -->
	<ui:define name="subTituloPagina">
		<h:form id="formTitulo">
			<h:panelGroup layout="block" styleClass="row">
				<h:panelGroup layout="block" styleClass="col-md-11">
					<h1 class="#{LoginControle.appMovel ? 'h5 pl-3' :'h4'} mb-0 pb-2 w-100">
						<h:outputText value="#{msg_aplic.prt_ProjetoIntegradorForm}" />
					</h1>
				</h:panelGroup>
			</h:panelGroup>
		</h:form>
	</ui:define>
	<ui:define name="conteudo">
		<h:form id="form">
			<h:panelGroup layout="block" styleClass="row">
				<h:panelGroup layout="block" styleClass="col-md-12 mt5" rendered="#{!empty CalendarioAgrupamentoTccControle.configuracaoGeralSistemaPrivilegiandoACfgDaUnidade.textoParaOrientacaoProjetoIntegrador}">
					<h:outputText styleClass="field control-label tituloCampos" value="Orientação" />
					<h:panelGroup layout="block" styleClass="col-md-12" style="border:1px solid;">
						<h:outputText value="#{CalendarioAgrupamentoTccControle.configuracaoGeralSistemaPrivilegiandoACfgDaUnidade.textoParaOrientacaoProjetoIntegrador}" escape="false" />
					</h:panelGroup>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-12 mt5">
					<otm2:panel name="painelSalas" renderedControl="false"  styleClassFooter="dn" >
						<ui:define name="header">
							<h:outputText rendered="#{CalendarioAgrupamentoTccControle.calendarioAgrupamentoTccVO.codigo ne 0}" styleClass="tituloCampos" style="font-size: 15px;font-weight: bold;color: red !important;" value="Período de Escolha/Troca do Grupo de Projeto Integrador - #{CalendarioAgrupamentoTccControle.calendarioAgrupamentoTccVO.dataInicial_Apresentar} a #{CalendarioAgrupamentoTccControle.calendarioAgrupamentoTccVO.dataFinal_Apresentar}" />
							<h:outputText rendered="#{CalendarioAgrupamentoTccControle.calendarioAgrupamentoTccVO.codigo eq 0}" styleClass="tituloCampos" style="font-size: 15px;font-weight: bold;color: red !important;" value="Período de Escolha/Troca do Grupo de Projeto Integrador Não Liberado Para a Disciplina" />
						</ui:define>
						<ui:define name="body">
							<h:panelGroup layout="block" styleClass="row">
								<h:panelGroup layout="block" styleClass="col-md-12">
									<h:outputText value="Selecione a Disciplina Para Escolher o Grupo" style="color: black !important; font-weight: bold;" styleClass="field control-label tituloCampos" />
									<h:selectOneMenu id="disciplinaProjetoIntegrador" styleClass="form-control camposObrigatorios" value="#{CalendarioAgrupamentoTccControle.disciplina}">
										<a4j:ajax event="change" render="form" execute="form" listener="#{CalendarioAgrupamentoTccControle.consultarSalaAulaBlackboardGruposDisponiveis}"/>
										<f:selectItems value="#{CalendarioAgrupamentoTccControle.listaSelectItemDisciplina}" />
									</h:selectOneMenu>
								</h:panelGroup>
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="col-md-12 text-center" rendered="#{!CalendarioAgrupamentoTccControle.dadosConsultaSalaAula.apresentarPaginador and CalendarioAgrupamentoTccControle.calendarioAgrupamentoTccVO.periodoLiberado}">
								<h:outputText styleClass="tituloCampos" style="font-size: 15px;font-weight: bold;color: red !important;" value="Ainda não Foram Gerados os Grupos de Projeto Integrador da Disciplina Informada." />
							</h:panelGroup>							
							<h:panelGroup layout="block" styleClass="row" rendered="#{CalendarioAgrupamentoTccControle.dadosConsultaSalaAula.apresentarPaginador}">
								<a4j:repeat id="listaSG" rowKeyVar="row" rows="12" value="#{CalendarioAgrupamentoTccControle.dadosConsultaSalaAula}" var="salaAulaItem" >
									<h:panelGroup layout="block" styleClass="col-md-3" >
										<otm2:panel name="panelSG#{row}">
											<ui:define name="header">
												<h:outputText styleClass="tituloCampos" style="color: black !important; font-weight: bold;" value="#{salaAulaItem.nomeGrupo}"></h:outputText>
											</ui:define>
											<ui:define name="body">
												<h:panelGroup id="painelAlunos" layout="block" styleClass="col-md-12" style="height:320px">
													<h:panelGroup layout="block" styleClass="col-md-12" style="height:300px">
														<h:panelGroup layout="block">
															<h:outputText styleClass="tituloCampos col-md-12 " value="Vagas: Mínima-#{salaAulaItem.disciplinaVO.nrMinimoAlunosPorGrupo} - ocupadas:#{salaAulaItem.dadosConsultaAlunos.totalRegistrosEncontrados}/#{salaAulaItem.disciplinaVO.nrMaximoAulosPorGrupo}" />
														</h:panelGroup>
														<h:panelGroup layout="block">
															<h:inputText pt:placeholder="Filtre aluno por nome / e-mail" styleClass="form-control campos" value="#{salaAulaItem.filtroAluno}">
																<a4j:ajax event="change" listener="#{CalendarioAgrupamentoTccControle.consultarAlunosPorNomeEmail}" render="painelAlunos" />
															</h:inputText>
															<h:panelGroup layout="block" styleClass="col-md-12 border rounded mt5" style="height:220px; overflow: auto" rendered="#{salaAulaItem.dadosConsultaAlunos.apresentarListaConsulta}">
																<rich:list id="listaAlunos#{name}" rows="5" type="definitions" value="#{salaAulaItem.dadosConsultaAlunos}" var="alunoItem">
																	<h:panelGroup layout="block" styleClass="col-md-12 mt-2">
																		<h:outputText styleClass="tituloCampos float-left" value="#{alunoItem.pessoaEmailInstitucionalVO.nome}" />
																	</h:panelGroup>
																</rich:list>
																<h:panelGroup layout="block" styleClass="col-md-12 mb-2">
																	<rich:dataScroller for="listaAlunospanelSG" render="form:painelSalas" maxPages="10" boundaryControls="auto" stepControls="auto" fastControls="hide" />
																</h:panelGroup>
															</h:panelGroup>
														</h:panelGroup>
													</h:panelGroup>
													<h:panelGroup layout="block" styleClass="col-md-12 text-center">
														<p:commandButton image="#{resource['/imagens/blackboard_logo.png']}" style="width:40px; height:40px;margin-left:10px;margin-top:-10px" oncomplete="navegacaoGoogleMeet('#{salaAulaItem.linkSalaAulaBlackboard}')"  rendered="#{salaAulaItem.existeUsuarioLogadoNaSala and !empty salaAulaItem.linkSalaAulaBlackboard}"/>
														<otm:commandButton id="btnSolicitarParticipacaoGrupo" render="form:painelSalas" action="#{CalendarioAgrupamentoTccControle.realizarInclusaoSalaAulaGrupo}" value="Participar" styleClass="btn btn-primary" icon="fas fa-plus" style="margin-left:10px" rendered="#{(salaAulaItem.dadosConsultaAlunos.totalRegistrosEncontrados ne salaAulaItem.disciplinaVO.nrMaximoAulosPorGrupo) and CalendarioAgrupamentoTccControle.calendarioAgrupamentoTccVO.permiteAdicionarUsuarioGrupo and CalendarioAgrupamentoTccControle.calendarioAgrupamentoTccVO.periodoLiberado}" />
														<otm:commandButton id="btnSolicitarRemocaoGrupo" render="form:painelSalas" action="#{CalendarioAgrupamentoTccControle.realizarExclusaoSalaAulaGrupo}" value="Sair do Grupo" styleClass="btn btn-danger btn-excluir" style="margin-left:10px;margin-top: -37px;" rendered="#{salaAulaItem.existeUsuarioLogadoNaSala and !CalendarioAgrupamentoTccControle.calendarioAgrupamentoTccVO.permiteAdicionarUsuarioGrupo and CalendarioAgrupamentoTccControle.calendarioAgrupamentoTccVO.periodoLiberado}" />
													</h:panelGroup>
												</h:panelGroup>
											</ui:define>
										</otm2:panel>
									</h:panelGroup>
								</a4j:repeat>
								<h:panelGroup layout="block" styleClass="col-md-12 mb-2">
									<rich:dataScroller for="form:listaSG" render="form:painelSalas" scrollListener="#{CalendarioAgrupamentoTccControle.scrollerListenerSalaAula}" />
								</h:panelGroup>
							</h:panelGroup>

						</ui:define>
					</otm2:panel>
				</h:panelGroup>
			</h:panelGroup>
			<otm:mensagem bean="#{CalendarioAgrupamentoTccControle}"></otm:mensagem>
		</h:form>
	</ui:define>
</ui:composition>
</html>
