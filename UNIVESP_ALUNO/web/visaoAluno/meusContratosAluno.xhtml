<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"  xmlns:p="http://primefaces.org/ui" xmlns:otm="http://java.sun.com/jsf/composite/otm">
<h:head>
</h:head>
<ui:composition template="/visaoAluno/template/visaoAluno.xhtml">
	<ui:define name="tituloPagina">
		<h:outputText value="#{msg_aplic.prt_VisaoAlunoContrato}" />
	</ui:define>

	<ui:define name="conteudo">
		<!-- 		<ui:include src="./richPanelImagem.xhtml" /> -->


		<rich:popupPanel styleClass="modalMaximizado100" id="panelDocumentoContratoAssinado"  shadowOpacity="true">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="Documento Assinado"></h:outputText>
				</h:panelGroup>
			</f:facet>
			<h:form id="formDocumentoContratoAssinado">
				<h:panelGroup layout="block" style="width:100%; text-align:center;">
					<h:panelGrid columns="1" width="100%" styleClass="tabForm">
						<rich:list id="documentoAssinado" width="100%" headerClass="consulta" style="list-style-type: none;margin: 5px;" rowClasses="linhaImpar, linhaPar" columnClasses="colunaAlinhamento" value="#{VisaoAlunoControle.documentoAssinado.listaDocumentoAssinadoPessoa}" rows="10" var="documentoAssinadoItens">
							<div style="position: absolute; right: 80%; right: 79%; top: 5%;" rendered="#{documentoAssinadoItens.situacaoDocumentoAssinadoPessoaEnum eq 'REJEITADO' or documentoAssinadoItens.situacaoDocumentoAssinadoPessoaEnum eq 'PENDENTE'}">
								<i class="fas fa-exclamation-triangle" style="color: #ffd700;font-size: 20px;#{documentoAssinadoItens.situacaoDocumentoAssinadoPessoaEnum eq 'REJEITADO' or documentoAssinadoItens.situacaoDocumentoAssinadoPessoaEnum eq 'PENDENTE' ? '' : 'display: none;'}" />
							</div>
							<h:outputText style="font-weight: bold;" value="Contrato rejeitado por #{documentoAssinadoItens.pessoaVO.nome} e motivo #{documentoAssinadoItens.motivoRejeicao}." rendered="#{documentoAssinadoItens.situacaoDocumentoAssinadoPessoaEnum eq 'REJEITADO'}" />
							<h:outputText style="font-weight: bold;" value="Contrato Aguardando Assinatura de #{documentoAssinadoItens.pessoaVO.nome}." rendered="#{documentoAssinadoItens.situacaoDocumentoAssinadoPessoaEnum eq 'PENDENTE'}" />
						</rich:list>
					</h:panelGrid>
				</h:panelGroup>
				<h:panelGroup layout="block" rendered="#{!empty VisaoAlunoControle.caminhoPreviewContrato and VisaoAlunoControle.apresentarModalDocumentoAssinado}" style="width:99%">
					<iframe src="#{VisaoAlunoControle.caminhoPreviewContrato}?embedded=true" frameborder="0" style="border: 0; width:100% !important;height:calc(100vh - 150px) !important"></iframe>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="barra-btn-flutuante-modal-100">
					<p:commandLink id="fecharModal" styleClass="btn btn-danger" value="Fechar" title="Fechar" render="formDocumentoContratoAssinado" oncomplete="#{rich:component('panelDocumentoContratoAssinado')}.hide();">
						<span class="#{msg_botoes.btn_icon_fechar_embutido} pull-left" style="margin-right: 0.8em; position: relative; top: 1px; font-size: 14px;" />
					</p:commandLink>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>


		<h:form id="form">
			<h:panelGroup id="contratos" layout="block" styleClass="row">
				<<p:dataTable> id="textoPadrao" headerClass="consulta" style="background-color: transparent; width: 100%;" columnClasses="colunaAlinhamento" value="#{VisaoAlunoControle.matriculaPeriodoContratoVOs}" var="matriculaPeriodoContratoVOItens">
					<rich:column style="text-align: center !important">
						<f:facet name="header">
							<h:outputText value="Ano/Semestre" />
						</f:facet>
						<h:outputText value="#{matriculaPeriodoContratoVOItens.ano} / #{matriculaPeriodoContratoVOItens.semestre}" rendered="#{matriculaPeriodoContratoVOItens.contratoMatricula.tipo == 'MA'}" />
						<h:outputText value="#{matriculaPeriodoContratoVOItens.ano} / #{matriculaPeriodoContratoVOItens.semestre}" rendered="#{matriculaPeriodoContratoVOItens.contratoFiador.tipo == 'FI'}" />
					</rich:column>
					<rich:column style="text-align: center !important">
						<f:facet name="header">
							<h:outputText value="#{msg_aplic.prt_ContratosReceitas_descricao}" />
						</f:facet>
						<h:outputText value="#{matriculaPeriodoContratoVOItens.contratoMatricula.descricao}" rendered="#{matriculaPeriodoContratoVOItens.contratoMatricula.tipo == 'MA'}" />
						<h:outputText value="#{matriculaPeriodoContratoVOItens.contratoFiador.descricao}" rendered="#{matriculaPeriodoContratoVOItens.contratoFiador.tipo == 'FI'}" />
					</rich:column>
					<rich:column style="text-align: center !important">
						<f:facet name="header">
							<h:outputText value="#{msg_aplic.prt_TextoPadrao_tipo}" />
						</f:facet>
						<h:outputText value="#{matriculaPeriodoContratoVOItens.contratoMatricula.tipo_Apresentar}" rendered="#{matriculaPeriodoContratoVOItens.contratoMatricula.tipo == 'MA'}" />
						<h:outputText value="#{matriculaPeriodoContratoVOItens.contratoFiador.tipo_Apresentar}" rendered="#{matriculaPeriodoContratoVOItens.contratoFiador.tipo == 'FI'}" />
					</rich:column>
					<rich:column style="text-align: center !important">
						<f:facet name="header">
							<h:outputText value="#{msg_aplic.prt_Requerimento_opcoes}" />
						</f:facet>
						
						<otm:commandIcon id="imprimirMatricula" title="#{msg_aplic.prt_imprimirContrato}" tooltip="Contrato MatrÃ­cula" action="#{VisaoAlunoControle.imprimirContrato}" oncomplete="#{VisaoAlunoControle.downloadContrato}" icon="#{msg_botoes.btn_icon_pdf} iconePequeno" rendered="#{matriculaPeriodoContratoVOItens.contratoMatricula.tipo == 'MA'}" render="form,formDocumentoContratoAssinado" />
						<otm:commandIcon id="imprimirFiador" title="#{msg_aplic.prt_imprimirContrato}" tooltip="Contrato Fiador" action="#{VisaoAlunoControle.imprimirContrato}" oncomplete="#{VisaoAlunoControle.downloadContrato}" icon="#{msg_botoes.btn_icon_pdf} iconePequeno" rendered="#{matriculaPeriodoContratoVOItens.contratoFiador.tipo == 'FI'}" />
					</rich:column>
				</<p:dataTable>>
			</h:panelGroup>
		</h:form>
	</ui:define>
</ui:composition>
</html>
