<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"  xmlns:p="http://primefaces.org/ui" xmlns:otm="http://java.sun.com/jsf/composite/otm">
<style type="text/css">
.expandirIndice {
	display: block;
	width: calc(100% - 25px);
	height: inherit;	
	position: relative;
	float: right;
	overflow: auto;
}

.indice {
	display: block;
	position: absolute;
	top: 124px;
	z-index: 2004;
	left: 70%;
	width: 30%;
	height: calc(100vh - 136px);	
	overflow-x: hidden;
	overflow-y: auto;	
}

 .indiceMinimizado {
 	display: block;
	position: absolute;
	top: 132px;
	z-index: 2004;
	left: calc(100vw - 25px);
	width: 25px;
	height: calc(100vh - 146px);	
	overflow-x: hidden;
	overflow-y: hidden;	
	float: right;
 } 

.iconeIndice {
	display: block;
	position: relative;
	top: 49.5%;
	width: 25px;
	padding: 10px;
	height: 40px;
	border-radius: 5px 0px 0px 5px;
	z-index: 2001;
	left: 1px;
	float: left;
}

@media (max-width: 770px){
	.indice{ 
 		position: fixed;
 		left: 3%;
 		width: 97%;
 		top: 50px;
 		height: calc(100vh);
 		z-index: 2002	
 	}
	.iconeIndiceMaximizado{
		left: 6.7%;
	}
	
}

</style>

<script type="text/javascript" charset="utf-8">
	(function($) {
					scrollTOMenu = function(idElement) {
							$('#form\\:panelIndice').animate({
								scrollTop: $(idElement).offset().top - $('#form\\:panelIndice').offset().top  - 200  + $('#form\\:panelIndice').scrollTop() 
							}, 500);
					};
	}(jQuery));
</script>


<h:panelGroup layout="block" styleClass="#{ConteudoControle.conteudo.maximixado ? 'indice' : 'indiceMinimizado'} ">
<h:inputHidden id="indiceAtual" value="#{ConteudoControle.controleAba}"></h:inputHidden>
<otm:commandIcon tooltip="Visualizar Índice" style="z-index:2006" oncomplete="#{ConteudoControle.executarScriptRecursoEducacionalConteudo}" rendered="#{!ConteudoControle.naoExisteConteudoCadastrado}" styleClass="iconeIndice bg-dark border shadow" render="formSubTituloPagina, formCss, form" icon="#{ConteudoControle.conteudo.maximixado ?  'fas fa-caret-right' : 'fas fa-caret-left'} fs22 mr10 text-white" styleIcon=" " action="#{ConteudoControle.visualizarIndiceConteudo}" />
<h:panelGroup id="panelIndice" rendered="#{ConteudoControle.conteudo.maximixado}" layout="block" styleClass="expandirIndice bg-white shadow border rounded p10">
	<h:panelGroup styleClass="row mb10" rendered="#{!empty ConteudoControle.conteudoUnidadePagina.conteudoUnidadePaginaRecursoEducacionalApoioProfessor and (ConteudoControle.usuarioLogado.isApresentarVisaoProfessor or ConteudoControle.usuarioLogado.isApresentarVisaoCoordenador or ConteudoControle.emulandoAcessoPagina)}">
					<h:panelGroup layout="block" styleClass="row bg-info border rounded mb5 p10">
						<h:outputText styleClass="text-white btn-block" value="Material de Apoio do Professor" />
					<a4j:repeat id="dataGridGatilhosApoioProfessor" rowKeyVar="row" value="#{ConteudoControle.conteudoUnidadePagina.conteudoUnidadePaginaRecursoEducacionalApoioProfessor}" var="recursoApoioProfessor">
						<h:panelGroup styleClass="p5">
							<otm:commandIcon execute="@this" direction="topAuto" action="#{ConteudoControle.carregarConteudoUnidadePaginaRecursoEducacionalProfessor}" render="gatilhosVisualizados, formAddRecursoEducacional, formMensagem" oncomplete="#{rich:component('panelAddRecursoEducacional')}.hide();#{rich:component('panelAddRecursoEducacional')}.show();" tooltip="#{recursoApoioProfessor.titulo}" icon="#{recursoApoioProfessor.tipoRecursoEducacional.icone}  fs16 mr5 text-white" styleIcon=" " />
						</h:panelGroup>
					</a4j:repeat>
					</h:panelGroup>
				</h:panelGroup>
	
	<a4j:repeat rowKeyVar="rowIndice" id="listaIndice" value="#{ConteudoControle.conteudo.unidadeConteudoVOs}" var="unidadeItens">
		<h:panelGroup id="panelIndiceItem" layout="block" styleClass="row">
			<h:panelGroup layout="block" styleClass="row bg-gray border rounded-top p10">
				<p:commandLink styleClass="float-left ml5" oncomplete="#{ConteudoControle.acaoModalRecursoEducacional}; #{ConteudoControle.modalMensagemAvisoAluno}; #{ConteudoControle.executarScriptRecursoEducacionalConteudo};realizarScrollMenu();" render="form, formAddRecursoEducacional, formMensagem, formCss, formSubTituloPagina" style="text-decoration:none;cursor:pointer" action="#{ConteudoControle.editarIndiceUnidadeConteudo}">
					<h:panelGroup styleClass="#{unidadeItens.cssConteudoVisualizado} mr5"></h:panelGroup>
					<h:outputText styleClass="tituloCampos" value="#{unidadeItens.ordem} - #{unidadeItens.titulo}" />
				</p:commandLink>
				<otm:commandIcon render="form:listaIndice:#{rowIndice}:panelIndiceItem" styleClass="float-right mr5" tooltip="#{unidadeItens.maximixado ? 'Ocultar Páginas da Unidade' : 'Visualizar Paginas das Unidade'}" action="#{unidadeItens.setMaximixado(!unidadeItens.maximixado)}" icon="#{unidadeItens.maximixado ?  'fas fa-caret-up' : 'fas fa-caret-down'} fs20" />
				<otm:commandIcon render="formAnotacao" styleClass="float-right mr5" tooltip="Anotações da Unidade" oncomplete="#{rich:component('panelAnotacao')}.show()" action="#{ConteudoControle.verificarAnotacaoIndiceUnidadeConteudo}" icon="fas fa-sticky-note #{unidadeItens.existeAnotacaoDisciplina ? 'text-success': 'text-info'} fs16" />
			</h:panelGroup>
			<h:panelGroup layout="block" rendered="#{unidadeItens.maximixado}" styleClass="row border rounded-bottom mb5 paginas{rowIndice} ocultarPaginas" >
				<a4j:repeat value="#{unidadeItens.conteudoUnidadePaginaVOs}" rowKeyVar="rowPagina" var="pagina">
					<h:panelGroup layout="block" styleClass="col-md-12 w-100 float-left pagina#{unidadeItens.codigo}#{pagina.codigo} #{pagina.codigo eq ConteudoControle.conteudoUnidadePagina.codigo ? 'bg-gray ' : ''}">
						<p:commandLink styleClass="float-left ml5 " style="text-decoration:none;cursor:pointer;width: calc(100% - 30px);" oncomplete="#{ConteudoControle.acaoModalRecursoEducacional}; #{ConteudoControle.modalMensagemAvisoAluno}; #{ConteudoControle.executarScriptRecursoEducacionalConteudo}; realizarScrollMenu();" render="form, formAddRecursoEducacional, formMensagem, formCss, formSubTituloPagina" action="#{ConteudoControle.editarIndiceConteudoUnidadePagina}">
							<h:panelGroup styleClass="#{pagina.paginaJaVisualizada ? 'fas fa-check text-success ': 'fas fa-check text-secundary'} mr5 fs12 #{pagina.codigo eq ConteudoControle.conteudoUnidadePagina.codigo ? 'font-weight-bold' : ''}"></h:panelGroup>
							<h:outputText styleClass="#{pagina.paginaJaVisualizada ? 'text-success' : 'text-secundary'} #{pagina.codigo eq ConteudoControle.conteudoUnidadePagina.codigo ? 'font-weight-bold' : ''}" value="#{unidadeItens.ordem}.#{pagina.pagina} - #{pagina.titulo}" />
						</p:commandLink>

						<otm:commandIcon styleClass="float-right mr5" rendered="#{pagina.paginaJaVisualizada}" tooltip="#{pagina.existeAnotacaoDisciplina ? 'Visualizar Anotações da Página' : 'Incluir Anotações da Página'}" render="formAnotacao" oncomplete="#{rich:component('panelAnotacao')}.show()" action="#{ConteudoControle.verificarAnotacaoIndiceConteudoUnidadePagina}" icon="fas fa-sticky-note #{pagina.existeAnotacaoDisciplina ? 'text-success': 'text-info'} fs16" />
						<h:panelGroup layout="block" styleClass="row ml17" rendered="#{pagina.paginaJaVisualizada and !empty pagina.conteudoUnidadePaginaRecursoEducacionalManterDisponivelVOs}">
							<a4j:repeat value="#{pagina.conteudoUnidadePaginaRecursoEducacionalManterDisponivelVOs}" var="gatilhoItens">
								<h:panelGroup styleClass="p5">
									<otm:commandIcon execute="@form" direction="topAuto" action="#{ConteudoControle.visualizarGatilho}" render="formAddRecursoEducacional, formMensagem" oncomplete="#{ConteudoControle.modalPanelAddRecursoEducacional}; #{ConteudoControle.modalMensagemAvisoAluno}; " tooltip="#{gatilhoItens.titulo}" icon="#{gatilhoItens.tipoRecursoEducacional.icone}  fs10 mr2" styleIcon=" " />
								</h:panelGroup>
							</a4j:repeat>
						</h:panelGroup>
					</h:panelGroup>
				</a4j:repeat>
			</h:panelGroup>
		</h:panelGroup>
	</a4j:repeat>
</h:panelGroup>
</h:panelGroup>

</html>
