<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" xmlns:otm="http://java.sun.com/jsf/composite/otm">


	<h:form id="formBusca">

		<h:panelGroup styleClass="row" layout="block">

			<h:panelGroup styleClass="col-md-12" layout="block">
				<h:selectOneMenu styleClass="form-control" value="#{MinhaBibliotecaControle.bibliotecaVO.codigo}">
					<a4j:ajax event="change" oncomplete="carregarMenu('#accordionSidebar')" execute="@form" listener="#{MinhaBibliotecaControle.selecionarBiblioteca}" render="panelListaCatalogos, panelFiltrosSelecionados, panelAreaMenu"></a4j:ajax>
					<f:selectItems id="filter-status" name="filter-status" value="#{MinhaBibliotecaControle.listaBibliotecas}" />
					<i class="arrow double"></i>
				</h:selectOneMenu>
			</h:panelGroup>


			<h:panelGroup styleClass="col-md-12 mt10" layout="block">
					<a4j:jsFunction name="consultarCatalogo" execute="@form" action="#{MinhaBibliotecaControle.irPaginaInicial}" render="form"></a4j:jsFunction>
					<h:inputText name="idFiltroBusca" id="idFiltroBusca" onkeypress="return validarEnter(event)" styleClass="form-control"  title="Filtrar Catalogo" value="#{MinhaBibliotecaControle.valorPesquisaCatalogoVO}">
						<a4j:ajax event="change" execute="@form"  oncomplete="carregarMenu('#accordionSidebar'); consultarCatalogo()" listener="#{MinhaBibliotecaControle.irPaginaInicial}" render="panelListaCatalogos, idFiltroBusca, panelFiltrosSelecionados">
						</a4j:ajax>
					</h:inputText> 
					<span class="append-icon right mr10" > <i class="#{msg_botoes.btn_icon_lupa_embutido} mt10 fs14"></i></span>
			</h:panelGroup>




			<h:panelGroup id="panelFiltrosSelecionados"  layout="block" styleClass="row scroller-y pl10">
				<h:panelGroup layout="block" rendered="#{!empty MinhaBibliotecaControle.tipoFiltroConsultas}" styleClass="float-left p5 " >
					<i class="fas fa-filter float-left "/>
				</h:panelGroup>
				<a4j:repeat rowKeyVar="row" rendered="#{!empty MinhaBibliotecaControle.tipoFiltroConsultas}" value="#{MinhaBibliotecaControle.tipoFiltroConsultas}" var="filtro">
					<h:panelGroup layout="block" styleClass="float-left p5 border rounded bg-white" >
						<a4j:commandLink id="areaConhecimentoSelecionado" action="#{MinhaBibliotecaControle.removerFiltroConsulta}" render="panelListaCatalogos, panelFiltrosSelecionados, idFiltroBusca, panelAreaMenu">
							<i class="fas fa-times mr5 text-danger"  />
							<h:outputText styleClass="tituloCampos fs12" style="margin-left:4px;" value="#{filtro.labelConsulta}" />
						</a4j:commandLink>
					</h:panelGroup>
				</a4j:repeat>
			</h:panelGroup>
		</h:panelGroup>

		<script type="text/javascript">
			document.getElementById("formBusca:idFiltroBusca").placeholder = "Pesquisar Livros...";
			
			(function($) {
				$(document).ready(
					function() {
						$("#idFiltroBusca").focus();
						
					});
				validarEnter = function(event){					
					code = (event.keyCode ? event.keyCode: event.which);		
					if (code == 13) {
						consultarCatalogo();
						return false;
					}
					return true;
				}
			}(jQuery));
		</script>
		
	</h:form>

</ui:composition>