<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" xmlns:otm="http://java.sun.com/jsf/composite/otm" xmlns:otm2="http://www.otimize-ti.com.br">

	<style>
.divDadosExemplar {
	padding-left: 177px;
	position: relative;
	top: -314px;
}
</style>

	<f:metadata>
		<f:event type="preRenderView" listener="#{MinhaBibliotecaControle.verificarChamadaBibliotecaExterna}" />
	</f:metadata>
	<rich:popupPanel id="panelDadosExemplarAdicionarGuia" styleClass="modalMaximizado" autosized="true">
		<f:facet name="header">
			<h:panelGroup>
				<h:outputText value="#{MinhaBibliotecaControle.catalogoVO.titulo}" />
			</h:panelGroup>
		</f:facet>
		<f:facet name="controls">
			<h:panelGroup>
				<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" id="hiperlinkpanelDadosExemplarAdicionarGuia" />
				<rich:componentControl target="panelDadosExemplarAdicionarGuia" operation="hide" event="click" />
			</h:panelGroup>
		</f:facet>
		<h:form id="formDadosExemplarAdicionarGuia">
			<h:panelGroup layout="block" styleClass="row" rendered="#{empty MinhaBibliotecaControle.listaExemplarCatalogoSelecionado}">
				<h:outputText value="Sem GUIA para ser adicionada no catálogo !"></h:outputText>
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="row">
				<rich:dataTable styleClass="panelAddGuia" id="resultadoDadosEmprestimos" value="#{MinhaBibliotecaControle.listaExemplarCatalogoSelecionado}" rows="5" var="itensExemplarGuia">
					<rich:column>
						<f:facet name="header">
							<h:outputText value="Biblioteca" />
						</f:facet>
						<h:outputText value="#{itensExemplarGuia.biblioteca.nome}" />
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="Seção" />
						</f:facet>
						<h:outputText value="#{itensExemplarGuia.secao.nome}" />
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="Local" />
						</f:facet>
						<h:outputText value="#{itensExemplarGuia.local}" />
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="Código de Barra" />
						</f:facet>
						<h:outputText value="#{itensExemplarGuia.codigoBarra}" />
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="Situação Atual" />
						</f:facet>
						<h:outputText value="#{itensExemplarGuia.situacaoAtualApresentar}" />
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="Opções" />
						</f:facet>
						<otm:commandIcon icon="#{msg_botoes.btn_icon_adicionar} iconePequeno" tooltip="Adicionar a Guia" rendered="#{itensExemplarGuia.situacaoAtual eq 'DI'}" action="#{MinhaBibliotecaControle.adicionarExemplarNaGuia}" render="formMenuTopo" oncomplete="#{rich:component('panelDadosExemplarAdicionarGuia')}.hide()" />
					</rich:column>
					<f:facet name="footer">
						<rich:dataScroller maxPages="5" styleClass="cor-cliente" stepControls="auto" boundaryControls="auto" fastControls="hide" />
					</f:facet>
				</rich:dataTable>
			</h:panelGroup>
		</h:form>
	</rich:popupPanel>

	<rich:popupPanel id="panelDadosExemplar" styleClass="modalMaximizado">
		<f:facet name="header">
			<h:panelGroup>
				<h:outputText value="Dados Catalogo" />
			</h:panelGroup>
		</f:facet>
		<f:facet name="controls">
			<h:panelGroup>
				<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" id="hiperlinkpanelDadosExemplar" />
				<rich:componentControl target="panelDadosExemplar" operation="hide" event="click" />
			</h:panelGroup>
		</f:facet>
		<h:form id="formDadosExemplar">
			<h:panelGroup layout="block" styleClass="row" id="outraDois" rendered="#{!empty MinhaBibliotecaControle.catalogoVO.caminhoImagemCapa}">
				<div style="box-shadow: 10px 9px 8px rgba(64, 64, 64, .5); width: 155px;">
					<h:graphicImage style="min-width: 162px; max-width: 162px;" value="#{MinhaBibliotecaControle.catalogoVO.caminhoImagemCapa}" />
				</div>
			</h:panelGroup>
			<div class="row" id="dadosCatalogo">
				<h:panelGroup layout="block" styleClass="col-md-4 text-center">
					<otm2:panel name="panel_exem_exist" styleClassFooter="dn" renderedControl="false">
						<ui:define name="header">
							<i class="#{msg_botoes.btn_icon_livroFechado_embutido} mr5"></i>
							<h:outputText styleClass="text-primary" value="#{msg_aplic.prt_MinhaBiblioteca_exemplarExistente}" style="font-size: 13px;" />
						</ui:define>
						<ui:define name="body">
							<h:outputText styleClass="text-primary" value="#{MinhaBibliotecaControle.catalogoVO.nrExemplaresParaEmprestimo}" style="font-size: 13px;" />
						</ui:define>
					</otm2:panel>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-4 text-center">
					<otm2:panel name="panel_exem_Dispo" styleClassFooter="dn" renderedControl="false">
						<ui:define name="header">
							<i class="#{msg_botoes.btn_icon_cadeadoAberto_embutido} mr5"></i>
							<h:outputText styleClass="text-success" value="#{msg_aplic.prt_MinhaBiblioteca_exemplarDisponivel}" style="font-size: 13px;" />
						</ui:define>
						<ui:define name="body">
							<h:outputText styleClass="text-success" value="#{MinhaBibliotecaControle.catalogoVO.nrExemplaresDisponivel}" style="font-size: 13px;" />
						</ui:define>
					</otm2:panel>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-4 text-center">
					<otm2:panel name="panel_exem_Consu" styleClassFooter="dn" renderedControl="false">
						<ui:define name="header">
							<i class="#{msg_botoes.btn_icon_lupa_embutido} mr5 "></i>
							<h:outputText styleClass="text-info" value="#{msg_aplic.prt_MinhaBiblioteca_exemplarUnidadesConsulta}" style="font-size: 13px;" />
						</ui:define>
						<ui:define name="body">
							<h:outputText styleClass="text-info" value="#{MinhaBibliotecaControle.catalogoVO.nrExemplaresParaConsulta}" style="font-size: 13px;" />
						</ui:define>
					</otm2:panel>
				</h:panelGroup>
			</div>
			<h:panelGroup id="dadosExemplares">
				<otm2:panel name="panel_dadosExem" styleClassFooter="dn" renderedControl="false">
					<ui:define name="header">
						<h:outputText value="Dados Exemplares" />
					</ui:define>
					<ui:define name="body">
						<a4j:repeat value="#{MinhaBibliotecaControle.catalogoVO}" var="catalogoItens">
							<h:panelGroup layout="block" styleClass="#{catalogoItens.cssAssunto}" rendered="#{!empty catalogoItens.assunto}">
								<h:outputText value="Assunto(os)" styleClass="tituloCamposNegrito btn-block" />
								<h:outputText value="#{catalogoItens.assunto}" styleClass="tituloCampos" />
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="col-md-4">
								<h:outputText value="Título" styleClass="tituloCamposNegrito btn-block" />
								<h:outputText value="#{catalogoItens.titulo}" styleClass="tituloCampos" />
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="col-md-4">
								<h:outputText value="Autor(es)" styleClass="tituloCamposNegrito btn-block" />
								<h:outputText value="#{catalogoItens.nomeAutores}" styleClass="tituloCampos" />
								<h:outputText value="Sem autor !" styleClass="tituloCampos" rendered="#{empty catalogoItens.nomeAutores}" />
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="col-md-4" rendered="#{!empty catalogoItens.edicao}">
								<h:outputText value="#{msg_aplic.prt_MinhaBiblioteca_edicao}" styleClass="tituloCamposNegrito btn-block" />
								<h:outputText value="#{catalogoItens.edicao}" styleClass="tituloCampos" />
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="col-md-4" rendered="#{!empty catalogoItens.isbn}">
								<h:outputText value="#{msg_aplic.prt_MinhaBiblioteca_isbn}" styleClass="tituloCamposNegrito btn-block" />
								<h:outputText value="#{catalogoItens.isbn}" styleClass="tituloCampos" />
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="col-md-4" rendered="#{!empty catalogoItens.issn}">
								<h:outputText value="#{msg_aplic.prt_MinhaBiblioteca_issn}" styleClass="tituloCamposNegrito btn-block" />
								<h:outputText value="#{catalogoItens.issn}" styleClass="tituloCampos" />
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="col-md-4" rendered="#{!empty catalogoItens.cutterPha}">
								<h:outputText value="#{msg_aplic.prt_MinhaBiblioteca_cutterPha}" styleClass="tituloCamposNegrito btn-block" />
								<h:outputText value="#{catalogoItens.cutterPha}" styleClass="tituloCampos" />
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="col-md-4" rendered="#{!empty catalogoItens.classificacaoBibliografica}">
								<h:outputText value="#{msg_aplic.prt_MinhaBiblioteca_classificacao}" styleClass="tituloCamposNegrito btn-block" />
								<h:outputText value="#{catalogoItens.classificacaoBibliografica}" styleClass="tituloCampos" />
							</h:panelGroup>
						</a4j:repeat>
					</ui:define>
				</otm2:panel>
			</h:panelGroup>
			<div>
				<rich:dataTable id="arquivos" width="100%" headerClass="consulta" rowClasses="linhaImpar, linhaPar" rendered="#{!empty MinhaBibliotecaControle.listaArquivosBibliotecaExterna}" columnClasses="colunaAlinhamento" value="#{MinhaBibliotecaControle.listaArquivosBibliotecaExterna}" rows="3" var="arquivoItens">
					<rich:column style="width: 100%;text-align: left !important;font-size: 14px;">
						<h:outputText value="#{arquivoItens.descricaoArquivo}" />
					</rich:column>
					<rich:column>
						<h:panelGroup layout="block" styleClass="col-md-12 text-center m5">
							<otm:commandIcon oncomplete="location.href='../DownloadSV'" tooltip="Download Arquivo" icon="#{msg_botoes.btn_icon_download_embutido} iconePequeno" image="#{resource['imagens/minhaBiblioteca/download(2).png']}" action="#{MinhaBibliotecaControle.realizarDownloadArquivo}" />
						</h:panelGroup>
					</rich:column>
					<f:facet name="footer">
						<div style="text-align: center !important">
							<rich:dataScroller boundaryControls="auto" stepControls="auto" fastControls="hide" for="arquivos" limitRender="10" align="center" />
						</div>
					</f:facet>
				</rich:dataTable>
			</div>
		</h:form>
	</rich:popupPanel>


	<h:form id="form">

		<h:panelGroup layout="block" id="panelListaCatalogos" styleClass="row text-center">
			<h:outputText value="Não foram encontrado catálogos com os filtros informados!" rendered="#{empty MinhaBibliotecaControle.controleConsultaOtimizado.listaConsulta}" styleClass="fs20 mt10 mb10"></h:outputText>
			<a4j:repeat id="listaCatalogos" value="#{MinhaBibliotecaControle.controleConsultaOtimizado}" rows="15" var="itensCatalogos">

				<h:panelGroup styleClass="col-md-2 p5 mt20" layout="block" style="min-width:250px !important">
					<h:panelGroup styleClass="col-md-12 pr20 bordered rounded" layout="block" style="height: 340px;box-shadow: 2px 4px 8px rgba(64,64,64,.5) ;">


						<div class="col-md-12 text-center" style="min-height: 180px !important">
							<a4j:commandButton style="max-height:120px; max-height:180px;display:inline-block" rendered="#{!empty itensCatalogos.caminhoImagemCapa}" image="#{itensCatalogos.caminhoImagemCapa}" action="#{MinhaBibliotecaControle.selecionarCatalogo}" oncomplete="#{rich:component('panelDadosExemplar')}.show()" render="formDadosExemplar" />

							<otm:commandIcon styleIcon="font-size:90px" style="display:block" rendered="#{empty itensCatalogos.caminhoImagemCapa}" icon="fas fa-book-open mt40 " action="#{MinhaBibliotecaControle.selecionarCatalogo}" oncomplete="#{rich:component('panelDadosExemplar')}.show()" render="formDadosExemplar" />
						</div>


						<div class="col-md-12" style="height: 40px">
							<h:outputText title="#{itensCatalogos.titulo}" value="#{itensCatalogos.titulo.length() gt 60 ? itensCatalogos.titulo.substring(0,57).concat('...') : itensCatalogos.titulo}" styleClass="text-info" />
						</div>
						<div class="col-md-12" style="height: 40px">
							<h:outputText title="#{itensCatalogos.nomeAutores}" value="#{itensCatalogos.nomeAutores.length() gt 60 ? itensCatalogos.nomeAutores.substring(0,57).concat('...') : itensCatalogos.nomeAutores}" styleClass="tituloCampos fs12" />
						</div>
						<div class="col-md-12" style="height: 40px">
							<h:outputText value="#{itensCatalogos.nomeEditoras.length() gt 50 ? itensCatalogos.nomeEditoras.substring(0,47).concat('...') : itensCatalogos.nomeEditoras}" styleClass="tituloCampos fs12" />
						</div>
						<div class="col-md-12 border-top pt10 text-center">
							<otm:commandIcon icon="fas fa-book-medical fs16 " styleClass="d-md-inline-block text-center" style="width: 40px !important; text-align: center !important;display:inline-block" tooltip="Adicionar Guia" id="adicionarGuia" oncomplete="#{rich:component('panelDadosExemplarAdicionarGuia')}.show()" render="formDadosExemplarAdicionarGuia" action="#{MinhaBibliotecaControle.buscaExemplaresCatalogo}" />
							<otm:commandIcon icon="far fa-bookmark fs16 " styleClass="d-md-inline-block text-center" style="width: 40px !important; text-align: center !important;display:inline-block" tooltip="Adicionar a Reserva" id="adicionarReserva" action="#{MinhaBibliotecaControle.adicionarCatalogoNaGuiaDeReserva}" render="formMenuTopo" rendered="#{MinhaBibliotecaControle.usuarioLogadoBiblioteca and !LoginControle.mostrarModalEscolhaVisao}" />
							<otm:commandIcon icon="fas fa-book fs16 " styleClass="d-md-inline-block text-center" style="width: 40px !important; text-align: center !important;display:inline-block" tooltip="#{itensCatalogos.nrExemplaresParaEmprestimo} Exemplar(es) existente(s)" id="exemplaresExistentes">
								<span class="text-alerta-contador">#{itensCatalogos.nrExemplaresParaEmprestimo}</span>
							</otm:commandIcon>
							<otm:commandIcon icon="fas fa-unlock-alt fs16 " styleClass="d-md-inline-block text-center" style="width: 40px !important; text-align: center !important;display:inline-block" tooltip="#{itensCatalogos.nrExemplaresDisponivel} Exemplar(es) disponível(eis) para empréstimo" id="exemplarDisponivelEmprestimo">
								<span class="text-alerta-contador">#{itensCatalogos.nrExemplaresDisponivel}</span>
							</otm:commandIcon>
							<otm:commandIcon icon="fa fa-search fs16  " styleClass="d-md-inline-block text-center" style="width: 40px !important; text-align: center !important;display:inline-block" tooltip="#{itensCatalogos.nrExemplaresParaConsulta} Exemplar(es) disponível(eis) para consulta" id="exemplaresConsulta">
								<span class="text-alerta-contador">#{itensCatalogos.nrExemplaresParaConsulta}</span>
							</otm:commandIcon>
						</div>

					</h:panelGroup>
				</h:panelGroup>


			</a4j:repeat>
			<h:panelGroup layout="block" styleClass="row text-center mt10 mb10">

				<rich:dataScroller maxPages="5" for="listaCatalogos" render="panelListaCatalogos" rendered="#{MinhaBibliotecaControle.controleConsultaOtimizado.apresentarDatascroller}" stepControls="auto" boundaryControls="auto" fastControls="hide" id="paginador" page="#{MinhaBibliotecaControle.controleConsultaOtimizado.page}" scrollListener="#{MinhaBibliotecaControle.scrollerListener}" />
			</h:panelGroup>
		</h:panelGroup>

	</h:form>

</ui:composition>