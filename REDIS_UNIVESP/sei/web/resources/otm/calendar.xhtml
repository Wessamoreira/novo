<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:h="http://java.sun.com/jsf/html" 
	xmlns:f="http://xmlns.jcp.org/jsf/core" 
	xmlns:rich="http://richfaces.org/rich" 
	xmlns:a4j="http://richfaces.org/a4j" 
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:cc="http://java.sun.com/jsf/composite">
	
		<cc:interface>
			<cc:attribute name="id" type="java.lang.String"/>
			<cc:attribute name="value" required="true"  type="java.util.Date"/>					
			<cc:attribute name="inputClass" default="form-control campos" type="java.lang.String"/>
			<cc:attribute name="style" default="width:100% !important" type="java.lang.String"/>
			<cc:attribute name="icon" default="btn-icon-calendar" type="java.lang.String"/>
					
			<cc:attribute name="style" default="width:100% !important;" type="java.lang.String"/>
			<cc:attribute name="datePattern" default="dd/MM/yyyy" type="java.lang.String"/>
			<cc:attribute name="rendered" type="java.lang.Boolean"/>			
			<cc:attribute name="readonly" type="java.lang.Boolean"/>
			<cc:attribute name="jsFunction" default=""  type="java.lang.String"/>										
			<cc:attribute name="enableManualInput" default="true"  type="java.lang.Boolean"/>										
			<cc:attribute name="showApplyButton" default="false"  type="java.lang.Boolean"/>										
		</cc:interface>
		
		<cc:implementation>	
			<script type="text/javascript">
			(function($) {
				$(document).ready(function(){
					$('.otmCalendar').each(function(){												
						iniciarCalendar(this, $(this).attr('title'));						
					});
				});					
			})(jQuery);
	</script>				
		<h:panelGroup layout="block" rendered="#{cc.attrs.rendered}" styleClass="col-md-12 pn">
 			<h:inputText id="#{cc.attrs.id}" pt:placeholder="#{fn:replace(fn:replace(fn:replace(fn:replace(fn:replace(fn:replace(fn:replace(fn:toUpperCase(cc.attrs.datePattern), 'DD', '__'), 'MM', '__'), 'YY', '__'), 'YY', '__'), 'HH', '__'), 'MM', '__'), 'SS', '__')}" title="#{cc.attrs.datePattern}" maxlength="#{fn:length(cc.attrs.datePattern)}" onkeypress="return mascaraData(this.form, this.id, '#{cc.attrs.datePattern}', event);" onchange="return validar_Data(this.id, '#{cc.attrs.datePattern}');" value="#{cc.attrs.value}" readonly="#{cc.attrs.readonly or !cc.attrs.enableManualInput}" disabled="#{cc.attrs.readonly or !cc.attrs.enableManualInput}" rendered="#{cc.attrs.rendered}" styleClass="#{cc.attrs.inputClass} otmCalendar"
 			style="#{cc.attrs.style}" >
 				<f:convertDateTime pattern="#{cc.attrs.datePattern}"></f:convertDateTime> 	
 				<a4j:ajax event="blur" limitRender="#{cc.attrs.id}" immediate="true" oncomplete="#{cc.attrs.jsFunction}" status="status"></a4j:ajax> 						
 			</h:inputText>
 			
 		</h:panelGroup>
            
			
		</cc:implementation>		
	</html>
