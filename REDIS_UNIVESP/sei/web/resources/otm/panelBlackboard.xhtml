<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" xmlns:otm="http://java.sun.com/jsf/composite/otm" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions" xmlns:composite="http://java.sun.com/jsf/composite">
<composite:interface>	
	<composite:attribute name="id" required="true" type="java.lang.String"/>	
	<composite:attribute name="apresentarBotaoGerar" required="true" type="java.lang.Boolean" />
	<composite:attribute name="apresentarBotaoVisualizar" required="true" type="java.lang.Boolean" />
	<composite:attribute name="permitirBtnGravarSalaAulaBlackboard" required="true" type="java.lang.Boolean" />
	<composite:attribute name="bean" required="true" type="java.lang.Object" />
	<composite:attribute name="action" required="true" default="#" method-signature="java.lang.String action()" />
	<composite:attribute name="retornoRender" required="true" type="java.lang.String" />
	<composite:attribute name="salaAulaBlackboardVO" required="true" type="negocio.comuns.blackboard.SalaAulaBlackboardVO" />
	
</composite:interface>

<composite:implementation>
	<h:panelGroup layout="block">		

		<a4j:commandButton id="btnBlackboardGerar" styleClass="botoes" action="#{cc.attrs.action}" render="formSalaAulaBlackboard" oncomplete="#{rich:component('panelSalaAulaBlackboard')}.show()" rendered="#{cc.attrs.apresentarBotaoGerar}" image="#{resource['/imagens/blackboard_logo_inativo.png']}" style="width:25px; height:25px;">
			<rich:tooltip value="Gerar Blackboard." />
		</a4j:commandButton>
		
		<a4j:commandButton id="btnBlackboardVisualizar" styleClass="botoes" action="#{cc.attrs.action}" render="formSalaAulaBlackboard" oncomplete="#{rich:component('panelSalaAulaBlackboard')}.show()" rendered="#{cc.attrs.apresentarBotaoVisualizar}" image="#{resource['/imagens/blackboard_logo.png']}" style="width:25px; height:25px;">
			<rich:tooltip value="Visualizar Blackboard." />
		</a4j:commandButton>

		<rich:popupPanel id="panelSalaAulaBlackboard" shadowOpacity="true" width="870" height="330">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="Sala de Aula Blackboard"></h:outputText>
				</h:panelGroup>
			</f:facet>
			<h:form id="formSalaAulaBlackboard">
				<h:panelGroup id="panelGroupSalaAulaBlackboard" layout="block" styleClass="row">
					<h:panelGroup layout="block" styleClass="row">
						<h:panelGroup layout="block" styleClass="row" rendered="#{cc.attrs.salaAulaBlackboardVO.codigo ne 0}">
							<h:panelGroup layout="block" styleClass="col-md-4">
								<h:outputText value="Código do Classroom" styleClass="field control-label tituloCampos" />
								<h:inputText size="72" styleClass="form-control camposSomenteLeitura" readonly="true" value="#{cc.attrs.salaAulaBlackboardVO.idSalaAulaBlackboard}" />
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="col-md-8">
								<h:outputText value="Turma" styleClass="field control-label tituloCampos" />
								<h:inputText size="72" styleClass="form-control camposSomenteLeitura" readonly="true" value="#{cc.attrs.salaAulaBlackboardVO.turmaVO.identificadorTurma}" />
							</h:panelGroup>
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="row" rendered="#{cc.attrs.salaAulaBlackboardVO.codigo eq 0}">
							<h:panelGroup layout="block" styleClass="col-md-12">
								<h:outputText value="Turma" styleClass="field control-label tituloCampos" />
								<h:inputText size="72" styleClass="form-control camposSomenteLeitura" readonly="true" value="#{cc.attrs.salaAulaBlackboardVO.turmaVO.identificadorTurma}" />
							</h:panelGroup>
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="row">
							<h:panelGroup layout="block" styleClass="col-md-12">
								<h:outputText value="Disciplina" styleClass="field control-label tituloCampos" />
								<h:inputText size="72" styleClass="form-control camposSomenteLeitura" readonly="true" value="#{cc.attrs.salaAulaBlackboardVO.disciplinaVO.nome}" />
							</h:panelGroup>
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="row">
							<h:panelGroup layout="block" styleClass="col-md-12 text-center m5">
								<otm:commandImage id="btnGravarSalaAulaBlackboard" action="#{cc.attrs.bean.realizarGeracaoSalaAulaBlackboard}" render="panelGroupSalaAulaBlackboard" value="Gerar Sala Aula Blackboard" rendered="#{cc.attrs.salaAulaBlackboardVO.codigo eq 0 and cc.attrs.permitirBtnGravarSalaAulaBlackboard}" image="#{resource['/imagens/blackboard_logo.png']}" style="margin-left:5px" />
								<otm:commandImage id="btnEntrarSalaAulaBlackboard" value="Entrar" tooltip="Realizar login na Sala Aula Blackboard" rendered="#{cc.attrs.salaAulaBlackboardVO.codigo ne 0}" image="#{resource['/imagens/blackboard_logo.png']}" style="margin-left:5px;" oncomplete="navegacaoIde('#{cc.attrs.salaAulaBlackboardVO.linkSalaAulaBlackboard}')" />
								<otm:commandButton id="btnBuscarAlunoSalaAulaBlackboard" rendered="#{cc.attrs.salaAulaBlackboardVO.codigo ne 0}" icon="#{msg_botoes.btn_icon_lupa_embutido}" value="Buscar Alunos" oncomplete="#{rich:component('panelBlackboardAlunos')}.show()" render="formBlackboardAlunos" action="#{cc.attrs.bean.realizarBuscaAlunoBlackboard}" styleClass="btn btn-default" style="margin-left:5px" />
								<otm:commandButton id="btnAtualizarSalaAulaBlackboard" rendered="#{cc.attrs.salaAulaBlackboardVO.codigo ne 0}" tooltip="Realizar a Atualização dos Dados do Blackboard" icon="#{msg_botoes.btn_icon_atualizar_embutido}" value="Atualizar" render="panelGroupSalaAulaBlackboard" action="#{cc.attrs.bean.realizarAtualizacaoBlackboard}" styleClass="btn btn-default btn-atualizar" style="margin-left:5px" />
								<otm:commandButton id="btnAtualizarAlunosSalaAulaBlackboard" rendered="#{cc.attrs.salaAulaBlackboardVO.codigo ne 0}" tooltip="Realizar a Atualização dos Dados dos Alunos do Blackboard" icon="#{msg_botoes.btn_icon_atualizar_embutido}" value="Atualizar Alunos" render="panelGroupSalaAulaBlackboard" action="#{cc.attrs.bean.realizarAtualizacaoAlunoBlackboard}" styleClass="btn btn-default btn-atualizar" style="margin-left:10px" />
								<otm:commandButton id="btnExcluirSalaAulaBlackboard" rendered="#{cc.attrs.salaAulaBlackboardVO.codigo ne 0}" oncomplete="#{rich:component('panelExcluirBlackboard')}.show();" render="formExcluirBlackboard" value="Excluir" styleClass="btn btn-danger" icon="#{msg_botoes.btn_icon_remver_embutido}" style="margin-left:5px" />
								<otm:commandButton id="btnFecharSalaAulaBlackboard" value="Fechar" onclick="#{rich:component('panelSalaAulaBlackboard')}.hide();" icon="#{msg_botoes.btn_icon_fechar_embutido}" render="#{cc.attrs.retornoRender}" styleClass="btn btn-dark" style="margin-left:10px" />
							</h:panelGroup>
						</h:panelGroup>
					</h:panelGroup>
					<h:panelGroup id="panelMsgBlackboard" layout="block" styleClass="pn col-md-12 text-left mt10 mb10">
						<otm:mensagem bean="#{cc.attrs.bean}"></otm:mensagem>
					</h:panelGroup>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>

		<rich:popupPanel id="panelExcluirBlackboard" shadowOpacity="true" width="400">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="Excluir Sala de Aula  Blackboard"></h:outputText>
				</h:panelGroup>
			</f:facet>
			<h:form id="formExcluirBlackboard">
				<h:panelGroup layout="block" styleClass="row">
					<h:panelGroup layout="block" styleClass="row">
						<h:panelGroup layout="block" styleClass="col-md-12">
							<h:outputText value="Confirma a Exclusão?" styleClass="field control-label tituloCampos" />
						</h:panelGroup>
					</h:panelGroup>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="row mt10 mb10 text-center">
					<otm:commandButton value="Sim" render="formSalaAulaBlackboard,formExcluirBlackboard" oncomplete="#{rich:component('panelExcluirBlackboard')}.hide();" styleClass="btn btn-danger btn-sim" icon="#{msg_botoes.btn_icon_remver_embutido}"  action="#{cc.attrs.bean.excluirBlackboard}" rendered="#{cc.attrs.permitirBtnGravarSalaAulaBlackboard}" />
					<otm:commandButton value="Sim" render="formSalaAulaBlackboard,formExcluirBlackboard, #{cc.attrs.retornoRender}" onclick="#{rich:component('panelExcluirBlackboard')}.hide();#{rich:component('panelSalaAulaBlackboard')}.hide();" styleClass="btn btn-danger btn-sim" icon="#{msg_botoes.btn_icon_remver_embutido}"  action="#{cc.attrs.bean.excluirBlackboard}" rendered="#{!cc.attrs.permitirBtnGravarSalaAulaBlackboard}" />
					<otm:commandButton value="Não" render="formSalaAulaBlackboard,formExcluirBlackboard" oncomplete="#{rich:component('panelExcluirBlackboard')}.hide();" styleClass="btn btn-dark btn-nao ml10" icon="#{msg_botoes.btn_icon_cancelar_embutido}" />

				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
		
		



		<rich:popupPanel id="panelBlackboardAlunos" shadowOpacity="true" width="800" height="800">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="Blackboard Alunos"></h:outputText>
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['/imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelinkpanelBlackboardAlunos" />
					<rich:componentControl target="panelBlackboardAlunos" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formBlackboardAlunos">
				<h:panelGroup columns="1" width="100%" columnClasses="colunaEsquerda" styleClass="tabForm">
				
					<h:panelGroup layout="block" styleClass="col-md-12 text-center m5" rendered="#{empty cc.attrs.salaAulaBlackboardVO.listaAlunos}">
						<h:outputText value="Não foi localizado nenhum aluno para essa sala aula."></h:outputText>
					</h:panelGroup>
					
					<rich:dataTable id="listaBlackboardAlunos" width="100%" columnClasses="colunaAlinhamento" rows="10" rendered="#{!empty cc.attrs.salaAulaBlackboardVO.listaAlunos}" value="#{cc.attrs.salaAulaBlackboardVO.listaAlunos}" var="salaAulaBlackboardPessoaItens">
						<f:facet name="header">
							<h:outputText value="Lista dos Estudantes" />
						</f:facet>
						<rich:column filterType="custom" filter="#{FilterFactory.filter('matricula', 'matricula', 'TEXTO')}">							
							<f:facet name="header">
								<h:panelGroup layout="block" style="width:100%">
									<h:outputText value="#{msg_aplic.prt_MatriculaPeriodo_matricula}" />
								</h:panelGroup>
								<h:panelGroup layout="block" style="width:100%">
									<h:inputText styleClass="form-control campos" size="12" value="#{FilterFactory.filter('matricula', 'matricula', 'TEXTO').filtro}">
										<a4j:ajax event="change" execute="@this" render="listaBlackboardAlunos, paginadorlistaBlackboardAlunos" />
									</h:inputText>
									<a4j:commandButton render="listaBlackboardAlunos, paginadorlistaBlackboardAlunos" styleClass="botoes" image="#{resource['/imagens/limpar.gif']}" action="#{FilterFactory.limparFiltro('matricula')}" value="Limpar">
										<rich:tooltip value="Limpar Filtro" />
									</a4j:commandButton>
								</h:panelGroup>
							</f:facet>
							<h:outputText value="#{salaAulaBlackboardPessoaItens.matricula}" />
						</rich:column>
						<rich:column filterType="custom" filter="#{FilterFactory.filter('pessoaVO_nome', 'pessoaEmailInstitucionalVO.pessoaVO.nome', 'TEXTO')}">
							<f:facet name="header">
								<h:panelGroup layout="block" style="width:100%">
									<h:outputText value="#{msg_aplic.prt_MatriculaPeriodo_aluno}" />
								</h:panelGroup>
								<h:panelGroup layout="block" style="width:100%">
									<h:inputText styleClass="form-control campos" size="12" value="#{FilterFactory.filter('pessoaVO_nome', 'pessoaEmailInstitucionalVO.pessoaVO.nome', 'TEXTO').filtro}">
										<a4j:ajax event="change" execute="@this" render="listaBlackboardAlunos, paginadorlistaBlackboardAlunos" />
									</h:inputText>
									<a4j:commandButton render="listaBlackboardAlunos, paginadorlistaBlackboardAlunos" styleClass="botoes" image="#{resource['/imagens/limpar.gif']}" action="#{FilterFactory.limparFiltro('pessoaVO_nome')}" value="Limpar">
										<rich:tooltip value="Limpar Filtro" />
									</a4j:commandButton>
								</h:panelGroup>
							</f:facet>
							<h:outputText value="#{salaAulaBlackboardPessoaItens.pessoaEmailInstitucionalVO.pessoaVO.nome}" />
						</rich:column>
						<rich:column filterType="custom" filter="#{FilterFactory.filter('pessoaEmailInstitucionalVO.email', 'pessoaEmailInstitucionalVO.email', 'TEXTO')}">							
							<f:facet name="header">
								<h:panelGroup layout="block" style="width:100%">
									<h:outputText value="#{msg_aplic.prt_Filiacao_email}" />
								</h:panelGroup>
								<h:panelGroup layout="block" style="width:100%">
									<h:inputText styleClass="form-control campos" size="12" value="#{FilterFactory.filter('pessoaEmailInstitucionalVO.email', 'pessoaEmailInstitucionalVO.email', 'TEXTO').filtro}">
										<a4j:ajax event="change" execute="@this" render="listaBlackboardAlunos, paginadorlistaBlackboardAlunos" />
									</h:inputText>
									<a4j:commandButton render="listaBlackboardAlunos, paginadorlistaBlackboardAlunos" styleClass="botoes" image="#{resource['/imagens/limpar.gif']}" action="#{FilterFactory.limparFiltro('email')}" value="Limpar">
										<rich:tooltip value="Limpar Filtro" />
									</a4j:commandButton>
								</h:panelGroup>
							</f:facet>
							<h:outputText value="#{salaAulaBlackboardPessoaItens.pessoaEmailInstitucionalVO.email}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:panelGroup layout="block">
									<h:outputText value="Alunos Confirmados" />
									<h:commandButton id="helpAlunosConfirmados" image="#{resource['V2/imagens/70.png']}" />
									<rich:tooltip followMouse="true" style="width:350px; height:100px;" target="helpAlunosConfirmados" showDelay="500">
										<h:panelGroup columns="1" columnClasses="colunaEsquerda, tituloCamposReduzidos">
											<h:panelGroup layout="block">
												<otm:spacer width="1px" />
												<h:outputText styleClass="tituloCamposReduzidos" value="Caso algum alunos não esteja na Sala de Aula você poderá enviar um convite manualmente para que ele participe da sala." />
											</h:panelGroup>
										</h:panelGroup>
									</rich:tooltip>
								</h:panelGroup>
							</f:facet>
							<h:outputText value="#{salaAulaBlackboardPessoaItens.pessoaEmailInstitucionalVO.pessoaEmailInstitucionalTexto}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_botoes.btn_opcoes}" />
							</f:facet>
							<otm:commandIcon action="#{cc.attrs.bean.realizarEnvioConviteAlunoBlackboard}" render="formBlackboardAlunos" icon="#{msg_botoes.btn_icon_enviar_email} iconePequeno" tooltip="Enviar Convite Para o Aluno" />
						</rich:column>
						<f:facet name="footer">
							<div style="">
								<rich:dataScroller align="center" for="formBlackboardAlunos:listaBlackboardAlunos" id="paginadorlistaBlackboardAlunos" rendered="#{!empty cc.attrs.salaAulaBlackboardVO.listaAlunos}" boundaryControls="auto" stepControls="auto" fastControls="hide" />
							</div>
						</f:facet>
					</rich:dataTable>
					<h:panelGroup id="panelMsgBlackboardAluno" layout="block" styleClass="pn col-md-12 text-left mt10 mb10">
						<otm:mensagem bean="#{cc.attrs.bean}"></otm:mensagem>
					</h:panelGroup>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
		
		
		

	</h:panelGroup>
</composite:implementation>
</html>
