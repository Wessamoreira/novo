<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" xmlns:otm="http://java.sun.com/jsf/composite/otm" xmlns:otm2="http://www.otimize-ti.com.br"> <ui:component>

	<c:if test="#{empty id}">
		<c:set var="id" value="personalizacaoMensagemAutomatica"></c:set>
	</c:if>
	<c:if test="#{empty controleConsulta}">
		<c:set var="controleConsulta" value="controleConsultaCidade"></c:set>
	</c:if>
	<c:if test="#{empty personalizacaoMensagemAutomaticaVO}">
		<c:set var="personalizacaoMensagemAutomaticaVO" value="personalizacaoMensagemAutomaticaVO"></c:set>
	</c:if>

	<h:panelGroup layout="block" styleClass="row mn">
		<h:panelGroup layout="block" styleClass="col-md-6">
			<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_PersonalizacaoMensagemAutomatica_tamplate}" />
			<h:selectOneMenu id="#{id}_enum" styleClass="form-control camposSomenteLeitura" value="#{bean[personalizacaoMensagemAutomaticaVO].templateMensagemAutomaticaEnum}" disabled="true">
				<f:selectItems value="#{bean.listaSelectItemTemplateMensagemAutomaticaEnum}" />
				<a4j:ajax event="change" render="form" execute="form" />
			</h:selectOneMenu>
		</h:panelGroup>
		<h:panelGroup layout="block" styleClass="col-md-6">
			<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_PersonalizacaoMensagemAutomatica_assunto}" />
			<h:inputText id="#{id}_assunto" size="70" maxlength="100" styleClass="form-control #{bean[personalizacaoMensagemAutomaticaVO].viaTipoRequerimento ? 'camposObrigatorios' : 'campos'}" value="#{bean[personalizacaoMensagemAutomaticaVO].assunto}" />
		</h:panelGroup>
		<h:panelGroup layout="block" rendered="#{bean[personalizacaoMensagemAutomaticaVO].cursoVO.codigo != 0}" styleClass="col-md-6">
			<h:outputText styleClass="tituloCampos" value="Curso" />
			<h:inputText id="#{id}_curso" size="70" maxlength="100" readonly="true" styleClass="form-control campos" value="#{bean[personalizacaoMensagemAutomaticaVO].cursoVO.nome}" />
		</h:panelGroup>
		<h:panelGroup layout="block" styleClass="col-md-4">
			<h:outputText styleClass="tituloCampos" value="#{msg_aplic.prt_PersonalizacaoMensagemAutomatica_usuarioUltimaAlteracao}" />
			<h:inputText id="#{id}_usuarioAlteracao" size="70" maxlength="100" readonly="true" styleClass="form-control campos" value="#{bean[personalizacaoMensagemAutomaticaVO].usuarioUltimaAlteracao.nome}" />
		</h:panelGroup>
		<h:panelGroup layout="block" styleClass="col-md-2">
			<h:outputText styleClass="tituloCampos" value="#{msg_aplic.prt_PersonalizacaoMensagemAutomatica_dataAlteracao}" />
			<h:inputText id="#{id}_dataAlteracao" size="70" maxlength="100" readonly="true" styleClass="form-control campos" value="#{bean[personalizacaoMensagemAutomaticaVO].dataUltimaAlteracaoApresentar}" />
		</h:panelGroup>
		<h:panelGroup layout="block" styleClass="col-md-12" rendered="#{!bean[personalizacaoMensagemAutomaticaVO].viaTipoRequerimento}">
			<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_PersonalizacaoMensagemAutomatica_tags}" />
			<h:inputTextarea id="#{id}_tags" readonly="true" cols="70" rows="2" styleClass="form-control camposSomenteLeituraTextArea" value="#{bean[personalizacaoMensagemAutomaticaVO].templateMensagemAutomaticaEnum.tags_Apresentar}" />
		</h:panelGroup>
		<h:panelGroup layout="block" styleClass="col-md-12" rendered="#{bean[personalizacaoMensagemAutomaticaVO].viaTipoRequerimento}">
			<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_PersonalizacaoMensagemAutomatica_tags}" />
			<h:inputTextarea id="#{id}_tags_requerimento" readonly="true" cols="70" rows="2" styleClass="form-control camposSomenteLeituraTextArea" value="#{bean.getTagsMensagemAutomatica_Apresentar(bean[personalizacaoMensagemAutomaticaVO].templateMensagemAutomaticaEnum)}" />
		</h:panelGroup>
		<h:panelGroup layout="block" styleClass="col-md-12">
			<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_PersonalizacaoMensagemAutomatica_mensagem}" />
		</h:panelGroup>
		<h:panelGroup layout="block" styleClass="row mn">
			<rich:tabPanel id="#{id}_tabPanelBasico" activeTabClass="true" headerAlignment="left" switchType="client">
				<rich:tab id="#{id}_tabEmail" styleClass="richPanel" header="#{msg_aplic.prt_PersonalizacaoMensagemAutomatica_mensagem_email}">
					<h:panelGroup layout="block" styleClass="row mn">
						<h:panelGroup layout="block" styleClass="row">
							<h:panelGroup layout="block" styleClass="col-md-12">
								<otm:editor id="#{id}_mensagem" height="360" width="800" lang="pt" value="#{bean[personalizacaoMensagemAutomaticaVO].mensagem}">
								</otm:editor>
							</h:panelGroup>
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="row">
							<h:panelGroup layout="block" styleClass="col-md-2">
								<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_PersonalizacaoMensagemAutomatica_desabilitarEnvioMens}" />
								<h:panelGroup layout="block" styleClass="col-md-12 pn">
									<otm:selectBooleanCheckbox id="#{id}_chbModulo" value="#{bean[personalizacaoMensagemAutomaticaVO].desabilitarEnvioMensagemAutomatica}" />
								</h:panelGroup>
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="col-md-2">
								<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_ComunicacaoInterna_copiaFollowUp}" />
								<h:panelGroup layout="block" styleClass="col-md-12 pn">
									<otm:selectBooleanCheckbox id="#{id}_copiaFollowUp" value="#{bean[personalizacaoMensagemAutomaticaVO].copiaFollowUp}" />
								</h:panelGroup>
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="col-md-2">
								<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_ComunicacaoInterna_enviarPais}" />
								<h:panelGroup layout="block" styleClass="col-md-12 pn">
									<otm:selectBooleanCheckbox id="#{id}_enviarCopiaPais" value="#{bean[personalizacaoMensagemAutomaticaVO].enviarCopiaPais}" />
								</h:panelGroup>
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="col-md-2">
								<h:outputText id="#{id}_enviarEmailInstitucionalHelp" styleClass="field control-label tituloCampos" value="Enviar Email Institucional" />
								<h:panelGroup layout="block" styleClass="col-md-12 pn">
									<otm:selectBooleanCheckbox id="#{id}_enviarEmailInstitucional" value="#{bean[personalizacaoMensagemAutomaticaVO].enviarEmailInstitucional}" />
								</h:panelGroup>
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="col-md-2">
								<h:outputText styleClass="field control-label tituloCampos" value="Enviar Email " />
								<h:panelGroup layout="block" styleClass="col-md-12 pn">
									<otm:selectBooleanCheckbox id="#{id}_enviarEmail" value="#{bean[personalizacaoMensagemAutomaticaVO].enviarEmail}" />
								</h:panelGroup>
							</h:panelGroup>
						</h:panelGroup>
					</h:panelGroup>
				</rich:tab>
				<rich:tab id="#{id}_tabSMS" styleClass="richPanel" header="#{msg_aplic.prt_PersonalizacaoMensagemAutomatica_mensagem_sms}">
					<h:panelGroup layout="block" styleClass="row mn">
						<h:panelGroup layout="block" styleClass="row">
							<h:panelGroup layout="block" styleClass="col-md-3">
								<h:inputTextarea styleClass="form-control campos" cols="50" id="#{id}_mensagemSMS" rows="10" onkeyup="contar('form:mensagemSMS','form:contador', 150)" value="#{bean[personalizacaoMensagemAutomaticaVO].mensagemSMS}" />
								<h:inputText readonly="true" size="12" style="border:0px; background-color:transparent; color:red; text-align:left; font: 10pt 'Trebuchet MS', verdana, arial, helvetica, sans-serif;" value="#{bean[personalizacaoMensagemAutomaticaVO].count} de 150" styleClass="field control-label tituloCampos" id="#{id}_contador" />
							</h:panelGroup>
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="row">
							<h:panelGroup layout="block" styleClass="col-md-3">
								<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_PersonalizacaoMensagemAutomatica_desabilitarEnvioMensSMS}" />
								<otm:selectBooleanCheckbox id="#{id}_chbModuloSMS" value="#{bean[personalizacaoMensagemAutomaticaVO].desabilitarEnvioMensagemSMSAutomatica}" />
							</h:panelGroup>
						</h:panelGroup>
						<br />
					</h:panelGroup>
				</rich:tab>
				<rich:tab id="#{id}_tabUnidadeEnsino" oncomplete="" header="#{msg_aplic.prt_PersonalizacaoMensagemAutomatica_unidadeEnsino}" rendered="#{bean.apresentarFiltrosUnidadeEnsinoNivelEducacional}">
					<h:panelGroup layout="block" styleClass="row mn">
						<h:panelGroup id="#{id}_unidadeEnsinos">
							<h:panelGroup layout="block" styleClass="col-md-6">
								<h:panelGroup layout="block" styleClass="row mn border-bottom">
									<h:outputText styleClass="tituloCampos font-weight-bold" value="NÃ£o Selecionados" />
								</h:panelGroup>
								<div class="row mn overflow-auto" style="height: 450px">
									<rich:dataTable align="left" id="#{id}_dataTable_unidadeEnsinoNaoSelecionada" width="100%" var="unidadeEnsinoItens" value="#{bean[personalizacaoMensagemAutomaticaVO].personalizacaoMensagemAutomaticaUnidadeEnsinoVOs}">
										<rich:column filterType="custom" filter="#{FilterFactory.filter('#{id}_dataTable_unidadeEnsinoNaoSelecionada', 'unidadeEnsino.nome', 'TEXTO')}">
											<f:facet name="header">
												<h:panelGroup layout="block" styleClass="col-md-12 pn">
													<h:inputText styleClass="form-control campos" size="20" value="#{FilterFactory.filter('#{id}_dataTable_unidadeEnsinoNaoSelecionada', 'unidadeEnsino.nome', 'TEXTO').filtro}">
														<a4j:ajax event="change" execute="form" render="form" />
													</h:inputText>
													<span class="append-icon right">
														<a4j:commandLink render="#{id}_dataTable_unidadeEnsinoNaoSelecionada" icon="#{msg_botoes.btn_icon_limpar_embutido}" action="#{FilterFactory.limparFiltro('#{id}_dataTable_unidadeEnsinoNaoSelecionada')}">
															<i class="#{msg_botoes.btn_icon_limpar_embutido} fs14" />
															<rich:tooltip value="Limpar" zindex="10000" />
														</a4j:commandLink>
													</span>
												</h:panelGroup>
											</f:facet>
											<h:outputText value="#{unidadeEnsinoItens.unidadeEnsino.nome}" />
										</rich:column>
										<rich:column filterExpression="#{!unidadeEnsinoItens.unidadeEnsino.filtrarUnidadeEnsino}" filterType="custom">
											<f:facet name="header">
												<a4j:commandLink render="form:#{id}_tabUncountidadeEnsino" action="#{bean.marcarTodasUnidadesEnsinoAction}">
													<i class="fas fa-angle-double-right fs15 mt5 iconePequeno btn-white btn-info border-radius-all"></i>
													<f:setPropertyActionListener value="true" target="#{bean.marcarTodasUnidadeEnsino}" />
												</a4j:commandLink>
											</f:facet>
											<a4j:commandLink render="form:#{id}_tabUnidadeEnsino">
												<i class="fas fa-angle-right fs15 mt5 iconePequeno btn-white btn-info border-radius-all"></i>
												<f:setPropertyActionListener value="true" target="#{unidadeEnsinoItens.unidadeEnsino.filtrarUnidadeEnsino}" />
											</a4j:commandLink>
										</rich:column>
									</rich:dataTable>
								</div>
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="col-md-6">
								<h:panelGroup layout="block" styleClass="row mn border-bottom">
									<h:outputText styleClass="tituloCampos font-weight-bold" value="Selecionados" />
								</h:panelGroup>
								<div class="row mn overflow-auto" style="height: 450px">
									<rich:dataTable align="left" id="#{id}_dataTable_unidadeEnsinoSelecionada" width="100%" var="unidadeEnsinoItens" value="#{bean[personalizacaoMensagemAutomaticaVO].personalizacaoMensagemAutomaticaUnidadeEnsinoVOs}">
										<rich:column filterExpression="#{unidadeEnsinoItens.unidadeEnsino.filtrarUnidadeEnsino}" filterType="custom">
											<f:facet name="header">
												<a4j:commandLink render="form:#{id}_tabUnidadeEnsino" action="#{bean.marcarTodasUnidadesEnsinoAction}">
													<i class="fas fa-angle-double-left fs15 mt5 iconePequeno btn-white btn-info border-radius-all"></i>
													<f:setPropertyActionListener value="false" target="#{bean.marcarTodasUnidadeEnsino}" />
												</a4j:commandLink>
											</f:facet>
											<a4j:commandLink render="form:#{id}_tabUnidadeEnsino">
												<i class="fas fa-angle-left fs15 mt5 iconePequeno btn-white btn-info border-radius-all"></i>
												<f:setPropertyActionListener value="false" target="#{unidadeEnsinoItens.unidadeEnsino.filtrarUnidadeEnsino}" />
											</a4j:commandLink>
										</rich:column>
										<rich:column filterType="custom" filter="#{FilterFactory.filter('#{id}_dataTable_unidadeEnsinoSelecionada', 'unidadeEnsino.nome', 'TEXTO')}">
											<f:facet name="header">
												<h:panelGroup layout="block" styleClass="col-md-12 pn">
													<h:inputText styleClass="form-control campos" size="20" value="#{FilterFactory.filter('#{id}_dataTable_unidadeEnsinoSelecionada', 'unidadeEnsino.nome', 'TEXTO').filtro}">
														<a4j:ajax event="change" execute="form:#{id}_tabUnidadeEnsino" render="form:#{id}_tabUnidadeEnsino" />
													</h:inputText>
													<span class="append-icon right">
														<a4j:commandLink render="#{id}_dataTable_unidadeEnsinoSelecionada" icon="#{msg_botoes.btn_icon_limpar_embutido}" action="#{FilterFactory.limparFiltro('#{id}_dataTable_unidadeEnsinoSelecionada')}">
															<i class="#{msg_botoes.btn_icon_limpar_embutido} fs14" />
															<rich:tooltip value="Limpar" zindex="10000" />
														</a4j:commandLink>
													</span>
												</h:panelGroup>
											</f:facet>
											<h:outputText value="#{unidadeEnsinoItens.unidadeEnsino.nome}" />
										</rich:column>
									</rich:dataTable>
								</div>
							</h:panelGroup>
						</h:panelGroup>
					</h:panelGroup>
				</rich:tab>
				<rich:tab id="#{id}_tabFiltrosUnidadeEnsinoNivelEducacional" header="#{msg_aplic.prt_PersonalizacaoMensagemAutomatica_nivelEducacional}" rendered="#{bean.apresentarFiltrosUnidadeEnsinoNivelEducacional}">
					<h:panelGroup layout="block" styleClass="row mn">
						<otm2:panel name="#{id}_panel_tipoNivelEducacional" styleClassBody="row mn p5" styleClassHeader="row mn bg-gray-100 p10" stylePanel="margin-top: 5px; margin-bottom: 5px" styleClassFooter="dn" opened="true">
							<ui:define name="header">
								<h:outputText styleClass="tituloCampos font-weight-bold mr5" value="#{msg_aplic.prt_PersonalizacaoMensagemAutomatica_tipoNivelEducacional} - #{bean.isApresentarTextoCheckBoxMarcarDesmarcarTodosTiposNiveisEducacionais}" />
								<otm:selectBooleanCheckbox value="#{bean.marcarTodosNiveisEducacionais}">
									<a4j:ajax event="click" render="form" execute="form" listener="#{bean.realizarSelecaoCheckboxMarcarDesmarcarTodosNiveisEducacionais}" />
								</otm:selectBooleanCheckbox>
							</ui:define>
							<ui:define name="body">
								<h:panelGroup layout="block" styleClass="col-md-3">
									<h:outputText styleClass="field control-label tituloCampos btn-block" value="#{msg_aplic.prt_PersonalizacaoMensagemAutomatica_tipoNivelEducacionalInfantil}" />
									<otm:selectBooleanCheckbox value="#{bean[personalizacaoMensagemAutomaticaVO].nivelEducacionalInfantil}">
										<a4j:ajax event="click" execute="form:#{id}_panel_tipoNivelEducacional" />
									</otm:selectBooleanCheckbox>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-3">
									<h:outputText styleClass="field control-label tituloCampos btn-block" value="#{msg_aplic.prt_PersonalizacaoMensagemAutomatica_tipoNivelEducacionalBasico}" />
									<otm:selectBooleanCheckbox value="#{bean[personalizacaoMensagemAutomaticaVO].nivelEducacionalBasico}">
										<a4j:ajax event="click" execute="form:#{id}_panel_tipoNivelEducacional" />
									</otm:selectBooleanCheckbox>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-3">
									<h:outputText styleClass="field control-label tituloCampos btn-block" value="#{msg_aplic.prt_PersonalizacaoMensagemAutomatica_tipoNivelEducacionalMedio}" />
									<otm:selectBooleanCheckbox value="#{bean[personalizacaoMensagemAutomaticaVO].nivelEducacionalMedio}">
										<a4j:ajax event="click" execute="form:#{id}_panel_tipoNivelEducacional" />
									</otm:selectBooleanCheckbox>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-3">
									<h:outputText styleClass="field control-label tituloCampos btn-block" value="#{msg_aplic.prt_PersonalizacaoMensagemAutomatica_tipoNivelEducacionalExtensao}" />
									<otm:selectBooleanCheckbox value="#{bean[personalizacaoMensagemAutomaticaVO].nivelEducacionalExtensao}">
										<a4j:ajax event="click" execute="form:#{id}_panel_tipoNivelEducacional" />
									</otm:selectBooleanCheckbox>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-3">
									<h:outputText styleClass="field control-label tituloCampos btn-block" value="#{msg_aplic.prt_PersonalizacaoMensagemAutomatica_tipoNivelEducacionalSequencial}" />
									<otm:selectBooleanCheckbox value="#{bean[personalizacaoMensagemAutomaticaVO].nivelEducacionalSequencial}">
										<a4j:ajax event="click" execute="form:#{id}_panel_tipoNivelEducacional" />
									</otm:selectBooleanCheckbox>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-3">
									<h:outputText styleClass="field control-label tituloCampos btn-block" value="#{msg_aplic.prt_PersonalizacaoMensagemAutomatica_tipoNivelEducacionalGraduacaoTecnologica}" />
									<otm:selectBooleanCheckbox value="#{bean[personalizacaoMensagemAutomaticaVO].nivelEducacionalGraduacaoTecnologica}">
										<a4j:ajax event="click" execute="form:#{id}_panel_tipoNivelEducacional" />
									</otm:selectBooleanCheckbox>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-3">
									<h:outputText styleClass="field control-label tituloCampos btn-block" value="#{msg_aplic.prt_PersonalizacaoMensagemAutomatica_tipoNivelEducacionalSuperior}" />
									<otm:selectBooleanCheckbox value="#{bean[personalizacaoMensagemAutomaticaVO].nivelEducacionalSuperior}">
										<a4j:ajax event="click" execute="form:#{id}_panel_tipoNivelEducacional" />
									</otm:selectBooleanCheckbox>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-3">
									<h:outputText styleClass="field control-label tituloCampos btn-block" value="#{msg_aplic.prt_PersonalizacaoMensagemAutomatica_tipoNivelEducacionalPosGraduacao}" />
									<otm:selectBooleanCheckbox value="#{bean[personalizacaoMensagemAutomaticaVO].nivelEducacionalPosGraduacao}">
										<a4j:ajax event="click" execute="form:#{id}_panel_tipoNivelEducacional" />
									</otm:selectBooleanCheckbox>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-3">
									<h:outputText styleClass="field control-label tituloCampos btn-block" value="#{msg_aplic.prt_PersonalizacaoMensagemAutomatica_tipoNivelEducacionalMestrado}" />
									<otm:selectBooleanCheckbox value="#{bean[personalizacaoMensagemAutomaticaVO].nivelEducacionalMestrado}">
										<a4j:ajax event="click" execute="form:#{id}_panel_tipoNivelEducacional" />
									</otm:selectBooleanCheckbox>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-3">
									<h:outputText styleClass="field control-label tituloCampos btn-block" value="#{msg_aplic.prt_PersonalizacaoMensagemAutomatica_tipoNivelEducacionalProfissionalizante}" />
									<otm:selectBooleanCheckbox value="#{bean[personalizacaoMensagemAutomaticaVO].nivelEducacionalProfissionalizante}">
										<a4j:ajax event="click" execute="form:#{id}_panel_tipoNivelEducacional" />
									</otm:selectBooleanCheckbox>
								</h:panelGroup>
							</ui:define>
						</otm2:panel>
					</h:panelGroup>
				</rich:tab>
			</rich:tabPanel>
		</h:panelGroup>
		<h:panelGroup layout="block" styleClass="row mn" rendered="#{!bean[personalizacaoMensagemAutomaticaVO].viaTipoRequerimento}">
			<otm:mensagem bean="#{bean}"></otm:mensagem>
		</h:panelGroup>
	</h:panelGroup>
</ui:component> </html>