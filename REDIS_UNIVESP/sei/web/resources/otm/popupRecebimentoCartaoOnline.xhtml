<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:rich="http://richfaces.org/rich" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:a4j="http://richfaces.org/a4j" xmlns:otm="http://java.sun.com/jsf/composite/otm">
<ui:component>

	<style>
.rf-dg-c {
	border-bottom: none;
	border-right: none;
}

.rf-dg {
	border-left: none;
	border-top: none;
}

td.colunaVerticalmenteAlinhada {
	text-align: left;
	vertical-align: middle;
}

.modalMaximizado {
	width: 80% !important;
	height: 80% !important;
}

.modalMaximizado100 {
	width: 99% !important;
	height: 99% !important;
	max-width: 99% !important;
	max-height: 99% !important;
	top: 3px !important;;
	left: 3px !important;
}
</style>

	<rich:popupPanel styleClass="modalMaximizado50" id="panelConfirmacaoRecorrencia" shadowOpacity="true" width="500" height="180">
		<f:facet name="header">
			<h:panelGroup>
				<h:outputText value="Aviso" />
			</h:panelGroup>
		</f:facet>
		<f:facet name="controls">
			<h:panelGroup>
				<h:graphicImage value="#{resource['/imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hideConfirmacaoRecorrencia" />
				<rich:componentControl target="panelConfirmacaoRecorrencia" operation="hide" event="click" />
			</h:panelGroup>
		</f:facet>
		<h:form id="formConfirmacaoRecorrencia">
			<span class="#{msg_botoes.btn_icon_aviso_embutido} text-warning mr5 fs14"></span>
			<h:outputText styleClass="tituloCamposReduzidos" value="#{bean.negociacaoRecebimentoVO.configuracaoRecebimentoCartaoOnlineVO.mensagemConfirmacaoRecorrencia}" />
			<h:panelGroup layout="block" styleClass="barra-btn-flutuante-modal-50">
				<otm:commandButton value="Realizar Recebimento" action="#{bean.finalizarMensagemConfirmacaoRecorrenciaApresentada}" oncomplete="#{rich:component('panelConfirmacaoRecorrencia')}.hide()" render="panelGridMensagens, formConfirmacaoPagamento, formPagamento, formConfirmacaoRecorrencia, panelPagamento, form" styleClass="btn btn-info" icon="#{msg_botoes.btn_icon_confirmar_embutido}" />
			</h:panelGroup>
		</h:form>
	</rich:popupPanel>

	<style>
.modalMaximizado80 {
	width: 84% !important;
	height: 90% !important;
	max-width: 80% !important;
	max-height: 90% !important;
	top: 2% !important;
	left: 13% !important;
}

.styleInput {
	display: block;
	width: 100%;
	height: 19px;
	font-size: .875rem;
	font-weight: 400;
	line-height: 1.5;
	color: #6c757d;
	background-color: #fff;
	background-clip: padding-box;
	border: 1px solid #ced4da;
	border-radius: .2rem;
	transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;
}

.barra-flutuante-modal-cartao {
	position: fixed;
	width: 80%;
	background-color: #dedede;
	padding: 10px 5px 5px 5px;
	left: 13%;
	border-radius: 0px 0px 10px 10px;
	margin: 0 auto;
	bottom: 2%;
	z-index: 1;
	text-align: center;
	min-height: 35px;
}
</style>

	<rich:popupPanel styleClass="modalMaximizado80" id="panelPagamento" resizeable="false" moveable="false" autosized="true" domElementAttachment="parent">
		<f:facet name="header">
			<h:panelGroup>
				<h:outputText value="Escolha a forma de pagamento" />
			</h:panelGroup>
		</f:facet>
		<f:facet name="controls">
			<h:panelGroup>
				<h:graphicImage styleClass="icon-close-modal" value="#{resource['/imagens/close.png']}" style="cursor:pointer" id="hidePagamento" />
				<rich:componentControl target="panelPagamento" operation="hide" event="click" />
			</h:panelGroup>
		</f:facet>
		<h:form id="formPagamento">
			<h:panelGroup layout="block" styleClass="row mn">
				<!-- 					<h:selectOneRadio rendered="#{bean.configuracaoRecebimentoCartaoOnlineVO.permitirCartao eq 'AMBOS'}" value="#{bean.tipoCartao}" layout="pageDirection"> -->
				<!-- 						<f:selectItem itemValue="CARTAO_DEBITO" itemLabel="Cartão de Débito" /> -->
				<!-- 						<f:selectItem itemValue="CARTAO_CREDITO" itemLabel="Cartão de Crédito"  /> -->
				<!-- 						<a4j:ajax execute="gridCartoes" event="click" render="gridCartoes" listener="#{bean.selecionarTipoCartao}" /> -->
				<!-- 					</h:selectOneRadio> -->
				<h:selectOneRadio disabledClass="tituloCampos ml5 mr10" enabledClass="tituloCampos ml5 mr10" rendered="#{bean.configuracaoRecebimentoCartaoOnlineVO.permitirCartao eq 'CREDITO'}" value="#{bean.tipoCartao}" layout="pageDirection">
					<f:selectItem itemValue="CARTAO_CREDITO" itemLabel="Cartão de Crédito" />
				</h:selectOneRadio>
				<!-- 					<h:selectOneRadio rendered="#{bean.configuracaoRecebimentoCartaoOnlineVO.permitirCartao eq 'DEBITO'}" value="#{bean.tipoCartao}" layout="pageDirection"> -->
				<!-- 						<f:selectItem itemValue="CARTAO_DEBITO" itemLabel="Cartão de Débito" /> -->
				<!-- 					</h:selectOneRadio> -->
				<h:panelGroup layout="block" styleClass="row mn border rounded p5" id="gridCartoes">
					<a4j:repeat id="cartoes" value="#{bean.configuracaoFinanceiroCartaoVOs}" var="itemConfiguracaoFinanceiroCartao">
						<a4j:commandLink title="Adicionar Cartão" rendered="#{!itemConfiguracaoFinanceiroCartao.boletoBancario}" render="formPagamento" action="#{bean.adicionarNovoCartaoCredito}">
							<h:panelGroup layout="block" styleClass="col-md-2 pn text-center border rounded" style="padding-bottom: 5px !important; width: 16%; margin-right: 5px;" rendered="#{itemConfiguracaoFinanceiroCartao.operadoraCartaoVO.operadoraCartaoCreditoEnum.bandeira ne null}">
								<h:panelGroup layout="block" styleClass="col-md-12 pn border rounded-top bg-gray mb5" style="padding: 5px !important">
									<h:outputText styleClass="tituloCamposReduzidosNegrito" rendered="#{!itemConfiguracaoFinanceiroCartao.boletoBancario}" value="#{itemConfiguracaoFinanceiroCartao.operadoraCartaoVO.nome}" />
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-12 pn">
									<h:graphicImage style="max-height:38px;max-width:70px" value="../resources/imagens/cartao/#{itemConfiguracaoFinanceiroCartao.operadoraCartaoVO.operadoraCartaoCreditoEnum.caminhoImagem}" />
								</h:panelGroup>
							</h:panelGroup>
						</a4j:commandLink>
					</a4j:repeat>
					<rich:dataScroller for="cartoes" rendered="#{bean.isExibirScrollCartoes}" stepControls="auto" fastControls="hide" />
				</h:panelGroup>
			</h:panelGroup>

			<h:panelGroup rendered="#{!empty bean.negociacaoRecebimentoVO.formaPagamentoNegociacaoRecebimentoVOs}">
				<hr class="col-md-12"></hr>
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="row mn" rendered="#{!empty bean.negociacaoRecebimentoVO.formaPagamentoNegociacaoRecebimentoVOs}">
				<a4j:repeat id="items" value="#{bean.negociacaoRecebimentoVO.formaPagamentoNegociacaoRecebimentoVOs}" var="formaPagamentoItens" rendered="#{!empty bean.negociacaoRecebimentoVO.formaPagamentoNegociacaoRecebimentoVOs}">
					<h:panelGroup layout="block" styleClass="row mn border rounded pb5" style="margin-bottom: 10px !important">
						<h:panelGroup layout="block" styleClass="row mn border rounded-top bg-gray p5" style="margin-bottom: 5px !important">
							<h:outputText styleClass="font-weight-bold mr5" value="Cartão #{formaPagamentoItens.quantidadeCartao}&nbsp;&nbsp;&nbsp;&nbsp;" />
							<h:outputText styleClass="font-weight-bold mr5" rendered="#{formaPagamentoItens.formaPagamentoNegociacaoRecebimentoCartaoCreditoVO.splitRealizado}" value="Parcela #{formaPagamentoItens.formaPagamentoNegociacaoRecebimentoCartaoCreditoVO.numeroParcela}" />
							<h:panelGroup id="panelUtilizacaoRecorrencia">
								<h:outputText styleClass="tituloCampos mr5" value="#{msg_aplic.prt_ConfiguracaoRecebimentoCartaoOnline_utilizarCartaoComoPagamentoRecorrenteProximasParcelas}" />
								<otm:selectBooleanCheckbox id="utilizarCartaoComoPagamentoRecorrenteProximaParcela" value="#{formaPagamentoItens.utilizarCartaoComoPagamentoRecorrenteProximaParcela}">
									<a4j:ajax event="click" render="panelUtilizacaoRecorrencia, panelOpcoesUtilizacaoRecorrencia, panelConfirmacaoRecorrencia, panelOpcoesUtilizacaoRecorrenciaCampos, panelGroupOrientacaoRecorrencia"></a4j:ajax>
								</otm:selectBooleanCheckbox>
							</h:panelGroup>
							<otm:commandIcon tooltip="Remover Cartão de Crédito" style="float:right" render="formPagamento" action="#{bean.removerCartaoCredito}" icon="#{msg_botoes.btn_icon_fechar_embutido} text-danger" styleIcon="font-size: 15px" />
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="col-md-6 pn">

							<h:panelGroup layout="block" styleClass="col-md-12 border-bottom mb5" style="padding-bottom: 5px !important">
								<h:outputText styleClass="tituloCampos" value="Frente" />
							</h:panelGroup>

							<h:panelGroup layout="block" styleClass="row mn border rounded p5" style="background-color:#222f3e; width: 67%; margin-left: 10px !important; margin-left: 10px !important; height: 162px;">
								<h:panelGroup layout="block" styleClass="col-md-12 pn mb5" style="border-bottom: solid 1px #455465; padding-bottom: 7px !important; margin-bottom: 10px !important;">
									<h:panelGroup layout="block" styleClass="col-md-6">
										<h:graphicImage style="float:left;width:48px;" url="../resources/imagens/cartao/chip.png" />
									</h:panelGroup>
									<h:panelGroup layout="block" styleClass="col-md-6">
										<h:outputText style="float:right;color:#dcdde1;font-weight:bold;font-size:14px" value="#{formaPagamentoItens.operadoraCartaoVO.tipoApresentarReduzido}" />
									</h:panelGroup>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-12 pn mb5" id="numeroCartaoCredito">
									<h:panelGroup layout="block" styleClass="col-md-2 mr10">
										<h:outputText style="float:left;color:#dcdde1;font-size:12px" value="Número&nbsp;" />
									</h:panelGroup>
									<h:panelGroup layout="block" styleClass="col-md-9">
										<h:inputText maxlength="20" size="20" style="color:#dcdde1;background-color:transparent;" styleClass="styleInput campos" onkeydown="aceitarSomenteValorNumerico(this)" disabled="#{formaPagamentoItens.formaPagamentoNegociacaoRecebimentoCartaoCreditoVO.splitRealizado}" value="#{formaPagamentoItens.formaPagamentoNegociacaoRecebimentoCartaoCreditoVO.numeroCartao}">
											<a4j:ajax event="change" render="numeroCartaoCredito, formPagamento:panelGridMensagens" listener="#{bean.validarNumeroCartaoCredito}" />
										</h:inputText>
									</h:panelGroup>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-12 pn mb5" id="mesValidade">
									<h:panelGroup layout="block" styleClass="col-md-2 mr10">
										<h:outputText style="float:left;color:#dcdde1;font-size:12px" value="Validade" />
									</h:panelGroup>
									<h:panelGroup layout="block" styleClass="col-md-2 mr5">
										<h:selectOneMenu style="color:#dcdde1;background-color:transparent" styleClass="styleInput campos" disabled="#{formaPagamentoItens.formaPagamentoNegociacaoRecebimentoCartaoCreditoVO.splitRealizado}" value="#{formaPagamentoItens.formaPagamentoNegociacaoRecebimentoCartaoCreditoVO.mesValidade}">
											<f:selectItems value="#{formaPagamentoItens.formaPagamentoNegociacaoRecebimentoCartaoCreditoVO.listaSelectItemMesValidade}" />
										</h:selectOneMenu>
									</h:panelGroup>
									<h:panelGroup layout="block" styleClass="col-md-7">
										<h:panelGroup layout="block" styleClass="col-md-1 mr10">
											<h:outputText style="color:#dcdde1" styleClass="tituloCampos" value="/" />
										</h:panelGroup>
										<h:panelGroup layout="block" styleClass="col-md-5">
											<h:selectOneMenu style="color:#dcdde1;background-color:transparent" styleClass="styleInput campos" disabled="#{formaPagamentoItens.formaPagamentoNegociacaoRecebimentoCartaoCreditoVO.splitRealizado}" value="#{formaPagamentoItens.formaPagamentoNegociacaoRecebimentoCartaoCreditoVO.anoValidade}">
												<f:selectItems value="#{formaPagamentoItens.formaPagamentoNegociacaoRecebimentoCartaoCreditoVO.listaSelectItemAnoValidade}" />
											</h:selectOneMenu>
										</h:panelGroup>
									</h:panelGroup>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-10 pn" id="nomeCartaoCredito">
									<h:panelGroup layout="block" styleClass="col-md-2 mr20">
										<h:outputText style="float:left;color:#dcdde1;font-size:12px" value="Nome&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" />
									</h:panelGroup>
									<h:panelGroup layout="block" styleClass="col-md-9">
										<h:inputText size="20" style="color:#dcdde1;background-color:transparent;" styleClass="styleInput campos" disabled="#{formaPagamentoItens.formaPagamentoNegociacaoRecebimentoCartaoCreditoVO.splitRealizado}" value="#{formaPagamentoItens.formaPagamentoNegociacaoRecebimentoCartaoCreditoVO.nomeCartaoCredito}">
											<a4j:ajax event="change" render="nomeCartaoCredito" />
										</h:inputText>
									</h:panelGroup>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-2">
									<h:graphicImage style="max-height:32px;max-width:70px;float: right" url="../resources/imagens/cartao/#{formaPagamentoItens.formaPagamentoNegociacaoRecebimentoCartaoCreditoVO.configuracaoFinanceiroCartaoVO.operadoraCartaoVO.operadoraCartaoCreditoEnum.caminhoImagem}" />
								</h:panelGroup>
							</h:panelGroup>

						</h:panelGroup>

						<h:panelGroup layout="block" styleClass="col-md-6">
							<h:panelGroup layout="block" styleClass="col-md-12 border-bottom mb5" style="padding-bottom: 5px !important">
								<h:outputText styleClass="tituloCampos" value="Verso" />
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="row mn border rounded p5" style="background-color:#222f3e; width: 67%; margin-left: 10px !important; margin-left: 10px !important; height: 162px;">
								<h:panelGroup layout="block" styleClass="row mn bg-dark rounded" style="border: 1px solid #000000 !important; background-color: #000000 !important; height: 24px; margin-top: 5px !important;" />
								<h:panelGroup layout="block" styleClass="col-md-12 pn mt10">
									<h:panelGroup layout="block" styleClass="col-md-2 mr5">
										<h:outputText style="color:#dcdde1;font-size:12px" value="CV" />
									</h:panelGroup>
									<h:panelGroup layout="block" styleClass="col-md-4" id="codigoVerificacao">
										<h:inputText maxlength="4" size="4" onkeydown="aceitarSomenteValorDecimal(this)" style="color:#dcdde1;background-color:transparent;" styleClass="styleInput campos" disabled="#{formaPagamentoItens.formaPagamentoNegociacaoRecebimentoCartaoCreditoVO.splitRealizado}" value="#{formaPagamentoItens.formaPagamentoNegociacaoRecebimentoCartaoCreditoVO.codigoVerificacao}" />
									</h:panelGroup>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-12 mt10" />
								<h:panelGroup layout="block" styleClass="col-md-12 text-left mt10" style="top: 26px;">
									<h:graphicImage style="float:left;max-height:32px;max-width:70px;" url="../resources/imagens/cartao/#{formaPagamentoItens.formaPagamentoNegociacaoRecebimentoCartaoCreditoVO.configuracaoFinanceiroCartaoVO.operadoraCartaoVO.operadoraCartaoCreditoEnum.caminhoImagem}" />
								</h:panelGroup>
							</h:panelGroup>
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="col-md-12" />
						<h:panelGroup layout="block" styleClass="col-md-2" id="valorRecebimento">
							<h:outputText styleClass="tituloCampos" value="#{msg_aplic.prt_FormaPagamentoNegociacaoRecebimento_valorRecebimento}" />
							<h:inputText id="valor" size="10" styleClass="form-control camposObrigatorios" onkeydown="aceitarSomenteValorDecimal(this)" disabled="#{formaPagamentoItens.formaPagamentoNegociacaoRecebimentoCartaoCreditoVO.splitRealizado}" value="#{formaPagamentoItens.valorRecebimento}">
								<f:converter converterId="FormatadorNumerico" />
								<a4j:ajax event="change" render="footerPagamento, items, panelGridMensagens" execute="footerPagamento, items, panelGridMensagens" listener="#{bean.calcularTotalPago}" />
							</h:inputText>
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="col-md-2">
							<h:outputText styleClass="tituloCampos" value="Parcelar em" rendered="#{formaPagamentoItens.exibirParcelas}" />
							<h:selectOneMenu styleClass="form-control campos" value="#{formaPagamentoItens.qtdeParcelasCartaoCredito}" rendered="#{formaPagamentoItens.exibirParcelas}">
								<f:selectItems value="#{formaPagamentoItens.listaSelectItemParcelas}" />
							</h:selectOneMenu>
						</h:panelGroup>
						<h:panelGroup id="panelOpcoesUtilizacaoRecorrencia">
							<h:panelGroup layout="block" styleClass="col-md-3" rendered="#{formaPagamentoItens.utilizarCartaoComoPagamentoRecorrenteProximaParcela}">
								<h:outputText styleClass="tituloCampos" value="#{msg_aplic.prt_ConfiguracaoRecebimentoCartaoOnline_formaPadraoPagamentoAutomaticoParcela}" />
								<h:selectOneMenu styleClass="form-control camposObrigatorios" id="formaPadraoDataBaseCartaoRecorrente" value="#{formaPagamentoItens.formaPadraoPagamentoAutomaticoParcelaRecorrencia}">
									<f:selectItems value="#{bean.comboBoxConsultaComboFormaPadraoDataBaseCartaoRecorrente}" />
									<a4j:ajax event="change" render="panelOpcoesUtilizacaoRecorrencia, panelOpcoesUtilizacaoRecorrenciaCampos"></a4j:ajax>
								</h:selectOneMenu>
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="col-md-2" rendered="#{formaPagamentoItens.utilizarCartaoComoPagamentoRecorrenteProximaParcela and formaPagamentoItens.formaPadraoPagamentoAutomaticoParcelaRecorrencia eq 'DIA_FIXO'}">
								<h:outputText styleClass="tituloCampos" value="#{msg_aplic.prt_ConfiguracaoRecebimentoCartaoOnline_diaPadraoPagamento}" />
								<h:inputText styleClass="form-control camposObrigatorios" maxlength="2" onkeydown="aceitarSomenteValorNumerico(this)" size="20" value="#{formaPagamentoItens.diaPadraoPagamentoRecorrencia}">
									<a4j:ajax event="change" render="panelOpcoesUtilizacaoRecorrenciaCampos" listener="#{formaPagamentoItens.validarDiaPagamentoRecorrencia}"></a4j:ajax>
								</h:inputText>
							</h:panelGroup>
						</h:panelGroup>
					</h:panelGroup>
				</a4j:repeat>
			</h:panelGroup>
			<h:panelGroup id="panelGroupOrientacaoRecorrencia">
				<h:panelGroup layout="block" styleClass="col-md-12" rendered="#{bean.negociacaoRecebimentoVO.apresentarOrientacaoDCC}">
					<h:outputText styleClass="tituloCampos" value="#{msg_aplic.prt_ConfiguracaoRecebimentoCartaoOnline_orientacaoRecorrenciaAluno}" />
					<h:inputTextarea styleClass="form-control camposSomenteLeitura" disabled="true" rows="2" value="#{bean.negociacaoRecebimentoVO.configuracaoRecebimentoCartaoOnlineVO.orientacaoRecorrenciaAluno}" />
				</h:panelGroup>
			</h:panelGroup>

			<h:panelGroup id="panelGridMensagens">
				<h:panelGroup layout="block" styleClass="row">
					<otm:mensagem bean="#{bean}" />
				</h:panelGroup>
			</h:panelGroup>
			<h:panelGroup id="footerPagamento" layout="block" styleClass="barra-flutuante-modal-cartao">
				<h:panelGroup layout="block" style="width: 80%;height:40px;text-align: left;float:left;">
					<h:panelGroup style="position:relative;top:8px">
						<h:outputText styleClass="mr5" style="font-size: 18px; font-weight: 510; line-height: 23px !important;" value="#{msg_aplic.prt_NegociacaoRecebimento_valorTotal} (R$): " />
						<h:outputText id="totalNegociacao2" style="font-size: 18px; font-weight: 510; line-height: 23px !important;" value="#{bean.negociacaoRecebimentoVO.valorTotal}">
							<f:converter converterId="FormatadorNumerico" />
						</h:outputText>
						<otm:spacer width="20px" />
						<h:outputText styleClass="mr5 text-danger" style="font-size: 18px; font-weight: 510; line-height: 23px !important;" value="#{msg_aplic.prt_NegociacaoRecebimento_valorRestante} (R$): " />
						<otm:spacer width="5px" />
						<h:outputText id="residuo" style="font-size: 18px; font-weight: 510; line-height: 23px !important;" styleClass="text-danger" value="#{bean.negociacaoRecebimentoVO.residuo}">
							<f:converter converterId="FormatadorNumerico" />
						</h:outputText>
					</h:panelGroup>
					<h:graphicImage id="imgIcone6" style="float: right" url="#{resource['/imagens/cartao/certificadoMundiPagg.png']}" width="65" height="35" />
				</h:panelGroup>
				<h:panelGroup layout="block" style="width: 20%;float:right">
					<otm:commandButton value="Realizar Pagamento" action="#{bean.realizarRecebimentoCartaoCredito}" oncomplete="#{bean.modalPagamentoOnline}; #{bean.modalConfirmacaoPagamento}" render="panelGridMensagens, formConfirmacaoPagamento, formPagamento, formConfirmacaoRecorrencia" styleClass="btn btn-success" icon="#{msg_botoes.btn_icon_confirmar_embutido}" />
				</h:panelGroup>
			</h:panelGroup>
		</h:form>
	</rich:popupPanel>
</ui:component>
</html>
