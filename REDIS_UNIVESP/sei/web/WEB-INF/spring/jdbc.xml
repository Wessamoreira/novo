<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    	http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/task/spring-context.xsd"
		default-lazy-init="true">

	<!-- Configurações do Pool de conexões c3p0 -->
	<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
	

		<!-- BASE PostgreSQL - DESENVOLVIMENTO (PG-16) -->
		<property name="jdbcUrl" value="jdbc:postgresql://portal.otimize-ti.com.br:6433/univesp-25-10-08" />

		<property name="forceIgnoreUnresolvedTransactions" value="true" />

		<property name="driverClass" value="org.postgresql.Driver" />

		<property name="user" value="sei" />

		<property name="password" value="Ea5@6JB*3xq64wvr" />

		<property name="autoCommitOnClose" value="false" />

		<!-- depois de exceder os limites de conexões, a quantidade de novas conexões que serão alocadas, o valor defaul é 1 -->
	    <property name="acquireIncrement" value="3" />
	
	    <!-- Segundos que uma Conexão será mantida no pool sem ser usada, antes	de ser descartada. Zero significa que a conexão nunca expira. -->
	    <property name="maxIdleTime" value="500" />
	
		<!-- tamanho minimo do pool de conexões -->
	    <property name="minPoolSize" value="3" />
			
		<!-- tamanho máximo do pool de conexões -->
	    <property name="maxPoolSize" value="500" />
	
		<!-- tamanho do cache do PreparedStatement, se o valor for zero indica que o cache está desligado, valor default é 0 -->
	    <property name="maxStatements" value="35" />
	
		<!-- O número inicial de conexões por default é 3. -->
	    <property name="initialPoolSize" value="6" />
	
		<!-- c3p0 vai testar as conexões que estão no pool e ainda não foram checadas, a cada x segundos, o valor default de x é 0 -->
	    <property name="idleConnectionTestPeriod" value="120" />
	
		<!-- Se true, e se unreturnedConnectionTimeout está definido com um valor 
			positivo, então o pool capturará a stack trace (via uma exceção) de todos 
			os checkouts de Conexões, e o stack trace será impresso quando o checkout 
			de Conexões der timeout. Este paramêtro é destinado para debug de aplicações 
			com leak de Conexões, isto é, aplicações que ocasionalmente falham na liberação/fechamento 
			de Conexões, ocasionando o crescimento do pool, e eventualmente na sua exaustão 
			(quando o pool atinge maxPoolSize com todas as suas conexões em uso e perdidas). 
			Este paramêtro deveria ser setado apenas para debugar a aplicação, já que 
			capturar o stack trace deixa mais o lento o precesso de check-out de Conexões. -->
	    <property name="debugUnreturnedConnectionStackTraces" value="false" />
	
		<!-- recolhe do pool as conexões em excesso que estão "de bobeira". (em segundos) -->
	    <property name="maxIdleTimeExcessConnections" value="60" />
	</bean>
</beans>