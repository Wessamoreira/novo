<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" xmlns:otm="http://java.sun.com/jsf/composite/otm">
<h:head>
</h:head>
<ui:composition template="/visaoAdministrativo/template/visaoAdministrativa.xhtml">
	<ui:define name="tituloPagina">
		<h:outputText value="#{msg_aplic.prt_RegistroEntrada_tituloForm}" />
	</ui:define>
	<ui:define name="conteudo">
		<rich:popupPanel styleClass="modalMaximizado50" id="panelMensagemErro" shadowOpacity="true" width="750" height="500">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="#{msg.msg_RichMensagemErro}" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hiperlinkMensagemErro" />
					<rich:componentControl target="panelMensagemErro" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formMensagemErro" onkeydown="fecharModal('panelMensagemErro',event);">
				<h:panelGroup columns="1" width="100%">
					<rich:dataTable id="listaMensagemErro" width="100%" styleClass="field control-label mensagemDetalhada col-md-12" columnClasses="colunaEsquerda" value="#{RegistroEntradaControle.listaMensagemErro}" var="mensagem" rows="10">
						<rich:column>
							<h:outputText value="#{mensagem}" />
						</rich:column>
						<f:facet name="footer">
							<div style="text-align: center !important">
								<rich:dataScroller align="center" for="formMensagemErro:listaMensagemErro" maxPages="10" id="scResultadoListaMensagemErro" />
							</div>
						</f:facet>
					</rich:dataTable>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>

		<rich:popupPanel styleClass="modalMaximizado50" id="panelVisualizarLogErros" shadowOpacity="true" minWidth="750" autosized="true">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="Visualizar Log de Erros"></h:outputText>
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelinkVisualizarLogErros" />
					<rich:componentControl target="panelVisualizarLogErros" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formVisualizarLogErros">
				<h:panelGroup columns="1" width="100%" columnClasses="colunaCentralizada">
					<rich:dataTable id="logErros" width="100%" headerClass="consulta" styleClass="tabConsulta" rowClasses="linhaImpar, linhaPar" columnClasses="colunaAlinhamento" value="#{RegistroEntradaControle.listaErros}" rows="5" var="erro">
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_RegistroEntrada_erro}" />
							</f:facet>
							<h:outputText value="#{erro}" />
						</rich:column>
						<f:facet name="footer">
							<div style="text-align: center !important">
								<rich:dataScroller align="center" for="logErros" maxPages="10" boundaryControls="auto" stepControls="auto" fastControls="hide" id="scVisualizarLogErros" />
							</div>
						</f:facet>
					</rich:dataTable>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
		<h:form>
			<a4j:jsFunction name="limparConsultaRichModal" action="#{RegistroEntradaControle.limparConsultaRichModal}" />
		</h:form>

		<rich:popupPanel styleClass="modalMaximizado50" id="panelMensagemAjuda" shadowOpacity="true" width="850" height="200" onshow="document.getElementById('formEdicaoProspect:sim').focus();">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="Ajuda" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelinkMensagemAjuda" />
					<rich:componentControl target="panelMensagemAjuda" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formMensagemAjuda">
				<h:panelGroup columnClasses="colunaCentralizada" width="100%">
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_RegistroEntrada_ajuda1}" />
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_RegistroEntrada_ajuda2}" />
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_RegistroEntrada_ajuda3}" />
				</h:panelGroup>
				<otm:spacer height="40px" />
			</h:form>
		</rich:popupPanel>

		<rich:popupPanel styleClass="modalMaximizado" id="painelCurso" shadowOpacity="true" width="650" height="380" onhide="limparConsultaRichModal();">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="#{msg_aplic.prt_AvaliacaoInstitucionalPresencialResposta_consultarCurso}" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hiperlinkCurso" />
					<rich:componentControl target="painelCurso" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formCurso" onkeydown="fecharModal('painelCurso',event);">
				<h:panelGroup layout="block" styleClass="col-md-12">
					<h:outputText value="#{msg_aplic.prt_Balancete_consultarPor}" styleClass="field control-label tituloCampos" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-4">
					<h:selectOneMenu styleClass="form-control campos" id="responsavel" value="#{RegistroEntradaControle.campoConsultaCurso}">
						<f:selectItems value="#{RegistroEntradaControle.tipoConsultaCurso}" />
					</h:selectOneMenu>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-6">
					<h:inputText styleClass="form-control campos" id="campoCurso" size="35" value="#{RegistroEntradaControle.valorConsultaCurso}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-2">
					<otm:commandButton id="consultarCurso" value="Consultar" action="#{RegistroEntradaControle.consultarCurso}" render="formCurso" styleClass="btn btn-default btn-consultar" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-12 mt5" />
				<rich:dataTable id="resultadoConsultaCurso" width="100%" headerClass="consulta" styleClass="tabConsulta" rowClasses="linhaImpar, linhaPar" columnClasses="colunaAlinhamento" value="#{RegistroEntradaControle.listaConsultaCurso}" rows="5" var="cursoItens">
					<rich:column>
						<f:facet name="header">
							<h:outputText value="#{msg_aplic.prt_Curso_nome}" />
						</f:facet>
						<h:outputText value="#{cursoItens.nome}" />
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="#{msg_botoes.btn_opcoes}" />
						</f:facet>
						<otm:commandIcon id="btnSelecionaCurso" action="#{RegistroEntradaControle.selecionarCurso}" focus="nivelCurso" render="form" oncomplete="#{rich:component('painelCurso')}.hide()" icon="#{msg_botoes.btn_icon_selecionar} iconePequeno" tooltip="Selecionar" />
					</rich:column>
					<f:facet name="footer">
						<div style="text-align: center !important">
							<rich:dataScroller align="center" for="formCurso:resultadoConsultaCurso" maxPages="10" boundaryControls="auto" stepControls="auto" fastControls="hide" id="scResultadoRegistroEntrada" />
						</div>
					</f:facet>
				</rich:dataTable>
				<h:panelGroup id="mensagemConsultaCurso" columns="1" width="100%" styleClass="tabMensagens">
					<otm:mensagem bean="#{RegistroEntradaControle}"></otm:mensagem>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>

		<h:form id="form">
			<h:commandLink action="#{RegistroEntradaControle.liberarBackingBeanMemoria}" id="idLiberarBackingBeanMemoria" style="display: none" />
			<h:panelGroup id="panelGridForm">
				<h:panelGroup id="panelGridTopo">
					<a4j:commandButton image="#{resource['/imagens/botaoErroTopo.png']}" value="#{msg_botoes.btn_VerTodos}" title="#{RegistroEntradaControle.titleBotaoVerTodos}" accesskey="5" rendered="#{RegistroEntradaControle.apresentarBotaoVerTodos}" oncomplete="#{rich:component('panelMensagemErro')}.show()" render="formMensagemErro" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-12 pn">
					<h:panelGroup layout="block" styleClass="col-md-6">
						<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_RegistroEntrada_descricao}" />
						<h:inputText id="descricao" size="70" maxlength="100" styleClass="form-control camposObrigatorios" value="#{RegistroEntradaControle.registroEntradaVO.descricao}" />
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-6">
						<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_RegistroEntrada_unidadeEnsino}" />
						<h:panelGroup layout="block" styleClass="col-md-12 pn">
							<h:selectOneMenu id="unidadeEnsino" styleClass="form-control camposObrigatorios" value="#{RegistroEntradaControle.registroEntradaVO.unidadeEnsino.codigo}">
								<f:selectItems value="#{RegistroEntradaControle.listaSelectItemUnidadeEnsino}" />
								<a4j:ajax event="change" render="form:unidadeEnsino" />
							</h:selectOneMenu>
							<span class="append-icon right mr10"> <otm:commandIcon id="atualizar_unidadeEnsino" tooltip="Atualizar Unidade de Ensino" action="#{RegistroEntradaControle.montarListaSelectItemUnidadeEnsino}" icon="#{msg_botoes.btn_icon_atualizar_embutido}" execute="@this" render="form:unidadeEnsino" />
							</span>
						</h:panelGroup>
					</h:panelGroup>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-2">
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_RegistroEntrada_dataEntrada}" />
					<otm:calendar id="dataEntrada" value="#{RegistroEntradaControle.registroEntradaVO.dataEntrada}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-4">
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_RegistroEntrada_cursoEntrada}" />
					<h:panelGroup layout="block" styleClass="col-md-12 pn">
						<h:inputText id="curso" size="70" maxlength="100" readonly="true" styleClass="form-control camposSomenteLeitura" value="#{RegistroEntradaControle.registroEntradaVO.cursoEntrada.nome}" />
						<span class="append-icon right"> <otm:commandIcon id="cb-showPanelCurso" action="#{RegistroEntradaControle.limparMensagem}" render="formCurso" oncomplete="#{rich:component('painelCurso')}.show()" tooltip="Consultar Curso" icon="#{msg_botoes.btn_icon_lupa_embutido}" /> <otm:commandIcon id="limparCurso" immediate="true" action="#{RegistroEntradaControle.limparCampoCurso}" icon="#{msg_botoes.btn_icon_limpar_embutido}" tooltip="#{msg_aplic.prt_limparCampo}" render="form:curso" />
						</span>
					</h:panelGroup>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-6">
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_RegistroEntrada_tipoUpload}" />
					<h:panelGroup layout="block" styleClass="col-md-12 pn">
						<h:selectOneMenu id="tipoUpload" styleClass="form-control camposObrigatorios" value="#{RegistroEntradaControle.registroEntradaVO.tipoUpload}" readonly="true" disabled="true">
							<f:selectItems id="listaTipoUpload" value="#{EnumControle.comboboxTipoUploadEnum}" />
						</h:selectOneMenu>
						<span class="append-icon right mr10"> <h:commandLink tooltip="Download Layout Padrão" render="form" action="#{RegistroEntradaControle.downloadLayoutPadraoExcel}">
								<span class="#{msg_botoes.btn_icon_download_embutido} fs12"></span>
							</h:commandLink> <otm:commandIcon icon="#{msg_botoes.btn_icon_help_embutido}" tooltip="Ajuda" oncomplete="#{rich:component('panelMensagemAjuda')}.show()" />
						</span>
					</h:panelGroup>
				</h:panelGroup>
				<h:panelGroup id="panelGridArquivo">
					<h:panelGroup layout="block" styleClass="col-md-12 title">
						<h:outputText value="#{msg_aplic.prt_RegistroEntradaProspects_tituloForm}" />
					</h:panelGroup>
					<h:panelGroup rendered="#{RegistroEntradaControle.registroEntradaVO.novoObj}">
						<h:outputText styleClass="tituloCampos" value="#{msg_aplic.prt_RegistroEntradaProspects_prospects}" />
						<h:panelGroup>
							<rich:fileUpload acceptedTypes="xls, xlsx, txt, csv" listHeight="60" listWidth="200" noDuplicate="true" fileUploadListener="#{RegistroEntradaControle.upLoadArquivo}" maxFilesQuantity="1" addLabel="Selecionar Arquivo" doneLabel="Pronto" sizeExceededLabel="Arquivo não Enviado. Tamanho Máximo 2MB" uploadLabel="Enviar" serverErrorLabel="Tamanho Máximo Permitido 2MB" id="uploadImagemBanner" immediateUpload="true" ontyperejected="alert('Arquivo não Enviado. Formato inválido do arquivo.');">
								<a4j:ajax event="uploadcomplete" execute="@this, form, formVisualizarLogErros" render="form, formVisualizarLogErros" />
							</rich:fileUpload>
						</h:panelGroup>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-12 mt5" />
					<rich:dataTable id="registroEntradaProspectsVO" width="100%" headerClass="consulta" rowClasses="linhaImpar, linhaPar" columnClasses="colunaAlinhamento" value="#{RegistroEntradaControle.controleConsultaOtimizado}" rows="5" var="registroEntradaProspectsItens">
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_RegistroEntradaProspects_prospects_Nome}" />
							</f:facet>
							<h:outputText value="#{registroEntradaProspectsItens.prospects.nome}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_RegistroEntradaProspects_prospects_NomeBatismo}" />
							</f:facet>
							<h:outputText value="#{registroEntradaProspectsItens.prospects.nomeBatismo}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_RegistroEntradaProspects_prospects_Email}" />
							</f:facet>
							<h:outputText value="#{registroEntradaProspectsItens.prospects.emailPrincipal}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_RegistroEntradaProspects_prospects_Telefone}" />
							</f:facet>
							<h:outputText value="#{registroEntradaProspectsItens.prospects.telefoneResidencial}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_RegistroEntradaProspects_prospects_Telefone_Comercial}" />
							</f:facet>
							<h:outputText value="#{registroEntradaProspectsItens.prospects.telefoneComercial}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_RegistroEntradaProspects_prospects_Telefone_Recado}" />
							</f:facet>
							<h:outputText value="#{registroEntradaProspectsItens.prospects.telefoneRecado}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_RegistroEntradaProspects_prospects_Celular}" />
							</f:facet>
							<h:outputText value="#{registroEntradaProspectsItens.prospects.celular}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_RegistroEntradaProspects_existeProspects}" />
							</f:facet>
							<h:outputText value="#{registroEntradaProspectsItens.existeProspects_Apresentar}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_botoes.btn_opcoes}" />
							</f:facet>
							<otm:commandIcon id="removerRegistroEntradaPropescts" action="#{RegistroEntradaControle.removerRegistroEntradaProspects}" render="form, form:panelGridMensagens" icon="#{msg_botoes.btn_icon_remover} iconePequeno" accesskey="7" />
						</rich:column>
					</rich:dataTable>
					<rich:dataScroller render="form:paginador" align="center" for="registroEntradaProspectsVO" id="paginador2" page="#{RegistroEntradaControle.controleConsultaOtimizado.page}" scrollListener="#{RegistroEntradaControle.scrollerListener}" rendered="#{!RegistroEntradaControle.registroEntradaVO.novoObj}" />
					<rich:dataScroller render="form:scResultadoConsulta" align="center" for="registroEntradaProspectsVO" id="scResultadoConsulta2" rendered="#{RegistroEntradaControle.registroEntradaVO.novoObj and RegistroEntradaControle.controleConsultaOtimizado.apresentarPaginador}" />
					<h:panelGroup layout="block" styleClass="col-md-12 text-center m5">
						<otm:commandButton id="visualizarLogErros" image="#{resource['/imagens/botaoVisualizarLogErros.png']}" icon="#{msg_botoes.btn_icon_lupa_embutido}" value="Visualizar Log" styleClass="btn btn-default" oncomplete="#{rich:component('panelVisualizarLogErros')}.show()" rendered="#{RegistroEntradaControle.apresentarBotaoVisualizarLogErros}" />
					</h:panelGroup>
				</h:panelGroup>
				<h:panelGroup columns="1" width="100%" styleClass="tabMensagens">
					<h:panelGroup id="panelGridMensagens">
						<h:panelGroup id="pgMensagem">
							<a4j:commandButton image="#{resource['/imagens/botaoVerTodos.png']}" value="#{msg_botoes.btn_VerTodos}" title="#{RegistroEntradaControle.titleBotaoVerTodos}" accesskey="5" styleClass="botoes" rendered="#{RegistroEntradaControle.apresentarBotaoVerTodos}" oncomplete="#{rich:component('panelMensagemErro')}.show()" render="formMensagemErro" />
							<otm:mensagem bean="#{RegistroEntradaControle}"></otm:mensagem>
						</h:panelGroup>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="barraFlutuanteInferior">
						<h:panelGroup>
							<otm:commandButton id="novo" immediate="true" action="#{RegistroEntradaControle.novo}" styleClass="btn btn-info btn-novo" value="#{msg_botoes.btn_novo}" title="#{msg.msg_novo_dados}" accesskey="1" render="form" />
							<otm:spacer width="5" />
							<otm:commandButton id="salvar" onclick='this.disabled=true' rendered="#{RegistroEntradaControle.isNovoObj}" action="#{RegistroEntradaControle.persistir}" value="#{msg_botoes.btn_gravar}" styleClass="btn btn-dark btn-gravar" title="#{msg.msg_gravar_dados}" accesskey="2" render="form:panelGridMensagens,form:panelGridTopo" />
							<otm:spacer width="5" />
							<otm:commandButton id="excluir" styleClass="btn btn-danger btn-excluir" rendered="#{!RegistroEntradaControle.isNovoObj}" action="#{RegistroEntradaControle.excluir}" value="#{msg_botoes.btn_excluir}" accesskey="3" onclick="return confirm('#{msg.msg_confirmacao_excluxao}');" />
							<otm:spacer width="5" rendered="#{!RegistroEntradaControle.isNovoObj}" />
							<otm:commandButton id="consultar" immediate="true" action="#{RegistroEntradaControle.inicializarConsultar}" value="#{msg_botoes.btn_consultar}" styleClass="btn btn-default btn-consultar" title="#{msg.msg_consultar_dados}" accesskey="4" />
							<otm:spacer width="5" />
							<otm:commandButton id="enviarLeads" immediate="true" action="#{RegistroEntradaControle.enviarProspectsParaRdStation}" value="#{msg_botoes.btn_gerarLeadRdStation}" icon="#{msg_botoes.btn_icon_gerar_relatorio}" styleClass="btn btn-default" image="#{resource['imagens/botaoEnviarProspectRdStation.png']}" title="#{msg.msg_EnviarProspectoParaRdStation}" accesskey="4" rendered="#{!RegistroEntradaControle.isNovoObj and ProspectsControle.loginControle.configuracaoGeralSistemaVO.ativarIntegracaoRdStation}" />
						</h:panelGroup>
					</h:panelGroup>
				</h:panelGroup>
			</h:panelGroup>
		</h:form>
		<script>
			document.getElementById("form:codigo").focus();
		</script>
	</ui:define>
</ui:composition>
</html>
