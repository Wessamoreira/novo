<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" xmlns:otm="http://java.sun.com/jsf/composite/otm" xmlns:otm2="http://www.otimize-ti.com.br">

<ui:composition template="/visaoAdministrativo/template/visaoAdministrativa.xhtml">
	<ui:define name="tituloPagina">
		<h:outputText value="#{msg_aplic.prt_PainelGestor_tituloForm}" />
	</ui:define>
	<ui:define name="modal">




		<rich:popupPanel styleClass="modalMaximizado" id="panelNivelEducacional" shadowOpacity="true" width="350" height="150" onshow="document.getElementById('formUnidadeEnsino:consultarUnidadeEnsino').focus();">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="#{msg_aplic.prt_PainelGestorFinanceiro_gerarRelatorioPor}" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hiperlinkpanelNivelEducacional" />
					<rich:componentControl target="panelNivelEducacional" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formNivelEducacional">
				<h:panelGrid width="100%" columns="1">
					<h:panelGroup>
						<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Curso_nivelEducacional}" />
						<otm:spacer width="10px" />
						<h:selectOneMenu id="niveis" styleClass="form-control camposObrigatorios" value="#{PainelGestorControle.tipoNivelEducacional}">
							<f:selectItems value="#{PainelGestorControle.tipoNivelEducacionalEnums}" />
						</h:selectOneMenu>
					</h:panelGroup>
				</h:panelGrid>
				<h:panelGrid width="100%" columnClasses="colunaCentralizada" columns="1">
					<otm:spacer height="10px" />
					<otm:commandButton image="#{resource['/imagens/botaoGerarRelatorio2.png']}" action="#{PainelGestorControle.executarGeracaoDadosPainelGestorFinanceiroPorNivelEducacional}" />
				</h:panelGrid>
			</h:form>
		</rich:popupPanel>

	</ui:define>
	<ui:define name="conteudo">

		<h:form id="form">

			<h:panelGroup layout="block" styleClass="row text-center mt10 mb10">
				<otm:commandButton icon="#{msg_botoes.btn_icon_voltar}" action="#{PainelGestorControle.voltarPagina}" value="Voltar">

				</otm:commandButton>
			</h:panelGroup>


			<h:panelGroup layout="block" styleClass="row mt10 mb10" rendered="#{!empty PainelGestorControle.painelGestorVO.painelGestorContaReceberMesAnoVOs}">



				<h:outputText styleClass="title" value="#{PainelGestorControle.tituloMapaReceitaTipoOrigem}" />
				
				<script type="text/javascript" charset="UTF-8">
		(function($) {
			$.ajaxSetup({
				cache : false
			});
			$(document).ready(function(){
				$('#tudo').on('scroll', function(){					
					if($('#tudo').scrollTop() > 50){
						$('#form\\:receitas\\:th').css('position', 'relative');
						$('#form\\:receitas\\:th').css('z-index', '1000');
						$('#form\\:receitas\\:th').css('top', $('#tudo').scrollTop() - 130);						
						
					}else{
						$('#form\\:receitas\\:th').removeAttr('style');
					}
					
				});
			});
					
				
		}(jQuery));
				</script>



				<h:panelGroup layout="block" styleClass="row row-overflow" id="panelreceitas">
					<rich:dataTable id="receitas" width="100%" rowKeyVar="row" rows="50" headerClass="panelGeralLista" rowClasses="linhaImpar, linhaPar" columnClasses="linhaImpar, linhaPar" value="#{PainelGestorControle.painelGestorContaReceberMesAnoVO.contaReceberPainelGestorVOs}" var="contaReceberPainelGestorItens">

						<rich:column style="text-align:center" >
							<f:facet name="header">
								<h:outputText value="Nrº" />
							</f:facet>
							<h:outputText value="#{row + 1}" />
						</rich:column>
						<rich:column style="text-align:left" filterType="custom" filter="#{FilterFactory.filter('nome', 'contaReceberVO.dadosPessoaAtiva', 'TEXTO')}">
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_PainelGestorFinanceiroContaReceber_nome}" />
								<h:panelGroup layout="block" styleClass="col-md-12 pn">
									<span class="append-icon right"> <otm:commandIcon tooltip="Limpar Filtro" render="panelreceitas" icon="#{msg_botoes.btn_icon_limpar_embutido}" action="#{FilterFactory.limparFiltro('nome')}" />
									</span>
									<h:inputText styleClass="form-control campos" size="10" value="#{FilterFactory.filter('nome', 'contaReceberVO.dadosPessoaAtiva', 'TEXTO').filtro}">
										<a4j:ajax event="change" execute="@this" render="panelreceitas" />
									</h:inputText>
								</h:panelGroup>
							</f:facet>
							<h:outputText value="#{contaReceberPainelGestorItens.contaReceberVO.dadosPessoaAtiva}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_PainelGestorFinanceiroContaReceber_dataVencimento}" />
							</f:facet>
							<h:outputText value="#{contaReceberPainelGestorItens.contaReceberVO.dataVencimento_Apresentar}" />
						</rich:column>
						<rich:column style="text-align:center">
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_ContaReceber_dataCompetencia}" />
							</f:facet>
							<h:outputText value="#{contaReceberPainelGestorItens.contaReceberVO.dataCompetencia}">
								<f:convertDateTime pattern="MM/yyyy" />
							</h:outputText>
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_PainelGestorFinanceiroContaReceber_parcela}" />
							</f:facet>
							<h:outputText value="#{contaReceberPainelGestorItens.contaReceberVO.parcela}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_PainelGestorFinanceiroContaReceber_situacao}" />
							</f:facet>
							<h:outputText value="#{contaReceberPainelGestorItens.contaReceberVO.situacao_Apresentar}" />
						</rich:column>
						<rich:column styleClass="text-right">
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_PainelGestorFinanceiroContaReceber_valor}" />
							</f:facet>
							<h:outputText value="#{contaReceberPainelGestorItens.contaReceberVO.valor}">
								<f:converter converterId="FormatadorNumerico" />
							</h:outputText>
						</rich:column>
						<rich:column styleClass="text-right">
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_PainelGestorFinanceiroContaReceber_descontoConvenio}" />
							</f:facet>
							<h:outputText value="#{contaReceberPainelGestorItens.contaReceberVO.valorDescontoConvenio}">
								<f:converter converterId="FormatadorNumerico" />
							</h:outputText>
						</rich:column>
						<rich:column styleClass="text-right">
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_PainelGestorFinanceiroContaReceber_descontoInstituicao}" />
							</f:facet>
							<h:outputText value="#{contaReceberPainelGestorItens.contaReceberVO.valorDescontoInstituicao}">
								<f:converter converterId="FormatadorNumerico" />
							</h:outputText>
						</rich:column>
						<rich:column styleClass="text-right">
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_PainelGestorFinanceiroContaReceber_descontoProgressivo}" />
							</f:facet>
							<h:outputText value="#{contaReceberPainelGestorItens.contaReceberVO.valorDescontoProgressivo}">
								<f:converter converterId="FormatadorNumerico" />
							</h:outputText>
						</rich:column>
						<rich:column styleClass="text-right">
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_PainelGestorFinanceiroContaReceber_descontoAluno}" />
							</f:facet>
							<h:outputText value="#{contaReceberPainelGestorItens.contaReceberVO.valorDescontoAlunoJaCalculado}">
								<f:converter converterId="FormatadorNumerico" />
							</h:outputText>
						</rich:column>
						<rich:column styleClass="text-right">
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_PainelGestorFinanceiroContaReceber_descontoRecebimento}" />
							</f:facet>
							<h:outputText value="#{contaReceberPainelGestorItens.contaReceberVO.valorCalculadoDescontoLancadoRecebimento}">
								<f:converter converterId="FormatadorNumerico" />
							</h:outputText>
						</rich:column>
						<rich:column styleClass="text-right">
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_PainelGestorFinanceiroContaReceber_descontoRateio}" />
							</f:facet>
							<h:outputText value="#{contaReceberPainelGestorItens.contaReceberVO.valorDescontoRateio}">
								<f:converter converterId="FormatadorNumerico" />
							</h:outputText>
						</rich:column>
						<rich:column styleClass="text-right">
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_PainelGestorFinanceiroContaReceber_acrescimo}" />
							</f:facet>
							<h:outputText value="#{contaReceberPainelGestorItens.contaReceberVO.totalAcrescimoContaReceber}">
								<f:converter converterId="FormatadorNumerico" />
							</h:outputText>
						</rich:column>
						<rich:column styleClass="text-right">
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_PainelGestorFinanceiroContaReceber_valorRecebido}" />
							</f:facet>
							<h:outputText value="#{contaReceberPainelGestorItens.contaReceberVO.valorRecebido}">
								<f:converter converterId="FormatadorNumerico" />
							</h:outputText>
						</rich:column>
						<rich:column styleClass="text-right">
							<f:facet name="header">
								<h:outputText value="Valor Receber" />
							</f:facet>
							<h:outputText rendered="#{contaReceberPainelGestorItens.contaReceberVO.situacao ne 'RE'}" value="#{contaReceberPainelGestorItens.contaReceberVO.valorReceberCalculado}">
								<f:converter converterId="FormatadorNumerico" />
							</h:outputText>
							<h:outputText rendered="#{contaReceberPainelGestorItens.contaReceberVO.situacao eq 'RE'}" value="0.0">
								<f:converter converterId="FormatadorNumerico" />
							</h:outputText>
						</rich:column>
						<rich:column style="vertical-align:middle; text-align:center !important">
							<f:facet name="header">
								<otm:outputHelp id="opcao" tooltip="Ao clica na lupa será aberta a tela de contas a receber" styleClass=" " value="#{msg_botoes.btn_opcoes}" />
							</f:facet>
							<otm:commandIcon icon="#{msg_botoes.btn_icon_lupa} iconePequeno" title="Visualizar Conta a Receber" oncomplete="abrirPopup('../financeiro/contaReceberForm.xhtml', 'contaReceberForm', 950, 595);" image="#{resource['/imagens/lupa2.png']}" action="#{PainelGestorControle.realizarVisualizacaoContaReceberIndividual}" />
						</rich:column>


						<f:facet name="footer">
							<rich:columnGroup columnClasses="consulta">
								<rich:column>
									<h:outputText styleClass="tituloCamposNegrito" value="Total" />
								</rich:column>
								<rich:column>
									<h:outputText value="" />
								</rich:column>
								<rich:column>
									<h:outputText value="" />
								</rich:column>
								<rich:column>
									<h:outputText value="" />
								</rich:column>
								<rich:column>
									<h:outputText value="" />
								</rich:column>
								<rich:column>
									<h:outputText value="" />
								</rich:column>
								<rich:column style="text-align:right !important">
									<h:outputText styleClass="tituloCamposNegrito" value="#{PainelGestorControle.painelGestorContaReceberMesAnoVO.totalValorContareceber}">
										<f:converter converterId="FormatadorNumerico" />
									</h:outputText>
								</rich:column>
								<rich:column style="text-align:right !important">
									<h:outputText styleClass="tituloCamposNegrito" value="#{PainelGestorControle.painelGestorContaReceberMesAnoVO.totalDescontoConvenioContareceber}">
										<f:converter converterId="FormatadorNumerico" />
									</h:outputText>
								</rich:column>
								<rich:column style="text-align:right !important">
									<h:outputText styleClass="tituloCamposNegrito" value="#{PainelGestorControle.painelGestorContaReceberMesAnoVO.totalDescontoInstituicaoContareceber}">
										<f:converter converterId="FormatadorNumerico" />
									</h:outputText>
								</rich:column>
								<rich:column style="text-align:right !important">
									<h:outputText styleClass="tituloCamposNegrito" value="#{PainelGestorControle.painelGestorContaReceberMesAnoVO.totalDescontoProgressivoContareceber}">
										<f:converter converterId="FormatadorNumerico" />
									</h:outputText>
								</rich:column>
								<rich:column style="text-align:right !important">
									<h:outputText styleClass="tituloCamposNegrito" value="#{PainelGestorControle.painelGestorContaReceberMesAnoVO.totalDescontoAlunoContareceber}">
										<f:converter converterId="FormatadorNumerico" />
									</h:outputText>
								</rich:column>
								<rich:column style="text-align:right !important">
									<h:outputText styleClass="tituloCamposNegrito" value="#{PainelGestorControle.painelGestorContaReceberMesAnoVO.totalDescontoRecebimentoContareceber}">
										<f:converter converterId="FormatadorNumerico" />
									</h:outputText>
								</rich:column>
								<rich:column style="text-align:right !important">
									<h:outputText styleClass="tituloCamposNegrito" value="#{PainelGestorControle.painelGestorContaReceberMesAnoVO.totalDescontoRateioContareceber}">
										<f:converter converterId="FormatadorNumerico" />
									</h:outputText>
								</rich:column>
								<rich:column style="text-align:right !important">
									<h:outputText styleClass="tituloCamposNegrito" value="#{PainelGestorControle.painelGestorContaReceberMesAnoVO.totalAcrescimoContaReceber}">
										<f:converter converterId="FormatadorNumerico" />
									</h:outputText>
								</rich:column>
								<rich:column style="text-align:right !important">
									<h:outputText styleClass="tituloCamposNegrito" value="#{PainelGestorControle.painelGestorContaReceberMesAnoVO.totalValorRecebidoContareceber}">
										<f:converter converterId="FormatadorNumerico" />
									</h:outputText>
								</rich:column>
								<rich:column style="text-align:right !important">
									<h:outputText styleClass="tituloCamposNegrito" value="#{PainelGestorControle.painelGestorContaReceberMesAnoVO.totalValorReceberContareceber}">
										<f:converter converterId="FormatadorNumerico" />
									</h:outputText>
								</rich:column>

								<rich:column style="vertical-align:middle; text-align:center">
									<h:outputText value="" />
								</rich:column>
								<rich:column breakRowBefore="true" style="border-top-width: 1px;    border-top-style: solid;    border-top-color: #C4C0C9;" colspan="15">
									<rich:dataScroller boundaryControls="auto" fastControls="hide" stepControls="auto" for="receitas" limitRender="50" align="center" />
								</rich:column>
								<rich:column style="text-align:center !important">
									<h:outputText styleClass="tituloCamposNegrito" value="#{PainelGestorControle.painelGestorContaReceberMesAnoVO.totalValorReceberContareceber + PainelGestorControle.painelGestorContaReceberMesAnoVO.totalValorRecebidoContareceber}">
										<f:converter converterId="FormatadorNumerico" />
									</h:outputText>
								</rich:column>
								<rich:column style="vertical-align:middle; text-align:center">
									<h:outputText value="" />
								</rich:column>
							</rich:columnGroup>
						</f:facet>

					</rich:dataTable>

				</h:panelGroup>
			</h:panelGroup>

			<h:panelGroup layout="block" styleClass="row  mt10 mb10" rendered="#{!empty PainelGestorControle.painelGestorVO.painelGestorDetalhamentoDescontoVOs}">

				<!-- 								DETALHAMENTO DOS DESCONTOS -->
				<h:panelGroup layout="block" styleClass="title">


					<h:outputText value="#{PainelGestorControle.tituloDetalhamentoDesconto}" />
					<otm:commandIcon style="border:none; float:right" icon="#{msg_botoes.btn_icon_imprimir_embutido}" alt="Imprimir" action="#{PainelGestorControle.imprimirDetalhamentoContaReceberDescontoInstituicao}" oncomplete="#{PainelGestorControle.download}" />

				</h:panelGroup>

				<h:panelGroup layout="block" styleClass="col-md-12">

					<rich:dataTable width="100%" headerClass="consulta" id="financeiroAcademicoMesAno" rowClasses="linhaImpar, linhaPar" value="#{PainelGestorControle.painelGestorVO.painelGestorDetalhamentoDescontoVOs}" var="detalhamentoItens">
						<f:facet name="header">
							<rich:columnGroup rowClasses="linhaImpar, linhaPar" columnClasses="consulta">
								<rich:column>
									<h:outputText value="#{msg_aplic.prt_PainelGestorFinanceiroDetalhamentoDesconto_nomeDesconto}" />
								</rich:column>
								<rich:column>
									<otm:outputHelp id="valorFaturado" tooltip="#{msg.msg_PainelGestorMonitoramentoDescontoInstituicao_valorFaturado}" styleClass=" " value="#{msg_aplic.prt_PainelGestorFinanceiroDetalhamentoDesconto_totalDesconto}" />

								</rich:column>
								<rich:column>
									<otm:outputHelp id="numeroAlunosComDesconto" tooltip="#{msg.msg_PainelGestorMonitoramentoDescontoInstituicao_numeroAlunosComDesconto}" styleClass=" " value="#{msg_aplic.prt_PainelGestorMonitoramentoDescontoInstituicao_numeroAlunosComDesconto}" />
								</rich:column>
							</rich:columnGroup>
						</f:facet>
						<rich:collapsibleSubTable value="#{detalhamentoItens.painelGestorDetalhamentoDescontoVOs}" var="item">

							<rich:column footerClass="rodapeTabelaEsquerda">
								<h:outputText value="#{item.nomeTipoDesconto}" />
								<f:facet name="footer">
									<h:outputText style="text:align:center;" styleClass="tituloCampos" value="#{detalhamentoItens.totalizadorNomeCategoriaDesconto_Apresentar}" />
								</f:facet>
							</rich:column>
							<rich:column style="text-align:right !important" footerClass="text-right">
								<h:outputText value="#{item.totalDesconto}">
									<f:converter converterId="FormatadorNumerico" />
								</h:outputText>
								<f:facet name="footer">
									<h:outputText styleClass="tituloCampos" value="#{detalhamentoItens.totalDescontoPorCategoria}">
										<f:converter converterId="FormatadorNumerico" />
									</h:outputText>
								</f:facet>
							</rich:column>
							<rich:column style="text-align:center" footerClass="text-center">
								<h:outputText value="#{item.numeroAlunoComDesconto}" />
								<f:facet name="footer">
									<h:outputText styleClass="tituloCampos" value="#{detalhamentoItens.totalNumeroAlunoPorCategoria}" />
								</f:facet>
							</rich:column>

						</rich:collapsibleSubTable>
						<f:facet name="footer">
							<rich:columnGroup columnClasses="rodapeTabelaDireita">
								<rich:column style="text:align:center;" footerClass="rodapeTabelaCentralizado">
									<h:outputText styleClass="tituloCamposReduzidosNegrito" value="#{msg_aplic.prt_PainelGestorMonitoramentoDescontoInstituicao_totalGeral}" />
								</rich:column>
								<rich:column style="text-align:right !important" footerClass="rodapeTabelaDireita">
									<h:outputText styleClass="tituloCamposReduzidosNegrito" value="#{PainelGestorControle.painelGestorVO.totalDescontoDetalhamento}">
										<f:converter converterId="FormatadorNumerico" />
									</h:outputText>
								</rich:column>
								<rich:column style="text-align:center" footerClass="rodapeTabelaCentralizada">
									<h:outputText styleClass="tituloCamposReduzidosNegrito" value="#{PainelGestorControle.painelGestorVO.totalNumeroAlunoComDesconto}" />
								</rich:column>
							</rich:columnGroup>

						</f:facet>
					</rich:dataTable>
				</h:panelGroup>
			</h:panelGroup>
		</h:form>
	</ui:define>
</ui:composition>
</html>