<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" xmlns:otm="http://java.sun.com/jsf/composite/otm" xmlns:otm2="http://www.otimize-ti.com.br">

<ui:composition template="/visaoAdministrativo/template/visaoAdministrativa.xhtml">
	<ui:define name="tituloPagina">
		<h:outputText value="#{msg_aplic.prt_PainelGestor_tituloForm}" />
	</ui:define>
	<ui:define name="conteudo">
		<rich:dragIndicator id="BI_RECEITA_DESPESA_DRAG" acceptClass="dragOk" rejectClass="dragError" draggingClass="dragDefault">
			<i class="fas fa-chart-line fs16"></i>
		</rich:dragIndicator>
		<rich:dragIndicator id="BI_ACADEMICO_POR_NIVEL_EDUCACIONAL_DRAG" acceptClass="dragOk" rejectClass="dragError" draggingClass="dragDefault">
			<i class="fas fa-university fs16"></i>
		</rich:dragIndicator>
		<rich:dragIndicator id="BI_CONSUMO_DEPARTAMENTO_DRAG" acceptClass="dragOk" rejectClass="dragError" draggingClass="dragDefault">
			<i class="fas fa-stamp fs16"></i>
		</rich:dragIndicator>
		<rich:dragIndicator id="BI_CONSUMO_CATEGORIA_DRAG" acceptClass="dragOk" rejectClass="dragError" draggingClass="dragDefault">
			<i class="fas fa-comment-dollar fs16"></i>
		</rich:dragIndicator>
		<h:form id="form">

			<a4j:commandButton style="cursor:pointer;display:none" action="#{PainelGestorControle.selecionarLegendaGraficoMonitoramentoAcademicoNivelEducacional}" id="detalharAcademico1">

			</a4j:commandButton>

			<h:inputText id="nivelEducacionalGrafico" style="display:none" value="#{PainelGestorControle.nivelEducacional}" />
			<h:inputText id="periodicidadeGrafico" style="display:none" value="#{PainelGestorControle.periodicidade}" />
			<h:inputText id="qtdeGrafico" style="display:none" value="#{PainelGestorControle.qtde}" />
			<h:inputText id="codigoGrafico" style="display:none" value="#{PainelGestorControle.codigo}" />

			<script type="text/javascript" charset="UTF-8">
								(function($) {									
									detalharGraficoAcademico = function(nivelEducacional, periodicidade, quantidade, codigo) {
										document.getElementById("form:nivelEducacionalGrafico").value = nivelEducacional;
										document.getElementById("form:periodicidadeGrafico").value = periodicidade;
										document.getElementById("form:qtdeGrafico").value = quantidade;
										document.getElementById("form:codigoGrafico").value = codigo;
										fireElement("form:detalharAcademico1");
									};
								}(jQuery));
							</script>




			<h:panelGroup layout="block" styleClass="row">
				<rich:panel id="panelFiltroUnidadeEnsino">
					<f:facet name="header">
						<h:panelGroup layout="block" styleClass="p5">
							<i class="fas fa-filter mr5"></i>
							<h:outputText rendered="#{PainelGestorControle.filtrarUnidadeEnsino}" styleClass="tituloCamposReduzidosNegritoItalicoCinza" value="Ocultar Filtros" />
							<h:outputText rendered="#{!PainelGestorControle.filtrarUnidadeEnsino}" styleClass="tituloCamposReduzidosNegritoItalicoCinza" value="Apresentar Filtros" />

							<otm:commandIcon rendered="#{!PainelGestorControle.filtrarUnidadeEnsino}" styleClass="float-right mr10" action="#{PainelGestorControle.setFiltrarUnidadeEnsino(true)}" render="panelFiltroUnidadeEnsino" icon="fas fa-expand-alt fs14">

							</otm:commandIcon>
							<otm:commandIcon rendered="#{PainelGestorControle.filtrarUnidadeEnsino}" styleClass="float-right mr10" action="#{PainelGestorControle.setFiltrarUnidadeEnsino(false)}" render="panelFiltroUnidadeEnsino" icon="fas fa-compress-alt fs14">

							</otm:commandIcon>


						</h:panelGroup>
					</f:facet>
					<h:panelGroup layout="block" rendered="#{PainelGestorControle.filtrarUnidadeEnsino}" styleClass="row">
						<h:panelGroup layout="block" styleClass="col-md-6" id="filtroPeriodo">
							<h:outputText styleClass="field control-label tituloCampos col-md-12 pn" value="#{msg_aplic.prt_PainelGestor_periodoDe}" />
							<h:panelGroup layout="block" styleClass="col-md-6 pn">
								<otm:calendar id="dataInicio" showWeekDaysBar="false" showWeeksBar="false" showFooter="false" locale="pt_BR" oninputkeypress="return mascara(this.form, this.id, '99/9999', event);" onchanged="return renderData(this.id)" oninputchange="validarDataMesAno(this.value,this.id)" enableManualInput="true" datePattern="MM/yyyy" inputSize="7" styleClass="form-control camposObrigatorios" value="#{PainelGestorControle.dataInicio}" />
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="col-md-6 pn pl5">
								<otm:calendar id="dataTermino" showWeekDaysBar="false" showWeeksBar="false" showFooter="false" locale="pt_BR" oninputkeypress="return mascara(this.form, this.id, '99/9999', event);" onchanged="return renderData(this.id)" oninputchange="validarDataMesAno(this.value,this.id)" enableManualInput="true" datePattern="MM/yyyy" inputSize="7" styleClass="form-control camposObrigatorios" value="#{PainelGestorControle.dataFinal}" />
							</h:panelGroup>
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="col-md-6 ">
							<h:outputText styleClass="fields tituloCampos btn-block" value="Selecionar Todas as Unidades de Ensino" />
							<otm:selectBooleanCheckbox id="marcarTodasUnidadeEnsino" value="#{PainelGestorControle.marcarTodasUnidadeEnsino}">
								<a4j:ajax event="change" listener="#{PainelGestorControle.marcarTodasUnidadesEnsinoAction}" render="form" />
							</otm:selectBooleanCheckbox>
						</h:panelGroup>
						<a4j:repeat id="filtros" var="unidadeEnsinoItens" value="#{PainelGestorControle.unidadeEnsinoVOs}">
							<h:panelGroup layout="block" styleClass="col-md-4">
								<h:outputText value="#{unidadeEnsinoItens.nome}" styleClass="tituloCampos btn-block" />
								<otm:selectBooleanCheckbox id="unidade#{unidadeEnsinoItens.codigo}" value="#{unidadeEnsinoItens.filtrarUnidadeEnsino}">
								</otm:selectBooleanCheckbox>
							</h:panelGroup>
						</a4j:repeat>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="row text-center" id="btns">

						<otm:commandButton oncomplete="criarGraficoReceitaDespesaLine();criarGraficoAcademicoLine();criarGraficoConsumoGeral();criarGraficoCategoriaDespesaPie;" value="Gerar Relatório" render="form" icon="fas fa-chart-pie" action="#{PainelGestorControle.consultarDadosPaginaInicialPainelGestor}" />

						<otm:spacer rendered="#{LoginControle.permissaoAcessoMenuVO.painelGestorAcademico}" width="5px" />
						<a4j:commandLink styleClass="btn btn-info" rendered="#{LoginControle.permissaoAcessoMenuVO.painelGestorAcademico}" value="#{msg_botoes.btn_monitorarAcademico}" title="#{msg_botoes.btn_monitorarAcademico}" action="#{PainelGestorControle.consultarDadosMonitoramentoAcademico}">
							<i class="fas fa-university pull-left" style="margin-right: 0.8em; font-size: 14px; margin-top: 2px;"></i>
							<f:setPropertyActionListener target="#{PainelGestorControle.telaOrigem}" value="PAGINA_INICIAL" />
						</a4j:commandLink>
						<otm:spacer rendered="#{LoginControle.permissaoAcessoMenuVO.painelGestorCrm}" width="5px" />
						<a4j:commandLink styleClass="btn btn-success" rendered="#{LoginControle.permissaoAcessoMenuVO.painelGestorCrm}" value="#{msg_botoes.btn_monitorarCrm}" title="#{msg_botoes.btn_monitorarCrm}" action="#{PainelGestorControle.consultarDadosIniciaisPainelGestorMonitoramentoCRM}">
							<i class="fas fa-headset pull-left" style="margin-right: 0.8em; font-size: 14px; margin-top: 2px;"></i>
							<f:setPropertyActionListener target="#{PainelGestorControle.telaOrigem}" value="PAGINA_INICIAL" />
						</a4j:commandLink>
						<otm:spacer width="5px" rendered="#{LoginControle.permissaoAcessoMenuVO.followMe}" />
						<otm:commandButton value="#{msg_botoes.btn_followMe}" rendered="#{LoginControle.permissaoAcessoMenuVO.followMe}" tooltip="#{msg_botoes.btn_followMe}" onclick="abrirPopup('../../visaoAdministrativo/administrativo/followMeCons.xhtml', 'followMeCons', 930, 595);" icon="fab fa-stack-overflow">

						</otm:commandButton>
					</h:panelGroup>
				</rich:panel>
			</h:panelGroup>


			<h:panelGroup layout="block" id="panelGeral">
				<h:panelGroup layout="block" id="menuTopo" styleClass="row row-overflow pt-2 pb-2 pl-3 pr-3" style="display:flex !important">
					<a4j:repeat value="#{PainelGestorControle.listaDashboard}" var="itemDash">
						<h:panelGroup layout="block" style="width:39px; height:39px;order:#{itemDash.ordem}" id="panelFavsIcon" rendered="#{itemDash.ocultar 
					and (itemDash.tipoDashboard eq 'BI_RECEITA_DESPESA' or itemDash.tipoDashboard eq 'BI_ACADEMICO_POR_NIVEL_EDUCACIONAL'  or itemDash.tipoDashboard eq 'BI_CONSUMO_DEPARTAMENTO'  
					or itemDash.tipoDashboard eq 'BI_CONSUMO_CATEGORIA' )}" styleClass="mr5 p10 border rounded bg-secundary text-center float-left">
							<a4j:commandLink action="#{PainelGestorControle.persistirDashboard(itemDash)}" render="form:panelGeral">
								<f:setPropertyActionListener value="false" target="#{itemDash.ocultar}"></f:setPropertyActionListener>
								<span class="#{itemDash.icone} fs16" style="margin: 0px !important; padding: 0px !important; position: initial !important"></span>
							</a4j:commandLink>
							<rich:tooltip rendered="#{!LoginControle.appMovel}" followMouse="true" target="panelFavsIcon" value="Apresentar #{itemDash.titulo}"></rich:tooltip>
						</h:panelGroup>
					</a4j:repeat>

				</h:panelGroup>




				<h:panelGroup layout="block" styleClass="row mt20" style="display:flex !important">

					<h:panelGroup id="BI_RECEITA_DESPESA" layout="block" style="order:#{PainelGestorControle.mapDashboards.get('BI_RECEITA_DESPESA').ordem}" styleClass="col-md-6" rendered="#{LoginControle.permissaoAcessoMenuVO.painelGestorFinanceiro and PainelGestorControle.mapDashboards.get('BI_RECEITA_DESPESA') != null and !PainelGestorControle.mapDashboards.get('BI_RECEITA_DESPESA').ocultar}">
						<rich:dropTarget dropValue="#{PainelGestorControle.mapDashboards.get('BI_RECEITA_DESPESA')}" render=":form:panelGeral" dropListener="#{PainelGestorControle.registrarPosicaoDashboard}" acceptedTypes="DASHBOARDS" />
						<rich:dragSource type="DASHBOARDS" dragIndicator="BI_RECEITA_DESPESA_DRAG" dragValue="#{PainelGestorControle.mapDashboards.get('BI_RECEITA_DESPESA')}">
						</rich:dragSource>
						<otm2:dashpanel id="dashboardBI_RECEITA_DESPESA" cols="12">
							<ui:define name="header">
								<i class="#{PainelGestorControle.mapDashboards.get('BI_RECEITA_DESPESA').icone} mr-2 fs12"></i>
								<otm:outputHelp styleClassPanel=" " id="helpreceitaXDespesaConsolidado" tooltip="#{msg.msg_PainelGestor_receitaXDespesaConsolidado}" styleClass="fs12 fonteHeaderDashboard" value="#{PainelGestorControle.mapDashboards.get('BI_RECEITA_DESPESA').titulo}" />
								<a4j:commandLink action="#{PainelGestorControle.persistirDashboard(PainelGestorControle.mapDashboards.get('BI_RECEITA_DESPESA'))}" rendered="#{!PainelGestorControle.mapDashboards.get('BI_RECEITA_DESPESA').maximizado}" styleClass="float-right p-0" render="panelGeral">
									<i class="fas fa-angle-down text-center fonteHeaderDashboard mr-2 fs12" />
									<f:setPropertyActionListener value="true" target="#{PainelGestorControle.mapDashboards.get('BI_RECEITA_DESPESA').maximizado}"></f:setPropertyActionListener>
								</a4j:commandLink>
								<a4j:commandLink action="#{PainelGestorControle.persistirDashboard(PainelGestorControle.mapDashboards.get('BI_RECEITA_DESPESA'))}" rendered="#{PainelGestorControle.mapDashboards.get('BI_RECEITA_DESPESA').maximizado}" styleClass="float-right p-0" render="panelGeral">
									<i class="fas fa-angle-up text-center fonteHeaderDashboard mr-2 fs12" />
									<f:setPropertyActionListener value="false" target="#{PainelGestorControle.mapDashboards.get('BI_RECEITA_DESPESA').maximizado}"></f:setPropertyActionListener>
								</a4j:commandLink>
								<a4j:commandLink id="ocultarRD" action="#{PainelGestorControle.persistirDashboard(PainelGestorControle.mapDashboards.get('BI_RECEITA_DESPESA'))}" render=":form:menuTopo, :form:panelGeral" styleClass="border-0 bg-transparent float-right p-0" title="Ocultar Gráfico">
									<i class="fas fa-compress-arrows-alt text-center fonteHeaderDashboard mr-2 fs12" />
									<f:setPropertyActionListener value="true" target="#{PainelGestorControle.mapDashboards.get('BI_RECEITA_DESPESA').ocultar}"></f:setPropertyActionListener>
								</a4j:commandLink>
								<otm:commandIcon action="#{PainelGestorControle.inicializarGraficoLinhaRecebimentoPagamento}" status="stsRD" oncomplete="iniciarPollReceitaDespesa()" render="BI_RECEITA_DESPESA" icon="#{msg_botoes.btn_icon_atualizar_embutido}" styleClass="border-0 bg-transparent float-right p-0 mr10 fonteHeaderDashboard" id="btnAtualizarGraficoRequerimento" />

								<a4j:commandLink style="cursor:pointer;display:none" id="detalharReceitas" title="#{msg.msg_visualizarDetalhes}" action="#{PainelGestorControle.executarInicializacaoDadoFinanceiroPainelGestor}">
									<f:setPropertyActionListener target="#{PainelGestorControle.telaOrigem}" value="PAGINA_INICIAL" />
								</a4j:commandLink>
							</ui:define>
							<ui:define name="body">
								<h:panelGroup layout="block" styleClass="row" rendered="#{PainelGestorControle.mapDashboards.get('BI_RECEITA_DESPESA').maximizado}" style="height:450px;overflow-x:auto">
									<h:panelGroup layout="block" rendered="#{PainelGestorControle.mapDashboards.get('BI_RECEITA_DESPESA').ativado}" styleClass="w-100 bg-dark text-center" style="text-align:center;height:450px;opacity: 0.2;">
										<h:panelGroup layout="block" styleClass="loading-icon" style="position:relative;top:43%;left:47%;width:60px;height:60px">
											<h:graphicImage value="#{resource['imagens/logo_sei_cinza.png']}" style="width:60px;" />
										</h:panelGroup>
									</h:panelGroup>

									<a4j:jsFunction execute="@region" immediate="true" name="validarPoolReceitaDespesa" status="pollReceitaDespesa" action="#{PainelGestorControle.mapDashboards.get('BI_RECEITA_DESPESA').encerrarDashboard}" oncomplete="#{!PainelGestorControle.mapDashboards.get('BI_RECEITA_DESPESA').ativado ? 'criarGraficoReceitaDespesaLine()' : 'iniciarPollReceitaDespesa()' }" render="#{!PainelGestorControle.mapDashboards.get('BI_RECEITA_DESPESA').ativado ? 'BI_RECEITA_DESPESA' : ''}"></a4j:jsFunction>
									<script type="text/javascript" charset="UTF-8">
											(function($) {
												$.ajaxSetup({
												cache : false
											});

											$(document).ready(function() {
												iniciarPollReceitaDespesa();											
											});
											iniciarPollReceitaDespesa = function(){
												if(#{PainelGestorControle.mapDashboards.get('BI_RECEITA_DESPESA').ativado}){						
					        						setTimeout(validarPoolReceitaDespesa(), 1000);					        						
					        					}else{
					        						criarGraficoReceitaDespesaLine();
					        					}
											};
										}(jQuery));
									</script>

									<h:panelGroup layout="block" styleClass="col-md-12 text-center mt50" rendered="#{!PainelGestorControle.mapDashboards.get('BI_RECEITA_DESPESA').ativado and !PainelGestorControle.existeGraficoReceitaDespesaLinhaTempo}">
										<h:outputText value="#{msg.msg_relatorio_sem_dados}" styleClass="fs20 "></h:outputText>
									</h:panelGroup>
									<h:panelGroup layout="block" styleClass="col-md-12 text-center" rendered="#{!PainelGestorControle.mapDashboards.get('BI_RECEITA_DESPESA').ativado and PainelGestorControle.existeGraficoReceitaDespesaLinhaTempo}">
										<h:panelGroup id="graficoReceitaDespesaLine" layout="block" styleClass="col-md-12">
										</h:panelGroup>

										<script type="text/javascript" charset="UTF-8">
												(function($) {
													$.ajaxSetup({
														cache : false
													});

													$(document).ready(function() {
															criarGraficoReceitaDespesaLine();
													});
													criarGraficoReceitaDespesaLine = function() {

														var options = {
															exporting : {
																type : 'image/jpeg',
																buttons : {
																	exportButton : {
																		y : 5,
																		menuItems : null,
																		onclick : function() {
																			this
																					.exportChart();
																		}
																	},
																	printButton : {
																		y : 5
																	}
																}
															},
															legend : {
																marginTop : 5,
															},
															chart : {
																type : "spline",
																renderTo : "form\:graficoReceitaDespesaLine",
																backgroundColor : "#FFF",
																marginTop : 45,
																height : 450,
																spacingLeft : 0,
																events : {
																	click : function(
																			e) {
																		fireElement("form:detalharReceitas");
																	}
																}

															},
															credits : {
																enabled : false
															},
															title : {
																text : '',
																align : 'left',
																useHTML : true,
																y : 5
															},
															plotOptions : {
																spline : {
																	dataLabels : {
																		enabled : true,
																		formatter : function(){return ''+Highcharts.numberFormat(this.y,2,',', '.')},
																		color: '#000000'
																	},
																	events : {
																		click : function(
																				e) {
																			fireElement("form:detalharReceitas");
																		}
																	}
																}
															},
															xAxis : {
																type : 'datetime',

																labels : {
																	formatter : function() {
																		return (Highcharts
																				.dateFormat(
																						'%e. %b',
																						this.value) == 'Apr' ? 'Abr'
																				: Highcharts
																						.dateFormat(
																								'%e. %b',
																								this.value) == 'May' ? 'Mai'
																						: Highcharts
																								.dateFormat(
																										'%e. %b',
																										this.value) == 'Aug' ? 'Ago'
																								: Highcharts
																										.dateFormat(
																												'%e. %b',
																												this.value) == 'Sep' ? 'Set'
																										: Highcharts
																												.dateFormat(
																														'%e. %b',
																														this.value) == 'Oct' ? 'Out'
																												: Highcharts
																														.dateFormat(
																																'%e. %b',
																																this.value) == 'Dec' ? 'Dez'
																														: Highcharts
																																.dateFormat(
																																		'%e. %b',
																																		this.value))
																				+ '/'
																				+ Highcharts
																						.dateFormat(
																								'%y',
																								this.value);
																	},
																	rotation : -75.0,
																	step : 0,
																	style : {
																		fontSize : '10px'
																	},
																	align : 'right'
																}
															// maxZoom: 30 * 24 * 3600 * 1000,
															//tickInterval: 30* 24 * 3600 * 1000, 													            
															//minorTickInterval: 90* 24 * 3600 * 1000,

															},

															yAxis : {
																title : {
																	text : ''
																},
																labels : {
																	formatter : function() {
																		return 'R$'
																				+ Highcharts
																						.numberFormat(
																								(this.value),
																								2,
																								',',
																								'.');
																	},
																	style : {
																		fontSize : '10px'
																	},
																	align : 'right'
																},

															//tickInterval: 500000,																
															//max: this.value
															},
															tooltip : {
																formatter : function() {
																	return ''
																			+ (Highcharts
																					.dateFormat(
																							'%e. %b',
																							this.x) == 'Apr' ? 'Abr'
																					: Highcharts
																							.dateFormat(
																									'%e. %b',
																									this.x) == 'May' ? 'Mai'
																							: Highcharts
																									.dateFormat(
																											'%e. %b',
																											this.x) == 'Aug' ? 'Ago'
																									: Highcharts
																											.dateFormat(
																													'%e. %b',
																													this.x) == 'Sep' ? 'Set'
																											: Highcharts
																													.dateFormat(
																															'%e. %b',
																															this.x) == 'Oct' ? 'Out'
																													: Highcharts
																															.dateFormat(
																																	'%e. %b',
																																	this.x) == 'Dec' ? 'Dez'
																															: Highcharts
																																	.dateFormat(
																																			'%e. %b',
																																			this.x))
																			+ '/'
																			+ Highcharts
																					.dateFormat(
																							'%y',
																							this.x)
																			+ ' - R$'
																			+ Highcharts
																					.numberFormat(
																							(this.y),
																							2,
																							',',
																							'.');
																}
															},

															series : [
																		{
																			name : '${PainelGestorControle.montarGraficoLegendaReceitaVOs}',
																			color : '#3399FF',
																			pointInterval : 30 * 24 * 3600 * 1000,
																			visible : ${PainelGestorControle.montarGraficoReceitaVisible},
																			showInLegend : ${PainelGestorControle.montarGraficoReceitaShowInLegend},
																			data : [${PainelGestorControle.montarGraficoDataReceita}]

																		},
																		
																		{
																			name : '${PainelGestorControle.montarGraficoLegendaDespesaVOs}',
																			color : '#D20000',
																			pointInterval : 30 * 24 * 3600 * 1000,
																			visible : ${PainelGestorControle.montarGraficoDespesaVisible},
																			showInLegend : ${PainelGestorControle.montarGraficoDespesaShowInLegend},
																			data : [${PainelGestorControle.montarGraficoDataDespesa}]

																		},
																		
																		{
																			name : '${PainelGestorControle.montarGraficoLegendaSaldoVOs}',
																			color : '#FDFD00',
																			pointInterval : 30 * 24 * 3600 * 1000,
																			visible : ${PainelGestorControle.montarGraficoSaldoVisible},
																			showInLegend : ${PainelGestorControle.montarGraficoSaldoShowInLegend},
																			data : [${PainelGestorControle.montarGraficoDataSaldo}]

																		}
																		
																		]

														};
														var chart = new Highcharts.Chart(options);

													}

												}(jQuery));
											</script>
									</h:panelGroup>
								</h:panelGroup>
							</ui:define>
						</otm2:dashpanel>
					</h:panelGroup>


					<h:panelGroup layout="block" styleClass="col-md-6" style="order:#{PainelGestorControle.mapDashboards.get('BI_ACADEMICO_POR_NIVEL_EDUCACIONAL').ordem}" id="BI_ACADEMICO_POR_NIVEL_EDUCACIONAL" rendered="#{LoginControle.permissaoAcessoMenuVO.painelGestorAcademico and PainelGestorControle.mapDashboards.get('BI_ACADEMICO_POR_NIVEL_EDUCACIONAL') != null and !PainelGestorControle.mapDashboards.get('BI_ACADEMICO_POR_NIVEL_EDUCACIONAL').ocultar}">
						<rich:dropTarget dropValue="#{PainelGestorControle.mapDashboards.get('BI_ACADEMICO_POR_NIVEL_EDUCACIONAL')}" render=":form:panelGeral" dropListener="#{PainelGestorControle.registrarPosicaoDashboard}" acceptedTypes="DASHBOARDS" />
						<rich:dragSource type="DASHBOARDS" dragIndicator="BI_ACADEMICO_POR_NIVEL_EDUCACIONAL_DRAG" dragValue="#{PainelGestorControle.mapDashboards.get('BI_ACADEMICO_POR_NIVEL_EDUCACIONAL')}">
						</rich:dragSource>
						<otm2:dashpanel id="dashboardBI_ACADEMICO_POR_NIVEL_EDUCACIONAL" cols="12">
							<ui:define name="header">
								<i class="#{PainelGestorControle.mapDashboards.get('BI_ACADEMICO_POR_NIVEL_EDUCACIONAL').icone} mr-2 fs12"></i>
								<otm:outputHelp styleClassPanel=" " id="helpgraficoLinhaAcademico" tooltip="#{msg.msg_PainelGestor_graficoLinhaAcademico}" styleClass="fs12 fonteHeaderDashboard" value="#{PainelGestorControle.mapDashboards.get('BI_ACADEMICO_POR_NIVEL_EDUCACIONAL').titulo}" />
								<a4j:commandLink action="#{PainelGestorControle.persistirDashboard(PainelGestorControle.mapDashboards.get('BI_ACADEMICO_POR_NIVEL_EDUCACIONAL'))}" rendered="#{!PainelGestorControle.mapDashboards.get('BI_ACADEMICO_POR_NIVEL_EDUCACIONAL').maximizado}" styleClass="float-right p-0" render="panelGeral">
									<i class="fas fa-angle-down text-center fonteHeaderDashboard mr-2 fs12" />
									<f:setPropertyActionListener value="true" target="#{PainelGestorControle.mapDashboards.get('BI_ACADEMICO_POR_NIVEL_EDUCACIONAL').maximizado}"></f:setPropertyActionListener>
								</a4j:commandLink>
								<a4j:commandLink action="#{PainelGestorControle.persistirDashboard(PainelGestorControle.mapDashboards.get('BI_ACADEMICO_POR_NIVEL_EDUCACIONAL'))}" rendered="#{PainelGestorControle.mapDashboards.get('BI_ACADEMICO_POR_NIVEL_EDUCACIONAL').maximizado}" styleClass="float-right p-0" render="panelGeral">
									<i class="fas fa-angle-up text-center fonteHeaderDashboard mr-2 fs12" />
									<f:setPropertyActionListener value="false" target="#{PainelGestorControle.mapDashboards.get('BI_ACADEMICO_POR_NIVEL_EDUCACIONAL').maximizado}"></f:setPropertyActionListener>
								</a4j:commandLink>
								<a4j:commandLink id="ocultarANE" action="#{PainelGestorControle.persistirDashboard(PainelGestorControle.mapDashboards.get('BI_ACADEMICO_POR_NIVEL_EDUCACIONAL'))}" render=":form:menuTopo, :form:panelGeral" styleClass="border-0 bg-transparent float-right p-0" title="Ocultar Gráfico">
									<i class="fas fa-compress-arrows-alt text-center fonteHeaderDashboard mr-2 fs12" />
									<f:setPropertyActionListener value="true" target="#{PainelGestorControle.mapDashboards.get('BI_ACADEMICO_POR_NIVEL_EDUCACIONAL').ocultar}"></f:setPropertyActionListener>
								</a4j:commandLink>
								<otm:commandIcon action="#{PainelGestorControle.inicializarGraficoPainelGestorAcademicoPorNivelEducacional}" status="stsRD" oncomplete="iniciarPollAcademico()" render="BI_ACADEMICO_POR_NIVEL_EDUCACIONAL" icon="#{msg_botoes.btn_icon_atualizar_embutido}" styleClass="border-0 bg-transparent float-right p-0 mr10 fonteHeaderDashboard" id="btnAtualizarGraficoAcad" />
								<a4j:commandLink style="cursor:pointer;display:none" id="detalharAcademico" title="#{msg.msg_visualizarDetalhes}" action="#{PainelGestorControle.consultarDadosPainelGestorAcademicoFinanceiro}">
									<f:setPropertyActionListener target="#{PainelGestorControle.telaOrigem}" value="PAGINA_INICIAL" />
								</a4j:commandLink>

							</ui:define>
							<ui:define name="body">
								<h:panelGroup layout="block" styleClass="row" rendered="#{PainelGestorControle.mapDashboards.get('BI_ACADEMICO_POR_NIVEL_EDUCACIONAL').maximizado}" style="height:450px;overflow-x:auto">
									<h:panelGroup layout="block" rendered="#{!PainelGestorControle.mapDashboards.get('BI_ACADEMICO_POR_NIVEL_EDUCACIONAL').ativado}" styleClass="row mt10">
										<h:panelGroup layout="block" styleClass="float-right" rendered="#{PainelGestorControle.apresentarSemestreFiltroAcademico}">
											<otm:spacer width="2px" />
											<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_PainelGestor_semestre}" />
											<otm:spacer width="2px" rendered="#{PainelGestorControle.apresentarSemestreFiltroAcademico}" />
											<h:selectOneMenu id="semestre" styleClass="form-control campos form-control-input-table" value="#{PainelGestorControle.semestre}">
												<f:selectItems value="#{PainelGestorControle.listaSelectItemSemestre}" />
											</h:selectOneMenu>
										</h:panelGroup>
										<h:panelGroup layout="block" styleClass="float-right">
											<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_PainelGestor_ano}" />

											<h:selectOneMenu id="ano" styleClass="form-control campos form-control-input-table" value="#{PainelGestorControle.ano}">
												<f:selectItems value="#{PainelGestorControle.listaSelectItemAno}" />
											</h:selectOneMenu>
										</h:panelGroup>

									</h:panelGroup>
									<h:panelGroup layout="block" rendered="#{PainelGestorControle.mapDashboards.get('BI_ACADEMICO_POR_NIVEL_EDUCACIONAL').ativado}" styleClass="w-100 bg-dark text-center" style="text-align:center;height:450px;opacity: 0.2;">
										<h:panelGroup layout="block" styleClass="loading-icon" style="position:relative;top:43%;left:47%;width:60px;height:60px">
											<h:graphicImage value="#{resource['imagens/logo_sei_cinza.png']}" style="width:60px;" />
										</h:panelGroup>
									</h:panelGroup>

									<a4j:jsFunction execute="@region" immediate="true" name="validarPoolAcademico" status="pollReceitaDespesa" action="#{PainelGestorControle.mapDashboards.get('BI_ACADEMICO_POR_NIVEL_EDUCACIONAL').encerrarDashboard}" oncomplete="#{!PainelGestorControle.mapDashboards.get('BI_ACADEMICO_POR_NIVEL_EDUCACIONAL').ativado ? 'graficoAcademicoLine()' : 'iniciarPollAcademico()' }" render="#{!PainelGestorControle.mapDashboards.get('BI_ACADEMICO_POR_NIVEL_EDUCACIONAL').ativado ? 'BI_ACADEMICO_POR_NIVEL_EDUCACIONAL' : ''}"></a4j:jsFunction>
									<script type="text/javascript" charset="UTF-8">
											(function($) {
												$.ajaxSetup({
												cache : false
											});

											$(document).ready(function() {
												iniciarPollAcademico();											
											});
											iniciarPollAcademico = function(){
												if(#{PainelGestorControle.mapDashboards.get('BI_ACADEMICO_POR_NIVEL_EDUCACIONAL').ativado}){						
					        						setTimeout(validarPoolAcademico(), 1000);					        						
					        					}else{
					        						graficoAcademicoLine();
					        					}
											};
										}(jQuery));
									</script>

									<h:panelGroup layout="block" styleClass="col-md-12  text-center mt50" rendered="#{!PainelGestorControle.mapDashboards.get('BI_ACADEMICO_POR_NIVEL_EDUCACIONAL').ativado and !PainelGestorControle.existeGraficoAcademicoFinanceiro}">
										<h:outputText value="#{msg.msg_relatorio_sem_dados}" styleClass="fs20 "></h:outputText>
									</h:panelGroup>
									<h:panelGroup layout="block" styleClass="col-md-12 text-center" rendered="#{!PainelGestorControle.mapDashboards.get('BI_ACADEMICO_POR_NIVEL_EDUCACIONAL').ativado and PainelGestorControle.existeGraficoAcademicoFinanceiro}">
										<h:panelGroup id="graficoAcademicoLine" styleClass="col-md-12" layout="block">
										</h:panelGroup>

										<script type="text/javascript" charset="UTF-8">
											(function($) {
												$(document)
														.ready(
																function() {
																	graficoAcademicoLine();
																});

												graficoAcademicoLine = function() {

													var options = {		
														legend:{															
															marginTop: 5,
															style:{
																fontSize:10
															}
														},
														chart : {
															type : "column",
															renderTo : "form\:graficoAcademicoLine",
															backgroundColor : "#FFF",																															
															height:340,
															spacingLeft: 0,												
															marginTop: 40
														},
														credits : {
															enabled : false
														},
														title : {
															text : '',
																align:'left',
																useHTML:true,
																y:5																	
														},
														xAxis: {
												            categories: [${PainelGestorControle.getPainelGestorVO().getLegendaCategoriaPainelAcademicoNivelEducacional()}],
												            crosshair: true
												        },
												        yAxis: {
												            min: 0,
												            title: {
												                text: 'Quantidade'
												            }
												        },														
												        plotOptions: {
												            column: {
												                pointPadding: 0.2,
												                borderWidth: 0
												            },
													        series : {
																point : {
																	events : {
																		click : function(
																				e) {
																			click:
																				detalharGraficoAcademico(this.id, this.name, this.y, 0);																		
																		}																		
																	}
																},
	
																allowPointSelect : true,
																cursor : 'pointer'
															}
												        },
												        
												        series : [ 
												             {
																name:'${PainelGestorControle.getPainelGestorVO().getLegendaGraficoAcademicoFinanceiroVOs().size() >= 1 ? PainelGestorControle.getPainelGestorVO().getLegendaGraficoAcademicoFinanceiroVOs().get(0).getLegenda() : "Alunos Ativos"}',
																	
																visible: ${PainelGestorControle.getPainelGestorVO().getLegendaGraficoAcademicoFinanceiroVOs().size() >= 1 and PainelGestorControle.getPainelGestorVO().getLegendaGraficoAcademicoFinanceiroVOs().get(0).getQuantidade() > 0},
  															    showInLegend: '${PainelGestorControle.getPainelGestorVO().getLegendaGraficoAcademicoFinanceiroVOs().size() >= 1 and PainelGestorControle.getPainelGestorVO().getLegendaGraficoAcademicoFinanceiroVOs().get(0).getQuantidade() > 0}',
																data :[${PainelGestorControle.getPainelGestorVO().getListaValoresAcademicoAtivo()}],
																dataLabels : {
																	enabled : true,
																	rotation: -90,
													                color: '#666666',
													                align: 'center',
													                format: '{point.y:.1f}', 
													                y: -15, // 10 pixels down from the top
													                style: {
													                    fontSize: '11px',
													                    fontFamily: 'Lucida Grande, Lucida Sans Unicode, Verdana, Arial, Helvetica, sans-serif;font-size:11px;color:#666;fill:#666;',
													                    fontWeight:'bold'
													                	}
																	}
													         
															}, 		
															{
																name: '${PainelGestorControle.getPainelGestorVO().getLegendaGraficoAcademicoFinanceiroVOs().size() >= 2? PainelGestorControle.getPainelGestorVO().getLegendaGraficoAcademicoFinanceiroVOs().get(1).getLegenda(): "Alunos Possíveis Formandos"}',
																visible: ${PainelGestorControle.getPainelGestorVO().getLegendaGraficoAcademicoFinanceiroVOs().size() >= 2 and PainelGestorControle.getPainelGestorVO().getLegendaGraficoAcademicoFinanceiroVOs().get(1).getQuantidade() > 0},
																showInLegend: ${PainelGestorControle.getPainelGestorVO().getLegendaGraficoAcademicoFinanceiroVOs().size() >= 2 and PainelGestorControle.getPainelGestorVO().getLegendaGraficoAcademicoFinanceiroVOs().get(1).getQuantidade() > 0},
																data :[${PainelGestorControle.getPainelGestorVO().getListaValoresAcademicoAptoFormar()}],
																dataLabels : {
																	enabled : true,
																	rotation: -90,
													                color: '#666666',
													                align: 'center',
													                format: '{point.y:.1f}', 
													                y: -15, // 10 pixels down from the top
													                style: {
													                    fontSize: '11px',
													                    fontFamily: 'Lucida Grande, Lucida Sans Unicode, Verdana, Arial, Helvetica, sans-serif;font-size:11px;color:#666;fill:#666;',
													                    fontWeight:'bold'
													                	}
																	}
															         
															}, 		
															{
																name: '${PainelGestorControle.getPainelGestorVO().getLegendaGraficoAcademicoFinanceiroVOs().size() >= 3 ? PainelGestorControle.getPainelGestorVO().getLegendaGraficoAcademicoFinanceiroVOs().get(2).getLegenda() : "Alunos Pré-Matriculados"}',
																visible: ${PainelGestorControle.getPainelGestorVO().getLegendaGraficoAcademicoFinanceiroVOs().size() >= 3 and PainelGestorControle.getPainelGestorVO().getLegendaGraficoAcademicoFinanceiroVOs().get(2).getQuantidade() > 0},
																showInLegend: ${PainelGestorControle.getPainelGestorVO().getLegendaGraficoAcademicoFinanceiroVOs().size() >= 3 and PainelGestorControle.getPainelGestorVO().getLegendaGraficoAcademicoFinanceiroVOs().get(2).getQuantidade() > 0},
																data :[${PainelGestorControle.getPainelGestorVO().getListaValoresAcademicoPreMatricula()}],
																dataLabels : {
																	enabled : true,
																	rotation: -90,
													                color: '#666666',
													                align: 'center',
													                format: '{point.y:.1f}', 
													                y: -15, // 10 pixels down from the top
													                style: {
													                    fontSize: '11px',
													                    fontFamily: 'Lucida Grande, Lucida Sans Unicode, Verdana, Arial, Helvetica, sans-serif;font-size:11px;color:#666;fill:#666;',
													                    fontWeight:'bold'
													                	}
																	}
															         
															}, 																
															{
																name: '${PainelGestorControle.getPainelGestorVO().getLegendaGraficoAcademicoFinanceiroVOs().size() >= 4 ? PainelGestorControle.getPainelGestorVO().getLegendaGraficoAcademicoFinanceiroVOs().get(3).getLegenda() : "Evasão de Alunos"}',
																visible : ${PainelGestorControle.getPainelGestorVO().getLegendaGraficoAcademicoFinanceiroVOs().size() >= 4 and PainelGestorControle.getPainelGestorVO().getLegendaGraficoAcademicoFinanceiroVOs().get(3).getQuantidade() > 0},
																showInLegend : ${PainelGestorControle.getPainelGestorVO().getLegendaGraficoAcademicoFinanceiroVOs().size() >= 4 and PainelGestorControle.getPainelGestorVO().getLegendaGraficoAcademicoFinanceiroVOs().get(3).getQuantidade() > 0},
																data : [${PainelGestorControle.getPainelGestorVO().getListaValoresAcademicoEvasao()}],
																dataLabels : {
																	enabled : true,
																	rotation: -90,
													                color: '#666666',
													                align: 'center',
													                format: '{point.y:.1f}', 
													                y: -15, // 10 pixels down from the top
													                style: {
													                    fontSize: '11px',
													                    fontFamily: 'Lucida Grande, Lucida Sans Unicode, Verdana, Arial, Helvetica, sans-serif;font-size:11px;color:#666;fill:#666;',
													                    fontWeight:'bold'
													                	}
																	}
															}
															
																]

										};
											var chart = new Highcharts.Chart(options);	

							}
											}(jQuery));
										</script>

									</h:panelGroup>
									<h:panelGroup id="panelTotalAlunoAtivos" rendered="#{!PainelGestorControle.mapDashboards.get('BI_ACADEMICO_POR_NIVEL_EDUCACIONAL').ativado}" layout="block" styleClass="row text-center mt10 mb10 pt10 border-top backHeaderDashboard">
										<otm:outputHelp id="quantidadeAlunosNaoConsideradosAtualmente" styleClass="fonteHeaderDashboard" tooltip="#{msg.msg_PainelGestor_panelTotalAlunoAtivos}#{PainelGestorControle.painelGestorVO.quantidadeAlunosNaoConsideradosAtualmente}" value="#{msg_aplic.prt_PainelGestor_totalAlunoAtivosAtualmente} - #{PainelGestorControle.dataAtual} : #{PainelGestorControle.painelGestorVO.quantidadeAlunosAtualmente}" />
									</h:panelGroup>
								</h:panelGroup>

							</ui:define>

						</otm2:dashpanel>

					</h:panelGroup>

					<h:panelGroup layout="block" styleClass="col-md-6" style="order:#{PainelGestorControle.mapDashboards.get('BI_CONSUMO_DEPARTAMENTO').ordem}" id="BI_CONSUMO_DEPARTAMENTO" rendered="#{LoginControle.permissaoAcessoMenuVO.painelGestorConsumo and PainelGestorControle.mapDashboards.get('BI_CONSUMO_DEPARTAMENTO') != null and !PainelGestorControle.mapDashboards.get('BI_CONSUMO_DEPARTAMENTO').ocultar}">

						<rich:dropTarget dropValue="#{PainelGestorControle.mapDashboards.get('BI_CONSUMO_DEPARTAMENTO')}" render=":form:panelGeral" dropListener="#{PainelGestorControle.registrarPosicaoDashboard}" acceptedTypes="DASHBOARDS" />
						<rich:dragSource type="DASHBOARDS" dragIndicator="BI_CONSUMO_DEPARTAMENTO_DRAG" dragValue="#{PainelGestorControle.mapDashboards.get('BI_CONSUMO_DEPARTAMENTO')}">
						</rich:dragSource>
						<otm2:dashpanel id="dashboardBI_CONSUMO_DEPARTAMENTO" cols="12">
							<ui:define name="header">
								<i class="#{PainelGestorControle.mapDashboards.get('BI_CONSUMO_DEPARTAMENTO').icone} mr-2 fs12"></i>
								<otm:outputHelp id="graficoConsumoHelp" styleClassPanel=" " tooltip="#{msg.msg_PainelGestor_graficoConsumo}" styleClass="fs12 fonteHeaderDashboard" value="#{PainelGestorControle.mapDashboards.get('BI_CONSUMO_DEPARTAMENTO').titulo}" />
								<a4j:commandLink action="#{PainelGestorControle.persistirDashboard(PainelGestorControle.mapDashboards.get('BI_CONSUMO_DEPARTAMENTO'))}" rendered="#{!PainelGestorControle.mapDashboards.get('BI_CONSUMO_DEPARTAMENTO').maximizado}" styleClass="float-right p-0" render="panelGeral">
									<i class="fas fa-angle-down text-center fonteHeaderDashboard mr-2 fs12" />
									<f:setPropertyActionListener value="true" target="#{PainelGestorControle.mapDashboards.get('BI_CONSUMO_DEPARTAMENTO').maximizado}"></f:setPropertyActionListener>
								</a4j:commandLink>
								<a4j:commandLink action="#{PainelGestorControle.persistirDashboard(PainelGestorControle.mapDashboards.get('BI_CONSUMO_DEPARTAMENTO'))}" rendered="#{PainelGestorControle.mapDashboards.get('BI_CONSUMO_DEPARTAMENTO').maximizado}" styleClass="float-right p-0" render="panelGeral">
									<i class="fas fa-angle-up text-center fonteHeaderDashboard mr-2 fs12" />
									<f:setPropertyActionListener value="false" target="#{PainelGestorControle.mapDashboards.get('BI_CONSUMO_DEPARTAMENTO').maximizado}"></f:setPropertyActionListener>
								</a4j:commandLink>
								<a4j:commandLink id="ocultarCDEP" action="#{PainelGestorControle.persistirDashboard(PainelGestorControle.mapDashboards.get('BI_CONSUMO_DEPARTAMENTO'))}" render=":form:menuTopo, :form:panelGeral" styleClass="border-0 bg-transparent float-right p-0" title="Ocultar Gráfico">
									<i class="fas fa-compress-arrows-alt text-center fonteHeaderDashboard mr-2 fs12" />
									<f:setPropertyActionListener value="true" target="#{PainelGestorControle.mapDashboards.get('BI_CONSUMO_DEPARTAMENTO').ocultar}"></f:setPropertyActionListener>
								</a4j:commandLink>
								<otm:commandIcon action="#{PainelGestorControle.inicializarGraficoPainelGestorConsumoPorDespartamento}" status="stsRD" oncomplete="iniciarPollConsumoDepartamento()" render="BI_CONSUMO_DEPARTAMENTO" icon="#{msg_botoes.btn_icon_atualizar_embutido}" styleClass="border-0 bg-transparent float-right p-0 mr10 fonteHeaderDashboard" id="btnAtualizarGraficoConsumoDep" />
								<a4j:jsFunction name="detalheConsumo" action="#{PainelGestorControle.consultarDadosPainelGestorCategoriaDespesaMonitoramentoFinanceiroPorDepartamento}">
									<a4j:param name="param1" assignTo="#{PainelGestorControle.painelGestorVO.nomeDepartamento}" />
									<a4j:param name="param2" assignTo="#{PainelGestorControle.painelGestorVO.codigoDepartamento}" />
									<f:setPropertyActionListener target="#{PainelGestorControle.telaOrigem}" value="PAGINA_INICIAL" />
								</a4j:jsFunction>


							</ui:define>
							<ui:define name="body">
								<h:panelGroup layout="block" styleClass="row" rendered="#{PainelGestorControle.mapDashboards.get('BI_CONSUMO_DEPARTAMENTO').maximizado}" style="height:450px;overflow-x:auto">
									<h:panelGroup layout="block" rendered="#{PainelGestorControle.mapDashboards.get('BI_CONSUMO_DEPARTAMENTO').ativado}" styleClass="w-100 bg-dark text-center" style="text-align:center;height:450px;opacity: 0.2;">
										<h:panelGroup layout="block" styleClass="loading-icon" style="position:relative;top:43%;left:47%;width:60px;height:60px">
											<h:graphicImage value="#{resource['imagens/logo_sei_cinza.png']}" style="width:60px;" />
										</h:panelGroup>
									</h:panelGroup>

									<a4j:jsFunction execute="@region" immediate="true" name="validarPoolConsumoDepartamento" status="pollConsumoDepartamento" action="#{PainelGestorControle.mapDashboards.get('BI_CONSUMO_DEPARTAMENTO').encerrarDashboard}" oncomplete="#{!PainelGestorControle.mapDashboards.get('BI_CONSUMO_DEPARTAMENTO').ativado ? 'criarGraficoConsumoGeral()' : 'iniciarPollConsumoDepartamento()' }" render="#{!PainelGestorControle.mapDashboards.get('BI_CONSUMO_DEPARTAMENTO').ativado ? 'BI_CONSUMO_DEPARTAMENTO' : ''}"></a4j:jsFunction>
									<script type="text/javascript" charset="UTF-8">
											(function($) {
												$.ajaxSetup({
												cache : false
											});

											$(document).ready(function() {
												iniciarPollConsumoDepartamento();											
											});
											iniciarPollConsumoDepartamento = function(){
												if(#{PainelGestorControle.mapDashboards.get('BI_CONSUMO_DEPARTAMENTO').ativado}){						
					        						setTimeout(validarPoolConsumoDepartamento(), 1000);					        						
					        					}else{
					        						criarGraficoConsumoGeral();
					        					}
											};
										}(jQuery));
									</script>

									<h:panelGroup layout="block" styleClass="col-md-12  text-center mt50" rendered="#{!PainelGestorControle.mapDashboards.get('BI_CONSUMO_DEPARTAMENTO').ativado and !PainelGestorControle.montarGraficoConsumoInicialVisible}">
										<h:outputText value="#{msg.msg_relatorio_sem_dados}" styleClass="fs20 "></h:outputText>
									</h:panelGroup>
									<h:panelGroup layout="block" styleClass="col-md-12 text-center" rendered="#{!PainelGestorControle.mapDashboards.get('BI_CONSUMO_DEPARTAMENTO').ativado and PainelGestorControle.montarGraficoConsumoInicialVisible}">



										<h:panelGroup id="graficoConsumoPie" layout="block" styleClass="col-md-12">

										</h:panelGroup>

										<script type="text/javascript" charset="UTF-8">
												(function($) {
													$.ajaxSetup({
														cache : false
													});

													$(document)
															.ready(
																	function() {
																		criarGraficoConsumoGeral();
																	});

													criarGraficoConsumoGeral = function() {
														var options = {
															exporting : {
																type : 'image/jpeg',
																buttons : {
																	exportButton : {
																		y : 5,
																		menuItems : null,
																		onclick : function() {
																			this
																					.exportChart();
																		}
																	},
																	printButton : {
																		y : 5
																	}
																}
															},
															chart : {
																type : "pie",
																renderTo : "form\:graficoConsumoPie",
																events : {
																	click : function(
																			e) {
																		detalheConsumo(this.nome, this.y)
																		// 																	fireElement('form:detalheConsumo')
																	}
																},
																backgroundColor : "#FFF",
																marginTop : 40,
																height : 450

															},
															credits : {
																enabled : false
															},
															title : {
																text : '',
																align : 'left',
																useHTML : true,
																y : 5
															},
															plotOptions : {
																pie : {
																	allowPointSelect : true,
																	cursor : 'pointer',
																	point : {
																		events : {
																			click : function(
																					e) {
																				detalheConsumo(this.nome, this.nivel)
																				// 																			fireElement('form:detalheConsumo')
																			}
																		}
																	},
																	dataLabels : {
																		enabled : true,
																		formatter : function() {
																			return this.point.nivel +' - '+ this.point.valor
																					+ '<b>:'
																					+ this.point.y
																					+ '%</b>';
																		}
																	},
																	showInLegend : true

																}
															},
															legend : {
																layout : 'vertical',
																maxHeight : 108,
																margin : 20,
																labelFormatter : function() {
																	return this.nome +' - '+ this.valor
																			+ ': <b>'
																			+ this.y
																			+ '%</b>';
																}
															},
															tooltip : {
																formatter : function() {
																	return '<div style="width:280px"><b>'
																			+ this.point.nome
																			+ ' - '
																			+ this.point.valor
																			+ '</b>: '
																			+ this.point.y
																			+ '%</div>';
																}
															},

															series : [ {
																visible : ${PainelGestorControle.montarGraficoConsumoInicialVisible},
																data : [ ${PainelGestorControle.montarDataGraficoConsumoInicial} ]
															} ]
														};
														var chart4 = new Highcharts.Chart(
																options);
													};

												}(jQuery));
											</script>

									</h:panelGroup>
								</h:panelGroup>

							</ui:define>
						</otm2:dashpanel>

					</h:panelGroup>





					<h:panelGroup layout="block" style="order:#{PainelGestorControle.mapDashboards.get('BI_CONSUMO_CATEGORIA').ordem}" rendered="#{LoginControle.permissaoAcessoMenuVO.painelGestorDespesaCategoria and !PainelGestorControle.mapDashboards.get('BI_CONSUMO_CATEGORIA').ocultar}" id="BI_CONSUMO_CATEGORIA" styleClass="col-md-6">
						<rich:dropTarget dropValue="#{PainelGestorControle.mapDashboards.get('BI_CONSUMO_CATEGORIA')}" render=":form:panelGeral" dropListener="#{PainelGestorControle.registrarPosicaoDashboard}" acceptedTypes="DASHBOARDS" />
						<rich:dragSource type="DASHBOARDS" dragIndicator="BI_CONSUMO_CATEGORIA_DRAG" dragValue="#{PainelGestorControle.mapDashboards.get('BI_CONSUMO_CATEGORIA')}">
						</rich:dragSource>


						<otm2:dashpanel id="dashboardBI_CONSUMO_CATEGORIA" cols="12">
							<ui:define name="header">
								<i class="#{PainelGestorControle.mapDashboards.get('BI_CONSUMO_CATEGORIA').icone} mr-2 fs12"></i>
								<otm:outputHelp id="helpgraficoCategoriaDespesa" styleClassPanel=" " tooltip="#{msg.msg_PainelGestor_graficoCategoriaDespesa}" styleClass="fs12 fonteHeaderDashboard" value="#{PainelGestorControle.mapDashboards.get('BI_CONSUMO_CATEGORIA').titulo}" />
								<a4j:commandLink action="#{PainelGestorControle.persistirDashboard(PainelGestorControle.mapDashboards.get('BI_CONSUMO_CATEGORIA'))}" rendered="#{!PainelGestorControle.mapDashboards.get('BI_CONSUMO_CATEGORIA').maximizado}" styleClass="float-right p-0" render="panelGeral">
									<i class="fas fa-angle-down text-center fonteHeaderDashboard mr-2 fs12" />
									<f:setPropertyActionListener value="true" target="#{PainelGestorControle.mapDashboards.get('BI_CONSUMO_CATEGORIA').maximizado}"></f:setPropertyActionListener>
								</a4j:commandLink>
								<a4j:commandLink action="#{PainelGestorControle.persistirDashboard(PainelGestorControle.mapDashboards.get('BI_CONSUMO_CATEGORIA'))}" rendered="#{PainelGestorControle.mapDashboards.get('BI_CONSUMO_CATEGORIA').maximizado}" styleClass="float-right p-0" render="panelGeral">
									<i class="fas fa-angle-up text-center fonteHeaderDashboard mr-2 fs12" />
									<f:setPropertyActionListener value="false" target="#{PainelGestorControle.mapDashboards.get('BI_CONSUMO_CATEGORIA').maximizado}"></f:setPropertyActionListener>
								</a4j:commandLink>
								<a4j:commandLink id="ocultarCCat" action="#{PainelGestorControle.persistirDashboard(PainelGestorControle.mapDashboards.get('BI_CONSUMO_CATEGORIA'))}" render=":form:menuTopo, :form:panelGeral" styleClass="border-0 bg-transparent float-right p-0" title="Ocultar Gráfico">
									<i class="fas fa-compress-arrows-alt text-center fonteHeaderDashboard mr-2 fs12" />
									<f:setPropertyActionListener value="true" target="#{PainelGestorControle.mapDashboards.get('BI_CONSUMO_CATEGORIA').ocultar}"></f:setPropertyActionListener>
								</a4j:commandLink>
								<otm:commandIcon action="#{PainelGestorControle.inicializarGraficoPainelGestorConsumoPorCategoria}" status="stsRD" oncomplete="iniciarPollConsumoCategoria()" render="BI_CONSUMO_CATEGORIA" icon="#{msg_botoes.btn_icon_atualizar_embutido}" styleClass="border-0 bg-transparent float-right p-0 mr10 fonteHeaderDashboard" id="btnAtualizarGraficoConsumoCat" />
								<a4j:commandLink style="cursor:pointer;display:none" id="detalharCategoriaDespesa" title="#{msg.msg_visualizarDetalhes}" action="#{PainelGestorControle.consultarDadosPainelGestorCategoriaDespesaMonitoramentoFinanceiro}">
									<f:setPropertyActionListener value="" target="#{PainelGestorControle.painelGestorVO.nivelAtualCategoriaDespesa}" />
									<f:setPropertyActionListener target="#{PainelGestorControle.mesAno}" value="" />
									<f:setPropertyActionListener target="#{PainelGestorControle.telaOrigem}" value="PAGINA_INICIAL" />
								</a4j:commandLink>


							</ui:define>
							<ui:define name="body">
								<h:panelGroup layout="block" styleClass="row" rendered="#{PainelGestorControle.mapDashboards.get('BI_CONSUMO_CATEGORIA').maximizado}" style="height:450px;overflow-x:auto">
									<h:panelGroup layout="block" rendered="#{PainelGestorControle.mapDashboards.get('BI_CONSUMO_CATEGORIA').ativado}" styleClass="w-100 bg-dark text-center" style="text-align:center;height:450px;opacity: 0.2;">
										<h:panelGroup layout="block" styleClass="loading-icon" style="position:relative;top:43%;left:47%;width:60px;height:60px">
											<h:graphicImage value="#{resource['imagens/logo_sei_cinza.png']}" style="width:60px;" />
										</h:panelGroup>
									</h:panelGroup>

									<a4j:jsFunction execute="@region" immediate="true" name="validarPoolConsumoCategoria" status="pollConsumoCategoria" action="#{PainelGestorControle.mapDashboards.get('BI_CONSUMO_CATEGORIA').encerrarDashboard}" oncomplete="#{!PainelGestorControle.mapDashboards.get('BI_CONSUMO_CATEGORIA').ativado ? 'criarGraficoCategoriaDespesaPie()' : 'iniciarPollConsumoCategoria()' }" render="#{!PainelGestorControle.mapDashboards.get('BI_CONSUMO_CATEGORIA').ativado ? 'BI_CONSUMO_CATEGORIA' : ''}"></a4j:jsFunction>
									<script type="text/javascript" charset="UTF-8">
											(function($) {
												$.ajaxSetup({
												cache : false
											});

											$(document).ready(function() {
												iniciarPollConsumoCategoria();											
											});
											iniciarPollConsumoCategoria= function(){
												if(#{PainelGestorControle.mapDashboards.get('BI_CONSUMO_CATEGORIA').ativado}){						
					        						setTimeout(validarPoolConsumoCategoria(), 1000);					        						
					        					}else{
					        						criarGraficoCategoriaDespesaPie();
					        					}
											};
										}(jQuery));
									</script>

									<h:panelGroup layout="block" styleClass="col-md-12  text-center mt50" rendered="#{!PainelGestorControle.mapDashboards.get('BI_CONSUMO_CATEGORIA').ativado and !PainelGestorControle.montarGraficoDespesaInicialVisible}">
										<h:outputText value="#{msg.msg_relatorio_sem_dados}" styleClass="fs20 "></h:outputText>
									</h:panelGroup>
									<h:panelGroup layout="block" styleClass="col-md-12 text-center" rendered="#{!PainelGestorControle.mapDashboards.get('BI_CONSUMO_CATEGORIA').ativado and PainelGestorControle.montarGraficoDespesaInicialVisible}">


										<h:panelGroup id="graficoCategoriaDespesaPie" layout="block" styleClass="col-md-12">

										</h:panelGroup>

										<script type="text/javascript" charset="UTF-8">
												(function($) {
													$.ajaxSetup({
														cache : false
													});

													$(document)
															.ready(
																	function() {
																		criarGraficoCategoriaDespesaPie();
																	});

													criarGraficoCategoriaDespesaPie = function() {
														var options = {
															exporting : {
																type : 'image/jpeg',
																buttons : {
																	exportButton : {
																		y : 5,
																		menuItems : null,
																		onclick : function() {
																			this
																					.exportChart();
																		}
																	},
																	printButton : {
																		y : 5
																	}
																}
															},
															chart : {
																type : "pie",
																renderTo : "form\:graficoCategoriaDespesaPie",
																events : {
																	click : function(
																			e) {
																		fireElement("form:detalharCategoriaDespesa");
																	}
																},
																backgroundColor : "#FFF",
																height : 450

															},
															credits : {
																enabled : false
															},
															title : {
																text : '',
																align : 'left',
																useHTML : true,
																y : 5
															},
															plotOptions : {
																pie : {
																	allowPointSelect : true,
																	cursor : 'pointer',
																	point : {
																		events : {
																			click : function(
																					e) {
																				fireElement("form:detalharCategoriaDespesa");
																			}
																		}
																	},
																	dataLabels : {
																		enabled : true,
																		formatter : function() {
																			return this.point.nivel
																					+ '- <b>'
																					+ this.point.y
																					+ '%</b>';
																		}
																	},
																	showInLegend : true

																}
															},
															legend : {
																layout : 'vertical',

																labelFormatter : function() {
																	return this.nome
																			+ ': <b>'
																			+ this.y
																			+ '%</b>';
																}
															},
															tooltip : {
																formatter : function() {
																	return '<div style="width:280px"><b>'
																			+ this.point.nome
																			+ ' - '
																			+ this.point.valor
																			+ '</b>: '
																			+ this.point.y
																			+ '%</div>';
																}
															},

															series : [ {
																visible : ${PainelGestorControle.montarGraficoDespesaInicialVisible},
																data : [ ${PainelGestorControle.montarDataGraficoDespesaInicial} ]
															} ]
														};
														var chart4 = new Highcharts.Chart(
																options);
													};

												}(jQuery));
											</script>
									</h:panelGroup>
								</h:panelGroup>

							</ui:define>
						</otm2:dashpanel>


					</h:panelGroup>




					<h:panelGroup id="BI_PLANO_ORCAMENTARIO" layout="block" style="order:#{PainelGestorControle.mapDashboards.get('BI_PLANO_ORCAMENTARIO').ordem}" styleClass="col-md-6" rendered="#{LoginControle.permissaoAcessoMenuVO.painelGestorPlanoOrcamentario and !PainelGestorControle.mapDashboards.get('BI_PLANO_ORCAMENTARIO').ocultar}">
						<rich:dropTarget dropValue="#{PainelGestorControle.mapDashboards.get('BI_PLANO_ORCAMENTARIO')}" render=":form:panelGeral" dropListener="#{PainelGestorControle.registrarPosicaoDashboard}" acceptedTypes="DASHBOARDS" />
						<rich:dragSource type="DASHBOARDS" dragIndicator="BI_PLANO_ORCAMENTARIO_DRAG" dragValue="#{PainelGestorControle.mapDashboards.get('BI_PLANO_ORCAMENTARIO')}">
						</rich:dragSource>

						<otm2:dashpanel id="dashboardBI_PLANO_ORCAMENTARIO" cols="12">
							<ui:define name="header">
								<i class="#{PainelGestorControle.mapDashboards.get('BI_PLANO_ORCAMENTARIO').icone} mr-2 fs12"></i>
								<h:outputText styleClass="fs12 fonteHeaderDashboard" value="#{PainelGestorControle.mapDashboards.get('BI_PLANO_ORCAMENTARIO').titulo}" />
								<a4j:commandLink action="#{PainelGestorControle.persistirDashboard(PainelGestorControle.mapDashboards.get('BI_PLANO_ORCAMENTARIO'))}" rendered="#{!PainelGestorControle.mapDashboards.get('BI_PLANO_ORCAMENTARIO').maximizado}" styleClass="float-right p-0" render="panelGeral">
									<i class="fas fa-angle-down text-center fonteHeaderDashboard mr-2 fs12" />
									<f:setPropertyActionListener value="true" target="#{PainelGestorControle.mapDashboards.get('BI_PLANO_ORCAMENTARIO').maximizado}"></f:setPropertyActionListener>
								</a4j:commandLink>
								<a4j:commandLink action="#{PainelGestorControle.persistirDashboard(PainelGestorControle.mapDashboards.get('BI_PLANO_ORCAMENTARIO'))}" rendered="#{PainelGestorControle.mapDashboards.get('BI_PLANO_ORCAMENTARIO').maximizado}" styleClass="float-right p-0" render="panelGeral">
									<i class="fas fa-angle-up text-center fonteHeaderDashboard mr-2 fs12" />
									<f:setPropertyActionListener value="false" target="#{PainelGestorControle.mapDashboards.get('BI_PLANO_ORCAMENTARIO').maximizado}"></f:setPropertyActionListener>
								</a4j:commandLink>
								<a4j:commandLink id="ocultarPO" action="#{PainelGestorControle.persistirDashboard(PainelGestorControle.mapDashboards.get('BI_PLANO_ORCAMENTARIO'))}" render=":form:menuTopo, :form:panelGeral" styleClass="border-0 bg-transparent float-right p-0" title="Ocultar Gráfico">
									<i class="fas fa-compress-arrows-alt text-center fonteHeaderDashboard mr-2 fs12" />
									<f:setPropertyActionListener value="true" target="#{PainelGestorControle.mapDashboards.get('BI_PLANO_ORCAMENTARIO').ocultar}"></f:setPropertyActionListener>
								</a4j:commandLink>
								<otm:commandIcon action="#{PainelGestorControle.inicializarGraficoPainelGestorPlanoOrcamentario}" status="stsRD" oncomplete="iniciarPollConsumoDepartamento()" render="BI_PLANO_ORCAMENTARIO" icon="#{msg_botoes.btn_icon_atualizar_embutido}" styleClass="border-0 bg-transparent float-right p-0 mr10 fonteHeaderDashboard" id="btnAtualizarGraficoPlanoOrc" />

							</ui:define>
							<ui:define name="body">
								<h:panelGroup layout="block" styleClass="row" rendered="#{PainelGestorControle.mapDashboards.get('BI_PLANO_ORCAMENTARIO').maximizado}" style="height:450px;overflow-x:auto">
									<h:panelGroup layout="block" rendered="#{PainelGestorControle.mapDashboards.get('BI_PLANO_ORCAMENTARIO').ativado}" styleClass="w-100 bg-dark text-center" style="text-align:center;height:450px;opacity: 0.2;">
										<h:panelGroup layout="block" styleClass="loading-icon" style="position:relative;top:43%;left:47%;width:60px;height:60px">
											<h:graphicImage value="#{resource['imagens/logo_sei_cinza.png']}" style="width:60px;" />
										</h:panelGroup>
									</h:panelGroup>

									<a4j:jsFunction execute="@region" immediate="true" name="validarPoolPlanoOrcamentario" status="pollConsumoDepartamento" action="#{PainelGestorControle.mapDashboards.get('BI_PLANO_ORCAMENTARIO').encerrarDashboard}" oncomplete="#{!PainelGestorControle.mapDashboards.get('BI_PLANO_ORCAMENTARIO').ativado ? '' : 'iniciarPollPlanoOrcamentario()' }" render="#{!PainelGestorControle.mapDashboards.get('BI_PLANO_ORCAMENTARIO').ativado ? 'BI_PLANO_ORCAMENTARIO' : ''}"></a4j:jsFunction>
									<script type="text/javascript" charset="UTF-8">
											(function($) {
												$.ajaxSetup({
												cache : false
											});

											$(document).ready(function() {
												iniciarPollPlanoOrcamentario();											
											});
											iniciarPollPlanoOrcamentario = function(){
												if(#{PainelGestorControle.mapDashboards.get('BI_PLANO_ORCAMENTARIO').ativado}){						
					        						setTimeout(validarPoolPlanoOrcamentario(), 1000);					        						
					        					}
											};
										}(jQuery));
									</script>

									<h:panelGroup layout="block" styleClass="col-md-12  text-center mt50" rendered="#{!PainelGestorControle.mapDashboards.get('BI_PLANO_ORCAMENTARIO').ativado and empty PainelGestorControle.listaConsultarPlanoOrcamentario}">
										<h:outputText value="#{msg.msg_relatorio_sem_dados}" styleClass="fs20 "></h:outputText>
									</h:panelGroup>
									<h:panelGroup layout="block" styleClass="row" rendered="#{!PainelGestorControle.mapDashboards.get('BI_PLANO_ORCAMENTARIO').ativado and !empty PainelGestorControle.listaConsultarPlanoOrcamentario}">

										<a4j:repeat id="resultadoConsultaPlanoOrcamentario" value="#{PainelGestorControle.listaConsultarPlanoOrcamentario}" var="planoOrcamentarioItens">
											<h:panelGroup layout="block" styleClass="col-md-12 mt10 ">
												<otm2:panel name="panelPO_#{planoOrcamentarioItens.codigo}">
													<ui:define name="header">
														<h:outputText styleClass="tituloCampos btn-block mb10 mt10" value="#{planoOrcamentarioItens.nome}" />
													</ui:define>
													<ui:define name="body">
														<h:panelGroup layout="block" styleClass="col-md-4 pb10 pt10 text-center ">
															<h:outputText styleClass="text-danger btn-block fs18" value="#{planoOrcamentarioItens.valorTotalAprovado}">
																<f:converter converterId="FormatadorNumerico"></f:converter>
															</h:outputText>
															<h:outputText styleClass="text-danger btn-block fs12" value="(Aprovado)" />
														</h:panelGroup>
														<h:panelGroup layout="block" styleClass="col-md-4 pb10 pt10 text-center ">
															<h:outputText styleClass="text-success btn-block fs18" value="#{planoOrcamentarioItens.valorTotalConsumido}">
																<f:converter converterId="FormatadorNumerico"></f:converter>
															</h:outputText>
															<h:outputText styleClass="text-danger btn-block fs12" value="(Consumido)" />
														</h:panelGroup>
														<h:panelGroup layout="block" styleClass="col-md-4 pb10 pt10 text-center ">
															<h:outputText styleClass="text-warning btn-block fs18" value="#{planoOrcamentarioItens.valorTotalPendente}">
																<f:converter converterId="FormatadorNumerico"></f:converter>
															</h:outputText>
															<h:outputText styleClass="text-danger btn-block fs12" value="(Saldo)" />
														</h:panelGroup>
													</ui:define>
													<ui:define name="footer">
														<h:panelGroup layout="block" styleClass="col-md-12 text-center pt5 pb5">
															<otm:commandButton value="Detalhar" oncomplete="abrirPopup('../planoOrcamentario/planoOrcamentarioForm.xhtml', 'PlanoOrcamentario', 950, 595);" action="#{PainelGestorControle.selecionarPlanoOrcamentario}" icon="#{msg_botoes.btn_icon_lupa_embutido}" />
														</h:panelGroup>
													</ui:define>
												</otm2:panel>
											</h:panelGroup>

										</a4j:repeat>
									</h:panelGroup>



								</h:panelGroup>

							</ui:define>
						</otm2:dashpanel>
					</h:panelGroup>
				</h:panelGroup>
			</h:panelGroup>
		</h:form>
	</ui:define>
</ui:composition>
</html>

