<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" xmlns:otm="http://java.sun.com/jsf/composite/otm" xmlns:otm2="http://www.otimize-ti.com.br">
<h:panelGroup id="LANCAMENTOS_FINANCEIROS_PENDENTE" style="order:#{LoginControle.mapDashboards.get('LANCAMENTOS_FINANCEIROS_PENDENTE').ordem}" layout="block" styleClass="col-md-6" rendered="#{PainelGestorFinanceiroControle.perfilAcessoPainelLancamentosPendentes and LoginControle.mapDashboards.get('LANCAMENTOS_FINANCEIROS_PENDENTE') != null and !LoginControle.mapDashboards.get('LANCAMENTOS_FINANCEIROS_PENDENTE').ocultar }">
	<rich:dropTarget dropValue="#{LoginControle.mapDashboards.get('LANCAMENTOS_FINANCEIROS_PENDENTE')}" render=":form:panelGeral" dropListener="#{LoginControle.registrarPosicaoDashboard}" acceptedTypes="DASHBOARDS" />
	<rich:dragSource type="DASHBOARDS" dragIndicator="LANCAMENTOS_FINANCEIROS_PENDENTE_DRAG" dragValue="#{LoginControle.mapDashboards.get('LANCAMENTOS_FINANCEIROS_PENDENTE')}">
	</rich:dragSource>
	<otm2:dashpanel id="lancamentoPendentes" cols="12">
		<ui:define name="header">
			<i class="#{LoginControle.mapDashboards.get('LANCAMENTOS_FINANCEIROS_PENDENTE').icone} mr-2 "></i>
			<h:outputLabel styleClass="fs12 fonteHeaderDashboard" value="#{LoginControle.mapDashboards.get('LANCAMENTOS_FINANCEIROS_PENDENTE').titulo}" />
<!-- 			<a4j:commandLink action="#{LoginControle.persistirDashboard(LoginControle.mapDashboards.get('LANCAMENTOS_FINANCEIROS_PENDENTE'))}" rendered="#{!LoginControle.mapDashboards.get('LANCAMENTOS_FINANCEIROS_PENDENTE').maximizado}" styleClass="float-right p-0" render="panelGeral"> -->
<!-- 				<i class="fas fa-angle-down text-center  fonteHeaderDashboard mr-2 " /> -->
<!-- 				<f:setPropertyActionListener value="true" target="#{LoginControle.mapDashboards.get('LANCAMENTOS_FINANCEIROS_PENDENTE').maximizado}"></f:setPropertyActionListener> -->
<!-- 			</a4j:commandLink> -->
<!-- 			<a4j:commandLink action="#{LoginControle.persistirDashboard(LoginControle.mapDashboards.get('LANCAMENTOS_FINANCEIROS_PENDENTE'))}" rendered="#{LoginControle.mapDashboards.get('LANCAMENTOS_FINANCEIROS_PENDENTE').maximizado}" styleClass="float-right p-0" render="panelGeral"> -->
<!-- 				<i class="fas fa-angle-up text-center  fonteHeaderDashboard mr-2" /> -->
<!-- 				<f:setPropertyActionListener value="false" target="#{LoginControle.mapDashboards.get('LANCAMENTOS_FINANCEIROS_PENDENTE').maximizado}"></f:setPropertyActionListener> -->
<!-- 			</a4j:commandLink> -->
<!-- 			<a4j:commandLink id="ocultarLanPendFin" action="#{LoginControle.persistirDashboard(LoginControle.mapDashboards.get('LANCAMENTOS_FINANCEIROS_PENDENTE'))}" render=":form:menuTopo, :form:panelGeral" styleClass="border-0 bg-transparent float-right p-0" title="Ocultar Painel"> -->
<!-- 				<i class="fas fa-compress-arrows-alt  text-center fonteHeaderDashboard mr-2" /> -->
<!-- 				<f:setPropertyActionListener value="true" target="#{LoginControle.mapDashboards.get('LANCAMENTOS_FINANCEIROS_PENDENTE').ocultar}"></f:setPropertyActionListener> -->
<!-- 			</a4j:commandLink> -->


			<otm:commandIcon id="atualizarMapa" status="stusLanFut" action="#{PainelGestorFinanceiroControle.inicializarDadosPainelGestorFinanceiro}" 
			icon="#{msg_botoes.btn_icon_atualizar_embutido}" render="form:LANCAMENTOS_FINANCEIROS_PENDENTE" oncomplete="iniciarPollPainelFinanceiro()" 
			styleClass="border-0 bg-transparent float-right p-0 mr10 fonteHeaderDashboard" />
		</ui:define>
		<ui:define name="body">

			<h:panelGroup styleClass="row scroller-x" rendered="#{LoginControle.mapDashboards.get('LANCAMENTOS_FINANCEIROS_PENDENTE').maximizado}" style="height:300px;overflow-x:auto">
			
				<a4j:jsFunction execute="@region" immediate="true" name="validarPoolPainelFinanceiro" status="pollPainelFin" action="#{LoginControle.mapDashboards.get('LANCAMENTOS_FINANCEIROS_PENDENTE').encerrarDashboard}" oncomplete="#{!LoginControle.mapDashboards.get('LANCAMENTOS_FINANCEIROS_PENDENTE').ativado ? '' : 'iniciarPollPainelFinanceiro()' }" render="#{!LoginControle.mapDashboards.get('LANCAMENTOS_FINANCEIROS_PENDENTE').ativado ? 'LANCAMENTOS_FINANCEIROS_PENDENTE' : ''}"></a4j:jsFunction>


				<h:panelGroup layout="block" rendered="#{LoginControle.mapDashboards.get('LANCAMENTOS_FINANCEIROS_PENDENTE').ativado}" styleClass="w-100 bg-dark text-center" style="text-align:center;height:297px;opacity: 0.2;">
					<h:panelGroup layout="block" styleClass="loading-icon" style="position:relative;top:43%;left:47%;width:60px;height:60px">
						<h:graphicImage value="#{resource['imagens/logo_sei_cinza.png']}" style="width:60px;" />
					</h:panelGroup>
				</h:panelGroup>


				<script type="text/javascript" charset="UTF-8">
					(function($) {
						$.ajaxSetup({
							cache : false
						});
						$.ajax({
							cache : false,
						});
						$(document).ready(function() {
							iniciarPollPainelFinanceiro();
						});
						
						iniciarPollPainelFinanceiro = function(){	
	        					if(#{LoginControle.mapDashboards.get('LANCAMENTOS_FINANCEIROS_PENDENTE').ativado}){						
	        						setTimeout(validarPoolPainelFinanceiro(), 1000);	        						
	        					}
	        				};
					}(jQuery));
	        	</script>
				<h:panelGroup layout="block" rendered="#{!LoginControle.mapDashboards.get('LANCAMENTOS_FINANCEIROS_PENDENTE').ativado}" styleClass="row" id="painelPendenciaFinanceira">
					<a4j:repeat id="dataTableLanFut" rendered="#{PainelGestorFinanceiroControle.mostrarPainelLancamentosPendentes}" value="#{PainelGestorFinanceiroControle.estatisticasLancamentosFuturosVOs}" var="linhaEstatisticas">
						<h:panelGroup layout="block" styleClass="col-md-4 p5">
							<otm2:panel styleClass="pn" name="idPanelFinan" renderedControl="false" styleClassFooter="dn">
								<ui:define name="header">
									<h:outputText value="#{linhaEstatisticas.tipoMapaLancamento.descricaoPlural}" />
								</ui:define>
								<ui:define name="body">
									<h:panelGroup layout="block" styleClass="col-md-12 mt10 text-center">
										<h:outputText styleClass="text-danger btn-block fs10" value="Anterior" />
										<a4j:commandLink disabled="#{linhaEstatisticas.desabilitar}" styleClass="text-danger btn-block fs20" oncomplete="#{linhaEstatisticas.popup}" action="#{PainelGestorFinanceiroControle.consultarLancamentosPendentesAnterior}">
											<h:outputText value="#{linhaEstatisticas.qtdAnterior}" />
										</a4j:commandLink>
									</h:panelGroup>

									<h:panelGroup layout="block"  styleClass="col-md-12 mt10 text-center">
										<h:outputText  styleClass="text-info btn-block fs10" value="Hoje" />

										<a4j:commandLink disabled="#{linhaEstatisticas.desabilitar}" styleClass="text-info btn-block fs20" oncomplete="#{linhaEstatisticas.popup}" 
										action="#{PainelGestorFinanceiroControle.consultarLancamentosPendentesHoje}">
											<h:outputText value="#{linhaEstatisticas.qtdHoje}" />
										</a4j:commandLink>
									</h:panelGroup>
									<h:panelGroup layout="block"   styleClass="col-md-12 mt10 text-center">
										<h:outputText styleClass="text-default btn-block fs10" value="Futuros" />										
										<a4j:commandLink disabled="#{linhaEstatisticas.desabilitar}" styleClass="text-default btn-block fs20" oncomplete="#{linhaEstatisticas.popup}" action="#{PainelGestorFinanceiroControle.consultarLancamentosPendentesFuturo}">
											<h:outputText value="#{linhaEstatisticas.qtdFuturos}" />
										</a4j:commandLink>
									</h:panelGroup>

								</ui:define>
							</otm2:panel>
						</h:panelGroup>
					</a4j:repeat>
					<h:panelGroup layout="block" rendered="#{!PainelGestorFinanceiroControle.mostrarPainelLancamentosPendentes}" styleClass="col-md-12 text-center mt50">
						<h:outputText value="Oba! Nenhum LanÃ§amento Pendente Encontrado!" />
					</h:panelGroup>
				</h:panelGroup>
			</h:panelGroup>
		</ui:define>
	</otm2:dashpanel>
</h:panelGroup>
</html>