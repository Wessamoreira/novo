<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" xmlns:otm="http://java.sun.com/jsf/composite/otm">
<h:head>
</h:head>
<ui:composition template="/visaoAdministrativo/template/visaoAdministrativa.xhtml">
	<ui:define name="tituloPagina">
		<h:outputText value="#{msg_aplic.prt_ContaReceberAgrupada_tituloForm}" />
	</ui:define>
	<ui:define name="conteudo">
		<!-- 	<head> -->
		<!-- <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"> -->
		<!-- <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8" /> -->
		<!-- <meta http-equiv="Cache-Control" Content="no-cache" /> -->
		<!-- <meta http-equiv="Pragma" content="no-cache" /> -->
		<!-- <meta http-equiv="Expires" content="0" /> -->
		<!-- <title><h:outputText value="#{msg_aplic.prt_ContaReceberAgrupada_tituloForm} " /></title> -->
		<!-- 	</head> -->
		<rich:popupPanel styleClass="modalMaximizado" id="panelMensagemErro" shadowOpacity="true" width="750" height="500">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="#{msg.msg_RichMensagemErro}" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hiperlinkMensagemErro" />
					<rich:componentControl target="panelMensagemErro" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formMensagemErro" onkeydown="fecharModal('panelMensagemErro',event);">
				<h:panelGroup columns="1" width="100%">
					<rich:dataTable id="listaMensagemErro" width="100%" styleClass="field control-label mensagemDetalhada col-md-12" columnClasses="colunaEsquerda" value="#{ContaReceberAgrupadaControle.listaMensagemErro}" var="mensagem" rows="10">
						<rich:column>
							<h:outputText value="#{mensagem}" />
						</rich:column>
					</rich:dataTable>
					<rich:dataScroller align="center" boundaryControls="auto" stepControls="auto" fastControls="hide" for="formMensagemErro:listaMensagemErro" maxPages="10" id="scResultadoListaMensagemErro" />
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
		<rich:popupPanel styleClass="modalMaximizado" id="panelEmissaoBoleto" shadowOpacity="true" width="750" height="500">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="EmissÃ£o de Boleto(s)"></h:outputText>
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelinkEmissaoBoleto" />
					<rich:componentControl target="panelEmissaoBoleto" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formEmissaoBoleto">
				<h:panelGroup layout="block" styleClass="col-md-6">
					<h:outputText styleClass="field control-label tituloCampos" value="Layout Boleto" />
					<h:selectOneMenu styleClass="form-control campos" value="#{ContaReceberAgrupadaControle.tipoBoleto}">
						<f:selectItems value="#{ContaReceberAgrupadaControle.tipoConsultaComboTipoBoleto}" />
					</h:selectOneMenu>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-12 text-center" style="margin:10px">
					<otm:commandButton id="imprimirBoleto" action="#{ContaReceberAgrupadaControle.imprimirBoleto}" oncomplete="#{ContaReceberAgrupadaControle.download}" value="Imprimir Boleto" render="form" icon="#{msg_botoes.btn_icon_imprimir_embutido}" styleClass="btn btn-default" />
				</h:panelGroup>
				<h:panelGroup id="mensagemEmissaoTermoReconhecimentoDivida" columns="1" width="100%" styleClass="tabMensagens">
					<otm:mensagem bean="#{ContaReceberAgrupadaControle}"></otm:mensagem>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
		<rich:popupPanel styleClass="modalMaximizado" id="panelContaReceber" shadowOpacity="true" top="0" width="750" height="500">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="Adicionar Conta Receber"></h:outputText>
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelinkContaReceber" />
					<rich:componentControl target="panelContaReceber" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formContaReceber">
				<h:panelGroup columns="1" width="100%" columnClasses="colunaCentralizada">
					<rich:dataTable width="100%" headerClass="consulta" rendered="#{!empty ContaReceberAgrupadaControle.contaReceberVOs}" id="resultadoConsultarContaReceber" value="#{ContaReceberAgrupadaControle.contaReceberVOs}" var="contaReceberItens">
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_ContaReceber_nossoNumero}" />
							</f:facet>
							<h:outputText styleClass="field control-label tituloCampos" value="#{contaReceberItens.nossoNumero}" />
						</rich:column>
						<rich:column width="180">
							<f:facet name="header">
								<h:outputText value="Pessoa" />
							</f:facet>
							<h:outputText styleClass="field control-label tituloCampos" value="#{contaReceberItens.dadosPessoaAtiva}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_ContaReceber_tipoOrigem}" />
							</f:facet>
							<h:outputText styleClass="field control-label tituloCampos" value="#{contaReceberItens.tipoOrigem_apresentar}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_ContaReceber_parcela}" />
							</f:facet>
							<rich:tooltip value="Tipo Origem: #{contaReceberItens.tipoOrigem_apresentar}" direction="topLeft" followMouse="true" target="parcela" style="background-color:#cccccc;border-color:#666666" />
							<h:outputText styleClass="field control-label tituloCampos" value="#{contaReceberItens.parcela}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_ContaReceber_valor}" />
							</f:facet>
							<h:outputText styleClass="field control-label tituloCampos" value="#{contaReceberItens.valor}">
								<f:converter converterId="FormatadorNumerico" />
							</h:outputText>
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_ContaReceber_dataVencimento}" />
							</f:facet>
							<h:outputText styleClass="field control-label tituloCampos" value="#{contaReceberItens.dataVencimento_Apresentar}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_botoes.btn_opcoes}" />
							</f:facet>
							<otm:commandIcon action="#{ContaReceberAgrupadaControle.adicionarContaReceber}" render="form" icon="#{msg_botoes.btn_icon_adicionar} iconePequeno" tooltip="#{msg.msg_adicionar_dados}" />
						</rich:column>
					</rich:dataTable>
					<rich:dataScroller align="center" rendered="#{!empty ContaReceberAgrupadaControle.contaReceberVOs}" boundaryControls="auto" stepControls="auto" fastControls="hide" for="formContaReceber:resultadoConsultarContaReceber" maxPages="10" id="scResultadoContaReceber" />
					<h:panelGroup id="mensagemConsultarContaReceber" columns="1" width="100%" styleClass="tabMensagens">
						<otm:mensagem bean="#{ContaReceberAgrupadaControle}"></otm:mensagem>
					</h:panelGroup>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
		<h:form id="form">
			<h:commandLink action="#{ContaReceberAgrupadaControle.liberarBackingBeanMemoria}" id="idLiberarBackingBeanMemoria" style="display: none" />
			<h:panelGroup id="panelGridForm">
				<rich:tabPanel>
					<rich:tab header="Dados da Conta">
						<h:panelGroup layout="block" styleClass="row">
							<h:panelGroup id="dadosBasicos">
								<h:panelGroup layout="block" styleClass="col-md-12 pn">
									<h:panelGroup layout="block" styleClass="col-md-6">
										<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_ContaReceberAgrupada_unidadeEnsino}" />
										<h:inputText size="50" readonly="true" styleClass="form-control camposSomenteLeitura" value="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.unidadeEnsino.nome}" />
									</h:panelGroup>
									<h:panelGroup layout="block" styleClass="col-md-2" rendered="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.tipoPessoa eq 'ALUNO'}">
										<h:outputText styleClass="field control-label tituloCampos" rendered="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.tipoPessoa eq 'ALUNO'}" value="#{msg_aplic.prt_ContaReceberAgrupada_matricula}" />
										<h:inputText styleClass="form-control camposSomenteLeitura" readonly="true" size="50" value="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.matricula.matricula}  - #{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.pessoa.nome}">
										</h:inputText>
									</h:panelGroup>
									<h:panelGroup layout="block" styleClass="col-md-4">
										<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_ContaReceberAgrupada_contaCorrente}" />
										<h:selectOneMenu styleClass="form-control camposObrigatorios" value="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.contaCorrente.codigo}">
											<f:selectItems value="#{ContaReceberAgrupadaControle.listaSelectItemContaCorrente}" />
										</h:selectOneMenu>
									</h:panelGroup>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-4" rendered="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.tipoPessoa eq 'RESPONSAVEL_FINANCEIRO'}">
									<h:outputText styleClass="field control-label tituloCampos" rendered="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.tipoPessoa eq 'RESPONSAVEL_FINANCEIRO'}" value="#{msg_aplic.prt_ContaReceberAgrupada_responsavelFinanceiro}" />
									<h:inputText styleClass="form-control camposSomenteLeitura" readonly="true" size="50" value="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.pessoa.nome}">
									</h:inputText>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-2">
									<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_ContaReceberAgrupada_dataVencimento}" />
									<h:inputText readonly="true" size="10" styleClass="form-control camposSomenteLeitura" value="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.dataVencimento}">
										<f:convertDateTime pattern="dd/MM/yyyy" />
									</h:inputText>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-2">
									<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_ContaReceberAgrupada_nossoNumero}" />
									<h:inputText readonly="true" size="20" styleClass="form-control camposSomenteLeitura" value="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.nossoNumero}">
									</h:inputText>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-2">
									<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_ContaReceberAgrupada_situacao}" />
									<h:inputText readonly="true" size="10" styleClass="form-control camposSomenteLeitura" value="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.situacao.descricao}">
									</h:inputText>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-2">
									<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_ContaReceberAgrupada_valor}" />
									<h:inputText readonly="true" size="20" styleClass="form-control camposSomenteLeitura" value="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.valorTotal}">
										<f:converter converterId="FormatadorNumerico" />
									</h:inputText>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-2" rendered="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.situacao eq 'RECEBIDO' }">
									<h:outputText rendered="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.situacao eq 'RECEBIDO' }" styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_ContaReceberAgrupada_dataRecebimento}" />
									<h:inputText readonly="true" size="10" styleClass="form-control camposSomenteLeitura" value="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.dataRecebimento}">
										<f:convertDateTime pattern="dd/MM/yyyy" />
									</h:inputText>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-2" rendered="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.situacao eq 'RECEBIDO' }">
									<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_ContaReceberAgrupada_valorJuro}" />
									<h:inputText readonly="true" size="12" styleClass="form-control camposSomenteLeitura" value="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.valorTotalJuro}">
										<f:converter converterId="FormatadorNumerico" />
									</h:inputText>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-2" rendered="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.situacao eq 'RECEBIDO' }">
									<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_ContaReceberAgrupada_valorMulta}" />
									<h:inputText readonly="true" size="12" styleClass="form-control camposSomenteLeitura" value="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.valorTotalMulta}">
										<f:converter converterId="FormatadorNumerico" />
									</h:inputText>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-2" rendered="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.situacao eq 'RECEBIDO' }">
									<h:outputText rendered="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.situacao eq 'RECEBIDO' }" styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_ContaReceberAgrupada_valorDesconto}" />
									<h:inputText readonly="true" size="10" styleClass="form-control camposSomenteLeitura" value="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.valorTotalDesconto}">
										<f:converter converterId="FormatadorNumerico" />
									</h:inputText>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-2" rendered="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.situacao eq 'RECEBIDO' }">
									<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_ContaReceberAgrupada_valorRecebido}" />
									<h:inputText readonly="true" size="12" styleClass="form-control camposSomenteLeitura" value="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.valorTotalRecebido}">
										<f:converter converterId="FormatadorNumerico" />
									</h:inputText>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-6">
									<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_ContaReceber_descricaoPagamento}" />
									<h:inputTextarea styleClass="form-control" value="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.descricao}">
									</h:inputTextarea>
								</h:panelGroup>
							</h:panelGroup>
						</h:panelGroup>
					</rich:tab>
					<rich:tab header="Contas Agrupadas">
						<h:panelGroup layout="block" styleClass="col-md-12 text-center" style="margin:10px">
							<a4j:commandButton rendered="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.situacao ne 'RECEBIDO' }" render="formContaReceber" image="#{resource['/imagens/botaoAdicionarContaReceber.png']}" oncomplete="#{rich:component('panelContaReceber')}.show()" action="#{ContaReceberAgrupadaControle.consultarContaReceber}" />
						</h:panelGroup>
						<rich:dataTable headerClass="consulta" width="100%" value="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.contaReceberVOs}" var="contaReceberItens">
							<rich:column style="text-align:center">
								<f:facet name="header">
									<h:outputText value="#{msg_aplic.prt_ContaReceber_nossoNumero}" />
								</f:facet>
								<h:outputText value="#{contaReceberItens.nossoNumero}" />
							</rich:column>
							<rich:column rendered="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.tipoPessoa eq 'RESPONSAVEL_FINANCEIRO'}" width="180">
								<f:facet name="header">
									<h:outputText value="Pessoa" />
								</f:facet>
								<h:outputText value="#{contaReceberItens.dadosPessoaAtiva}" />
							</rich:column>
							<rich:column>
								<f:facet name="header">
									<h:outputText value="#{msg_aplic.prt_ContaReceber_tipoOrigem}" />
								</f:facet>
								<h:outputText value="#{contaReceberItens.tipoOrigem_apresentar}" />
							</rich:column>
							<rich:column style="text-align:center">
								<f:facet name="header">
									<h:outputText value="#{msg_aplic.prt_ContaReceber_parcela}" />
								</f:facet>
								<h:outputText id="parcela" value="#{contaReceberItens.parcela}" />
							</rich:column>
							<rich:column style="text-align:center">
								<f:facet name="header">
									<h:outputText value="#{msg_aplic.prt_ContaReceber_valor}" />
								</f:facet>
								<h:outputText value="#{contaReceberItens.valor}">
									<f:converter converterId="FormatadorNumerico" />
								</h:outputText>
							</rich:column>
							<rich:column style="text-align:center">
								<f:facet name="header">
									<h:outputText value="#{msg_aplic.prt_ContaReceber_dataVencimento}" />
								</f:facet>
								<h:outputText value="#{contaReceberItens.dataVencimento_Apresentar}" />
							</rich:column>
							<rich:column style="text-align:center" rendered="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.situacao ne 'RECEBIDO' }">
								<f:facet name="header">
									<h:outputText value="#{msg_botoes.btn_opcoes}" />
								</f:facet>
								<a4j:commandButton style="margin:0px" render="form" image="#{resource['/imagens/botaoRemoverPeq.png']}" action="#{ContaReceberAgrupadaControle.removerContaReceber}" />
							</rich:column>
						</rich:dataTable>
					</rich:tab>
				</rich:tabPanel>
				<h:panelGroup id="panelGridMensagens" columns="1" width="100%" styleClass="tabMensagens">
					<otm:mensagem bean="#{ContaReceberAgrupadaControle}"></otm:mensagem>
					<h:panelGroup layout="block" styleClass="col-md-12 text-center" style="margin:10px">
						<h:panelGroup>
							<otm:commandButton id="novo" action="#{ContaReceberAgrupadaControle.novo}" rendered="#{LoginControle.permissaoAcessoMenuVO.contaReceberAgrupada_PermitirProcessarAgrupamento}" value="#{msg_botoes.btn_novo}" styleClass="btn btn-info btn-novo" title="#{msg_botoes.btn_novo}" accesskey="1" />
							<otm:spacer rendered="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.situacao ne 'RECEBIDO'}" width="5px" />
							<otm:commandButton id="gravar" render="panelGridMensagens" rendered="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.situacao ne 'RECEBIDO'}" action="#{ContaReceberAgrupadaControle.persistir}" value="#{msg_botoes.btn_gravar}" styleClass="btn btn-dark btn-gravar" title="#{msg_botoes.btn_gravar}" accesskey="2" />
							<otm:spacer rendered="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.situacao ne 'RECEBIDO'}" width="5px" />
							<otm:commandButton id="excluir" rendered="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.situacao ne 'RECEBIDO'}" action="#{ContaReceberAgrupadaControle.excluir}" value="#{msg_botoes.btn_excluir}" onclick="return confirm('#{msg.msg_confirmacao_excluxao}');" styleClass="btn btn-danger btn-excluir" title="#{msg_botoes.btn_excluir}" accesskey="3" />
							<otm:spacer rendered="#{!ContaReceberAgrupadaControle.emProcessamento}" width="5px" />
							<otm:commandButton id="consultar" rendered="#{!ContaReceberAgrupadaControle.emProcessamento}" action="#{ContaReceberAgrupadaControle.irPaginaConsulta}" value="#{msg_botoes.btn_consultar}" styleClass="btn btn-default btn-consultar" title="#{msg_botoes.btn_consultar}" accesskey="4" />
							<otm:spacer rendered="#{ContaReceberAgrupadaControle.emProcessamento}" width="5px" />
							<otm:commandButton id="voltar" rendered="#{ContaReceberAgrupadaControle.emProcessamento}" action="#{ContaReceberAgrupadaControle.voltarPaginaProcessamento}" icon="#{msg_botoes.btn_icon_voltar}" styleClass="btn btn-default" image="#{resource['/imagens/botaoVoltarTela.png']}" value="#{msg_botoes.btn_voltar}" accesskey="5" />
							<otm:spacer rendered="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.situacao ne 'RECEBIDO'}" width="5px" />
							<otm:commandButton id="imprimirBoleto" rendered="#{ContaReceberAgrupadaControle.contaReceberAgrupadaVO.situacao ne 'RECEBIDO'}" oncomplete="#{rich:component('panelEmissaoBoleto')}.show()" value="Imprimir Boleto" render="form" icon="#{msg_botoes.btn_icon_imprimir_embutido}" styleClass="btn btn-default" />
						</h:panelGroup>
					</h:panelGroup>
				</h:panelGroup>
			</h:panelGroup>
		</h:form>
	</ui:define>
</ui:composition>
</html>