<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" xmlns:otm="http://java.sun.com/jsf/composite/otm">
<h:head>
</h:head>
<ui:composition template="/visaoAdministrativo/template/visaoAdministrativa.xhtml">
	<ui:define name="tituloPagina">
		<h:outputText value="#{msg_aplic.prt_DevolucaoCompra_tituloForm}" />
	</ui:define>
	<ui:define name="conteudo">
	
		<rich:popupPanel styleClass="modalMaximizado" id="panelCompra" shadowOpacity="true" width="750" height="500">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="#{msg_aplic.prt_Compra_tituloForm}"></h:outputText>
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelink3" />
					<rich:componentControl target="panelCompra" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formCompra">
				<h:panelGroup layout="block" styleClass="col-md-12">
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg.msg_consultar_por}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-5">
					<h:selectOneMenu styleClass="form-control campos" id="consultaDestinatarioNotaFiscal" value="#{DevolucaoCompraControle.campoConsultaCompra}">
						<f:selectItems value="#{DevolucaoCompraControle.tipoConsultaComboCompra}" />
						<f:ajax execute="formCompra" render="formCompra" listener="#{DevolucaoCompraControle.limparCampoConsulta()}" />
					</h:selectOneMenu>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-5" rendered="#{!DevolucaoCompraControle.consultaComboCompraData}">
					<h:inputText id="valorConsultaCompra" size="10" rendered="#{!DevolucaoCompraControle.consultaComboCompraData}" styleClass="form-control campos" value="#{DevolucaoCompraControle.valorConsultaCompra}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-5" rendered="#{DevolucaoCompraControle.consultaComboCompraData}">
					<rich:calendar id="valorConsultaCompraData" rendered="#{DevolucaoCompraControle.consultaComboCompraData}" value="#{DevolucaoCompraControle.valorConsultaCompraData}">
						<a4j:ajax event="change" />
					</rich:calendar>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-2">
					<otm:commandButton id="btnConsultar" accesskey="4" render="formCompra:mensagemConsultaCompra, formCompra:resultadoConsultaCompra, formCompra:scResultadoCompra" action="#{DevolucaoCompraControle.consultarCompra}" value="#{msg_botoes.btn_consultar}" styleClass="btn btn-default btn-consultar" alt="#{msg.msg_consultar_dados}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-12 mt5" />
				<rich:dataTable id="resultadoConsultaCompra" width="100%" headerClass="consulta" rowClasses="linhaImpar, linhaPar" columnClasses="colunaAlinhamento" value="#{DevolucaoCompraControle.listaConsultaCompra}" rows="5" var="compraItens">
					<rich:column>
						<f:facet name="header">
							<h:outputText value="#{msg_aplic.prt_dre_codigo}" />
						</f:facet>
						<h:panelGroup>
							<a4j:commandLink action="#{DevolucaoCompraControle.selecionarCompra}" oncomplete="#{rich:component('panelCompra')}.hide();" render="form" value="#{compraItens.codigo}" />
						</h:panelGroup>
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="#{msg_aplic.prt_Compra_responsavel}" />
						</f:facet>
						<h:panelGroup>
							<a4j:commandLink action="#{DevolucaoCompraControle.selecionarCompra}" oncomplete="#{rich:component('panelCompra')}.hide();" render="form" value="#{compraItens.responsavel.nome}" />
						</h:panelGroup>
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="#{msg_aplic.prt_Compra_fornecedor}" />
						</f:facet>
						<h:panelGroup>
							<a4j:commandLink action="#{DevolucaoCompraControle.selecionarCompra}" oncomplete="#{rich:component('panelCompra')}.hide();" render="form" value="#{compraItens.fornecedor.nome}" />
						</h:panelGroup>
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="#{msg_aplic.prt_Compra_data}" />
						</f:facet>
						<a4j:commandLink action="#{DevolucaoCompraControle.selecionarCompra}" oncomplete="#{rich:component('panelCompra')}.hide();" id="dataCompra" render="form" value="#{compraItens.data_Apresentar}" />
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="#{msg_aplic.prt_Compra_cotacao}" />
						</f:facet>
						<a4j:commandLink action="#{DevolucaoCompraControle.selecionarCompra}" oncomplete="#{rich:component('panelCompra')}.hide();" render="form" value="#{compraItens.cotacao.codigo}" />
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="#{msg_botoes.btn_opcoes}" />
						</f:facet>
						<otm:commandIcon action="#{DevolucaoCompraControle.selecionarCompra}" oncomplete="#{rich:component('panelCompra')}.hide();" render="form" icon="#{msg_botoes.btn_icon_selecionar} iconePequeno" tooltip="#{msg.msg_selecionar_dados}" />
					</rich:column>
					<f:facet name="footer">
						<div style="text-align: center !important">
							<rich:dataScroller align="center" for="formCompra:resultadoConsultaCompra" boundaryControls="auto" fastControls="hide" stepControls="auto" maxPages="10" id="scResultadoCompra" />
						</div>
					</f:facet>
				</rich:dataTable>
				<h:panelGroup id="mensagemConsultaCompra">
					<h:panelGroup id="mensagemCompra">
						<otm:mensagem bean="#{DevolucaoCompraControle}"></otm:mensagem>
					</h:panelGroup>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
	
		<rich:popupPanel styleClass="modalMaximizado" id="panelItemCompra" shadowOpacity="true" width="750" height="500">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="#{msg_aplic.prt_CompraItem_tituloForm}"></h:outputText>
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelink2" />
					<rich:componentControl target="panelItemCompra" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formItemCompra">
				<h:panelGroup columns="1" width="100%">
					<rich:dataTable id="resultadoConsultaCompra" width="100%" headerClass="consulta" rowClasses="linhaImpar, linhaPar" columnClasses="colunaAlinhamento" value="#{DevolucaoCompraControle.compraItemVO}" rows="5" var="compraItemItens">
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_CompraItem_produto}" />
							</f:facet>
							<a4j:commandLink action="#{DevolucaoCompraControle.selecionarCompraItem}" oncomplete="#{rich:component('panelItemCompra')}.hide();" render="form" value="#{compraItemItens.produto.nome}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_CompraItem_quantidadeRecebida}" />
							</f:facet>
							<a4j:commandLink action="#{DevolucaoCompraControle.selecionarCompraItem}" oncomplete="#{rich:component('panelItemCompra')}.hide();" render="form" value="#{compraItemItens.quantidadeRecebida}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_botoes.btn_opcoes}" />
							</f:facet>
							<h:panelGroup>
								<otm:commandIcon render="form" id="editarItemVenda" action="#{DevolucaoCompraControle.selecionarCompraItem}" oncomplete="#{rich:component('panelItemCompra')}.hide();" icon="#{msg_botoes.btn_icon_editar} iconePequeno" accesskey="6" />
							</h:panelGroup>
						</rich:column>
						<f:facet name="footer">
							<div style="text-align: center !important">
								<rich:dataScroller align="center" for="formItemCompra:resultadoConsultaCompra" boundaryControls="auto" stepControls="auto" fastControls="hide" maxPages="10" id="scResultadoCompra" />
							</div>
						</f:facet>
					</rich:dataTable>
					<h:panelGroup id="mensagemConsultaCompra">
						<h:panelGroup id="mensagemCompra">
							<otm:mensagem bean="#{DevolucaoCompraControle}"></otm:mensagem>
						</h:panelGroup>
					</h:panelGroup>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
	
		<rich:popupPanel styleClass="modalMaximizado" id="panelImagem" shadowOpacity="true" width="750" height="500">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="#{msg_aplic.prt_CompraItem_tituloForm}"></h:outputText>
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelink10" />
					<rich:componentControl target="panelImagem" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formImagem">
				<h:panelGroup id="listaImagem" columns="1" width="100%" styleClass="tabForm">
					<rich:dataGrid align="center" value="#{DevolucaoCompraControle.devolucaoCompraItemVOTemp.devolucaoCompraItemImagemVOs}" var="imagemItens" columns="1" elements="1">
						<h:panelGroup columns="1" width="100%">
							<h:graphicImage width="400px" value="#{imagemItens.imagemTemp}" />
							<otm:commandButton image="#{resource['/imagens/botaoRemover1.png']}" style="position:relative; top:39px; left:317px;" render="formImagem" action="#{DevolucaoCompraControle.removerDevolucaoCompraItemImagemTemp}" />
						</h:panelGroup>
					</rich:dataGrid>
				</h:panelGroup>
				<h:panelGroup id="mensagemConsultaCompra">
					<h:panelGroup id="mensagemCompra">
						<otm:mensagem bean="#{DevolucaoCompraControle}"></otm:mensagem>
					</h:panelGroup>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
	
		<rich:popupPanel styleClass="modalMaximizado" id="panelReceber" shadowOpacity="true" width="350" height="200">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="#{msg_aplic.prt_RecebimentoCompra_tituloForm}" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelink6" />
					<rich:componentControl target="panelReceber" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formReceber">
				<h:panelGroup styleClass="tabForm" width="100%" columns="1">
					<h:panelGroup layout="block" styleClass="col-md-6">
						<h:outputText value="Forma Recebimento" styleClass="field control-label tituloCampos" />
						<h:selectOneMenu id="ComboFormaReceber" styleClass="form-control campos" value="#{DevolucaoCompraControle.devolucaoCompraVO.formaReceber}">
							<f:selectItems value="#{DevolucaoCompraControle.listaFormaReceber}" />
							<a4j:ajax render="formReceber" event="change" />
						</h:selectOneMenu>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-6">
						<h:outputText rendered="#{DevolucaoCompraControle.devolucaoCompraVO.formaReceber=='credito'}" style="position:relative; left:-15px;" value="Valor Crédito" styleClass="field control-label tituloCampos" />
						<h:inputText readonly="true" styleClass="form-control campos" style="position:relative; left:23px;" value="#{DevolucaoCompraControle.creditoFornecedorVO.valor}" rendered="#{DevolucaoCompraControle.devolucaoCompraVO.formaReceber=='credito'}">
							<f:converter converterId="FormatadorNumerico" />
						</h:inputText>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-12 text-center" style="margin:10px">
						<otm:spacer />
						<h:panelGroup>
							<otm:commandButton render="form:mensagem formContaPagar form" oncomplete="#{rich:component('panelReceber')}.hide();" rendered="#{DevolucaoCompraControle.devolucaoCompraVO.formaReceber!='alterar'}" action="#{DevolucaoCompraControle.gravar}" icon="#{msg_botoes.btn_icon_gravar_embutido}" value="Gravar" styleClass="btn btn-dark btn-gravar" id="btnGravar" />
							<otm:commandButton style="margin:5px" oncomplete="#{rich:component('panelReceber')}.hide();" rendered="#{DevolucaoCompraControle.devolucaoCompraVO.formaReceber!='alterar'}" styleClass="btn btn-danger light btn-cancelar" value="Cancelar" icon="#{msg_botoes.btn_icon_cancelar_embutido}" id="btnCancelar" />
							<otm:commandButton render="formReceber, form:mensagem, formContaPagar" oncomplete="#{DevolucaoCompraControle.abrirPanelContaPagar}" rendered="#{DevolucaoCompraControle.devolucaoCompraVO.formaReceber=='alterar'}" action="#{DevolucaoCompraControle.sugerirValorParcelas}" icon="#{msg_botoes.btn_icon_confirmar_embutido}" value="Sugerir Valor Parcelas" styleClass="btn btn-info dark" image="#{resource['/imagens/botaoAlterar.png']}" />
						</h:panelGroup>
					</h:panelGroup>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
	
		<rich:popupPanel styleClass="modalMaximizado" id="panelContaPagar" shadowOpacity="true" width="650" height="500">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="#{msg_aplic.prt_ContaPagar_tituloForm}"></h:outputText>
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelink4" />
					<rich:componentControl target="panelContaPagar" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formContaPagar">
				<h:panelGroup columns="1" width="100%">
					<rich:dataTable id="resultadoConsultaContaPagar" width="100%" headerClass="consulta" rowClasses="linhaImpar, linhaPar" columnClasses="colunaAlinhamento" value="#{DevolucaoCompraControle.listaConsultaContaPagar}" rows="5" var="contaPagarItens">
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_ContaPagar_codigo}" />
							</f:facet>
							<h:outputText value="#{contaPagarItens.codigo}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_ContaPagar_dataVencimento}" />
							</f:facet>
							<h:outputText value="#{contaPagarItens.dataVencimento_Apresentar}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_ContaPagar_valor}" />
							</f:facet>
							<h:inputText readonly="#{contaPagarItens.situacao=='PA' or contaPagarItens.excluirContaPagar==true}" styleClass="form-control campos" style="width=60px" value="#{contaPagarItens.valorAlterar}">
								<f:converter converterId="FormatadorNumerico" />
								<a4j:ajax event="change" listener="#{DevolucaoCompraControle.calcularValorCreditoRestante}" render="formContaPagar" />
							</h:inputText>
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_ContaPagar_nrDocumento}" />
							</f:facet>
							<h:outputText value="#{contaPagarItens.nrDocumento}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_ContaPagar_situacao}" />
							</f:facet>
							<h:outputText value="#{contaPagarItens.situacao_Apresentar}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_botoes.btn_excluir}" />
							</f:facet>
							<otm:selectBooleanCheckbox disabled="#{contaPagarItens.situacao=='PA' or DevolucaoCompraControle.validarExcluirContaPagar}" value="#{contaPagarItens.excluirContaPagar}">
								<a4j:ajax event="click" listener="#{DevolucaoCompraControle.calcularValorCreditoRestante}" render="formContaPagar" />
							</otm:selectBooleanCheckbox>
						</rich:column>
						<f:facet name="footer">
							<div style="text-align: center !important">
								<rich:dataScroller align="center" boundaryControls="auto" stepControls="auto" fastControls="hide" for="formContaPagar:resultadoConsultaContaPagar" maxPages="10" id="scResultadoContaPagar" />
							</div>
						</f:facet>
					</rich:dataTable>
					<h:panelGroup layout="block" styleClass="col-md-3">
						<h:outputText value="Total Itens Devolvidos" styleClass="field control-label tituloCampos" />
						<h:inputText readonly="true" styleClass="form-control camposSomenteLeitura" value="#{DevolucaoCompraControle.creditoFornecedorVO.valor}">
							<f:converter converterId="FormatadorNumerico" />
						</h:inputText>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-3">
						<h:outputText value="Sugestão:" styleClass="field control-label tituloCampos" />
						<h:inputText value="#{DevolucaoCompraControle.sugestaoValorParcelas}" styleClass="form-control camposSomenteLeitura" readonly="true" />
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-3">
						<h:outputText value="#{msg_aplic.prt_DevolucaoCompraTotalPago}" styleClass="field control-label tituloCampos" />
						<h:inputText readonly="true" styleClass="form-control camposSomenteLeitura" value="#{DevolucaoCompraControle.devolucaoCompraVO.totalPago }">
							<f:converter converterId="FormatadorNumerico" />
						</h:inputText>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-3">
						<h:outputText value="Valor à Pagar" styleClass="field control-label tituloCampos" />
						<h:inputText readonly="true" styleClass="form-control camposSomenteLeitura" value="#{DevolucaoCompraControle.devolucaoCompraVO.totalPagar }">
							<f:converter converterId="FormatadorNumerico" />
						</h:inputText>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-3">
						<h:outputText value="Total Contas à Excluir" styleClass="field control-label tituloCampos" />
						<h:inputText readonly="true" styleClass="form-control camposSomenteLeitura" value="#{DevolucaoCompraControle.devolucaoCompraVO.totalExcluir }">
							<f:converter converterId="FormatadorNumerico" />
						</h:inputText>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-3">
						<h:outputText value="Valor Não Abatido" styleClass="field control-label tituloCampos" />
						<h:inputText readonly="true" styleClass="form-control camposSomenteLeitura" value="#{DevolucaoCompraControle.devolucaoCompraVO.totalNaoAbatido}">
							<f:converter converterId="FormatadorNumerico" />
						</h:inputText>
					</h:panelGroup>
					<h:panelGroup id="mensagemConsultaContaPagar">
						<h:panelGroup id="mensagemContaPagar">
							<otm:mensagem bean="#{DevolucaoCompraControle}"></otm:mensagem>
						</h:panelGroup>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-12 text-center" style="margin:10px">
						<h:panelGroup>
							<otm:commandButton id="salvar" render="form:mensagem form" rendered="#{DevolucaoCompraControle.novoObj}" oncomplete="#{rich:component('panelConfirmarGravar')}.show(); #{rich:component('panelContaPagar')}.hide();" value="#{msg_botoes.btn_gravar}" styleClass="btn btn-dark btn-gravar" accesskey="2" />
							<f:verbatim>
								<h:outputText value="    " />
							</f:verbatim>
						</h:panelGroup>
					</h:panelGroup>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
	
		<rich:popupPanel styleClass="modalMaximizado" id="panelConfirmarGravar" shadowOpacity="true" width="350" height="200">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="Gravar Dados"></h:outputText>
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelink5" />
					<rich:componentControl target="panelConfirmarGravar" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="Confirmar">
				<h:panelGroup styleClass="tabForm" width="100%" columns="1">
					<h:panelGroup columns="1" width="100%">
						<h:outputText styleClass="field control-label tituloCampos" value="Os dados não poderão ser mais alterados." />
						<h:outputText styleClass="field control-label tituloCampos" value="Confirmar alteração das contas?" />
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-12 text-center" style="margin:10px">
						<otm:spacer />
						<otm:spacer />
						<otm:commandButton render="form:mensagem form" oncomplete="#{rich:component('panelConfirmarGravar')}.hide();" icon="#{msg_botoes.btn_icon_confirmar_embutido}" value="Confirmar" action="#{DevolucaoCompraControle.gravar}" styleClass="btn btn-info dark" />
						<otm:commandButton oncomplete="#{rich:component('panelConfirmarGravar')}.hide();" icon="#{msg_botoes.btn_icon_fechar_embutido}" value="Não Confirmar" styleClass="btn btn-danger dark" />
					</h:panelGroup>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
	
		<title><h:outputText value="#{msg_aplic.prt_DevolucaoCompra_tituloForm}" /></title>
	
		<h:form id="form">
			<h:commandLink action="#{DevolucaoCompraControle.liberarBackingBeanMemoria}" immediate="true" id="idLiberarBackingBeanMemoria" style="display: none" />
			<rich:tabPanel>
				<rich:tab header="#{msg_aplic.prt_DevolucaoCompra_tituloForm}">
					<h:panelGroup layout="block" styleClass="row">
						<h:panelGroup layout="block" styleClass="col-md-12 pn">
							<h:panelGroup layout="block" styleClass="col-md-2">
								<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_DevolucaoCompra_data}" />
								<h:inputText id="data" size="16" maxlength="16" styleClass="form-control camposSomenteLeitura" readonly="true" value="#{DevolucaoCompraControle.devolucaoCompraVO.data_Apresentar}" />
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="col-md-4">
								<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_DevolucaoCompra_responsavel}" />
								<h:inputText size="50" maxlength="50" id="responsavel" styleClass="form-control camposSomenteLeitura" readonly="true" value="#{DevolucaoCompraControle.devolucaoCompraVO.responsavel.nome}" />
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="col-md-6">
								<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Cotacao_unidadeEnsino}" />
								<h:selectOneMenu id="unidadeEnsino" disabled="#{DevolucaoCompraControle.devolucaoCompraVO.compra.existeUnidadeEnsino}" styleClass="form-control campos" value="#{DevolucaoCompraControle.devolucaoCompraVO.unidadeEnsino.codigo}">
									<f:selectItems value="#{DevolucaoCompraControle.listaSelectItemUnidadeEnsino}" />
								</h:selectOneMenu>
							</h:panelGroup>
						</h:panelGroup>
						<h:panelGroup id="panelLayoutRelatorioSeiDecidir2">
							<h:panelGroup layout="block" styleClass="col-md-12 mt10">
								<h:outputText styleClass="title" value="Compras" />
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="col-md-6">
								<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_DevolucaoCompra_compra}" />
								<h:panelGroup layout="block" styleClass="col-md-12 pn">
									<h:inputText id="compra" readonly="#{!DevolucaoCompraControle.novoObj}" styleClass="form-control camposObrigatorios" value="#{DevolucaoCompraControle.devolucaoCompraVO.compra.codigo}" onkeydown="aceitarSomenteValorNumerico(this)">
										<a4j:ajax event="change" render="form" listener="#{DevolucaoCompraControle.consultarCompraPorChavePrimaria}" />
									</h:inputText>
									<span class="append-icon right"> <otm:commandIcon rendered="#{DevolucaoCompraControle.novoObj}" icon="#{msg_botoes.btn_icon_lupa_embutido}" action="#{DevolucaoCompraControle.limparListaConsultaCompra}" oncomplete="#{rich:component('panelCompra')}.show();" tooltip="Consultar Compra" />
									</span>
								</h:panelGroup>
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="col-md-6">
								<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Compra_fornecedor}" />
								<h:inputText size="50" readonly="true" maxlength="50" styleClass="form-control camposSomenteLeitura" value="#{DevolucaoCompraControle.devolucaoCompraVO.compra.fornecedor.nome}" />
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="col-md-6">
								<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Compra_responsavel}" />
								<h:inputText size="50" readonly="true" maxlength="50" styleClass="form-control camposSomenteLeitura" value="#{DevolucaoCompraControle.devolucaoCompraVO.compra.responsavel.nome}" />
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="col-md-2">
								<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Compra_data}" />
								<h:inputText size="16" readonly="true" maxlength="16" styleClass="form-control camposSomenteLeitura" value="#{DevolucaoCompraControle.devolucaoCompraVO.compra.data_Apresentar}" />
							</h:panelGroup>
						</h:panelGroup>
					</h:panelGroup>
				</rich:tab>
				<rich:tab header="#{msg_aplic.prt_DevolucaoCompraItem_tituloForm}">
					<h:panelGroup layout="block" styleClass="row">
						<h:panelGroup id="itemDevol">
							<h:panelGroup rendered="#{DevolucaoCompraControle.novoObj}">
								<h:panelGroup layout="block" styleClass="col-md-6">
									<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_CompraItem_produto}" />
									<h:panelGroup layout="block" styleClass="col-md-12 pn">
										<h:inputText id="nomeProdutoConsumo" size="50" maxlength="50" readonly="true" styleClass="form-control camposSomenteLeitura" value="#{DevolucaoCompraControle.devolucaoCompraItemVO.compraItem.produto.nome}" />
										<span class="append-icon right"> <otm:commandIcon render="formItemCompra" oncomplete="#{rich:component('panelItemCompra')}.show();" icon="#{msg_botoes.btn_icon_lupa_embutido}" tooltip="Selecionar Produto da Compra" />
										</span>
									</h:panelGroup>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-2">
									<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_DevolucaoCompraItem_quantidade}" />
									<h:inputText id="devolucaoCompraItem_quantidade" size="10" maxlength="10" styleClass="form-control camposObrigatorios" value="#{DevolucaoCompraControle.devolucaoCompraItemVO.quantidade}" onkeydown="aceitarSomenteValorDecimal(this)" />
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-6">
									<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_DevolucaoCompraItem_motivo}" />
									<h:inputTextarea id="devolucaoCompraItem_motivo" cols="70" rows="3" styleClass="form-control camposObrigatorios" value="#{DevolucaoCompraControle.devolucaoCompraItemVO.motivo}" />
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-12" style="margin:5px">
									<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_DevolucaoCompraItem_imagem}" />
									<rich:fileUpload styleClass="rich-fileupload-list-decor-aluno" listHeight="0" listWidth="579" style="position:relative; left:-1px;" noDuplicate="true" fileUploadListener="#{DevolucaoCompraControle.upload}" maxFilesQuantity="100" addLabel="Adicionar" clearLabel="Cancelar" doneLabel="Pronto" clearAllLabel="Limpar Todos" sizeErrorLabel="Arquivo não Enviado. Tamanho Máximo Permitido 100 MB" progressLabel="Enviando" stopControlLabel="Parar" uploadLabel="Enviar" transferErrorLabel="Falha de Transmissão" stopEntryControlLabel="Parar" id="upload" immediateUpload="true" autoclear="true" acceptedTypes="png,gif,jpg,jpeg,ico,bmp">
										<a4j:ajax event="uploadcomplete" render="form:listaImagens" />
									</rich:fileUpload>
								</h:panelGroup>
								<h:panelGroup id="listaImagens" columns="1" width="100%">
									<rich:dataGrid align="center" value="#{DevolucaoCompraControle.devolucaoCompraItemVO.devolucaoCompraItemImagemVOs}" var="imagemsItens" cellpadding="0" cellspacing="0" rowClasses="linhaPar, linhaImpar" width="100%" columns="#{DevolucaoCompraControle.qtdeImagem}" elements="#{DevolucaoCompraControle.qtdeImagem}">
										<h:panelGroup columns="1" width="100%" columnClasses="colunaAlinhamento">
											<h:graphicImage width="50px" height="50px" value="#{imagemsItens.imagemTemp}" />
											<otm:commandButton styleClass="btn btn-danger btn-remover" render="form:listaImagens" action="#{DevolucaoCompraControle.removerDevolucaoCompraItemImagem}" />
										</h:panelGroup>
									</rich:dataGrid>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-12 text-center" style="margin:10px">
									<otm:commandButton render="form:itemDevol, form:mensagem, formReceber" action="#{DevolucaoCompraControle.adicionarDevolucaoCompraItem}" icon="#{msg_botoes.btn_icon_adicionar_embutido}" value="Adicionar Devolucao Compra Item" styleClass="btn btn-primary dark btn-adicionar" accesskey="5" />
								</h:panelGroup>
							</h:panelGroup>
							<h:panelGroup columns="1" width="100%" styleClass="tabFormSubordinada">
								<rich:dataTable id="devolucaoCompraItemVO" width="100%" headerClass="subordinado" styleClass="tabFormSubordinada" rowClasses="linhaImparSubordinado, linhaParSubordinado" columnClasses="colunaAlinhamento" value="#{DevolucaoCompraControle.devolucaoCompraVO.devolucaoCompraItemVOs}" var="devolucaoCompraItemItens">
									<rich:column>
										<f:facet name="header">
											<h:outputText value="#{msg_aplic.prt_CompraItem_produto}" />
										</f:facet>
										<h:outputText value="#{devolucaoCompraItemItens.compraItem.produto.nome}" />
									</rich:column>
									<rich:column>
										<f:facet name="header">
											<h:outputText value="#{msg_aplic.prt_DevolucaoCompraItem_quantidade}" />
										</f:facet>
										<h:outputText value="#{devolucaoCompraItemItens.quantidade}" />
									</rich:column>
									<rich:column>
										<f:facet name="header">
											<h:outputText value="#{msg_botoes.btn_opcoes}" />
										</f:facet>
										<h:panelGroup>
											<otm:commandIcon render="form:itemDevol, form:mensagem" rendered="#{DevolucaoCompraControle.novoObj}" execute="@this" id="editarItemVenda" action="#{DevolucaoCompraControle.editarDevolucaoCompraItem}" icon="#{msg_botoes.btn_icon_editar} iconePequeno" tooltip="Editar Devolucao Compra Item" />
											<otm:spacer width="5px" />
											<otm:commandIcon render="form:itemDevol, form:mensagem, formReceber" rendered="#{DevolucaoCompraControle.novoObj}" id="removerItemVenda" action="#{DevolucaoCompraControle.removerDevolucaoCompraItem}" icon="#{msg_botoes.btn_icon_remover} iconePequeno" tooltip="Remover Devolucao Compra Item" />
											<otm:spacer width="5px" />
											<otm:commandIcon oncomplete="location.href='../../DownloadSV'" tooltip="Download Arquivo" icon="#{msg_botoes.btn_icon_download} iconePequeno" action="#{DevolucaoCompraControle.realizarDownload}" />
										</h:panelGroup>
									</rich:column>
								</rich:dataTable>
							</h:panelGroup>
							<otm:spacer height="10px" />
							<h:panelGroup rendered="#{!DevolucaoCompraControle.novoObj}" id="panelContaPagarConsulta" columns="4" headerClass="consulta" styleClass="tabConsulta" width="100%" columnClasses="colunaVerticalmenteCentralizado, colunaVerticalmenteCentralizado">
								<f:facet name="header">
									<h:outputText value="#{msg_aplic.prt_ContaPagar_tituloForm}" />
								</f:facet>
								<h:panelGroup layout="block" styleClass="col-md-6">
									<h:outputText value="Sugestão:" styleClass="field control-label tituloCampos" />
									<h:inputText value="#{DevolucaoCompraControle.sugestaoValorParcelas}" style="60px" styleClass="form-control camposSomenteLeitura" readonly="true" />
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-3">
									<h:outputText value="Total Itens Devolvidos" styleClass="field control-label tituloCampos" />
									<h:inputText readonly="true" styleClass="form-control camposSomenteLeitura" value="#{DevolucaoCompraControle.devolucaoCompraVO.valorTotalCredito}">
										<f:converter converterId="FormatadorNumerico" />
									</h:inputText>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-3">
									<h:outputText value="#{msg_aplic.prt_DevolucaoCompraTotalPago}" styleClass="field control-label tituloCampos" />
									<h:inputText readonly="true" styleClass="form-control camposSomenteLeitura" value="#{DevolucaoCompraControle.devolucaoCompraVO.totalPago }">
										<f:converter converterId="FormatadorNumerico" />
									</h:inputText>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-3">
									<h:outputText value="Valor à Pagar" styleClass="field control-label tituloCampos" />
									<h:inputText readonly="true" styleClass="form-control camposSomenteLeitura" value="#{DevolucaoCompraControle.devolucaoCompraVO.totalPagar }">
										<f:converter converterId="FormatadorNumerico" />
									</h:inputText>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-3">
									<h:outputText value="Total Contas à Excluir" styleClass="field control-label tituloCampos" />
									<h:inputText readonly="true" styleClass="form-control camposSomenteLeitura" value="#{DevolucaoCompraControle.devolucaoCompraVO.totalExcluir }">
										<f:converter converterId="FormatadorNumerico" />
									</h:inputText>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-3">
									<h:outputText value="Valor Não Abatido" styleClass="field control-label tituloCampos" />
									<h:inputText readonly="true" styleClass="form-control camposSomenteLeitura" value="#{DevolucaoCompraControle.devolucaoCompraVO.totalNaoAbatido}">
										<f:converter converterId="FormatadorNumerico" />
									</h:inputText>
								</h:panelGroup>
							</h:panelGroup>
						</h:panelGroup>
					</h:panelGroup>
				</rich:tab>
			</rich:tabPanel>
			<h:panelGroup columns="1" width="100%" styleClass="tabMensagens">
				<h:panelGroup id="mensagem">
					<otm:mensagem bean="#{DevolucaoCompraControle}"></otm:mensagem>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="barraFlutuanteInferior">
					<h:panelGroup>
						<otm:commandButton style="margin-right:5px" id="novo" immediate="true" action="#{DevolucaoCompraControle.novo}" value="#{msg_botoes.btn_novo}" styleClass="btn btn-info btn-novo" alt="#{msg.msg_novo_dados}" accesskey="1" />
						<f:verbatim>
							<h:outputText value="    " />
						</f:verbatim>
						<otm:commandButton style="margin-right:5px" id="salvar" rendered="#{DevolucaoCompraControle.devolucaoCompraVO.novoObj}" oncomplete="#{rich:component('panelReceber')}.show();" action="#{DevolucaoCompraControle.consultarContaPagarPorCodigoOrigem()}" value="#{msg_botoes.btn_gravar}" styleClass="btn btn-dark btn-gravar" accesskey="2" />
						<f:verbatim>
							<h:outputText value="    " />
						</f:verbatim>
						<otm:commandButton style="margin-right:5px" id="excluir" rendered="#{DevolucaoCompraControle.devolucaoCompraVO.novoObj}" onclick="return confirm('Confirma exclusão dos dados?');" action="#{DevolucaoCompraControle.excluir}" value="#{msg_botoes.btn_excluir}" styleClass="btn btn-danger btn-excluir" alt="#{msg.msg_excluir_dados}" accesskey="3" />
						<f:verbatim>
							<h:outputText value="    " />
						</f:verbatim>
						<otm:commandButton id="consultar" immediate="true" action="#{DevolucaoCompraControle.inicializarConsultar}" value="#{msg_botoes.btn_consultar}" styleClass="btn btn-default btn-consultar" alt="#{msg.msg_consultar_dados}" accesskey="4" />
					</h:panelGroup>
				</h:panelGroup>
			</h:panelGroup>
		</h:form>
	</ui:define>
</ui:composition>
</html>
