<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" xmlns:otm="http://java.sun.com/jsf/composite/otm">
<h:head>
	<script type="text/javascript">
		window.onload = function() {
			document.getElementById("form:planoContaPrincipal").focus();
		}
	</script>
</h:head>

<ui:composition template="/visaoAdministrativo/template/visaoAdministrativa.xhtml">
	<ui:define name="tituloPagina">
		<h:outputText value="#{msg_aplic.prt_PlanoConta_tituloForm}" />
	</ui:define>

	<ui:define name="conteudo">

		<rich:popupPanel styleClass="modalMaximizado" id="panelArvore" shadowOpacity="true" width="750" height="500">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="#{msg_aplic.prt_PlanoConta_planoContaPrincipal}" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelinkpanelArvore" />
					<rich:componentControl target="panelArvore" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formArvore">

				<rich:tree selectedClass="camposSomenteLeitura" iconClass="#{item.maximizarTree ? 'fa-rotate-180' : ''} #{msg_botoes.btn_icon_arvore_embutido} bgn" toggleType="client" value="#{PlanoContaControle.planoContaVO.arvorePlanoConta}" var="item" execute="@this" iconCollapsed="#{resource['/imagens/arvoreSuperior.png']}" iconExpanded="#{resource['/imagens/arvoreInferior.png']}">
					<rich:treeNode iconClass="botoes" expanded="#{item.maximizarTree}">
						<h:outputText styleClass="tituloCamposReduzidos" style="font-size:10pt" value="#{item.data.identificadorPlanoConta} - #{item.data.descricao}" />
					</rich:treeNode>
				</rich:tree>

			</h:form>
		</rich:popupPanel>

		<h:panelGroup styleClass="background:#fff;">
			<h:form id="form">
				<h:commandLink action="#{PlanoContaControle.liberarBackingBeanMemoria}" immediate="true" id="idLiberarBackingBeanMemoria" style="display: none" />
				<h:panelGroup id="panelDados">
					<h:panelGroup layout="block" styleClass="row">
						<h:panelGroup layout="block" styleClass="col-md-3">
							<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_PlanoConta_unidadeEnsino}" />
							<h:panelGroup layout="block" styleClass="pn col-md-12">
								<h:selectOneMenu id="unidadeEnsino" disabled="#{PlanoContaControle.planoContaVO.planoContaPrincipal.codigo ne 0 and PlanoContaControle.planoContaVO.planoContaPrincipal.unidadeEnsino.codigo ne 0}" readonly="#{PlanoContaControle.planoContaVO.planoContaPrincipal.codigo ne 0 and PlanoContaControle.planoContaVO.planoContaPrincipal.unidadeEnsino.codigo ne 0}" styleClass="form-control campos" value="#{PlanoContaControle.planoContaVO.unidadeEnsino.codigo}">
									<a4j:ajax event="change" execute="@this" listener="#{PlanoContaControle.montarListaSelectItemPlanoContaPrincipal}" render="form:planoContaPrincipal, form:msg" />
									<f:selectItems value="#{PlanoContaControle.listaSelectItemUnidadeEnsino}" />
								</h:selectOneMenu>
								<span class="append-icon right"> <otm:commandIcon id="atualizar_unidadeEnsino" action="#{PlanoContaControle.montarListaSelectItemUnidadeEnsino}" icon="#{msg_botoes.btn_icon_atualizar_embutido} mt10 mr10" execute="@this" render="form:unidadeEnsino" />
								</span>
							</h:panelGroup>
						</h:panelGroup>

						<h:panelGroup layout="block" styleClass="col-md-3">
							<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_PlanoConta_planoContaPrincipal}" />
							<h:panelGroup layout="block" styleClass="pn col-md-12">
								<h:selectOneMenu id="planoContaPrincipal" styleClass="form-control campos" value="#{PlanoContaControle.planoContaVO.planoContaPrincipal.codigo}">
									<a4j:ajax event="change" execute="@this" listener="#{PlanoContaControle.atualizarTipoPlanoConta}" render="form:tipoPlanoConta, form:unidadeEnsino, form:nivelPlanoConta, form:msg" />
									<f:selectItems value="#{PlanoContaControle.listaSelectItemPlanoContaPrincipal}" />
								</h:selectOneMenu>
								<span class="append-icon right"> <otm:commandIcon id="atualizar_planoContaPrincipal" action="#{PlanoContaControle.montarListaSelectItemPlanoContaPrincipal}" icon="#{msg_botoes.btn_icon_atualizar_embutido} mt10 mr10" immediate="true" execute="@this" render="form:planoContaPrincipal" />
								</span>
							</h:panelGroup>
						</h:panelGroup>

						<h:panelGroup layout="block" styleClass="col-md-6">
							<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_PlanoConta_identificadorPlanoConta}" />
							<h:inputText id="identificadorPlanoConta" styleClass="form-control camposObrigatorios" value="#{PlanoContaControle.planoContaVO.identificadorPlanoConta}" />
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="col-md-3">
							<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_PlanoConta_nivel}" />
							<h:inputText id="nivelPlanoConta" onkeydown="aceitarSomenteValorNumerico(this)" readonly="#{PlanoContaControle.planoContaVO.planoContaPrincipal.codigo ne 0}" styleClass="form-control camposObrigatorios" value="#{PlanoContaControle.planoContaVO.nivelPlanoConta}" />
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="col-md-3">
							<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_PlanoConta_descricao}" />
							<h:inputText id="descricao" styleClass="form-control camposObrigatorios" value="#{PlanoContaControle.planoContaVO.descricao}" />
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="col-md-3">
							<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_PlanoConta_codigoReduzido}" />
							<h:inputText onkeydown="aceitarSomenteValorNumerico(this)" onkeypress="return Tecla(event);" id="codigoReduzido" styleClass="form-control campos" value="#{PlanoContaControle.planoContaVO.codigoReduzido}" />
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="col-md-3">
							<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_PlanoConta_codigoPatrimonial}" />
							<h:inputText id="codigoPatrimonial" styleClass="form-control campos" value="#{PlanoContaControle.planoContaVO.codigoPatrimonial}" />
						</h:panelGroup>
					</h:panelGroup>


					<h:panelGroup columns="1" id="msg" width="100%" styleClass="tabMensagens" columnClasses="colunaEsquerda">
						<h:outputText styleClass="linhaMensagem" value="#{PlanoContaControle.mensagem}" />
						<h:outputText styleClass="field control-label mensagemDetalhada col-md-12" value="#{PlanoContaControle.mensagemDetalhada}" />
					</h:panelGroup>


					<h:panelGroup styleClass="barraFlutuanteInferior">
						<otm:commandButton id="novo" immediate="true" action="#{PlanoContaControle.novo}" styleClass="btn btn-info btn-novo" value="#{msg_botoes.btn_novo}" accesskey="1" />
						<otm:spacer width="10px" />
						<otm:commandButton render="form:panelDados" execute="@all" id="salvar" action="#{PlanoContaControle.persistir}" value="#{msg_botoes.btn_gravar}" styleClass="btn btn-dark btn-gravar" accesskey="2" />
						<otm:spacer width="10px" />
						<otm:commandButton id="excluir" onclick="return confirm('Confirma exclusÃ£o dos dados?');" action="#{PlanoContaControle.excluir}" styleClass="btn btn-danger btn-excluir" value="#{msg_botoes.btn_excluir}" accesskey="3" />
						<otm:spacer width="10px" />
						<otm:commandButton id="consultar" immediate="true" action="#{PlanoContaControle.inicializarConsultar}" styleClass="btn btn-default btn-consultar" value="#{msg_botoes.btn_consultar}" accesskey="4" />
						<otm:spacer width="10px" />
						<otm:commandIcon render="formArvore" oncomplete="#{rich:component('panelArvore')}.show()" action="#{PlanoContaControle.consultarPlanoContaSuperior}" rendered="#{PlanoContaControle.planoContaVO.codigo ne 0}" icon="#{item.maximizarTree ? 'fa-rotate-180' : ''} #{msg_botoes.btn_icon_arvore_embutido} bgn" />
						<otm:spacer width="10px" />
						<otm:commandIcon render="formArvore" oncomplete="#{rich:component('panelArvore')}.show()" action="#{PlanoContaControle.consultarPlanoContaInferior}" rendered="#{PlanoContaControle.planoContaVO.codigo ne 0}" icon="#{item.maximizarTree ? 'fa-rotate-180' : ''} #{msg_botoes.btn_icon_arvore_embutido} bgn" />
					</h:panelGroup>
				</h:panelGroup>
			</h:form>
		</h:panelGroup>
	</ui:define>
</ui:composition>
</html>