<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" xmlns:otm="http://java.sun.com/jsf/composite/otm" xmlns:otm2="http://www.otimize-ti.com.br">
<h:head>
	<script type="text/javascript">
			window.onload = function(){
				document.getElementById("form:tipoUsuario").focus();
			}
		</script>
</h:head>
<ui:composition template="/visaoAdministrativo/template/visaoAdministrativa.xhtml">
	<ui:define name="tituloPagina">
		<h:outputText value="#{msg_aplic.prt_Usuario_tituloForm} #{msg.msg_separador_titulo_paginas}#{msg.msg_titulo_paginas}" />
	</ui:define>
	<ui:define name="conteudo">

		<rich:popupPanel styleClass="modalMaximizado" id="panelPessoa" shadowOpacity="true" top="0" width="750" height="500">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="Consultar Pessoa #{msg.msg_separador_titulo_paginas}#{msg.msg_titulo_paginas}"></h:outputText>
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelink">
						<rich:componentControl target="panelPessoa" operation="hide" event="click" />
					</h:graphicImage>
				</h:panelGroup>
			</f:facet>
			<h:form id="formPessoa">
				<h:panelGroup id="panelGridPessoa">
					<h:panelGroup layout="block" styleClass="col-md-12">
						<h:outputText styleClass="field control-label tituloCampos" value="#{msg.msg_consultar_por}" />
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-4">
						<h:selectOneMenu styleClass="form-control campos" id="consulta" required="true" value="#{UsuarioControle.campoConsultaPessoa}">
							<f:selectItems value="#{UsuarioControle.tipoConsultaPessoa}" />
							<a4j:ajax event="change" render="formPessoa:panelGridPessoa" />
						</h:selectOneMenu>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-6">
						<h:inputText id="valorConsulta" styleClass="form-control campos" maxlength="#{UsuarioControle.apresentarQuantidadeCaracteresCpf}" onkeypress="#{UsuarioControle.apresentarMascaraCpf}" value="#{UsuarioControle.valorConsultaPessoa}" />
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-2">
						<otm:commandButton id="consultar" render="formPessoa" value="#{msg_botoes.btn_consultar}" action="#{UsuarioControle.consultarPessoa}" styleClass="btn btn-default btn-consultar" />
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-12 mt5" />
					<rich:dataTable render="#{!empty UsuarioControle.listaConsultaPessoa}" id="resultadoConsultaPessoa" width="100%" headerClass="consulta" rowClasses="linhaImpar, linhaPar" columnClasses="colunaAlinhamento" value="#{UsuarioControle.listaConsultaPessoa}" rows="5" var="pessoaItem">
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_Pessoa_nome}" />
							</f:facet>
							<a4j:commandLink oncomplete="#{rich:component('panelPessoa')}.hide();" action="#{UsuarioControle.selecionarPessoa}" render="form:pessoa, form:cpf, form:nome, form:listaUnidadeEnsino1" value="#{pessoaItem.nome}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_Pessoa_CPF}" />
							</f:facet>
							<a4j:commandLink oncomplete="#{rich:component('panelPessoa')}.hide();" action="#{UsuarioControle.selecionarPessoa}" render="form:cpf, form:pessoa, form:nome, form:listaUnidadeEnsino1" value="#{pessoaItem.CPF}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_Pessoa_RG}" />
							</f:facet>
							<a4j:commandLink oncomplete="#{rich:component('panelPessoa')}.hide();" action="#{UsuarioControle.selecionarPessoa}" render="form:cpf, form:pessoa, form:nome, form:listaUnidadeEnsino1" value="#{pessoaItem.RG}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_Pessoa_registroAcademico}" />
							</f:facet>
							<a4j:commandLink oncomplete="#{rich:component('panelPessoa')}.hide();" action="#{UsuarioControle.selecionarPessoa}" render="form:cpf, form:pessoa, form:nome, form:listaUnidadeEnsino1" value="#{pessoaItem.registroAcademico}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="Opções" />
							</f:facet>
							<otm:commandIcon action="#{UsuarioControle.selecionarPessoa}" oncomplete="#{rich:component('panelPessoa')}.hide();" render="form:cpf, form:pessoa, form:nome, form:listaUnidadeEnsino1" tooltip="Selecionar Pessoa" icon="#{msg_botoes.btn_icon_selecionar} iconePequeno" />
						</rich:column>
					</rich:dataTable>
					<rich:dataScroller align="center" for="formPessoa:resultadoConsultaPessoa" maxPages="10" id="scResultadoDisciplina" rendered="#{UsuarioControle.listaConsultaPessoa.size() gt 5}" />
					<h:panelGroup id="mensagemConsultaDisciplina" columns="1" width="100%" styleClass="tabMensagens">
						<otm:mensagem bean="#{UsuarioControle}"></otm:mensagem>
					</h:panelGroup>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>

		<rich:popupPanel styleClass="modalMaximizado" id="panelParceiro" shadowOpacity="true" top="0" width="750" height="500">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="Consultar Parceiro #{msg.msg_separador_titulo_paginas}#{msg.msg_titulo_paginas}"></h:outputText>
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelink2">
						<rich:componentControl target="panelParceiro" operation="hide" event="click" />
					</h:graphicImage>
				</h:panelGroup>
			</f:facet>
			<h:form id="formParceiro">
				<h:panelGroup id="panelGridParceiro">
					<h:panelGroup layout="block" styleClass="col-md-12">
						<h:outputText styleClass="field control-label tituloCampos" value="#{msg.msg_consultar_por}" />
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-4">
						<h:selectOneMenu styleClass="form-control campos" id="consultaParceiro" required="true" value="#{UsuarioControle.campoConsultaParceiro}">
							<f:selectItems value="#{UsuarioControle.tipoConsultaParceiro}" />
							<a4j:ajax event="change" render="formParceiro:panelGridParceiro" />
						</h:selectOneMenu>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-6">
						<h:inputText id="valorConsultaParceiro" styleClass="form-control campos" maxlength="100" value="#{UsuarioControle.valorConsultaParceiro}" />
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-2">
						<otm:commandButton id="consultarParceiro" render="formParceiro" value="#{msg_botoes.btn_consultar}" action="#{UsuarioControle.consultarParceiro}" styleClass="btn btn-default btn-consultar" />
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-12 mt5" />
					<rich:dataTable id="resultadoConsultaParceiro" width="100%" headerClass="consulta" rowClasses="linhaImpar, linhaPar" columnClasses="colunaAlinhamento" value="#{UsuarioControle.listaConsultaParceiro}" rows="5" var="parceiroItem">
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_Pessoa_codigo}" />
							</f:facet>
							<a4j:commandLink oncomplete="#{rich:component('panelParceiro')}.hide();" action="#{UsuarioControle.selecionarParceiro}" render="form:parceiro, form:cpf, form:nomeParceiro, form:codigoParceiro, form:listaUnidadeEnsino1" value="#{parceiroItem.codigo}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_Pessoa_nome}" />
							</f:facet>
							<a4j:commandLink oncomplete="#{rich:component('panelParceiro')}.hide();" action="#{UsuarioControle.selecionarParceiro}" render="form:parceiro, form:cpf, form:nomeParceiro, form:codigoParceiro, form:listaUnidadeEnsino1" value="#{parceiroItem.nome}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="Opções" />
							</f:facet>
							<otm:commandIcon action="#{UsuarioControle.selecionarParceiro}" oncomplete="#{rich:component('panelParceiro')}.hide();" render="form:parceiro, form:cpf, form:nomeParceiro, form:codigoParceiro, form:listaUnidadeEnsino1" icon="#{msg_botoes.btn_icon_selecionar} iconePequeno" tooltip="Selecionar Parceiro" />
						</rich:column>
					</rich:dataTable>
					<rich:dataScroller align="center" for="formParceiro:resultadoConsultaParceiro" maxPages="10" id="scResultadoParceiro" />
					<h:panelGroup id="mensagemConsultaParceiro" columns="1" width="100%" styleClass="tabMensagens">
						<otm:mensagem bean="#{UsuarioControle}"></otm:mensagem>
					</h:panelGroup>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
		<!-- 		<title><h:outputText value="#{msg_aplic.prt_Usuario_tituloForm} #{msg.msg_separador_titulo_paginas}#{msg.msg_titulo_paginas}" /></title> -->
		<h:form id="form">
			<h:panelGroup id="dadosBasico">
				<h:panelGroup layout="block" styleClass="col-md-2">
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Usuario_tipoUsuario}" />
					<h:selectOneMenu id="tipoUsuario" styleClass="form-control camposObrigatorios" value="#{UsuarioControle.usuarioVO.tipoUsuario}">
						<a4j:ajax render="form" event="change" listener="#{UsuarioControle.limparCampoUsuario}" />
						<f:selectItems value="#{UsuarioControle.listaSelectItemTipoUsuario}" />
					</h:selectOneMenu>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-10 pn" rendered="#{UsuarioControle.usuarioVO.existePessoa}">
					<h:panelGroup layout="block" styleClass="col-md-12" rendered="#{UsuarioControle.usuarioVO.existePessoa}">
						<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Usuario_pessoa}" />
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-3" rendered="#{UsuarioControle.usuarioVO.existePessoa}">
						<h:inputText id="cpf" size="14" readonly="true" maxlength="14" onkeypress="return mascara(this.form, 'form:cpf', '999.999.999-99', event);" styleClass="form-control camposObrigatoriosCinza" value="#{UsuarioControle.usuarioVO.pessoa.CPF}" rendered="#{UsuarioControle.usuarioVO.existePessoa}">
							<a4j:ajax event="change" listener="#{UsuarioControle.consultarPessoaPorChavePrimaria}" render="form:nome, form:mensagens, form:listaUnidadeEnsino1" oncomplete="document.getElementByid('form:nome').focus();" />
						</h:inputText>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-9" rendered="#{UsuarioControle.usuarioVO.existePessoa}">
						<h:inputText id="nome" size="50" readonly="true" maxlength="100" styleClass="form-control camposSomenteLeitura" value="#{UsuarioControle.usuarioVO.nome}" />
						<span class="append-icon right "> <otm:commandIcon action="#{UsuarioControle.realizarLimpezaCamposParaConsultaPessoa}" icon="#{msg_botoes.btn_icon_lupa_embutido}" oncomplete="#{rich:component('panelPessoa')}.show();" render="formPessoa" tooltip="Consultar Pessoa" />
						</span>
					</h:panelGroup>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-10 pn" rendered="#{UsuarioControle.usuarioVO.tipoParcerio}">
					<h:panelGroup layout="block" styleClass="col-md-12" rendered="#{UsuarioControle.usuarioVO.tipoParcerio}">
						<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Usuario_pessoa}" />
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-3" rendered="#{UsuarioControle.usuarioVO.tipoParcerio}">
						<h:inputText id="codigoParceiro" size="10" readonly="true" maxlength="10" styleClass="form-control camposObrigatoriosCinza" value="#{UsuarioControle.usuarioVO.parceiro.codigo}">
							<a4j:ajax event="change" listener="#{UsuarioControle.consultarPessoaPorChavePrimaria}" render="form:nome, form:mensagens, form:listaUnidadeEnsino1" oncomplete="document.getElementByid('form:nome').focus();" />
						</h:inputText>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-9" rendered="#{UsuarioControle.usuarioVO.tipoParcerio}">
						<h:inputText id="nomeParceiro" size="50" readonly="true" maxlength="100" styleClass="form-control camposSomenteLeitura" value="#{UsuarioControle.usuarioVO.nome}" />
						<span class="append-icon right "> <otm:commandIcon icon="#{msg_botoes.btn_icon_lupa_embutido}" oncomplete="#{rich:component('panelParceiro')}.show();" tooltip="Consultar Parceiro" />
						</span>
					</h:panelGroup>
				</h:panelGroup>
				<otm2:panel name="panel_senha" styleClassFooter="dn" styleClassHeader="mn rounded-top bg-gray-100 p10" stylePanel="margin-top: 5px" styleClassBody="mn" renderedControl="false" rendered="#{!UsuarioControle.usuarioVO.novoObj or UsuarioControle.isApresentarCamposUserNameSenha}">
					<ui:define name="header">
						<span class="#{msg_botoes.btn_icon_cadeadoAberto_embutido} fs15 mr5" />
						<h:outputText styleClass="tituloCampos mr5" value="#{!UsuarioControle.usuarioVO.novoObj ? msg_aplic.prt_Usuario_alterarSenha : 'Senha'}" />
						<otm:selectBooleanCheckbox styleClass="field control-label tituloCampos" value="#{UsuarioControle.usuarioVO.alterarSenha}" rendered="#{!UsuarioControle.usuarioVO.novoObj}">
							<a4j:ajax event="click" render="form:dadosBasico" />
						</otm:selectBooleanCheckbox>
					</ui:define>
					<ui:define name="body">
						<h:panelGroup layout="block" styleClass="col-md-6" rendered="#{UsuarioControle.isApresentarCamposUserNameSenha}">
							<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Usuario_username}" />
							<h:inputText id="username" size="14" maxlength="30" styleClass="form-control camposObrigatorios" value="#{UsuarioControle.usuarioVO.username}" />
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="col-md-6" rendered="#{UsuarioControle.isApresentarCamposUserNameSenha}">
							<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Usuario_senha}" />
							<h:inputSecret id="senha" redisplay="true" size="14" maxlength="64" styleClass="form-control camposObrigatorios" value="#{UsuarioControle.usuarioVO.senha}" onkeyup="javascript:verifica('form:senha')" />
						</h:panelGroup>
					</ui:define>
				</otm2:panel>
			</h:panelGroup>
			<otm2:panel name="panel_acessoUsuario" styleClassFooter="dn" styleClassHeader="mn rounded-top bg-gray-100 p10" stylePanel="margin-top: 5px" styleClassBody="mn" renderedControl="false" rendered="#{UsuarioControle.usuarioVO.apresentarListaPerfilAcesso}">
				<ui:define name="header">
					<img src="https://img.icons8.com/material-outlined/17/000000/user-credentials.png" class="mr5" />
					<h:outputText styleClass="tituloCampos" value="#{msg_aplic.prt_UsuarioPerfilAcesso_tituloForm}" />
				</ui:define>
				<ui:define name="body">
					<h:panelGroup layout="block" styleClass="row mn" id="listaUnidadeEnsino">
						<h:panelGroup layout="block" styleClass="col-md-5">
							<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_UsuarioPerfilAcesso_unidadeEnsino}" />
							<h:panelGroup layout="block" styleClass="col-md-12 pn">
								<h:selectOneMenu id="unidadeEnsino" styleClass="form-control campos" value="#{UsuarioControle.usuarioPerfilAcessoVO.unidadeEnsinoVO.codigo}">
									<f:selectItems value="#{UsuarioControle.listaSelectItemUnidadeEnsino}" />
								</h:selectOneMenu>
								<span class="append-icon right mr10"> <otm:commandIcon id="atualizar_unidadeEnsino" action="#{UsuarioControle.montarListaSelectItemUnidadeEnsino}" icon="#{msg_botoes.btn_icon_atualizar_embutido}" immediate="true" execute="@this" render="form:unidadeEnsino" />
								</span>
							</h:panelGroup>
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="col-md-5">
							<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_UsuarioPerfilAcesso_codPerfilAcesso}" />
							<h:panelGroup layout="block" styleClass="col-md-12 pn">
								<h:selectOneMenu id="codPerfilAcesso" styleClass="form-control campos" value="#{UsuarioControle.usuarioPerfilAcessoVO.perfilAcesso.codigo}">
									<f:selectItems value="#{UsuarioControle.listaSelectItemCodPerfilAcesso}" />
								</h:selectOneMenu>
								<span class="append-icon right mr10"> <otm:commandIcon id="atualizar_codPerfilAcesso" action="#{UsuarioControle.montarListaSelectItemCodPerfilAcesso}" icon="#{msg_botoes.btn_icon_atualizar_embutido}" immediate="true" execute="@this" render="form:codPerfilAcesso" />
								</span>
							</h:panelGroup>
							<h:message for="codPerfilAcesso" styleClass="field control-label mensagemDetalhada col-md-12" />
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="col-md-2 text-center pt4">
							<otm:spacer width="100%" />
							<otm:commandButton rendered="#{UsuarioControle.usuarioVO.apresentarListaPerfilAcesso}" render="form:usuarioPerfilAcessoVO, form:mensagens" id="btApresentarPerfilAcesso" action="#{UsuarioControle.adicionarUsuarioPerfilAcesso}" styleClass="btn btn-primary pl30 pr30" icon="#{msg_botoes.btn_icon_adicionar_embutido}" value="Adicionar" accesskey="5" oncomplete="document.getElementByid('form:unidadeEnsino').focus();" />
						</h:panelGroup>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="row mn" id="panelPerfilAcesso" rendered="#{UsuarioControle.usuarioVO.apresentarListaPerfilAcesso}">
						<rich:dataTable id="usuarioPerfilAcessoVO" width="100%" headerClass="subordinado" styleClass="tabFormSubordinada" rowClasses="linhaImparSubordinado, linhaParSubordinado" columnClasses="colunaAlinhamento" value="#{UsuarioControle.usuarioVO.usuarioPerfilAcessoVOs}" var="usuarioPerfilAcessoItem">
							<rich:column>
								<f:facet name="header">
									<h:outputText value="#{msg_aplic.prt_UsuarioPerfilAcesso_unidadeEnsino}" />
								</f:facet>
								<h:outputText value="#{usuarioPerfilAcessoItem.unidadeEnsinoVO.nome}" />
							</rich:column>
							<rich:column>
								<f:facet name="header">
									<h:outputText value="#{msg_aplic.prt_UsuarioPerfilAcesso_codPerfilAcesso}" />
								</f:facet>
								<h:selectOneMenu id="perfilAcesso" styleClass="form-control camposObrigatorios" value="#{usuarioPerfilAcessoItem.perfilAcesso.codigo}">
									<f:selectItems value="#{UsuarioControle.listaSelectItemCodPerfilAcesso}" />
								</h:selectOneMenu>
							</rich:column>
							<rich:column>
								<f:facet name="header">
									<h:outputText value="#{msg_botoes.btn_opcoes}" />
								</f:facet>
								<h:panelGroup>
									<otm:commandIcon id="editarUsuarioPerfilAcesso" execute="@this" render="form" action="#{UsuarioControle.editarUsuarioPerfilAcesso}" tooltip="#{msg_botoes.btn_editar}" icon="#{msg_botoes.btn_icon_editar} iconePequeno" accesskey="6" />
									<otm:commandIcon id="removerUsuarioPerfilAcesso" execute="@this" render="form" action="#{UsuarioControle.removerUsuarioPerfilAcesso}" tooltip="#{msg_botoes.btn_excluir}" icon="#{msg_botoes.btn_icon_remover} iconePequeno" accesskey="7" />
								</h:panelGroup>
							</rich:column>
						</rich:dataTable>
						<rich:dataScroller align="center" for="usuarioPerfilAcessoVO" stepControls="auto" boundaryControls="auto" fastControls="hide" limitRender="5" id="scUsuarioPerfilAcesso" />
					</h:panelGroup>
				</ui:define>
			</otm2:panel>
			<h:panelGroup layout="block" styleClass="row">
				<otm:mensagem bean="#{UsuarioControle}"></otm:mensagem>
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="barraFlutuanteInferior">
				<otm:commandButton id="novo" immediate="true" action="#{UsuarioControle.novo}" value="#{msg_botoes.btn_novo}" accesskey="1" styleClass="btn btn-info btn-novo" render="@form" />
				<otm:commandButton style="margin-left: 5px" id="salvar" action="#{UsuarioControle.gravar}" value="#{msg_botoes.btn_gravar}" accesskey="2" styleClass="btn btn-dark btn-gravar" render="@form" />
				<otm:commandButton style="margin-left: 5px" id="excluir" action="#{UsuarioControle.excluir}" value="#{msg_botoes.btn_excluir}" accesskey="3" onclick="return confirm('#{msg.msg_confirmacao_excluxao}');" render="@form" styleClass="btn btn-danger btn-excluir" />
				<otm:commandButton style="margin-left: 5px" id="consultar" immediate="true" action="#{UsuarioControle.inicializarConsultar}" value="#{msg_botoes.btn_consultar}" accesskey="4" styleClass="btn btn-default btn-consultar" />
			</h:panelGroup>
		</h:form>
	</ui:define>
</ui:composition>
</html>
