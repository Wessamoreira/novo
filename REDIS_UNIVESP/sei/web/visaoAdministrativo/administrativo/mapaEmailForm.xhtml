<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" xmlns:otm="http://java.sun.com/jsf/composite/otm" xmlns:otm2="http://www.otimize-ti.com.br">
<h:head>
</h:head>
<ui:composition template="/visaoAdministrativo/template/visaoAdministrativa.xhtml">
	<ui:define name="tituloPagina">
		<h:outputText value="Mapa Envio Email" />
	</ui:define>
	<ui:define name="conteudo">

		<rich:popupPanel styleClass="modalMaximizado" id="panelDetalhes" domElementAttachment="parent" shadowOpacity="true" width="750" height="550">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="Email" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelinkFunc" />
					<rich:componentControl target="panelDetalhes" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formDetalhes">
				<h:panelGroup layout="block" styleClass="col-md-6">
					<h:outputText styleClass="field control-label tituloCampos" value="Destinatário" />
					<h:inputText disabled="true" size="100" styleClass="form-control camposSomenteLeitura" value="#{MapaEmailControle.emailVO.nomeDest}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-6">
					<h:outputText styleClass="field control-label tituloCampos" value="E-mail Destinatário" />
					<h:inputText disabled="true" size="100" styleClass="form-control camposSomenteLeitura" value="#{MapaEmailControle.emailVO.emailDestinatarioApresentar}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-6">
					<h:outputText styleClass="field control-label tituloCampos" value="Remetente" />
					<h:inputText disabled="true" size="100" styleClass="form-control camposSomenteLeitura" value="#{MapaEmailControle.emailVO.nomeRemet}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-6">
					<h:outputText styleClass="field control-label tituloCampos" value="E-mail Remetente" />
					<h:inputText disabled="true" size="100" styleClass="form-control camposSomenteLeitura" value="#{MapaEmailControle.emailVO.emailRemet}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-6">
					<h:outputText styleClass="field control-label tituloCampos" value="Assunto" />
					<h:inputText disabled="true" size="100" styleClass="form-control camposSomenteLeitura" value="#{MapaEmailControle.emailVO.assunto}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-6">
					<h:outputText styleClass="field control-label tituloCampos" value="Error" rendered="#{!empty MapaEmailControle.emailVO.erro}" />
					<h:inputTextarea disabled="true" styleClass="form-control  camposSomenteLeituraTextArea" value="#{MapaEmailControle.emailVO.erro}" rendered="#{!empty MapaEmailControle.emailVO.erro}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-12">
					<h:outputText styleClass="field control-label tituloCampos" value="Mensagem" />
					<otm:editor id="mensagem" width="500" height="250" readonly="true" value="#{MapaEmailControle.emailVO.mensagem}">
					</otm:editor>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>

		<rich:popupPanel styleClass="modalMaximizado" id="panelDetalhesSMS" domElementAttachment="parent" shadowOpacity="true" width="750" height="550">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="SMS" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelinkSMS" />
					<rich:componentControl target="panelDetalhesSMS" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formDetalhesSMS">
				<h:panelGroup layout="block" styleClass="col-md-6">
					<h:outputText styleClass="field control-label tituloCampos" value="Destinatário" />
					<h:inputText disabled="true" size="100" styleClass="form-control camposSomenteLeitura" value="#{MapaEmailControle.smsVO.nomeDest}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-2">
					<h:outputText styleClass="field control-label tituloCampos" value="Celular Destinatário" />
					<h:inputText disabled="true" size="100" styleClass="form-control camposSomenteLeitura" value="#{MapaEmailControle.smsVO.celular}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-4">
					<h:outputText styleClass="field control-label tituloCampos" value="Assunto" />
					<h:inputText disabled="true" size="100" styleClass="form-control camposSomenteLeitura" value="#{MapaEmailControle.smsVO.assunto}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-12">
					<h:outputText styleClass="field control-label tituloCampos" value="Mensagem" />
					<otm:editor id="mensagemSMS" readonly="true" value="#{MapaEmailControle.smsVO.mensagem}">
						
					</otm:editor>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>

		<rich:popupPanel styleClass="modalMaximizado" id="panelVisualizarDadosOperacaoMoodle">
			<f:facet name="header">
				<h:outputText value="Processamento de Comunicado Interno" />
			</f:facet>
			<h:form id="formVisualizarDadosOperacaoMoodle">
				<h:panelGroup layout="block" styleClass="row mn">
					<h:panelGroup layout="block" styleClass="row mn mb10 p5 border rounded bg-white" rendered="#{MapaEmailControle.operacaoMoodle.operacaoComErro}">
						<h:outputText styleClass="tituloCampos font-weight-bold btn-block" value="Erro ao Gerar o Comunicado Interno Abaixo" />
						<h:outputText styleClass="tituloCampos" value="#{MapaEmailControle.operacaoMoodle.erro}" />
					</h:panelGroup>
					<a4j:repeat rowKeyVar="row" id="operacaoMoodle_mensagensRSVO_mensagens" value="#{MapaEmailControle.operacaoMoodle.mensagensRSVO.mensagens}" var="mensagemItens">
						<otm2:panel name="panel_mensagem#{row+1}" styleClassBody="row mn p5" styleClassHeader="row mn bg-gray-100 p10" stylePanel="margin-top: 5px; margin-bottom: 5px" styleClassFooter="dn" opened="true">
							<ui:define name="header">
								<h:outputText styleClass="tituloCampos font-weight-bold float-left" value="#{mensagemItens.assunto}" />
							</ui:define>
							<ui:define name="body">
								<h:panelGroup layout="block" styleClass="col-md-9">
									<h:outputText styleClass="tituloCampos" value="E-mail Remetente" />
									<h:inputText disabled="true" styleClass="form-control" value="#{mensagemItens.emailRemetente}" />
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-3">
									<h:outputText styleClass="tituloCampos" value="Quantidade de Destinatários" />
									<h:panelGroup layout="block" styleClass="col-md-12 pn">
										<h:inputText disabled="true" styleClass="form-control" value="#{mensagemItens.quantidadeDestinatarios}" />
										<span class="append-icon right">
											<otm:commandIcon tooltip="Visualizar Destinatários" icon="#{msg_botoes.btn_icon_verificar_embutido}" action="#{MapaEmailControle.visualizarDestinatariosMensagensItem}" oncomplete="#{MapaEmailControle.oncompleteModal}" render="formVisualizarDestinatariosMensagensItemRS" />
										</span>
									</h:panelGroup>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-6">
									<h:outputText styleClass="tituloCampos btn-block" value="Enviar por E-mail" />
									<otm:selectBooleanCheckbox disabled="true" value="#{mensagemItens.enviarPorEmail}" />
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-6">
									<h:outputText styleClass="tituloCampos btn-block" value="Enviar por SMS" />
									<otm:selectBooleanCheckbox disabled="true" value="#{mensagemItens.enviarSms}" />
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-12" rendered="#{mensagemItens.enviarSms}">
									<h:outputText styleClass="tituloCampos" value="SMS" />
									<h:inputTextarea id="mensagemSms" disabled="true" styleClass="form-control" value="#{mensagemItens.sms}" />
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-12">
									<h:outputText styleClass="tituloCampos" value="Mensagem" />
									<otm:editor height="400px" id="mensagemMoodle" disabled="true" value="#{mensagemItens.mensagem}" />
								</h:panelGroup>
							</ui:define>
						</otm2:panel>
					</a4j:repeat>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="barra-btn-flutuante-modal-80">
					<otm:commandButton value="fechar" styleClass="btn btn-danger" icon="#{msg_botoes.btn_icon_fechar_embutido}" action="#{MapaEmailControle.setOperacaoMoodle(null)}" render="formVisualizarDadosOperacaoMoodle" oncomplete="#{rich:component('panelVisualizarDadosOperacaoMoodle')}.hide();" />
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
		
		<rich:popupPanel styleClass="modalMaximizado" id="panelVisualizarDestinatariosMensagensItemRS">
			<f:facet name="header">
				<h:outputText value="Destinatários" />
			</f:facet>
			<h:form id="formVisualizarDestinatariosMensagensItemRS">
				<rich:dataTable id="listaEmailDestinatarios" value="#{MapaEmailControle.mensagensItemRS.listaEmailDestinatarios}" var="emailDestinatarioItens" rows="10">
					<rich:column>
						<f:facet name="header">
							<h:outputText value="E-mail" />
						</f:facet>
						<h:outputText value="#{emailDestinatarioItens}" />
					</rich:column>
					<f:facet name="footer">
						<rich:dataScroller id="dataScroller_listaEmailDestinatarios" for="listaEmailDestinatarios" maxPages="10" />
					</f:facet>
				</rich:dataTable>
				<h:panelGroup layout="block" styleClass="barra-btn-flutuante-modal-80">
					<otm:commandButton value="fechar" styleClass="btn btn-danger" icon="#{msg_botoes.btn_icon_fechar_embutido}" action="#{MapaEmailControle.setMensagensItemRS(null)}" render="formVisualizarDestinatariosMensagensItemRS" oncomplete="#{rich:component('panelVisualizarDestinatariosMensagensItemRS')}.hide();" />
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
		
		<h:form id="form">
			<rich:tabPanel id="tabPanel" width="100%" activeTabClass="true" headerAlignment="left">
				<rich:tab id="tabEmail" header="Email">
					<h:panelGroup layout="block" styleClass="row">
						<h:panelGroup id="panelGridBotoes" layout="block" style="margin-bottom:10px" styleClass="col-md-12 text-center">
							<a4j:commandLink render="form" id="botaoConsultarEmails" action="#{MapaEmailControle.consultarEmails}" styleClass="btn btn-default" value="Consultar E-mails" alt="Atualizar">
								<span class="fa fa-search pull-left" style="margin-right: 0.8em; position: relative; top: 3px; font-size: 14px;"></span>
								<f:setPropertyActionListener target="#{MapaEmailControle.controleConsultaOtimizado.paginaAtual}" value="1" />
								<f:setPropertyActionListener target="#{MapaEmailControle.controleConsultaOtimizado.page}" value="1" />
							</a4j:commandLink>
						</h:panelGroup>
					</h:panelGroup>
					<h:panelGroup layout="block" id="panelItens" styleClass="row">
						<a4j:jsFunction name="consultarEmail" render="panelItens" action="#{MapaEmailControle.consultarPorEmailFiltro}"></a4j:jsFunction>
						<rich:dataTable id="items" width="100%" headerClass="consulta" styleClass="tabConsulta" rowClasses="linhaImpar, linhaPar" columnClasses="colunaAlinhamento" value="#{MapaEmailControle.controleConsultaOtimizado}" rows="10" var="emailItens">
							<rich:column style="width: 12.5%">
								<f:facet name="header">
									<h:outputText value="Código" />
								</f:facet>
								<h:outputText value="#{emailItens.codigo}" />
							</rich:column>
							<rich:column style="width: 12.5%" >
								<f:facet name="header">
									<h:outputText value="Assunto" />
									<br />
									<h:inputText styleClass="form-control campos" size="10" value="#{MapaEmailControle.assunto}">
										<a4j:ajax event="change" execute="@this" render="panelItens" listener="#{MapaEmailControle.consultarPorEmailFiltro}" />
									</h:inputText>
								</f:facet>
								<h:outputText value="#{emailItens.assunto}" />
								<rich:tooltip value="#{emailItens.assunto}" />
							</rich:column>
							<rich:column style="width: 12.5%" >
								<f:facet name="header">
									<h:outputText value="Data Envio" />
									<br />
									<otm:calendar jsFunction="consultarEmail()" styleClass="form-control campos" size="10" value="#{MapaEmailControle.dataEnvio}">
										
									</otm:calendar>
								</f:facet>
								<h:outputText value="#{emailItens.dataCadastro_Apresentar}" />
								<rich:tooltip value="#{emailItens.dataCadastro_Apresentar}" />
							</rich:column>
							<rich:column style="width: 12.5%" >
								<f:facet name="header">
									<h:outputText value="Destinatário" />
									<br />
									<h:inputText styleClass="form-control campos" size="10" value="#{MapaEmailControle.destinatario}">
										<a4j:ajax event="change" execute="@this" render="panelItens"  listener="#{MapaEmailControle.consultarPorEmailFiltro}"  />
									</h:inputText>
								</f:facet>
								<h:outputText value="#{emailItens.nomeDest}" />
								<rich:tooltip value="#{emailItens.nomeDest}" />
							</rich:column>
							<rich:column style="width: 12.5%" >
								<f:facet name="header">
									<h:outputText value="Email Destinatário" />
									<br />
									<h:inputText styleClass="form-control campos" size="10" value="#{MapaEmailControle.emailDestinatario}">
										<a4j:ajax event="change" execute="@this" render="panelItens"  listener="#{MapaEmailControle.consultarPorEmailFiltro}"  />
									</h:inputText>
								</f:facet>
								<h:outputText value="#{emailItens.emailDestinatarioApresentar}" />
								<rich:tooltip value="#{emailItens.emailDestinatarioApresentar}" />
							</rich:column>
							<rich:column style="width: 12.5%" >
								<f:facet name="header">
									<h:outputText value="Remetente" />
									<br />
									<h:inputText styleClass="form-control campos" size="10" value="#{MapaEmailControle.remetente}">
										<a4j:ajax event="change" execute="@this" render="panelItens"  listener="#{MapaEmailControle.consultarPorEmailFiltro}"  />
									</h:inputText>
								</f:facet>
								<h:outputText value="#{emailItens.nomeRemet}" />
								<rich:tooltip value="#{emailItens.nomeRemet}" />
							</rich:column>
							<rich:column style="width: 12.5%" >
								<f:facet name="header">
									<h:outputText value="Email Remetente" />
									<br />
									<h:inputText styleClass="form-control campos" size="10" value="#{MapaEmailControle.emailRemetente}">
										<a4j:ajax event="change" execute="@this" render="panelItens"  listener="#{MapaEmailControle.consultarPorEmailFiltro}"  />
									</h:inputText>
								</f:facet>
								<h:outputText value="#{emailItens.emailRemet}" />
								<rich:tooltip value="#{emailItens.emailRemet}" />
							</rich:column>
							<rich:column style="width: 12.5%">
								<f:facet name="header">
									<h:outputText value="#{msg_bt.btn_opcoes}" />
								</f:facet>
								<otm:commandIcon action="#{MapaEmailControle.visualizarDetalhes}" render="formDetalhes" oncomplete="#{rich:component('panelDetalhes')}.show()" tooltip="Visualizar" icon="#{msg_botoes.btn_icon_lupa} iconePequeno" />
								<otm:commandIcon tooltip="Enviar e-mail" icon="#{msg_botoes.btn_icon_enviar_email} iconePequeno" action="#{MapaEmailControle.enviarEmail}" render="form" />
								<otm:commandIcon action="#{MapaEmailControle.visualizarDetalhes}" render="formDetalhes" oncomplete="#{rich:component('panelDetalhes')}.show()" tooltip="Visualizar Erro" icon="#{msg_botoes.btn_icon_alerta_triangulo} iconePequeno" rendered="#{!empty emailItens.erro}" />
								<otm:commandIcon action="#{MapaEmailControle.cancelarEnvioEmail}" render="form" tooltip="Cancelar Envio Email" icon="#{msg_botoes.btn_icon_cancelar} iconePequeno" />
							</rich:column>
							<f:facet name="footer">
								<div style="text-align: center !important">
									<rich:dataScroller scrollListener="#{MapaEmailControle.scrollerListener}" for="form:items" id="scResultadoItems" render="form:items" boundaryControls="auto" stepControls="auto" fastControls="hide" limitRender="10" />
								</div>
							</f:facet>
						</rich:dataTable>
					</h:panelGroup>
					<h:panelGroup id="panelGridTodos">
						<h:panelGroup layout="block" styleClass="barraFlutuanteInferior">
							<otm:commandButton render="form" id="enviarTodos" action="#{MapaEmailControle.enviarTodos}" value="Enviar Todos" accesskey="2" icon="#{msg_botoes.btn_icon_enviar_email_embutido}" />
							<otm:commandButton style="margin-left:5px" id="excluir" action="#{MapaEmailControle.excluirTodos}" value="Excluir Todos" onclick="return confirm('#{msg.msg_confirmacao_excluxao}');" styleClass="btn btn-danger btn-excluir" render="@form" />
						</h:panelGroup>
					</h:panelGroup>
				</rich:tab>
				<rich:tab id="tabSMS" header="SMS">
					<h:panelGroup layout="block" styleClass="row">
						<h:panelGroup layout="block" styleClass="col-md-5">
							<h:outputText styleClass="field control-label tituloCampos" value="Nome Dest." />
							<h:inputText id="nomeDe" size="50" maxlength="100" styleClass="form-control camposObrigatorios" value="#{MapaEmailControle.nomeDestSms}" />
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="col-md-5">
							<h:outputText styleClass="field control-label tituloCampos" value="Celular Dest." />
							<h:inputText id="celularDe" size="30" maxlength="50" styleClass="form-control camposObrigatorios" value="#{MapaEmailControle.numeroDestSms}" />
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="col-md-2 mt5">
							<otm:spacer width="100%" />
							<otm:commandButton id="consultarSMS" action="#{MapaEmailControle.consultarSms}" value="#{msg_botoes.btn_consultar}" accesskey="2" styleClass="btn btn-default btn-consultar" render="listaSMS, scResultadoItemSMS, gridMensagens" />
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="col-md-12 mt5" />
						<rich:dataTable id="listaSMS" width="100%" headerClass="consulta" styleClass="tabConsulta" rowClasses="linhaImpar, linhaPar" columnClasses="colunaAlinhamento" value="#{MapaEmailControle.listaSms}" rows="15" var="smsItens">
							<rich:column style="width: 14.28%">
								<f:facet name="header">
									<h:outputText value="Código" />
								</f:facet>
								<h:outputText value="#{smsItens.codigo}" />
							</rich:column>
							<rich:column style="width: 14.28%" filterType="custom" filter="#{FilterFactory.filter('listaSMS1', 'assunto', 'TEXTO')}">
								<f:facet name="header">
									<h:outputText value="Assunto" />
									<br />
									<h:inputText styleClass="form-control campos" size="10" value="#{FilterFactory.filter('listaSMS1', 'assunto', 'TEXTO').filtro}">
										<a4j:ajax event="change" execute="@this" render="listaSMS" />
									</h:inputText>
								</f:facet>
								<h:outputText value="#{smsItens.assunto}" />
							</rich:column>
							<rich:column style="width: 14.28%" filterType="custom" filter="#{FilterFactory.filter('listaSMS2', 'dataCadastro_Apresentar', 'TEXTO')}">
								<f:facet name="header">
									<h:outputText value="Data Envio" />
									<br />
									<h:inputText id="filtroData" onkeypress="return mascaraData(this.form, this.id, 'dd/MM/yy', event);" styleClass="form-control campos" size="10" value="#{FilterFactory.filter('listaSMS2', 'dataCadastro_Apresentar', 'TEXTO').filtro}">
										<a4j:ajax event="change" execute="@this" render="listaSMS" />
									</h:inputText>
								</f:facet>
								<h:outputText value="#{smsItens.dataCadastro_Apresentar}" />
							</rich:column>
							<rich:column style="width: 14.28%" filterType="custom" filter="#{FilterFactory.filter('listaSMS3', 'nomeDest', 'TEXTO')}">
								<f:facet name="header">
									<h:outputText value="Destinatário" />
									<br />
									<h:inputText styleClass="form-control campos" size="10" value="#{FilterFactory.filter('listaSMS3', 'nomeDest', 'TEXTO').filtro}">
										<a4j:ajax event="change" execute="@this" render="listaSMS" />
									</h:inputText>
								</f:facet>
								<h:outputText value="#{smsItens.nomeDest}" />
							</rich:column>
							<rich:column style="width: 14.28%" filterType="custom" filter="#{FilterFactory.filter('listaSMS4', 'emailDest', 'TEXTO')}">
								<f:facet name="header">
									<h:outputText value="Celular" />
									<br />
									<h:inputText styleClass="form-control campos" size="10" value="#{FilterFactory.filter('listaSMS4', 'celular', 'TEXTO').filtro}">
										<a4j:ajax event="change" execute="@this" render="listaSMS" />
									</h:inputText>
								</f:facet>
								<h:outputText value="#{smsItens.celular}" />
							</rich:column>
							<rich:column style="width: 14.28%">
								<f:facet name="header">
									<h:outputText value="Enviou" />
									<br />
								</f:facet>
								<h:outputText value="Sim" rendered="#{smsItens.enviouSMS}" />
								<h:outputText value="Não" rendered="#{!smsItens.enviouSMS}" />
							</rich:column>
							<rich:column style="width: 14.28%">
								<f:facet name="header">
									<h:outputText value="#{msg_bt.btn_opcoes}" />
								</f:facet>
								<h:panelGroup layout="block" styleClass="row">
									<h:panelGroup layout="block" styleClass="col-md-12">
										<otm:commandIcon icon="#{msg_botoes.btn_icon_lupa} iconePequeno" action="#{MapaEmailControle.visualizarDetalhesSMS}" render="formDetalhesSMS" oncomplete="#{rich:component('panelDetalhesSMS')}.show()" tooltip="Visualizar" />
										<otm:commandIcon icon="#{msg_botoes.btn_icon_enviar_email} iconePequeno" tooltip="Enviar SMS" action="#{MapaEmailControle.enviarSms}" render="listaSMS, scResultadoItemSMS, gridMensagens" rendered="#{!smsItens.enviouSMS}" />
									</h:panelGroup>
								</h:panelGroup>
							</rich:column>
							<f:facet name="footer">
								<div style="text-align: center !important">
									<rich:dataScroller align="center" for="form:listaSMS" maxPages="10" id="scResultadoItemSMS" boundaryControls="auto" stepControls="auto" fastControls="hide" />
								</div>
							</f:facet>
						</rich:dataTable>
					</h:panelGroup>
				</rich:tab>
				<rich:tab id="tabMonitorEmail" header="Monitoramento">
					<h:panelGroup layout="block" styleClass="row">
						<h:panelGroup layout="block" styleClass="col-md-12 text-center">
							<otm:commandButton render="form" id="botaoConsultarRegistros" icon="#{msg_botoes.btn_icon_atualizar_embutido}" action="#{MapaEmailControle.consultarRegistros}" value="Atualizar" accesskey="2" />
						</h:panelGroup>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="row">
						<h:panelGroup layout="block" styleClass="col-md-4">
							<h:outputText styleClass="field control-label tituloCampos" value="Intervalo de execução da rotina de envio de emails (em minutos)" />
							<h:inputText styleClass="form-control camposSomenteLeitura" readonly="true" value="5" size="4" />
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="col-md-4">
							<h:outputText styleClass="field control-label tituloCampos" value="Total de rotinas executadas na última hora" />
							<h:inputText styleClass="form-control camposSomenteLeitura" readonly="true" value="#{MapaEmailControle.totaisUltimaHora.totalRotinasExecutadas}" size="4" />
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="col-md-4">
							<h:outputText styleClass="field control-label tituloCampos" value="Total de rotinas executadas nas últimas 24 horas" />
							<h:inputText styleClass="form-control camposSomenteLeitura" readonly="true" value="#{MapaEmailControle.totaisUltimas24Horas.totalRotinasExecutadas}" size="4" />
						</h:panelGroup>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="row">
						<h:panelGroup layout="block" styleClass="col-md-4">
							<h:outputText styleClass="field control-label tituloCampos" value="Limite de emails enviados em cada execução da rotina" />
							<h:inputText styleClass="form-control camposSomenteLeitura" readonly="true" value="#{MapaEmailControle.limiteEmails}" size="4" />
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="col-md-4">
							<h:outputText styleClass="field control-label tituloCampos" value="Total de emails encontrados para envio na última hora" />
							<h:inputText styleClass="form-control camposSomenteLeitura" readonly="true" value="#{MapaEmailControle.totaisUltimaHora.totalEmailsEncontrados}" size="4" />
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="col-md-4">
							<h:outputText styleClass="field control-label tituloCampos" value="Total de emails encontrados para envio nas últimas 24 horas" />
							<h:inputText styleClass="form-control camposSomenteLeitura" readonly="true" value="#{MapaEmailControle.totaisUltimas24Horas.totalEmailsEncontrados}" size="4" />
						</h:panelGroup>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="row">
						<h:panelGroup layout="block" styleClass="col-md-4">
							<h:outputText styleClass="field control-label tituloCampos" value="Total de emails aguardando envio (entre ontem e hoje)" />
							<h:inputText styleClass="form-control camposSomenteLeitura" readonly="true" value="#{MapaEmailControle.totalEmailsAguardandoEnvio}" size="4" />
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="col-md-4">
							<h:outputText styleClass="field control-label tituloCampos" value="Total de emails enviados na última hora" />
							<h:inputText styleClass="form-control camposSomenteLeitura" readonly="true" value="#{MapaEmailControle.totaisUltimaHora.totalEmailsEnviados}" size="4" />
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="col-md-4">
							<h:outputText styleClass="field control-label tituloCampos" value="Total de emails enviados nas últimas 24 horas" />
							<h:inputText styleClass="form-control camposSomenteLeitura" readonly="true" value="#{MapaEmailControle.totaisUltimas24Horas.totalEmailsEnviados}" size="4" />
						</h:panelGroup>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="row">
						<h:panelGroup layout="block" styleClass="col-md-4">
							<h:outputText styleClass="field control-label tituloCampos" value="Total de emails não enviados (anterior a ontem)" />
							<h:inputText styleClass="form-control camposSomenteLeitura" readonly="true" value="#{MapaEmailControle.totalEmailsNaoEnviados}" size="4" />
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="col-md-4">
							<h:outputText styleClass="field control-label tituloCampos" value="Total de erros no envio de email na última hora" />
							<h:inputText styleClass="form-control camposSomenteLeitura" readonly="true" value="#{MapaEmailControle.totaisUltimaHora.totalEmailsErro}" size="4" />
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="col-md-4">
							<h:outputText styleClass="field control-label tituloCampos" value="Total de erros no envio de email nas últimas 24 horas" />
							<h:inputText styleClass="form-control camposSomenteLeitura" readonly="true" value="#{MapaEmailControle.totaisUltimas24Horas.totalEmailsErro}" size="4" />
						</h:panelGroup>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-12 mt5" />
					<rich:dataTable headerClass="consulta" styleClass="tabConsulta" rowClasses="linhaImpar, linhaPar" columnClasses="colunaAlinhamento" value="#{MapaEmailControle.registros}" var="registro">
						<rich:column style="width:10%">
							<f:facet name="header">
								<h:outputText value="Início" />
							</f:facet>
							<h:outputText value="#{registro.dataInicioApresentar}" />
						</rich:column>
						<rich:column style="width:10%">
							<f:facet name="header">
								<h:outputText value="Término" />
							</f:facet>
							<h:outputText value="#{registro.dataTerminoApresentar}" />
						</rich:column>
						<rich:column style="width:5%">
							<f:facet name="header">
								<h:outputText value="Total" />
							</f:facet>
							<h:outputText value="#{registro.total}" />
						</rich:column>
						<rich:column style="width:5%">
							<f:facet name="header">
								<h:outputText value="Sucesso" />
							</f:facet>
							<h:outputText value="#{registro.totalSucesso}" />
						</rich:column>
						<rich:column style="width:5%">
							<f:facet name="header">
								<h:outputText value="Erro" />
							</f:facet>
							<h:outputText value="#{registro.totalErro}" />
						</rich:column>
						<rich:column style="width:65%">
							<f:facet name="header">
								<h:outputText value="Detalhes" />
							</f:facet>
							<h:inputTextarea readonly="true" cols="80" rows="3" styleClass="form-control" value="#{registro.erro}" />
						</rich:column>
					</rich:dataTable>
				</rich:tab>
				<rich:tab id="tabProcessamentoComunicadoInterno" header="Processamento de Comunicado Interno">
					<h:panelGroup layout="block" styleClass="row mn">
						<h:panelGroup layout="block" styleClass="col-md-12 text-center mb10">
							<a4j:commandLink value="atualizar" styleClass="btn btn-default pr30 pl30" action="#{MapaEmailControle.atualizarDadosProcessamentoMensagemMoodle}" render="form" execute="form">
								<i class="#{msg_botoes.btn_icon_atualizar_embutido} pull-left" style="margin-right: 0.8em; position: relative; top: 1px; font-size: 12px;" />
								<f:setPropertyActionListener target="#{MapaEmailControle.dataModeloOperacaoMoodleProcessamentoPendente.paginaAtual}" value="1" />
								<f:setPropertyActionListener target="#{MapaEmailControle.dataModeloOperacaoMoodleProcessamentoErro.paginaAtual}" value="1" />
								<f:setPropertyActionListener target="#{MapaEmailControle.dataModeloRegistroExecucaoJob.paginaAtual}" value="1" />
								<f:setPropertyActionListener target="#{MapaEmailControle.dataModeloOperacaoMoodleProcessamentoPendente.page}" value="1" />
								<f:setPropertyActionListener target="#{MapaEmailControle.dataModeloOperacaoMoodleProcessamentoErro.page}" value="1" />
								<f:setPropertyActionListener target="#{MapaEmailControle.dataModeloRegistroExecucaoJob.page}" value="1" />
							</a4j:commandLink>
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="col-md-6">
							<otm2:panel name="panel_processamentoComunicadoPendente" styleClassBody="row mn p5" styleClassHeader="row mn bg-gray-100 p10" stylePanel="margin-top: 5px; margin-bottom: 5px" styleClassFooter="dn" opened="false">
								<ui:define name="header">
									<h:outputText styleClass="tituloCampos font-weight-bold float-left" value="Processamento Pendente" />
									<h:outputText styleClass="tituloCampos font-weight-bold float-right" value="Quantidade: #{MapaEmailControle.dataModeloOperacaoMoodleProcessamentoPendente.totalRegistrosEncontrados}" />
								</ui:define>
								<ui:define name="body">
									<h:panelGroup layout="block" styleClass="row mn" rendered="#{!empty MapaEmailControle.dataModeloOperacaoMoodleProcessamentoPendente.listaConsulta}">
										<rich:dataTable id="operacaoMoodleProcessamentoPendente" value="#{MapaEmailControle.dataModeloOperacaoMoodleProcessamentoPendente}" var="operacaoMoodlePendenteItem" rows="10">
											<rich:column>
												<f:facet name="header">
													<h:outputText value="código" />
												</f:facet>
												<h:outputText value="#{operacaoMoodlePendenteItem.codigo}" />
											</rich:column>
											<rich:column>
												<f:facet name="header">
													<h:outputText value="data criação" />
												</f:facet>
												<h:outputText value="#{operacaoMoodlePendenteItem.created_apresentar}" />
											</rich:column>
											<rich:column>
												<f:facet name="header">
													<h:outputText value="opções" />
												</f:facet>
												<otm:commandIcon tooltip="Visualizar" icon="#{msg_botoes.btn_icon_verificar} iconePequeno" action="#{MapaEmailControle.visualizarOperacaoMoodleMensagem('operacaoMoodlePendenteItem')}" oncomplete="#{MapaEmailControle.oncompleteModal}" render="formVisualizarDadosOperacaoMoodle" />
											</rich:column>
											<f:facet name="footer">
												<rich:dataScroller id="dataScrollerOperacaoMoodleProcessamentoPendente" for="operacaoMoodleProcessamentoPendente" page="#{MapaEmailControle.dataModeloOperacaoMoodleProcessamentoPendente.page}" scrollListener="#{MapaEmailControle.scrollerListenerDadosProcessamentoPendente}" rendered="#{MapaEmailControle.dataModeloOperacaoMoodleProcessamentoPendente.apresentarPaginador}" maxPages="5" boundaryControls="auto" stepControls="auto" fastControls="hide" />
											</f:facet>
										</rich:dataTable>
									</h:panelGroup>
									<h:panelGroup layout="block" styleClass="row mn text-center p10" rendered="#{empty MapaEmailControle.dataModeloOperacaoMoodleProcessamentoPendente.listaConsulta}">
										<i class="#{msg_botoes.btn_icon_aviso_embutido} text-warning fs15 mr5" />
										<h:outputText styleClass="tituloCampos" value="Sem registros de comunicado interno pendente criação" />
									</h:panelGroup>
								</ui:define>
							</otm2:panel>
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="col-md-6">
							<otm2:panel name="panel_processamentoComunicadoErro" styleClassBody="row mn p5" styleClassHeader="row mn bg-gray-100 p10" stylePanel="margin-top: 5px; margin-bottom: 5px" styleClassFooter="dn" opened="false">
								<ui:define name="header">
									<h:outputText styleClass="tituloCampos font-weight-bold float-left" value="Processamento com Erro" />
									<h:outputText styleClass="tituloCampos font-weight-bold float-right" value="Quantidade: #{MapaEmailControle.dataModeloOperacaoMoodleProcessamentoErro.totalRegistrosEncontrados}" />
								</ui:define>
								<ui:define name="body">
									<h:panelGroup layout="block" styleClass="row mn" rendered="#{!empty MapaEmailControle.dataModeloOperacaoMoodleProcessamentoErro.listaConsulta}">
										<rich:dataTable id="operacaoMoodleProcessamentoErro" value="#{MapaEmailControle.dataModeloOperacaoMoodleProcessamentoErro}" var="operacaoMoodleErroItem" rows="10">
											<rich:column>
												<f:facet name="header">
													<h:outputText value="código" />
												</f:facet>
												<h:outputText value="#{operacaoMoodleErroItem.codigo}" />
											</rich:column>
											<rich:column>
												<f:facet name="header">
													<h:outputText value="data criação" />
												</f:facet>
												<h:outputText value="#{operacaoMoodleErroItem.created_apresentar}" />
											</rich:column>
											<rich:column>
												<f:facet name="header">
													<h:outputText value="opções" />
												</f:facet>
												<otm:commandIcon tooltip="Visualizar" icon="#{msg_botoes.btn_icon_verificar} iconePequeno" action="#{MapaEmailControle.visualizarOperacaoMoodleMensagem('operacaoMoodleErroItem')}" oncomplete="#{MapaEmailControle.oncompleteModal}" render="formVisualizarDadosOperacaoMoodle" />
											</rich:column>
											<f:facet name="footer">
												<rich:dataScroller id="dataScrollerOperacaoMoodleProcessamentoErro" for="operacaoMoodleProcessamentoErro" page="#{MapaEmailControle.dataModeloOperacaoMoodleProcessamentoErro.page}" scrollListener="#{MapaEmailControle.scrollerListenerDadosProcessamentoErro}" rendered="#{MapaEmailControle.dataModeloOperacaoMoodleProcessamentoErro.apresentarPaginador}" maxPages="5" boundaryControls="auto" stepControls="auto" fastControls="hide" />
											</f:facet>
										</rich:dataTable>
									</h:panelGroup>
									<h:panelGroup layout="block" styleClass="row mn text-center p10" rendered="#{empty MapaEmailControle.dataModeloOperacaoMoodleProcessamentoErro.listaConsulta}">
										<i class="#{msg_botoes.btn_icon_aviso_embutido} text-warning fs15 mr5" />
										<h:outputText styleClass="tituloCampos" value="Sem registros de comunicado interno com erro" />
									</h:panelGroup>
								</ui:define>
							</otm2:panel>
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="col-md-12">
							<otm2:panel name="panel_monitoramentoJobMensagemMoodle" styleClassBody="row mn p5" styleClassHeader="row mn bg-gray-100 p10" stylePanel="margin-top: 5px; margin-bottom: 5px" styleClassFooter="dn" opened="true">
								<ui:define name="header">
									<h:panelGroup layout="block" styleClass="col-md-2">
										<h:outputText styleClass="tituloCampos font-weight-bold" value="Monitoramento Job" />
									</h:panelGroup>
									<h:panelGroup layout="block" styleClass="col-md-2">
										<otm:calendar inputClass="form-control" value="#{MapaEmailControle.dataModeloRegistroExecucaoJob.dataIni}" />
									</h:panelGroup>
									<h:panelGroup layout="block" styleClass="col-md-2">
										<otm:calendar inputClass="form-control" value="#{MapaEmailControle.dataModeloRegistroExecucaoJob.dataFim}" />
									</h:panelGroup>
									<h:panelGroup layout="block" styleClass="col-md-6">
										<h:outputText styleClass="tituloCampos font-weight-bold float-right" value="Quantidade: #{MapaEmailControle.dataModeloRegistroExecucaoJob.totalRegistrosEncontrados}" />
									</h:panelGroup>
								</ui:define>
								<ui:define name="body">
									<h:panelGroup layout="block" styleClass="row mn" rendered="#{!empty MapaEmailControle.dataModeloRegistroExecucaoJob.listaConsulta}">
										<rich:dataTable id="registroExecucaoJobOperacaoMoodleMensagem" value="#{MapaEmailControle.dataModeloRegistroExecucaoJob}" var="registroExecucaoJobItem" rows="10">
											<rich:column style="width:10%">
												<f:facet name="header">
													<h:outputText value="Início" />
												</f:facet>
												<h:outputText value="#{registroExecucaoJobItem.dataInicioApresentar}" />
											</rich:column>
											<rich:column style="width:10%">
												<f:facet name="header">
													<h:outputText value="Término" />
												</f:facet>
												<h:outputText value="#{registroExecucaoJobItem.dataTerminoApresentar}" />
											</rich:column>
											<rich:column style="width:5%">
												<f:facet name="header">
													<h:outputText value="Total" />
												</f:facet>
												<h:outputText value="#{registroExecucaoJobItem.total}" />
											</rich:column>
											<rich:column style="width:5%">
												<f:facet name="header">
													<h:outputText value="Sucesso" />
												</f:facet>
												<h:outputText value="#{registroExecucaoJobItem.totalSucesso}" />
											</rich:column>
											<rich:column style="width:5%">
												<f:facet name="header">
													<h:outputText value="Erro" />
												</f:facet>
												<h:outputText value="#{registroExecucaoJobItem.totalErro}" />
											</rich:column>
											<rich:column style="width:65%">
												<f:facet name="header">
													<h:outputText value="Detalhes" />
												</f:facet>
												<h:inputTextarea readonly="true" cols="80" rows="3" styleClass="form-control" value="#{registroExecucaoJobItem.erro}" />
											</rich:column>
											<f:facet name="footer">
												<rich:dataScroller id="dataScrollerRegistroExecucaoJobOperacaoMoodleMensagem" for="registroExecucaoJobOperacaoMoodleMensagem" page="#{MapaEmailControle.dataModeloRegistroExecucaoJob.page}" scrollListener="#{MapaEmailControle.scrollerListenerRegistroExecucaoJob}" rendered="#{MapaEmailControle.dataModeloRegistroExecucaoJob.apresentarPaginador}" maxPages="5" boundaryControls="auto" stepControls="auto" fastControls="hide" />
											</f:facet>
										</rich:dataTable>
									</h:panelGroup>
									<h:panelGroup layout="block" styleClass="row mn text-center p10" rendered="#{empty MapaEmailControle.dataModeloRegistroExecucaoJob.listaConsulta}">
										<i class="#{msg_botoes.btn_icon_aviso_embutido} text-warning fs15 mr5" />
										<h:outputText styleClass="tituloCampos" value="Sem registros de execuções da job" />
									</h:panelGroup>
								</ui:define>
							</otm2:panel>
						</h:panelGroup>
					</h:panelGroup>
				</rich:tab>
			</rich:tabPanel>
			<h:panelGroup id="gridMensagens" layout="block" styleClass="row">
				<h:panelGroup layout="block" styleClass="col-md-12">
					<h:outputText styleClass="field control-label mensagem col-md-12" value="#{MapaEmailControle.mensagem}" />
					<h:outputText styleClass="field control-label mensagemDetalhada col-md-12" value="#{MapaEmailControle.mensagemDetalhada}" />
				</h:panelGroup>
			</h:panelGroup>
		</h:form>
		<script>
			document.getElementById("form:unidadeensino").focus();
		</script>
	</ui:define>
</ui:composition>
</html>