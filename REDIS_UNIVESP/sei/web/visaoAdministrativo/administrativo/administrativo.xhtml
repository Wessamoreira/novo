<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
xmlns:h="http://xmlns.jcp.org/jsf/html" 
xmlns:f="http://xmlns.jcp.org/jsf/core" 
xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
xmlns:h="http://xmlns.jcp.org/jsf/html" 
xmlns:f="http://xmlns.jcp.org/jsf/core" 
xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
xmlns:rich="http://richfaces.org/rich"
xmlns:a4j="http://richfaces.org/a4j"
xmlns:otm="http://java.sun.com/jsf/composite/otm">

    <h:head>
    	<h:outputStylesheet name="style.css"  library="V2/css"/>
    	<h:outputStylesheet name="cssCliente.css" library="css" />
		<h:outputScript name="jquery.js" library="V2/script"/>	
		<h:outputScript name="script.js" library="script"/>	
        <title><h:outputText value="#{LoginControle.versaoSistema}" /></title>
        <link rel="shortcut icon" href="#{resource['V2/icones/favicon.ico']}" type="image/x-icon" /> 
    </h:head>
    
	<h:body>
		<h:form id="form">
			<ui:insert name="body">
				<div id="header" class="container cliente-bg">
					<div class="content">
						<ui:include src="/topo.xhtml" />
					</div>
				</div>
				<div class="container">
					<h:panelGrid columns="2">
					</h:panelGrid>
					<div class="content">
						<div id="nav" class="left">
							<ui:include src="menuAdministrativo.xhtml" />
						</div>
						<div id="main" class="right">
    <h:head>
    	<h:outputStylesheet name="style.css"  library="V2/css"/>
    	<h:outputStylesheet name="cssCliente.css" library="css" />
		<h:outputScript name="jquery.js" library="V2/script"/>	
		<h:outputScript name="script.js" library="script"/>	
        <title><h:outputText value="#{LoginControle.versaoSistema}" /></title>
        <link rel="shortcut icon" href="#{resource['V2/icones/favicon.ico']}" type="image/x-icon" /> 
        
        <script>
			window.onload = function(){
				document.getElementById("formPesquisarUser:valorConsulta").focus();
			}
    	</script>
    	
    <script>	  
    	  function novaGuiaCoordenador() {
    	window.close('#{UsuarioControle.fecharAbaVisaoAdministrativo}','_blank');
        window.open('#{UsuarioControle.linkVisaoCoordenador}', '_blank');
        window.close('#{UsuarioControle.fecharAbaVisaoAdministrativo}','_blank');
      }
    </script>
    
    <script>	  
    	  function novaGuiaProfessor() {
    	window.close('#{UsuarioControle.fecharAbaVisaoAdministrativo}','_blank');
        window.open('#{UsuarioControle.linkVisaoProfessor}', '_blank');
      }
    </script>
    
    <script>	  
    	  function novaGuiaAluno() {
    	window.close('#{UsuarioControle.fecharAbaVisaoAdministrativo}','_blank');
        window.open('#{UsuarioControle.linkVisaoAluno}', '_blank');
      }
    </script>
        
    </h:head>
    
			<ui:include src="/ajaxStatus.xhtml" />
	<h:body>
		<h:form id="form">
			<ui:insert name="body">
				<div id="header" class="container cliente-bg">
					<div class="content">
						<ui:include src="/topo.xhtml" />
					</div>
				</div>
				<div class="container">
					<h:panelGrid columns="2">
					</h:panelGrid>
					<div class="content">
						<div id="nav" class="left">
							<ui:include src="menuAdministrativo.xhtml" />
						</div>
						<div id="main" class="right">

							<!--REQUERIMENTO-->
						    <ui:include src="/requerimento.xhtml"/>

							<div class="container marginbottom">
								<!--MENSAGENS-->
								<ui:include src="/mensagens.xhtml" />

								<!--TWITTER-->
								<ui:include src="/twitter.xhtml" />

							</div>

						</div>
					</div>
				</div>
			</ui:insert>

		</h:form>
	</h:body>
</html>








							<div class="container marginbottom">
								<!--MENSAGENS-->
								<ui:include src="/mensagens.xhtml" />

								<!--TWITTER-->
								<ui:include src="/twitter.xhtml" />

							</div>

						</div>
					</div>
				</div>
			</ui:insert>
		</h:form>
		
		<rich:popupPanel styleClass="modalMaximizado" id="panelPesquisarUser" shadowOpacity="true" width="900" height="600">
				<f:facet name="header">
					<h:panelGroup>
						<h:outputText value="#{msg.msg_pesquisar_usuario}"></h:outputText>
					</h:panelGroup>
				</f:facet>
				<f:facet name="controls">
					<h:panelGroup>
						<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal"  style="cursor:pointer" id="hidelinkLivroRegistro" />
						<rich:componentControl target="panelPesquisarUser" operation="hide" event="click" />
					</h:panelGroup>
				</f:facet>
					<h:form id="formPesquisarUser">
						<h:panelGrid columns="1" styleClass="tabForm" width="100%" id="panelGridFormUser">
		
				                <h:panelGrid columns="4"  width="75%">
				                    <h:outputText styleClass="field control-label tituloCampos" value="#{msg.msg_consultar_por}"/>
				                    <h:selectOneMenu styleClass="form-control campos" id="consulta" required="true" value="#{UsuarioControle.controleConsulta.campoConsultaEspecificoSimulacao}">
				                        <f:selectItems value="#{UsuarioControle.tipoConsultaEspecificaSimulacao}" />
				                         <a4j:ajax event="change" render="formPesquisarUser" listener="#{UsuarioControle.anularDataModelo}"/>
				                    </h:selectOneMenu>
									
										<h:panelGroup rendered="#{UsuarioControle.apresentarComboTipoUsuario}">
											<h:selectOneMenu id="tipoUsuario" styleClass="form-control camposObrigatorios" value="#{UsuarioControle.valorConsultaTipoUsuario}">
												<a4j:ajax render="formPesquisarUser" event="change" />
												<f:selectItems value="#{UsuarioControle.listaSelectItemTipoUsuario}" />
											</h:selectOneMenu>
											<otm:spacer width="10px" />
											<h:inputText id="valorConsulta2" styleClass="form-control campos" value="#{UsuarioControle.controleConsulta.valorConsulta}"/>					
										</h:panelGroup>
										<h:inputText id="valorConsulta" styleClass="form-control campos" value="#{UsuarioControle.controleConsulta.valorConsulta}" rendered="#{!UsuarioControle.apresentarComboTipoUsuario}"/>					
										<otm:commandButton id="consultar" render="formPesquisarUser"  value="#{msg_botoes.btn_consultar}" action="#{UsuarioControle.consultarEspecificoSimulacaoUsuario}" accesskey="2" styleClass="btn btn-default btn-consultar" >
											<f:setPropertyActionListener target="#{UsuarioControle.controleConsultaOtimizado.paginaAtual}" value="1"/>
						                     <f:setPropertyActionListener target="#{UsuarioControle.controleConsultaOtimizado.page}" value="1"/>
					                    </otm:commandButton>
					               </h:panelGrid>
			                
					                 <rich:dataTable id="items" width="100%" headerClass="consulta"   columnClasses="colunaAlinhamento" value="#{UsuarioControle.controleConsultaOtimizado}"   rows="10" var="usuarioItem">										
					            
					                    <rich:column sortBy="#{usuarioItem.nome}">
		
					                        <f:facet name="header">
					                            <h:outputText value="#{msg_aplic.prt_Usuario_nome}"/>
					                        </f:facet>
					                        <h:outputText  id="nome" value="#{usuarioItem.nome}" />
					                        
					                    </rich:column>
					                    <rich:column sortBy="#{usuarioItem.username}">
					                        <f:facet name="header">
					                            <h:outputText value="#{msg_aplic.prt_Usuario_username}"/>
					                        </f:facet>
					                        <h:outputText id="username" value="#{usuarioItem.username}"/>
					                    </rich:column>
					                    <rich:column>
					                        <f:facet name="header">
					                            <h:outputText value="Visão Aluno"/>
					                        </f:facet>
					                        <div style="min-width: 70px" align="center">
					                        <otm:commandButton render="script, formPesquisarUser" rendered="#{usuarioItem.pessoa.aluno}" action="#{UsuarioControle.loginComSimulacaoAcessoVisaoAluno}" title="Simular Acesso Aluno" value="Simular Acesso Aluno"  image="#{resource['/imagens/botaoSimularAluno.png']}"  >
<!-- 												<a4j:ajax event="click" render="script, formPesquisarUser"/> -->
										    </otm:commandButton>
										    </div>
											<h:panelGroup id="scriptAluno">
												<h:outputScript rendered="#{not empty UsuarioControle.executarNavegacaoSimulacaoVisaoAluno}">#{UsuarioControle.executarNavegacaoSimulacaoVisaoAluno}</h:outputScript>
											</h:panelGroup>	
					                    </rich:column>
					                    
					                     <rich:column>
					                        <f:facet name="header">
					                            <h:outputText value="Visão Professor"/>
					                        </f:facet>
					                        <div style="min-width: 70px" align="center">
										     <otm:commandButton render="script, formPesquisarUser"  rendered="#{usuarioItem.pessoa.professor}" action="#{UsuarioControle.loginComSimulacaoAcessoVisaoProfessor}" title="Simular Acesso Professor" value="Simular Acesso Professor" image="#{resource['/imagens/botaoSimularProfessor.png']}"   >
<!-- 												<a4j:ajax event="click" render="script, formPesquisarUser"/> -->
										    </otm:commandButton>
										    </div>
											<h:panelGroup id="scriptProfessor">
												<h:outputScript rendered="#{not empty UsuarioControle.executarNavegacaoSimulacaoVisaoAluno}">#{UsuarioControle.executarNavegacaoSimulacaoVisaoAluno}</h:outputScript>
											</h:panelGroup>	
					                    </rich:column>
					                    
					                     <rich:column>
					                        <f:facet name="header">
					                            <h:outputText value="Visão Coordenador"/>
					                        </f:facet>
					                        <div style="min-width: 70px" align="center">
										    <otm:commandButton render="script, formPesquisarUser"  rendered="#{usuarioItem.pessoa.coordenador}" action="#{UsuarioControle.loginComSimulacaoAcessoVisaoCoordenador}" title="Simular Acesso Coordenador" value="Simular Acesso Coordenador" image="#{resource['/imagens/botaoSimularCoordenador.png']}"   >
											
													
										    </otm:commandButton>
										    
										    </div>
											<h:panelGroup id="scriptCoordenador">
												<h:outputScript rendered="#{not empty UsuarioControle.executarNavegacaoSimulacaoVisaoAluno}">#{UsuarioControle.executarNavegacaoSimulacaoVisaoAluno}</h:outputScript>
											</h:panelGroup>	
					                    </rich:column>
					              
					                    
					                    <f:facet name="footer">
											<rich:dataScroller align="center" for="items" id="paginador"  page="#{UsuarioControle.controleConsultaOtimizado.page}" 
											     render="formPesquisarUser"  scrollListener="#{UsuarioControle.scrollerListenerEspecificoUsuarioAlunoProfessorCoordenador}"
											     rendered="#{UsuarioControle.controleConsultaOtimizado.getRowCount() gt 10}" />
										</f:facet>
					                </rich:dataTable>
					                
					               <h:panelGrid columns="1" width="100%" styleClass="tabMensagens">
					                  <h:panelGrid columns="1" width="100%"  columnClasses="colunaEsquerda">
					                        <h:outputText styleClass="field control-label mensagem col-md-12"  value="#{UsuarioControle.mensagem}"/>
					                        <h:outputText styleClass="field control-label mensagemDetalhada col-md-12" value="#{UsuarioControle.mensagemDetalhada}"/>
					                  </h:panelGrid>
					               </h:panelGrid>
			                	
							</h:panelGrid>			
						</h:form>
		</rich:popupPanel>
		
	</h:body>
</html>