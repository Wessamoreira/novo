<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" xmlns:otm="http://java.sun.com/jsf/composite/otm" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions" xmlns:otm2="http://www.otimize-ti.com.br">

<ui:composition template="/visaoAdministrativo/template/visaoAdministrativa.xhtml">
	<ui:define name="tituloPagina">
		<h:outputText value="#{msg_aplic.prt_ComunicacaoInterna_tituloForm}" />
	</ui:define>

	<ui:define name="conteudo">

		<h:outputStylesheet>
		td{
			vertical-align:top !important;
		}
	</h:outputStylesheet>
		<h:form id="form">
			<h:commandLink action="#{ComunicacaoInternaControle.liberarBackingBeanMemoria}" immediate="true" id="idLiberarBackingBeanMemoria" style="display: none" />
			<h:panelGroup layout="block" styleClass="row">
				<h:panelGroup layout="block" styleClass="col-md-2">

					<h:panelGroup id="panelMesAnoConsulta" layout="block" styleClass="row mb10 pr5 pl5">
						<otm2:panel name="panelDisciplinaPenCurs2" styleClassHeader="back-gray" styleClass="back-gray border-radius-all">
							<ui:define name="header">
								<h:outputText value="Mês/Ano de Consulta"></h:outputText>
							</ui:define>
							<ui:define name="body">
								<h:panelGroup layout="block" styleClass="row">
									<h:panelGroup layout="block" styleClass="col-md-8">
										<h:selectOneMenu styleClass="form-control campos mt3" value="#{ComunicacaoInternaControle.mesConsulta}">
											<a4j:ajax event="change" execute="@this" listener="#{ComunicacaoInternaControle.consultarTodasEntradasPorIntervaloData}" render="form" />
											<f:selectItems value="#{ComunicacaoInternaControle.listaSelectItemMesesDoAno}" />
										</h:selectOneMenu>
									</h:panelGroup>
									<h:panelGroup layout="block" styleClass="col-md-4">
										<rich:inputNumberSpinner enableManualInput="true" maxValue="#{ComunicacaoInternaControle.anoAtual}" minValue="2008" value="#{ComunicacaoInternaControle.anoConsulta}">
											<a4j:ajax event="change" listener="#{ComunicacaoInternaControle.consultarTodasEntradasPorIntervaloData}" render="form" />
										</rich:inputNumberSpinner>
									</h:panelGroup>
								</h:panelGroup>
							</ui:define>
						</otm2:panel>
						<h:panelGroup layout="block" styleClass="col-md-12 mb5 mt5">
							<h:outputText styleClass="tituloCampos" value="Limite por Página" />
							<h:selectOneMenu styleClass="form-control" value="#{ComunicacaoInternaControle.controleConsultaOtimizado.limitePorPagina}">
								<a4j:ajax event="change" execute="@this" listener="#{ComunicacaoInternaControle.persistirLimitePaginaPadrao}" />
								<f:selectItems value="#{ComunicacaoInternaControle.listSelectLimitePagina}" />
							</h:selectOneMenu>
						</h:panelGroup>
						<otm2:panel name="panelCaixaEntrada" styleClassHeader="back-gray" styleClass="back-gray border-radius-all">
							<ui:define name="header">
								<h:outputText value="Caixa de Entrada"></h:outputText>
							</ui:define>
							<ui:define name="body">
								<h:panelGroup layout="block" styleClass="row ml15 border-bottom">
									<a4j:commandLink value="Todas" render="form" action="#{ComunicacaoInternaControle.consultarTodasEntradasPorIntervaloData}" leftIcon="#{resource['imagens/16.gif']}" />
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="row ml15 pt5 border-bottom">
									<a4j:commandLink value="#{ComunicacaoInternaControle.labelLidas}" render="form" action="#{ComunicacaoInternaControle.consultarLidas}" leftIcon="#{resource['imagens/16.gif']}" />
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="row ml15 pt5 border-bottom">
									<a4j:commandLink value="#{ComunicacaoInternaControle.labelNaoLidas}" render="form" action="#{ComunicacaoInternaControle.consultarNaoLidas}" leftIcon="#{resource['imagens/16.gif']}" />
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="row ml15 pt5 border-bottom">
									<a4j:commandLink value="Respondidas" render="form" action="#{ComunicacaoInternaControle.consultarRespondida}" leftIcon="#{resource['imagens/16.gif']}" />
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="row ml15 pt5">
									<a4j:commandLink value="Não Respondidas" render="form" action="#{ComunicacaoInternaControle.consultarNaoRespondida}" leftIcon="#{resource['imagens/16.gif']}" />
								</h:panelGroup>
							</ui:define>
						</otm2:panel>
						<otm2:panel name="panelCaixaSaida" styleClassHeader="back-gray" styleClass="back-gray border-radius-all">
							<ui:define name="header">
								<h:outputText value="Caixa de Saída"></h:outputText>
							</ui:define>
							<ui:define name="body">
								<h:panelGroup layout="block" styleClass="row ml15 border-bottom">
									<a4j:commandLink value="Todas" render="form" action="#{ComunicacaoInternaControle.consultarTodasSaida}" leftIcon="#{resource['imagens/16.gif']}" />
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="row ml15 pt5 border-bottom">
									<a4j:commandLink value="Exige Resposta" render="form" action="#{ComunicacaoInternaControle.consultarExigeResposta}" leftIcon="#{resource['imagens/16.gif']}" />
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="row ml15 pt5 border-bottom">
									<a4j:commandLink value="Somente Leitura" render="form" action="#{ComunicacaoInternaControle.consultarSomenteLeitura}" leftIcon="#{resource['imagens/16.gif']}" />
								</h:panelGroup>
							</ui:define>
						</otm2:panel>
					</h:panelGroup>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-10 tabForm" id="panelItens">
					<h:panelGroup styleClass="barraFlutuanteInferior " layout="block">
						<h:panelGroup styleClass="btn-group btn-group-lg col-xs-12" layout="block">
							<otm:commandButton id="novaMensagem2" action="#{ComunicacaoInternaControle.novo}" execute="@this" render="form" accesskey="2" tooltip="Nova mensagem" value="Nova Mensagem" styleClass="btn btn-primary dark" icon="fa fa-plus" />
							<otm:commandButton id="reRemover" action="#{ComunicacaoInternaControle.removerItensSaida}" value="Remover Saída" execute="@this" render="form" accesskey="2" tooltip="Excluir mensagem" styleClass="btn btn-danger ml5" icon="#{msg_botoes.btn_icon_excluir_embutido}" rendered="#{ComunicacaoInternaControle.apresentarBotaoExcluirSaidas}" />
							<otm:commandButton id="reRemover2" action="#{ComunicacaoInternaControle.removerItens}" execute="@this" render="form" accesskey="2" tooltip="Excluir mensagem" styleClass="btn btn-danger ml5 btn-excluir" value="Excluir" rendered="#{!ComunicacaoInternaControle.mostrarBotoes and ComunicacaoInternaControle.existeConsulta}" />
							<otm:commandButton id="btnMarcarComoLida" action="#{ComunicacaoInternaControle.marcarComoLidas}" value="Marcar como lida" execute="form" render="form" styleClass="btn btn-default dark ml5" icon="#{msg_botoes.btn_icon_selecionar_embutido}" tooltip="Marcar como Lidas" rendered="#{!ComunicacaoInternaControle.mostrarBotoes and !empty ComunicacaoInternaControle.controleConsultaOtimizado.listaConsulta}" />
						</h:panelGroup>
					</h:panelGroup>
					<h:panelGroup layout="block" style="margin-top:10px" styleClass="col-md-12 text-center">
						<rich:dataTable id="items" rows="#{ComunicacaoInternaControle.controleConsultaOtimizado.limitePorPagina}" style="border:0px; !important" value="#{ComunicacaoInternaControle.controleConsultaOtimizado}" var="comunicacaoInternaItem">
							<rich:column width="15%" style="background-color: transparent">
								<f:facet name="header">
									<otm:outputHelp id="helpMarcarTodos" value="#{!ComunicacaoInternaControle.removerTodas ? 'Selecionar Todos' : 'Desmarcar Todos'}" tooltip="Ao marcar vai ser selecionado todas as mensagens da página atual da lista." styleClass=" " />
									<otm:selectBooleanCheckbox id="selecionarTodasComunicacaoInterna" value="#{ComunicacaoInternaControle.removerTodas}" title="Selecionar Todos">
										<a4j:ajax event="click" execute="@this" listener="#{ComunicacaoInternaControle.marcarTodas}" render="form:items" />
									</otm:selectBooleanCheckbox>
								</f:facet>
								<!-- <a4j:commandLink render="form:items" execute="@this"> -->
								<otm:selectBooleanCheckbox id="removerComunicacaoInterna" value="#{comunicacaoInternaItem.remover}">
									<a4j:ajax event="click" render="form:itemsSaida" execute="form:items" />
								</otm:selectBooleanCheckbox>
								<!-- </a4j:commandLink> -->
								<otm:commandIcon action="#{ComunicacaoInternaControle.editar}" render="recado" rendered="#{!comunicacaoInternaItem.mensagemLidaVisaoAlunoCoordenador}" tooltip="Ler Mensagem" icon="#{msg_botoes.btn_icon_envelope_fechado_embutido}" title="#{msg.msg_editar_dados}" />
								<otm:commandIcon action="#{ComunicacaoInternaControle.editar}" render="recado" rendered="#{comunicacaoInternaItem.mensagemLidaVisaoAlunoCoordenador}" tooltip="Mensagem Lida" icon="#{msg_botoes.btn_icon_envelope_aberto_embutido}" title="#{msg.msg_editar_dados}" />
							</rich:column>
							<rich:column id="colunaAssunto">
								<f:facet name="header">
									<h:outputText value="Assunto" />
									<br />
									<h:inputText styleClass="form-control" value="#{ComunicacaoInternaControle.filtrarPorAssunto}">
										<f:ajax event="blur" listener="#{ComunicacaoInternaControle.filtroConsultaVisaoAdministrativo}" render="form:items" execute="@this" />
									</h:inputText>
								</f:facet>
								<a4j:commandLink action="#{ComunicacaoInternaControle.editar}" id="tipoComunicadoInterno" value="#{comunicacaoInternaItem.assunto}" />
							</rich:column>
							<rich:column id="colunaNome">
								<f:facet name="header">
									<h:outputText value="Remetente" />
									<br />
									<h:inputText styleClass="form-control" value="#{ComunicacaoInternaControle.filtrarPorNomeResponsavel}">
										<f:ajax event="blur" listener="#{ComunicacaoInternaControle.filtroConsultaVisaoAdministrativo}" render="form:items" execute="@this" />
									</h:inputText>
								</f:facet>
								<a4j:commandLink action="#{ComunicacaoInternaControle.editar}" id="responsavel" value="#{comunicacaoInternaItem.responsavel.nome}" />
							</rich:column>
							<rich:column id="colunaData">
								<f:facet name="header">
									<h:outputText value="#{msg_aplic.prt_ComunicacaoInterna_data}" />
									<br />
									<h:inputText styleClass="form-control" value="#{ComunicacaoInternaControle.filtrarPorData}">
										<f:ajax event="blur" listener="#{ComunicacaoInternaControle.filtroConsultaVisaoAdministrativo}" render="form:items" execute="@this" />
									</h:inputText>
								</f:facet>
								<a4j:commandLink action="#{ComunicacaoInternaControle.editar}" id="data" value="#{comunicacaoInternaItem.data_Apresentar}" />
							</rich:column>
							<f:facet name="footer">
								<div style="text-align: center !important">
									<rich:dataScroller fastControls="hide" id="scItems" page="#{ComunicacaoInternaControle.controleConsultaOtimizado.page}" style="background-color: transparent" stepControls="auto" boundaryControls="auto" maxPages="5" scrollListener="#{ComunicacaoInternaControle.scrollerListener}" />
								</div>
							</f:facet>
						</rich:dataTable>
					</h:panelGroup>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="row">
					<otm:mensagem bean="#{ComunicacaoInternaControle}"></otm:mensagem>
				</h:panelGroup>
			</h:panelGroup>
		</h:form>
	</ui:define>
</ui:composition>
</html>
