<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" xmlns:otm="http://java.sun.com/jsf/composite/otm" xmlns:otm2="http://www.otimize-ti.com.br">
	<rich:tab id="richTabHistoricos" name="richTabHistoricos" action="#{DocumentoAssinadoControle.setAbaAtiva('richTabHistoricos')}" header="Históricos Digitais" render="formCadastro" switchType="ajax">
		<h:panelGroup layout="block" styleClass="row">
			<h:panelGroup id="panelGridHistorico">
				<h:panelGroup id="panelGridHistoricos">
					<h:panelGroup layout="block" styleClass="col-md-2">
						<h:outputText styleClass="field control-label tituloCampos" value="#{msg.msg_consultar_por}" />
						<h:selectOneMenu styleClass="form-control campos" id="consultaHistoricos" required="true" value="#{DocumentoAssinadoControle.campoConsultarHistorico}">
							<a4j:ajax event="change" execute="@form" render="@form" />
							<f:selectItems value="#{DocumentoAssinadoControle.tipoConsultaComboHistorico}" />
						</h:selectOneMenu>
					</h:panelGroup>
					<h:panelGroup id="panelGroupHistoricos">
						<h:panelGroup layout="block" styleClass="col-md-4">
							<h:panelGroup layout="block" rendered="#{DocumentoAssinadoControle.campoConsultarHistorico eq 'CPFHistoricoDigital'}">
								<otm:outputHelp rendered="#{DocumentoAssinadoControle.campoConsultarHistorico eq 'CPFHistoricoDigital'}" tooltip="#{msg.help_DocumentoAssinado_CPF}" id="cpfHistorico" styleClass="field control-label tituloCampos" value="CPF" />
							</h:panelGroup>
							<h:panelGroup layout="block" rendered="#{DocumentoAssinadoControle.campoConsultarHistorico eq 'nomeAlunoHistoricoDigital'}">
								<otm:outputHelp rendered="#{DocumentoAssinadoControle.campoConsultarHistorico eq 'nomeAlunoHistoricoDigital'}" tooltip="#{msg.help_DocumentoAssinado_nome}" id="AlunoHistorico" styleClass="field control-label tituloCampos" value="Nome Aluno" />
							</h:panelGroup>
							<h:panelGroup layout="block" rendered="#{DocumentoAssinadoControle.campoConsultarHistorico eq 'codigoValidacaoHistoricoDigital'}">
								<otm:outputHelp rendered="#{DocumentoAssinadoControle.campoConsultarHistorico eq 'codigoValidacaoHistoricoDigital'}" tooltip="Deve ser informado o código gerado no momento da validação do histórico digital" id="codigoValidacaoHistorico" styleClass="field control-label tituloCampos" value="Código Validação Histórico Digital" />
							</h:panelGroup>
							<h:inputText autocomplete="off" id="valorConsultaHistorico" onkeypress="#{DocumentoAssinadoControle.mascaraConsultaHistorico}" styleClass="form-control campos" value="#{DocumentoAssinadoControle.valorConsultarHistorico}" />
						</h:panelGroup>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-12 text-center m10">
						<otm:commandButton id="consultarHistoricos" render="formCadastro" value="#{msg_botoes.btn_consultar}" action="#{DocumentoAssinadoControle.consultarHistoricos}" accesskey="2" styleClass="btn btn-default btn-consultar" />
					</h:panelGroup>
				</h:panelGroup>

				<h:panelGroup layout="block" styleClass="row mn">
					<a4j:repeat rowKeyVar="row" id="itemsHistorico" value="#{DocumentoAssinadoControle.listaDocumentoAssinadoVO}" rendered="#{!empty DocumentoAssinadoControle.listaDocumentoAssinadoVO}" var="historicoItens">
						<otm2:panel name="panel_#{row+1}" styleClassHeader="row mn rounded-top bg-gray-100 p10" styleClassBody="row mn p5" stylePanel=" " styleClassFooter="dn" opened="true">
							<ui:define name="header">
								<h:panelGroup layout="block" styleClass="col-md-2 pn">
									<h:outputText value="#{msg_aplic.prt_DiplomaRegistrado_nome} Aluno" styleClass="field control-label tituloCampos" />
									<h:outputText styleClass="btn-block" value="#{historicoItens.matricula.aluno.nome}" />
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-2 pn">
									<h:outputText value="Matrícula" styleClass="field control-label tituloCampos" />
									<h:outputText styleClass="btn-block" value="#{historicoItens.matricula.matricula}" />
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-2 pn">
									<h:outputText value="Curso" styleClass="field control-label tituloCampos" />
									<h:outputText styleClass="btn-block" value="#{historicoItens.matricula.curso.nome}" />
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-2 pn">
									<h:outputText value="Turno" styleClass="field control-label tituloCampos" />
									<h:outputText styleClass="btn-block" value="#{historicoItens.matricula.turno.nome}" />
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-2 pn">
									<h:outputText value="#{msg_aplic.prt_DiplomaRegistrado_CPF}" styleClass="field control-label tituloCampos" />
									<h:outputText styleClass="btn-block" value="#{historicoItens.matricula.aluno.CPFMascarado}" />
								</h:panelGroup>
							</ui:define>
							<ui:define name="control">
								<otm:commandIcon id="previewAssinadoHistorico" oncomplete="#{rich:component('panelVisualizarArquivoHistorico')}.show()" tooltip="Visualizar Arquivo" render="formVisualizarArquivoHistorico" action="#{DocumentoAssinadoControle.modalVisualizarHistorico}" title="Visualizar Arquivo" icon="#{msg_botoes.btn_icon_lupa_embutido} iconePequeno" />
								<otm:commandIcon tooltip="Download PDF" render="formVisualizarHistorico" action="#{DocumentoAssinadoControle.modalVisualizarHistorico}" oncomplete="#{rich:component('panelVisualizarHistorico')}.show()" title="Visualizar Histórico" icon="#{msg_botoes.btn_icon_download_embutido} iconePequeno" styleClass="mr5" />
								<otm:commandIcon tooltip="Download XML" render="formDownloadXMLHistorico" action="#{DocumentoAssinadoControle.modalVisualizarHistorico}" oncomplete="#{rich:component('panelDownloadXMLHistorico')}.show()" title="Visualizar XMLHistórico" icon="#{msg_botoes.btn_icon_download_embutido} iconePequeno" styleClass="mr5" />
							</ui:define>
							<ui:define name="body">
								<h:panelGroup layout="block" styleClass="row mn">
									<h:panelGroup layout="block" styleClass="col-md-3 pn">
										<h:panelGroup layout="block" styleClass="col-md-12 mb5 pb5">
											<h:outputText value="Código" styleClass="field control-label tituloCampos btn-block" />
											<h:outputText value="#{historicoItens.numeroDocumentoAssinado}" />
										</h:panelGroup>
									</h:panelGroup>

									<h:panelGroup layout="block" styleClass="col-md-3 pn">
										<h:panelGroup layout="block" styleClass="col-md-12 mb5 pb5">
											<h:outputText value="Descrição" styleClass="field control-label tituloCampos btn-block" />
											<h:outputText value="#{historicoItens.arquivo.descricao}" />
										</h:panelGroup>
									</h:panelGroup>

									<h:panelGroup layout="block" styleClass="col-md-3 pn">
										<h:panelGroup layout="block" styleClass="col-md-12 mb5 pb5">
											<h:outputText value="Tipo Origem" styleClass="field control-label tituloCampos btn-block" />
											<h:outputText value="#{historicoItens.tipoOrigemDocumentoAssinadoEnum.descricao}" />
										</h:panelGroup>
									</h:panelGroup>

									<h:panelGroup layout="block" styleClass="col-md-3 pn">
										<h:panelGroup layout="block" styleClass="col-md-12 mb5 pb5">
											<h:outputText value="Data Registro" styleClass="field control-label tituloCampos btn-block" />
											<h:outputText value="#{historicoItens.dataRegistro}">
												<f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss"></f:convertDateTime>
											</h:outputText>
										</h:panelGroup>
									</h:panelGroup>
								</h:panelGroup>
							</ui:define>
						</otm2:panel>
						<h:panelGroup layout="block" styleClass="col-md-12 mt5" />
					</a4j:repeat>
				</h:panelGroup>
				<h:panelGroup layout="block" style="width:100%;text-align:center">
					<rich:dataScroller align="center" for="itemsHistorico" maxPages="10" boundaryControls="auto" stepControls="auto" fastControls="hide" />
				</h:panelGroup>
				<h:panelGroup layout="block">
					<otm:mensagem bean="#{DocumentoAssinadoControle}"></otm:mensagem>
				</h:panelGroup>
			</h:panelGroup>
		</h:panelGroup>
	</rich:tab>
</ui:composition>