<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" xmlns:otm="http://java.sun.com/jsf/composite/otm" xmlns:otm2="http://www.otimize-ti.com.br">
<h:head>

	<style type="text/css">
.rich-dtascroller-table {
	-moz-border-radius: 5px;
	-webkit-border-radius: 5px;
	border-radius: 5px;
}

.rich-datascr-button {
	border: none;
}

.rich-datascr-button-dsbld {
	background-color: transparent;
}

.rich-list-item {
	display: block;
}

.box {
	background: #fff;
	border-radius: 10px;
	-moz-border-radius: 10px;
	box-shadow: 0 0 5px #888;
	-webkit-border-radius: 10px;
	-moz-box-shadow: 0 0 5px #888;
	-webkit-box-shadow: 0 0 5px #888;
}

.title1 {
	color: #424242;
	font-size: 16px;
	padding-bottom: 3px;
	margin-bottom: 15px;
	border-bottom: 2px solid #424242;
	font-weight: bold;
}

.rf-dg, .rf-dg-c {
	border: none;
	margin-left: initial !important;
	margin-right: initial !important;
}
</style>
</h:head>
<ui:composition template="/visaoAdministrativo/template/visaoAdministrativa.xhtml">
	<ui:define name="tituloPagina">
		<h:outputText value="Documento Assinado Histórico" />
	</ui:define>
	<ui:define name="conteudo">
		
		<rich:popupPanel styleClass="modalMaximizado50" id="panelVisualizarArquivoHistorico" shadowOpacity="true" width="400" minWidth="400" autosized="true" onshow="document.getElementById('formVisualizarArquivoHistorico:senhaLiberarHistorico').focus()">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="Visualizar Histórico" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['/imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hiperPanelVisualizarArquivoHistorico" />
					<rich:componentControl target="panelVisualizarArquivoHistorico" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formVisualizarArquivoHistorico">
				<h:panelGroup layout="block" styleClass="col-md-12">
					<h:outputText styleClass="tituloCampos" value="Informe seu CPF" />
					<h:inputText id="senhaLiberarHistorico" size="15" styleClass="form-control camposObrigatorios" value="#{DocumentoAssinadoControle.senhaLiberarHistorico}" onkeypress="#{DocumentoAssinadoControle.mascaraPainelControleArquivoHistorico}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="barra-btn-flutuante-modal-50">
					<otm:commandButton oncomplete="#{DocumentoAssinadoControle.oncompleteModal}" id="previewAssinado" render="formPreview" title="Visualizar Arquivo" action="#{DocumentoAssinadoControle.visualizarArquivoHistorico}" icon="#{msg_botoes.btn_icon_lupa_embutido}" styleClass="btn btn-primary btn-confirmar" value="Visualizar Arquivo" />
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
		
		<rich:popupPanel styleClass="modalMaximizado50" id="panelVisualizarHistorico" shadowOpacity="true" width="400" minWidth="400" autosized="true" onshow="document.getElementById('formVisualizarHistorico:senhaLiberarHistorico').focus()">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="Download Histórico" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['/imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hiperPanelVisualizarHistorico" />
					<rich:componentControl target="panelVisualizarHistorico" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formVisualizarHistorico">
				<h:panelGroup layout="block" styleClass="col-md-12">
					<h:outputText styleClass="tituloCampos" value="Informe seu CPF" />
					<h:inputText id="senhaLiberarHistorico" size="15" styleClass="form-control camposObrigatorios" value="#{DocumentoAssinadoControle.senhaLiberarHistorico}" onkeypress="#{DocumentoAssinadoControle.mascaraPainelControleHistorico}"/>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="barra-btn-flutuante-modal-50">
					<otm:commandButton oncomplete="#{DocumentoAssinadoControle.urlHistoricoDownloadSV};#{DocumentoAssinadoControle.oncompleteModal}" title="Visualizar PDF" action="#{DocumentoAssinadoControle.realizarDownloadArquivoHistorico}" icon="#{msg_botoes.btn_icon_download_embutido}" styleClass="btn btn-primary btn-confirmar" value="Download PDF" render="formPreview" />
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
		
		<rich:popupPanel styleClass="modalMaximizado100" id="panelPreview" zindex="2000" shadowOpacity="false" width="400" height="200">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText styleClass="tituloCampos" value="Visualizar Arquivo" />
				</h:panelGroup>
				
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelinkpanelPreview" />
					<rich:componentControl target="panelPreview" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formPreview">
				<h:panelGroup id="panelPreviewGeral" styleClass="row">
					<h:panelGroup layout="block" styleClass="col-md-12" rendered="#{DocumentoAssinadoControle.caminhoPreviewTipoPdf and DocumetoAssinadoControle.caminhoPreview != ''}">
						<otm2:pdfView2 bean="#{DocumentoAssinadoControle}" height="calc(100vh - 100px)" data="#{DocumentoAssinadoControle.caminhoPreview}" />
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-12" rendered="#{!DocumentoAssinadoControle.caminhoPreviewTipoPdf and DocumetoAssinadoControle.caminhoPreview != ''}">
						<h:graphicImage url="#{DocumentoAssinadoControle.caminhoPreview}" width="98%" />
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="barra-btn-flutuante-modal-100">
						<otm:commandButton id="fecharpanelPreview" title="#{msg_botoes.btn_fechar}" icon="#{msg_botoes.btn_icon_fechar_embutido}" value="Fechar" styleClass="btn btn-info" oncomplete="#{rich:component('panelPreview')}.hide();" />						
					</h:panelGroup>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
		
		<rich:popupPanel styleClass="modalMaximizado50" id="panelDownloadXMLHistorico" shadowOpacity="true" width="400" minWidth="400" autosized="true" onshow="document.getElementById('formPreviewXML:senhaLiberarArquivo').focus()">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="Download XML Historico" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['/imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hiperPanelDownloadXMLHistorico" />
					<rich:componentControl target="panelDownloadXMLHistorico" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formDownloadXMLHistorico">
				<h:panelGroup layout="block" styleClass="col-md-12">
					<h:outputText styleClass="tituloCampos" value="Informe seu CPF" />
					<h:inputText id="senhaLiberarXMLHistorico" size="15" styleClass="form-control camposObrigatorios" value="#{DocumentoAssinadoControle.senhaLiberarXMLHistorico}" onkeypress="return mascara(this.form,'formDownloadXMLHistorico:senhaLiberarXMLHistorico','999.999.999-99',event)" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="barra-btn-flutuante-modal-50">
					<otm:commandButton oncomplete="#{DocumentoAssinadoControle.urlHistoricoDownloadSV};#{DocumentoAssinadoControle.oncompleteModal}" id="downloadXML" title="Download XML" action="#{DocumentoAssinadoControle.realizarDownloadXMLHistorico}" icon="#{msg_botoes.btn_icon_download_embutido}" styleClass="btn btn-primary btn-confirmar" value="Download XML" />
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
		
		<h:form id="formCadastro">
			<h:inputText id="idControlador" style="display:none" size="90" value="#{DocumentoAssinadoControle.idControlador}"></h:inputText>
			<h:commandLink action="#{DocumentoAssinadoControle.liberarBackingBeanMemoria}" immediate="true" id="idLiberarBackingBeanMemoria" style="display: none" />
			<rich:tabPanel width="100%" activeItem="#{DocumentoAssinadoControle.abaAtiva}" switchType="server">
			<ui:insert name="historico">
				<ui:include src="/visaoAdministrativo/academico/documentoAssinado/historicoAux.xhtml" />
			</ui:insert>
			</rich:tabPanel>
		</h:form>
	</ui:define>
</ui:composition>
</html>