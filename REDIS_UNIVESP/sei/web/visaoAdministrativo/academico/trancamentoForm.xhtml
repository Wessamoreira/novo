<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" xmlns:otm="http://java.sun.com/jsf/composite/otm">
<h:head>
</h:head>
<ui:composition template="/visaoAdministrativo/template/visaoAdministrativa.xhtml">
	<ui:define name="tituloPagina">
		<h:outputText value="#{msg_aplic.prt_Trancamento_tituloForm}" />
	</ui:define>
	<ui:define name="conteudo">
		<rich:popupPanel styleClass="modalMaximizado" id="panelRequerimento" onshow="document.getElementById('formRequerimento:valorConsultaRequerimento').focus();" shadowOpacity="true" width="750" height="500">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="#{msg_aplic.prt_Requerimento_tituloForm}"></h:outputText>
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelink3" />
					<rich:componentControl target="panelRequerimento" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formRequerimento">
				<h:panelGroup id="dadosConsulta">
					<h:panelGroup layout="block" styleClass="col-md-12">
						<h:outputText styleClass="field control-label tituloCampos" value="#{msg.msg_consultar_por}" />
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-4">
						<h:selectOneMenu styleClass="form-control campos" id="consultaRequerimento" value="#{TrancamentoControle.campoConsultaRequerimento}">
							<a4j:ajax event="change" execute="@this" render="formRequerimento:dadosConsulta" />
							<f:selectItems value="#{TrancamentoControle.tipoConsultaComboRequerimento}" />
						</h:selectOneMenu>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-6" rendered="#{!TrancamentoControle.situcaoRequerimento and !TrancamentoControle.situcaoFinanceiraRequerimento}">
						<h:inputText id="valorConsultaRequerimento" rendered="#{!TrancamentoControle.situcaoRequerimento and !TrancamentoControle.situcaoFinanceiraRequerimento}" size="14" styleClass="form-control campos" onkeypress="#{TrancamentoControle.mascaraRequerimento}" value="#{TrancamentoControle.valorConsultaRequerimento}" />
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-6" rendered="#{TrancamentoControle.situcaoRequerimento}">
						<h:selectOneMenu styleClass="form-control campos" rendered="#{TrancamentoControle.situcaoRequerimento}" value="#{TrancamentoControle.valorConsultaRequerimento}">
							<f:selectItems value="#{TrancamentoControle.listaSelectItemSituacaoRequerimento}" />
						</h:selectOneMenu>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-6" rendered="#{TrancamentoControle.situcaoFinanceiraRequerimento}">
						<h:selectOneMenu styleClass="form-control campos" rendered="#{TrancamentoControle.situcaoFinanceiraRequerimento}" value="#{TrancamentoControle.valorConsultaRequerimento}">
							<f:selectItems value="#{TrancamentoControle.listaSelectItemSituacaoFinanceiraRequerimento}" />
						</h:selectOneMenu>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-2">
						<otm:commandButton id="btnConsultar" render="formRequerimento:mensagemConsultaRequerimento, formRequerimento:resultadoConsultaRequerimento, formRequerimento:scResultadoRequerimento" action="#{TrancamentoControle.consultarRequerimento}" value="#{msg_botoes.btn_consultar}" styleClass="btn btn-default btn-consultar" alt="#{msg.msg_consultar_dados}" />
					</h:panelGroup>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-12 mt5" />
				<rich:dataTable id="resultadoConsultaRequerimento" width="100%" headerClass="consulta" rowClasses="linhaImpar, linhaPar" columnClasses="colunaAlinhamento" value="#{TrancamentoControle.listaConsultaRequerimento}" rows="5" var="requerimentoItens">
					<rich:column>
						<f:facet name="header">
							<h:outputText value="#{msg_aplic.prt_Requerimento_codigo}" />
						</f:facet>
						<h:panelGroup>
							<a4j:commandLink action="#{TrancamentoControle.selecionarRequerimento}" render="form" oncomplete="#{rich:component('panelRequerimento')}.hide()" value="#{requerimentoItens.codigo}" />
						</h:panelGroup>
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="#{msg_aplic.prt_Requerimento_tipoRequerimento}" />
						</f:facet>
						<h:panelGroup>
							<a4j:commandLink action="#{TrancamentoControle.selecionarRequerimento}" render="form" oncomplete="#{rich:component('panelRequerimento')}.hide()" value="#{requerimentoItens.tipoRequerimento.nome}" />
						</h:panelGroup>
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="#{msg_aplic.prt_Requerimento_situacao}" />
						</f:facet>
						<h:panelGroup>
							<a4j:commandLink action="#{TrancamentoControle.selecionarRequerimento}" render="form" oncomplete="#{rich:component('panelRequerimento')}.hide()" value="#{requerimentoItens.situacao_Apresentar}" />
						</h:panelGroup>
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="#{msg_aplic.prt_Requerimento_situacaoFinanceira}" />
						</f:facet>
						<h:panelGroup>
							<a4j:commandLink action="#{TrancamentoControle.selecionarRequerimento}" render="form" oncomplete="#{rich:component('panelRequerimento')}.hide()" value="#{requerimentoItens.situacaoFinanceira_Apresentar}" />
						</h:panelGroup>
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="#{msg_botoes.btn_opcoes}" />
						</f:facet>
						<otm:commandIcon action="#{TrancamentoControle.selecionarRequerimento}" render="form" oncomplete="#{rich:component('panelRequerimento')}.hide()" icon="#{msg_botoes.btn_icon_selecionar} iconePequeno" tooltip="Selecionar" alt="#{msg.msg_selecionar_dados}" />
					</rich:column>
					<f:facet name="footer">
						<div style="text-align: center !important">
							<rich:dataScroller align="center" boundaryControls="auto" stepControls="auto" fastControls="hide" for="formRequerimento:resultadoConsultaRequerimento" maxPages="10" id="scResultadoRequerimento" />
						</div>
					</f:facet>
				</rich:dataTable>
				<h:panelGroup id="mensagemConsultaRequerimento" columns="1" width="100%" styleClass="tabMensagens">
					<otm:mensagem bean="#{TrancamentoControle}"></otm:mensagem>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>

		<rich:popupPanel styleClass="modalMaximizado" id="panelMatricula" onshow="document.getElementById('formMatricula:valorConsultaAluno').focus();" shadowOpacity="true" width="750" height="500">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="#{msg_aplic.prt_Curso_consultarAluno}"></h:outputText>
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelinkAluno" />
					<rich:componentControl target="panelMatricula" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formMatricula">
				<h:panelGroup layout="block" styleClass="col-md-12">
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg.msg_consultar_por}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-4">
					<h:selectOneMenu styleClass="form-control campos" id="consultaAluno" value="#{TrancamentoControle.campoConsultaAluno}">
						<f:selectItems value="#{TrancamentoControle.tipoConsultaComboAluno}" />
					</h:selectOneMenu>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-6">
					<h:inputText id="valorConsultaAluno" size="30" styleClass="form-control campos" value="#{TrancamentoControle.valorConsultaAluno}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-2">
					<otm:commandButton id="btnConsultar" render="formMatricula:mensagemConsultaAluno, formMatricula:resultadoConsultaAluno, formMatricula:scResultadoAluno" action="#{TrancamentoControle.consultarAluno}" value="#{msg_botoes.btn_consultar}" styleClass="btn btn-default btn-consultar" alt="#{msg.msg_consultar_dados}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-12 mt5" />
				<rich:dataTable id="resultadoConsultaAluno" width="100%" headerClass="consulta" rowClasses="linhaImpar, linhaPar" columnClasses="colunaAlinhamento" value="#{TrancamentoControle.listaConsultaAluno}" rows="7" var="matriculaItens">
					<rich:column>
						<f:facet name="header">
							<h:outputText value="Nome" />
						</f:facet>
						<h:panelGroup>
							<a4j:commandLink action="#{TrancamentoControle.selecionarAluno}" render="form" oncomplete="#{rich:component('panelMatricula')}.hide()" value="#{matriculaItens.aluno.nome}" />
						</h:panelGroup>
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="Matrícula" />
						</f:facet>
						<h:panelGroup>
							<a4j:commandLink action="#{TrancamentoControle.selecionarAluno}" render="form" oncomplete="#{rich:component('panelMatricula')}.hide()" value="#{matriculaItens.matricula}" />
						</h:panelGroup>
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="#{msg_aplic.prt_Pessoa_registroAcademico}" />
						</f:facet>
						<h:panelGroup>
							<a4j:commandLink action="#{TrancamentoControle.selecionarAluno}" render="form" oncomplete="#{rich:component('panelMatricula')}.hide()" value="#{matriculaItens.aluno.registroAcademico}" />
						</h:panelGroup>
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="Curso" />
						</f:facet>
						<h:panelGroup>
							<a4j:commandLink action="#{TrancamentoControle.selecionarAluno}" render="form" oncomplete="#{rich:component('panelMatricula')}.hide()" value="#{matriculaItens.curso.nome}" />
						</h:panelGroup>
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="Situação Atual Matrícula" />
						</f:facet>
						<h:panelGroup>
							<a4j:commandLink action="#{TrancamentoControle.selecionarAluno}" render="form" oncomplete="#{rich:component('panelMatricula')}.hide()" value="#{matriculaItens.situacao_Apresentar}" />
						</h:panelGroup>
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="#{msg_botoes.btn_opcoes}" />
						</f:facet>
						<otm:commandIcon action="#{TrancamentoControle.selecionarAluno}" render="form" oncomplete="#{rich:component('panelMatricula')}.hide()" icon="#{msg_botoes.btn_icon_selecionar} iconePequeno" tooltip="Selecionar" alt="#{msg.msg_selecionar_dados}" />
					</rich:column>
					<f:facet name="footer">
						<div style="text-align: center !important">
							<rich:dataScroller align="center" for="formMatricula:resultadoConsultaAluno" maxPages="10" id="scResultadoAluno" boundaryControls="auto" stepControls="auto" fastControls="hide" />
						</div>
					</f:facet>
				</rich:dataTable>
				<h:panelGroup id="mensagemConsultaAluno" columns="1" width="100%" styleClass="tabMensagens">
					<otm:mensagem bean="#{TrancamentoControle}"></otm:mensagem>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>

		<rich:popupPanel styleClass="modalMaximizado" id="panelTextoPadraoDeclaracao" shadowOpacity="true" width="750" height="500">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="#{msg_aplic.prt_TextoPadraoDeclaracao_tituloForm}" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelinkTextoPadraoDeclaracao" />
					<rich:componentControl target="panelTextoPadraoDeclaracao" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formTextoPadraoDeclaracao">
				<h:panelGroup layout="block" styleClass="col-md-12">
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_TextoPadraoDeclaracao_tituloForm}" />
					<h:selectOneMenu id="textoPadrao" styleClass="form-control camposObrigatorios" value="#{TrancamentoControle.textoPadraoDeclaracao}">
						<f:selectItems value="#{TrancamentoControle.listaSelectItemTipoTextoPadrao}" />
					</h:selectOneMenu>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-12 text-center m5">
					<otm:commandButton id="imprimirPDF" render="formTextoPadraoDeclaracao" oncomplete="#{TrancamentoControle.contrato}" action="#{TrancamentoControle.imprimirPDF2}" styleClass="btn btn-danger mr5" icon="#{msg_botoes.btn_icon_pdf_embutido}" value="Imprimir" />
					<otm:commandButton id="visualizarDeclaracoes" render="formTextoPadraoDeclaracao" action="#{TrancamentoControle.visualizarImpressaoDeclaracaoAluno}" value="#{msg_aplic.prt_ImpressaoDeclaracao_visualizarDeclaracao}" styleClass="btn btn-primary" icon="#{msg_botoes.btn_icon_lupa_embutido}" />
				</h:panelGroup>
				<h:panelGroup columns="1" width="100%" columnClasses="colunaCentralizada">
					<rich:dataTable id="listaImpressaoDeclaracao" width="100%" headerClass="consulta" rowClasses="linhaImpar, linhaPar" columnClasses="colunaAlinhamento" value="#{TrancamentoControle.listaImpressaoDeclaracaoVOs}" rows="5" var="impressaoDeclaracaoItens" rendered="#{!empty TrancamentoControle.listaImpressaoDeclaracaoVOs}">
						<rich:column>
							<f:facet name="header">
								<h:outputText value="Data Geração" />
							</f:facet>
							<h:panelGroup>
								<h:outputText value="#{impressaoDeclaracaoItens.dataGeracao}">
									<f:convertDateTime pattern="dd/MM/yyyy HH:mm" type="date" />
								</h:outputText>
							</h:panelGroup>
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_ImpressaoDeclaracao_matricula}" />
							</f:facet>
							<h:panelGroup>
								<h:outputText value="#{impressaoDeclaracaoItens.matricula.matricula}" rendered="#{impressaoDeclaracaoItens.isApresentarDadosAluno}" />
								<h:outputText value="#{impressaoDeclaracaoItens.professor.matricula}" rendered="#{impressaoDeclaracaoItens.isApresentarDadosProfessor}" />
							</h:panelGroup>
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_ImpressaoDeclaracao_nome}" />
							</f:facet>
							<h:panelGroup>
								<h:outputText value="#{impressaoDeclaracaoItens.matricula.aluno.nome}" rendered="#{impressaoDeclaracaoItens.isApresentarDadosAluno}" />
								<h:outputText value="#{impressaoDeclaracaoItens.professor.pessoa.nome}" rendered="#{impressaoDeclaracaoItens.isApresentarDadosProfessor}" />
							</h:panelGroup>
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_ImpressaoDeclaracao_declaracao}" />
							</f:facet>
							<h:panelGroup>
								<h:outputText value="#{impressaoDeclaracaoItens.textoPadraoDeclaracao.descricao}" />
							</h:panelGroup>
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_bt.btn_opcoes}" />
							</f:facet>
							<otm:commandIcon id="imprimirDeclaracaoGeradas" render="form" action="#{TrancamentoControle.impressaoDeclaracaoContratoJaGerada}" icon="#{msg_botoes.btn_icon_download} iconePequeno" oncomplete="#{TrancamentoControle.contrato}" tooltip="Realizar dowload da declaração." />
						</rich:column>
					</rich:dataTable>
					<rich:dataScroller align="center" for="formTextoPadraoDeclaracao:listaImpressaoDeclaracao" maxPages="10" id="scResultadoImpressaoDeclaracao" rendered="#{!empty TrancamentoControle.listaImpressaoDeclaracaoVOs}" />
				</h:panelGroup>
				<h:panelGroup id="mensagemConsultaTextoPadraoDeclaracao" columns="1" width="100%" styleClass="tabMensagens">
					<otm:mensagem bean="#{TrancamentoControle}"></otm:mensagem>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>

		<rich:popupPanel styleClass="modalMaximizado50" id="panelAviso" autosized="true" shadowOpacity="false" width="800" height="400">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="AVISO" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelink" />
					<rich:componentControl target="panelAviso" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formAviso">
				<h:panelGroup columns="1" width="100%">
					<h:outputText styleClass="field control-label tituloCampos" value="#{TrancamentoControle.trancamentoVO.mensagemConfirmacao}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="barra-btn-flutuante-modal-50">
					<otm:commandButton styleClass="btn btn-dark mr5" icon="#{msg_botoes.btn_icon_gravar_embutido}" id="gravacao" render="formHistorico, form" action="#{TrancamentoControle.executarMontagemHistoricosParaRealizarAlteracaoSituacao}" value="Gravar" oncomplete="#{rich:component('panelAviso')}.hide(); #{rich:component('panelHistorico')}.show(); #{TrancamentoControle.abrirModalPanelHistorico};" />
					<otm:commandButton styleClass="btn btn-danger" icon="#{msg_botoes.btn_icon_cancelar_embutido}" id="fechar" value="Cancelar" oncomplete="#{rich:component('panelAviso')}.hide(), #{rich:component('panelHistorico')}.hide()" />
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>

		<rich:popupPanel styleClass="modalMaximizado" id="panelHistorico" autosized="true" shadowOpacity="false" width="800" height="400">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Historico_tituloForm}" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelinkPanelHistorico" />
					<rich:componentControl target="panelHistorico" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formHistorico">
				<h:panelGroup layout="block" styleClass="col-md-12">
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg.msg_Trancamento_selecionarHistoricoTrancar}" />
				</h:panelGroup>
				<h:panelGroup width="100%">
					<rich:dataTable id="resultadoConsultaHistorico" width="100%" headerClass="consulta" rowClasses="linhaImpar, linhaPar" columnClasses="colunaAlinhamento" value="#{TrancamentoControle.trancamentoVO.historicoVOs}" rows="10" var="historicoItens">
						<rich:column>
							<f:facet name="header">
								<h:panelGroup>
									<h:outputText value="#{msg_aplic.prt_Trancamento_alterarSituacaoHistorico}" />
									<otm:selectBooleanCheckbox value="#{TrancamentoControle.realizarMarcacaoDesmarcacaoTodos}">
										<a4j:ajax event="change" render="formHistorico" listener="#{TrancamentoControle.executarMarcacaoDesmarcacaoTodos}" />
									</otm:selectBooleanCheckbox>
								</h:panelGroup>
							</f:facet>
							<otm:selectBooleanCheckbox id="realizarAlteracaoSituacaoHistorico" disabled="#{!historicoItens.editavel}" value="#{historicoItens.realizarAlteracaoSituacaoHistorico}">
								<a4j:ajax event="change" execute="@this" render="formHistorico:resultadoConsultaHistorico:realizarAlteracaoSituacaoHistorico" />
							</otm:selectBooleanCheckbox>
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_AbonoFalta_disciplina}" />
							</f:facet>
							<h:outputText value="#{historicoItens.disciplina.codigo} - #{historicoItens.disciplina.nome}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_FichaAluno_frequencia}" />
							</f:facet>
							<h:outputText value="#{historicoItens.freguencia}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_FichaAluno_mediaFinal}" />
							</f:facet>
							<h:outputText value="#{historicoItens.mediaFinal}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{msg_aplic.prt_Historico_situacao}" />
							</f:facet>
							<h:outputText value="#{historicoItens.situacao_Apresentar}" />
						</rich:column>
						<f:facet name="footer">
							<div style="text-align: center !important">
								<rich:dataScroller align="center" for="formHistorico:resultadoConsultaHistorico" maxPages="10" id="scResultadoHistorico" boundaryControls="auto" stepControls="auto" fastControls="hide" />
							</div>
						</f:facet>
					</rich:dataTable>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="barra-btn-flutuante-modal-80">
					<otm:commandButton id="deferirRequerimentoHistorico" oncomplete="#{rich:component('panelHistorico')}.hide()" action="#{TrancamentoControle.persistir}" styleClass="btn btn-dark" icon="#{msg_botoes.btn_icon_gravar_embutido}" value="Gravar" render="form" />
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>

		<rich:popupPanel styleClass="modalMaximizado50" id="panelEstorno" shadowOpacity="false" width="600" height="200">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Trancamento_estornar}" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelinkpanelEstorno" />
					<rich:componentControl target="panelEstorno" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formEstorno">
				<h:panelGroup columns="1" width="100%">
					<h:outputText escape="false" styleClass="field control-label mensagemDetalhada col-md-12" value="#{msg.msg_Trancamento_EstornarTrancamento}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="barra-btn-flutuante-modal-50">
					<otm:commandButton id="estornarTrancamento" action="#{TrancamentoControle.executarEstorno}" oncomplete="#{rich:component('panelEstorno')}.hide()" icon="#{msg_botoes.btn_icon_estornar_embutido}" styleClass="btn btn-info mr5" value="Estornar" render="form" />
					<otm:commandButton id="cancelarEstornarTrancamento" oncomplete="#{rich:component('panelEstorno')}.hide()" icon="#{msg_botoes.btn_icon_cancelar_embutido}" styleClass="btn btn-danger" value="Cancelar" />
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>

		<h:form id="form">
			<h:panelGroup layout="block" styleClass="col-md-12 pn">
				<h:panelGroup layout="block" styleClass="col-md-2">
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Trancamento_codigoRequerimento}" />
					<h:panelGroup layout="block" styleClass="col-md-12 pn">
						<h:inputText id="codigoRequerimento" disabled="#{!TrancamentoControle.trancamentoVO.novoObj}" styleClass="form-control campos camposObrigatorios" value="#{TrancamentoControle.trancamentoVO.codigoRequerimento.codigo}">
							<a4j:ajax event="change" execute="@form" listener="#{TrancamentoControle.consultarRequerimentoPorChavePrimaria}" render="form" />
						</h:inputText>
						<span class="append-icon right"> <otm:commandIcon rendered="#{TrancamentoControle.trancamentoVO.novoObj}" alt="Consultar Requerimento" render="formRequerimento" icon="#{msg_botoes.btn_icon_lupa_embutido}" oncomplete="#{rich:component('panelRequerimento')}.show()" />
						</span>
					</h:panelGroup>
				</h:panelGroup>
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="col-md-3">
				<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Trancamento_tipoTrancamento}" />
				<h:selectOneMenu id="tipoTrancamento" disabled="#{!TrancamentoControle.trancamentoVO.novoObj}" styleClass="form-control camposObrigatorios" value="#{TrancamentoControle.trancamentoVO.tipoTrancamento}">
					<f:selectItems value="#{TrancamentoControle.listaSelectItemTipoTrancamento}" />
					<a4j:ajax event="change"/>
				</h:selectOneMenu>
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="col-md-3">
				<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Requerimento_situacao}" />
				<h:inputText id="codigoRequerimento_situacao" size="29" maxlength="29" styleClass="form-control camposSomenteLeitura" readonly="true" value="#{TrancamentoControle.trancamentoVO.situacao_Apresentar}" />
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="col-md-6 pn">
				<h:panelGroup layout="block" styleClass="col-md-12">
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Trancamento_matricula}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-4">
										<otm:sugestionBox id="sugestionRAMAtricula"   bean="#{TrancamentoControle}" autoCompleteMatricula="true" disabled="#{!TrancamentoControle.trancamentoVO.novoObj}"  value="#{TrancamentoControle.trancamentoVO.matricula.matricula}"  action="#{TrancamentoControle.consultarMatriculaPorChavePrimaria}"   ></otm:sugestionBox>
				
					<!-- <h:inputText id="alunoMatricula" size="20" styleClass="form-control camposObrigatorios" value="#{TrancamentoControle.trancamentoVO.matricula.matricula}" disabled="#{!TrancamentoControle.trancamentoVO.novoObj}">
						<a4j:ajax event="change" listener="#{TrancamentoControle.consultarMatriculaPorChavePrimaria}" execute="form" render="form" />
					</h:inputText> -->
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-8">
					<h:inputText id="alunoNome" size="42" styleClass="form-control camposSomenteLeitura" readonly="true" value="#{TrancamentoControle.trancamentoVO.matricula.aluno.nome}" />
					<span class="append-icon right"> <otm:commandIcon id="consultaDadosAluno" alt="Localizar Aluno" render="formAluno" oncomplete="#{rich:component('panelMatricula')}.show()" icon="#{msg_botoes.btn_icon_lupa_embutido}" rendered="#{TrancamentoControle.trancamentoVO.novoObj}" /> <otm:commandIcon id="limparDadosAluno" alt="Limpas Dados" action="#{TrancamentoControle.limparDadosAluno}" render="form" icon="#{msg_botoes.btn_icon_limpar_embutido}" rendered="#{TrancamentoControle.trancamentoVO.novoObj}" />
					</span>
				</h:panelGroup>
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="col-md-4">
				<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Trancamento_motivoCancelamentoTrancamento}" />
				<h:selectOneMenu disabled="#{!TrancamentoControle.trancamentoVO.novoObj}" id="tipoJustificativa" styleClass="form-control camposObrigatorios" value="#{TrancamentoControle.trancamentoVO.motivoCancelamentoTrancamento.codigo}">
					<f:selectItems value="#{TrancamentoControle.listaSelectItemMotivoCancelamentoTrancamento}" />
				</h:selectOneMenu>
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="col-md-2" rendered="#{TrancamentoControle.trancamentoVO.codigoRequerimento.codigo ne 0}">
				<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Requerimento_data}" />
				<h:inputText id="codigoRequerimento_dataRequerimento" size="10" maxlength="10" styleClass="form-control camposSomenteLeitura" readonly="true" value="#{TrancamentoControle.trancamentoVO.codigoRequerimento.data_Apresentar}" />
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="col-md-2">
				<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Trancamento_dataPossivelRetorno}" />
				<h:panelGroup layout="block" styleClass="col-md-12 pn h36">
					<otm:calendar disabled="#{!TrancamentoControle.trancamentoVO.novoObj}" id="dataPossivelRetorno" value="#{TrancamentoControle.trancamentoVO.dataPossivelRetorno}" />
				</h:panelGroup>
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="col-md-2" rendered="#{TrancamentoControle.trancamentoVO.matricula.curso.periodicidade ne 'IN'}">
				<h:outputText rendered="#{TrancamentoControle.trancamentoVO.matricula.curso.periodicidade ne 'IN'}" styleClass="field control-label tituloCampos" value="Ano" />
				<h:inputText disabled="#{!TrancamentoControle.trancamentoVO.novoObj}" readonly="#{!TrancamentoControle.trancamentoVO.novoObj}" rendered="#{TrancamentoControle.trancamentoVO.matricula.curso.periodicidade != 'IN'}" styleClass="form-control camposObrigatorios" value="#{TrancamentoControle.trancamentoVO.ano}" size="4" maxlength="4" onkeydown="aceitarSomenteValorNumerico(this)" />
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="col-md-2" rendered="#{TrancamentoControle.trancamentoVO.matricula.curso.periodicidade eq 'SE'}">
				<h:outputText rendered="#{TrancamentoControle.trancamentoVO.matricula.curso.periodicidade eq 'SE'}" styleClass="field control-label tituloCampos" value="Semestre" />
				<h:selectOneMenu disabled="#{!TrancamentoControle.trancamentoVO.novoObj}" readonly="#{!TrancamentoControle.trancamentoVO.novoObj}" rendered="#{TrancamentoControle.trancamentoVO.matricula.curso.periodicidade == 'SE'}" styleClass="form-control camposObrigatorios" value="#{TrancamentoControle.trancamentoVO.semestre}">
					<f:selectItem itemLabel="1º" itemValue="1" />
					<f:selectItem itemLabel="2º" itemValue="2" />
				</h:selectOneMenu>
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="col-md-12" rendered="#{TrancamentoControle.trancamentoVO.matricula.curso.periodicidade ne 'IN' or TrancamentoControle.trancamentoVO.matricula.curso.periodicidade eq 'SE'}" />
			<h:panelGroup layout="block" styleClass="#{TrancamentoControle.trancamentoVO.matricula.curso.periodicidade ne 'IN' and TrancamentoControle.trancamentoVO.matricula.curso.periodicidade eq 'SE' ? 'col-md-6' : 'col-md-4'}">
				<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Trancamento_justificativa}" />
				<h:inputText disabled="#{!TrancamentoControle.trancamentoVO.novoObj}" id="justificativa" size="61" styleClass="form-control camposObrigatorios" value="#{TrancamentoControle.trancamentoVO.justificativa}" />
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="col-md-6 pn">
				<h:panelGroup layout="block" styleClass="col-md-12">
					<h:panelGroup layout="block" styleClass="col-md-8">				
						<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Trancamento_responsavelAutorizacao}" />
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-4">
						<h:outputText styleClass="field control-label tituloCampos" value="Data Trancamento" />
					</h:panelGroup>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-4">
					<h:inputText id="responsavelAutorizacao" readonly="true" size="8" styleClass="form-control camposSomenteLeitura" value="#{TrancamentoControle.trancamentoVO.responsavelAutorizacao.codigo}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-4">
					<h:inputText id="responsavelAutorizacao_nomePessoa" styleClass="form-control camposSomenteLeitura" size="41" readonly="true" value="#{TrancamentoControle.trancamentoVO.responsavelAutorizacao.nome}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-4">
					<h:inputText id="data" readonly="true" size="8" styleClass="form-control camposSomenteLeitura" value="#{TrancamentoControle.trancamentoVO.data}">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</h:inputText>
				</h:panelGroup>
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="col-md-6 pn">
				<h:panelGroup layout="block" styleClass="col-md-12">
					<h:panelGroup layout="block" styleClass="col-md-8">
						<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Trancamento_responsavelEstorno}" />
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-4">
						<h:outputText styleClass="field control-label tituloCampos" value="Data Estorno" />
					</h:panelGroup>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-4">
					<h:inputText id="responsavelEstorno" readonly="true" size="8" styleClass="form-control camposSomenteLeitura" value="#{TrancamentoControle.trancamentoVO.responsavelEstorno.codigo}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-4">
					<h:inputText id="responsavelEstorno_nomePessoa" styleClass="form-control camposSomenteLeitura" size="41" readonly="true" value="#{TrancamentoControle.trancamentoVO.responsavelEstorno.nome}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-4">
					<h:inputText id="dataEstorno" readonly="true" size="8" styleClass="form-control camposSomenteLeitura" value="#{TrancamentoControle.trancamentoVO.dataEstorno}">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</h:inputText>
				</h:panelGroup>
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="#{TrancamentoControle.trancamentoVO.matricula.curso.periodicidade ne 'IN' and TrancamentoControle.trancamentoVO.matricula.curso.periodicidade eq 'SE' ? 'col-md-6' : 'col-md-12'}">
				<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Trancamento_descricao}" />
				<h:inputTextarea disabled="#{!TrancamentoControle.trancamentoVO.novoObj}" id="descricao" styleClass="form-control campos" value="#{TrancamentoControle.trancamentoVO.descricao}" />
			</h:panelGroup>
			<h:panelGroup columns="1" width="100%" styleClass="tabMensagens">
				<otm:mensagem bean="#{TrancamentoControle}"></otm:mensagem>
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="barraFlutuanteInferior">
				<otm:commandButton id="novo" action="#{TrancamentoControle.novo}" value="#{msg_botoes.btn_novo}" accesskey="1" styleClass="btn btn-info btn-novo" />
				<otm:commandButton style="margin-left:5px" id="salvar" rendered="#{TrancamentoControle.trancamentoVO.novoObj}" action="#{TrancamentoControle.realizarDefinicaoMatriculaPeriodoRealizarTrancamento}" oncomplete="#{TrancamentoControle.abrirModalPanelHistorico}" render="formHistorico, formAviso, form" value="#{msg_botoes.btn_gravar}" accesskey="2" styleClass="btn btn-dark btn-gravar" />
				<otm:commandButton style="margin-left:5px" id="estornar" rendered="#{TrancamentoControle.isPermiteEstorno}" onclick="#{rich:component('panelEstorno')}.show()" icon="#{msg_botoes.btn_icon_estornar_embutido}" value="Estornar" styleClass="btn btn-warning" accesskey="3" image="#{resource['/imagens/botaoEstornar.png']}" />
				<otm:commandButton style="margin-left:5px" id="consultar" action="#{TrancamentoControle.inicializarConsultar}" value="#{msg_botoes.btn_consultar}" accesskey="4" styleClass="btn btn-default btn-consultar" />
				<otm:commandButton style="margin-left:5px" rendered="#{!TrancamentoControle.trancamentoVO.novoObj}" render="formTextoPadraoDeclaracao" id="imprimir" action="#{TrancamentoControle.iniciarlizarDadosParaImpressao}" oncomplete="#{rich:component('panelTextoPadraoDeclaracao')}.show()" icon="#{msg_botoes.btn_icon_imprimir_embutido}" value="Imprimir" styleClass="btn btn-default dark btn-imprimir" />
			</h:panelGroup>
		</h:form>
		<script>
    document.getElementById("form:codigoRequerimento").focus();
</script>
	</ui:define>
</ui:composition>
</html>
