<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" xmlns:otm="http://java.sun.com/jsf/composite/otm"  xmlns:otm2="http://www.otimize-ti.com.br">
<h:head>

	<style type="text/css">
.rich-dtascroller-table {
	-moz-border-radius: 5px;
	-webkit-border-radius: 5px;
	border-radius: 5px;
}

.rich-datascr-button {
	border: none;
}

.rich-datascr-button-dsbld {
	background-color: transparent;
}

.rich-list-item {
	display: block;
}

.box {
	background: #fff;
	border-radius: 10px;
	-moz-border-radius: 10px;
	box-shadow: 0 0 5px #888;
	-webkit-border-radius: 10px;
	-moz-box-shadow: 0 0 5px #888;
	-webkit-box-shadow: 0 0 5px #888;
}

.title1 {
	color: #424242;
	font-size: 16px;
	padding-bottom: 3px;
	margin-bottom: 15px;
	border-bottom: 2px solid #424242;
	font-weight: bold;
}

.rf-dg, .rf-dg-c {
	border: none;
	margin-left: initial !important;
	margin-right: initial !important;
}
</style>
</h:head>
<ui:composition template="/visaoAdministrativo/template/visaoAdministrativa.xhtml">
	<ui:define name="tituloPagina">
		<h:outputText value="Documento Assinado" />
	</ui:define>
	<ui:define name="conteudo">
	
		<rich:popupPanel styleClass="modalMaximizado50" id="panelVisualizarArquivoValidandoCpf" shadowOpacity="true" width="400" minWidth="400" autosized="true" onshow="document.getElementById('formVisualizarArquivoValidando:senhaLiberarArquivo').focus()">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="Visualizar Arquivo" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['/imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hiperPanelVisualizarArquivoValidandoCpf" />
					<rich:componentControl target="panelVisualizarArquivoValidandoCpf" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formVisualizarArquivoValidando">
				<h:panelGroup layout="block" styleClass="col-md-12">
					<h:outputText styleClass="tituloCampos" value="Informe seu CPF" />
					<h:inputText id="senhaLiberarArquivo" size="15" styleClass="form-control camposObrigatorios" value="#{DocumentoAssinadoControle.senhaLiberarArquivo}" onkeypress="#{DocumentoAssinadoControle.mascaraPainelControleCPF}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="barra-btn-flutuante-modal-50">
					<otm:commandButton oncomplete="#{DocumentoAssinadoControle.oncompleteModal}" id="previewAssinado" render="formPreview" title="Visualizar Arquivo" action="#{DocumentoAssinadoControle.visualizarArquivoValidandoCpf}" icon="#{msg_botoes.btn_icon_lupa_embutido}" styleClass="btn btn-primary btn-confirmar" value="Visualizar Arquivo" />
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
		
		<rich:popupPanel styleClass="modalMaximizado100" id="panelPreview" zindex="2000" shadowOpacity="false" width="400" height="200">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText styleClass="tituloCampos" value="Visualizar Arquivo" />
				</h:panelGroup>
				
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelinkpanelPreview" />
					<rich:componentControl target="panelPreview" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formPreview">
				<h:panelGroup id="panelPreviewGeral" styleClass="row">
					<h:panelGroup layout="block" styleClass="col-md-12" rendered="#{DocumentoAssinadoControle.caminhoPreviewTipoPdf and DocumetoAssinadoControle.caminhoPreview != ''}">
						<otm2:pdfView2 bean="#{DocumentoAssinadoControle}" height="calc(100vh - 100px)" data="#{DocumentoAssinadoControle.caminhoPreview}" />
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-12" rendered="#{!DocumentoAssinadoControle.caminhoPreviewTipoPdf and DocumetoAssinadoControle.caminhoPreview != ''}">
						<h:graphicImage url="#{DocumentoAssinadoControle.caminhoPreview}" width="98%" />
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="barra-btn-flutuante-modal-100">
						<otm:commandButton id="fecharpanelPreview" title="#{msg_botoes.btn_fechar}" icon="#{msg_botoes.btn_icon_fechar_embutido}" value="Fechar" styleClass="btn btn-info" oncomplete="#{rich:component('panelPreview')}.hide();" />						
					</h:panelGroup>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
	
		<rich:popupPanel styleClass="modalMaximizado50" id="panelDownloadXMLDiploma" shadowOpacity="true" width="400" minWidth="400" autosized="true" onshow="document.getElementById('formPreviewXML:senhaLiberarArquivo').focus()">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="Download XML Diploma" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['/imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hiperpanelDownloadXMLDiploma" />
					<rich:componentControl target="panelDownloadXMLDiploma" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formDownloadXML">
				<h:panelGroup layout="block" styleClass="col-md-12">
					<h:outputText styleClass="tituloCampos" value="Informe seu CPF" />
					<h:inputText id="senhaLiberarXMLDiploma" size="15" styleClass="form-control camposObrigatorios" value="#{DocumentoAssinadoControle.senhaLiberarXMLDiploma}" onkeypress="#{DocumentoAssinadoControle.mascaraPainelControleXMLDiploma}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="barra-btn-flutuante-modal-50">
					<otm:commandButton oncomplete="#{DocumentoAssinadoControle.urlDonloadSV};#{DocumentoAssinadoControle.oncompleteModal}" id="downloadXML" title="Download XML" action="#{DocumentoAssinadoControle.realizarDownloadXMLDiploma}" icon="#{msg_botoes.btn_icon_download_embutido}" styleClass="btn btn-primary btn-confirmar" value="Download XML" />
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
		
		<rich:popupPanel styleClass="modalMaximizado50" id="panelVisualizarArquivoDiploma" shadowOpacity="true" width="400" minWidth="400" autosized="true" onshow="document.getElementById('formVisualizarArquivoDiploma:senhaLiberarDiploma').focus()">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="Visualizar Diploma" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['/imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hiperPanelVisualizarArquivoDiploma" />
					<rich:componentControl target="panelVisualizarArquivoDiploma" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formVisualizarArquivoDiploma">
				<h:panelGroup layout="block" styleClass="col-md-12">
					<h:outputText styleClass="tituloCampos" value="Informe seu CPF" />
					<h:inputText id="senhaLiberarDiploma" size="15" styleClass="form-control camposObrigatorios" value="#{DocumentoAssinadoControle.senhaLiberarDiploma}" onkeypress="#{DocumentoAssinadoControle.mascaraPainelControleArquivoDiploma}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="barra-btn-flutuante-modal-50">
					<otm:commandButton oncomplete="#{DocumentoAssinadoControle.oncompleteModal}" id="previewAssinado" render="formPreview" title="Visualizar Arquivo" action="#{DocumentoAssinadoControle.visualizarArquivoDiploma}" icon="#{msg_botoes.btn_icon_lupa_embutido}" styleClass="btn btn-primary btn-confirmar" value="Visualizar Arquivo" />
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
		
		<rich:popupPanel styleClass="modalMaximizado50" id="panelVisualizarDiploma" shadowOpacity="true" width="400" minWidth="400" autosized="true" onshow="document.getElementById('formVisualizarDiploma:senhaLiberarDiploma').focus()">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="Download PDF Diploma" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['/imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hiperPanelVisualizarDiploma" />
					<rich:componentControl target="panelVisualizarDiploma" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formVisualizarDiploma">
				<h:panelGroup layout="block" styleClass="col-md-12">
					<h:outputText styleClass="tituloCampos" value="Informe seu CPF" />
					<h:inputText id="senhaLiberarDiploma" size="15" styleClass="form-control camposObrigatorios" value="#{DocumentoAssinadoControle.senhaLiberarDiploma}" onkeypress="#{DocumentoAssinadoControle.mascaraPainelControleDiploma}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="barra-btn-flutuante-modal-50">
					<otm:commandButton oncomplete="#{DocumentoAssinadoControle.urlDonloadSV};#{DocumentoAssinadoControle.oncompleteModal}" title="Download PDF" action="#{DocumentoAssinadoControle.realizarDownloadArquivoDiploma}" icon="#{msg_botoes.btn_icon_download_embutido}" styleClass="btn btn-primary btn-confirmar" value="Download PDF" style="margin-right:3px" />
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
		
		<rich:popupPanel styleClass="modalMaximizado50" id="panelVisualizarArquivoHistorico" shadowOpacity="true" width="400" minWidth="400" autosized="true" onshow="document.getElementById('formVisualizarArquivoHistorico:senhaLiberarHistorico').focus()">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="Visualizar Histórico" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['/imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hiperPanelVisualizarArquivoHistorico" />
					<rich:componentControl target="panelVisualizarArquivoHistorico" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formVisualizarArquivoHistorico">
				<h:panelGroup layout="block" styleClass="col-md-12">
					<h:outputText styleClass="tituloCampos" value="Informe seu CPF" />
					<h:inputText id="senhaLiberarHistorico" size="15" styleClass="form-control camposObrigatorios" value="#{DocumentoAssinadoControle.senhaLiberarHistorico}" onkeypress="#{DocumentoAssinadoControle.mascaraPainelControleArquivoHistorico}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="barra-btn-flutuante-modal-50">
					<otm:commandButton oncomplete="#{DocumentoAssinadoControle.oncompleteModal}" id="previewAssinado" render="formPreview" title="Visualizar Arquivo" action="#{DocumentoAssinadoControle.visualizarArquivoHistorico}" icon="#{msg_botoes.btn_icon_lupa_embutido}" styleClass="btn btn-primary btn-confirmar" value="Visualizar Arquivo" />
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
		
		<rich:popupPanel styleClass="modalMaximizado50" id="panelVisualizarHistorico" shadowOpacity="true" width="400" minWidth="400" autosized="true" onshow="document.getElementById('formVisualizarHistorico:senhaLiberarHistorico').focus()">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="Download Histórico" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['/imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hiperPanelVisualizarHistorico" />
					<rich:componentControl target="panelVisualizarHistorico" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formVisualizarHistorico">
				<h:panelGroup layout="block" styleClass="col-md-12">
					<h:outputText styleClass="tituloCampos" value="Informe seu CPF" />
					<h:inputText id="senhaLiberarHistorico" size="15" styleClass="form-control camposObrigatorios" value="#{DocumentoAssinadoControle.senhaLiberarHistorico}" onkeypress="#{DocumentoAssinadoControle.mascaraPainelControleHistorico}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="barra-btn-flutuante-modal-50">
					<otm:commandButton oncomplete="#{DocumentoAssinadoControle.urlHistoricoDownloadSV};#{DocumentoAssinadoControle.oncompleteModal}" title="Visualizar PDF" action="#{DocumentoAssinadoControle.realizarDownloadArquivoHistorico}" icon="#{msg_botoes.btn_icon_download_embutido}" styleClass="btn btn-primary btn-confirmar" value="Download PDF" render="formPreview" />
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
		
		<rich:popupPanel styleClass="modalMaximizado50" id="panelDownloadXMLHistorico" shadowOpacity="true" width="400" minWidth="400" autosized="true" onshow="document.getElementById('formPreviewXML:senhaLiberarArquivo').focus()">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="Download XML Historico" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['/imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hiperPanelDownloadXMLHistorico" />
					<rich:componentControl target="panelDownloadXMLHistorico" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formDownloadXMLHistorico">
				<h:panelGroup layout="block" styleClass="col-md-12">
					<h:outputText styleClass="tituloCampos" value="Informe seu CPF" />
					<h:inputText id="senhaLiberarXMLDiploma" size="15" styleClass="form-control camposObrigatorios" value="#{DocumentoAssinadoControle.senhaLiberarXMLHistorico}" onkeypress="#{DocumentoAssinadoControle.mascaraPainelControleXMLDiploma}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="barra-btn-flutuante-modal-50">
					<otm:commandButton oncomplete="#{DocumentoAssinadoControle.urlHistoricoDownloadSV};#{DocumentoAssinadoControle.oncompleteModal}" id="downloadXML" title="Download XML" action="#{DocumentoAssinadoControle.realizarDownloadXMLHistorico}" icon="#{msg_botoes.btn_icon_download_embutido}" styleClass="btn btn-primary btn-confirmar" value="Download XML" />
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
		
		<h:form id="formCadastro">
			<h:commandLink action="#{DocumentoAssinadoControle.liberarBackingBeanMemoria}" immediate="true" id="idLiberarBackingBeanMemoria" style="display: none" />
			<rich:tabPanel width="100%" activeItem="#{DocumentoAssinadoControle.abaAtiva}" switchType="server">
				<rich:tab id="richTab" header="Validação Documentos Assinadados" action="#{DocumentoAssinadoControle.setAbaAtiva('richTab')}" switchType="ajax" >
					<h:panelGroup layout="block" styleClass="row">
						<h:panelGroup id="dadosAba1">
							<h:panelGroup layout="block" styleClass="col-md-12">
								<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_ArquivoAssinado_numeroDocumentoAssinado}" />
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="col-md-6">
								<h:inputText autocomplete="off" id="valorConsulta" styleClass="form-control camposObrigatorios" size="36" maxlength="14" value="#{DocumentoAssinadoControle.controleConsulta.valorConsulta}" onkeypress="return somenteNumero1(event);" />
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="col-md-6">
								<otm:commandButton id="consultar" render="formCadastro" value="#{msg_bt.btn_consultar}" action="#{DocumentoAssinadoControle.consultar}" accesskey="2" styleClass="btn btn-default btn-consultar" />
							</h:panelGroup>
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="row mn  scroll" style="overflow: scroll; max-width: 100%;">
							<rich:dataTable id="items" width="100%" headerClass="consulta" columnClasses="colunaAlinhamento" value="#{DocumentoAssinadoControle.controleConsultaOtimizado}" rendered="#{!empty DocumentoAssinadoControle.controleConsultaOtimizado.listaConsulta}" rows="10" var="documentoAssinado1">
								<f:facet name="header">
									<rich:columnGroup>
										<rich:column rowspan="2">
											<h:outputText value="#{msg_aplic.prt_ArquivoAssinado_numeroDocumentoAssinado}" />
										</rich:column>
										<rich:column rowspan="2">
											<h:outputText value="#{msg_aplic.prt_ArquivoAssinado_descricao}" />
										</rich:column>
										<rich:column rowspan="2">
											<h:outputText value="#{msg_aplic.prt_ArquivoAssinado_tipoOrigemDocumento}" />
										</rich:column>
										<rich:column rowspan="2">
											<h:outputText value="#{msg_aplic.prt_ArquivoAssinado_requerente}" />
										</rich:column>
										<rich:column rowspan="2">
											<h:outputText value="#{msg_aplic.prt_Pessoa_CPF}" />
										</rich:column>
										<rich:column rowspan="2">
											<h:outputText value="#{msg_aplic.prt_Pessoa_dataNasc}" />
										</rich:column>
										<rich:column rowspan="2">
											<h:outputText value="#{msg_aplic.prt_ArquivoAssinado_dataGeracaoDocumento}" />
										</rich:column>
										<rich:column rowspan="2" >
											<h:outputText value="Visualizar Arquivo" />
										</rich:column>
										<rich:column colspan="3" rowspan="1">
											<h:outputText value="Assinaturas" />
										</rich:column>
										<rich:column breakRowBefore="true" style="width:133px" colspan="1" rowspan="1">
											<h:outputText value="#{msg_aplic.prt_ArquivoAssinado_responsavelAssinatura}" />
										</rich:column>
										<rich:column colspan="1" style="width:133px" rowspan="1">
											<h:outputText value="#{msg_aplic.prt_Pessoa_CPF}" />
										</rich:column>
										<rich:column colspan="1" style="width:133px" rowspan="1">
											<h:outputText value="#{msg_aplic.prt_ArquivoAssinado_dataAssinatura}" />
										</rich:column>
									</rich:columnGroup>
								</f:facet>
								<rich:column>
									<h:outputText id="codigo" value="#{documentoAssinado1.numeroDocumentoAssinado}" />
								</rich:column>
								<rich:column style="max-width: 300px !important; overflow: auto !important;">
									<h:outputText id="descricao" value="#{documentoAssinado1.arquivo.descricao}" />
								</rich:column>
								<rich:column>
									<h:outputText id="tipoOrigem" value="#{documentoAssinado1.tipoOrigemDocumentoAssinadoEnum.descricao}" />
								</rich:column>
								<rich:column>
									<h:outputText id="pessoaNome" value="#{documentoAssinado1.arquivo.pessoaVO.nome}" />
								</rich:column>
								<rich:column>
									<h:outputText id="pessoaCpf" value="#{documentoAssinado1.arquivo.pessoaVO.CPFormatoLGPD}" />
								</rich:column>
								<rich:column>
									<h:outputText id="pessoadataNasc" value="#{documentoAssinado1.arquivo.pessoaVO.dataNasc}">
										<f:convertDateTime pattern="dd/MM/yyyy" />
									</h:outputText>
								</rich:column>
								<rich:column>
									<h:outputText id="dataGeracaoDocumento" value="#{documentoAssinado1.dataRegistro}">
										<f:convertDateTime pattern="dd/MM/yyyy" />
									</h:outputText>
								</rich:column>
								<rich:column rendered="#{documentoAssinado1.permitirVisualizarDocumentoAluno}">
									<h:panelGroup layout="block" style="text-align:center;min-height:20px;">
										<otm:commandIcon tooltip="Visualizar Documento" render="formVisualizarArquivoValidando" action="#{DocumentoAssinadoControle.modalVisualizarArquivoAbaValidacao}" oncomplete="#{rich:component('panelVisualizarArquivoValidandoCpf')}.show()"	title="Visualizar Arquivo"	icon="#{msg_botoes.btn_icon_lupa_embutido}" styleClass="mr5" />
									</h:panelGroup>
								</rich:column>
								<rich:column rendered="#{documentoAssinado1.permitirVisualizarDocumentoInstituicao}">
									<h:panelGroup layout="block" style="text-align:center;min-height:20px;">
										<otm:commandIcon tooltip="Visualizar Documento" render="formPreview" oncomplete="#{DocumentoAssinadoControle.oncompleteModal}" id="previewAssinado" action="#{DocumentoAssinadoControle.visualizarArquivoInstituicao}" title="Visualizar Arquivo" icon="#{msg_botoes.btn_icon_lupa_embutido}" styleClass="mr5" />
									</h:panelGroup>
								</rich:column>
								<rich:column rendered="#{!documentoAssinado1.permitirVisualizarDocumentoInstituicao and !documentoAssinado1.permitirVisualizarDocumentoAluno}">
									<h:panelGroup layout="block" style="text-align:center;min-height:20px;">
										<otm:commandIcon disabled="true" tooltip="Visualização indisponível para este tipo de documento" title="Visualizar Arquivo"	icon="#{msg_botoes.btn_icon_alerta_triangulo_embutido}" styleClass="mr5" />
									</h:panelGroup>
								</rich:column>
								<rich:column colspan="3" width="400px" style="padding:0px !important">
									<rich:list type="definitions" rowKeyVar="row2" style="width:100%; padding:0px !important; margin:0px !important" value="#{documentoAssinado1.listaDocumentoAssinadoPessoa}" var="pessoaItem">
										<h:panelGrid cellpadding="0" cellspacing="0" columns="3" columnClasses="bordaDireita,bordaDireita, semBorda" style="width:100%;#{row2 ne 0 ? 'border-top:1px solid #C4C0C9;' : '' }">
											<h:panelGroup layout="block" style="width:200px; text-align:left;min-height:20px">
												<h:outputText value="#{pessoaItem.pessoaVO.nome}" />
											</h:panelGroup>
											<h:panelGroup layout="block" style="width:80px; text-align:center;min-height:20px;">
												<h:outputText value="#{pessoaItem.pessoaVO.CPFormatoLGPD}">
												</h:outputText>
											</h:panelGroup>
											<h:panelGroup layout="block" style="width:120px;text-align:center;min-height:20px;">
												<h:outputText value="#{pessoaItem.dataAssinatura}">
													<f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss"></f:convertDateTime>
												</h:outputText>
											</h:panelGroup>
										</h:panelGrid>
									</rich:list>
								</rich:column>
							</rich:dataTable>
						</h:panelGroup>
						<h:panelGroup layout="block" style="width:100%;text-align:center">
							<rich:dataScroller align="center" for="items" id="paginador" render="form" page="#{DocumentoAssinadoControle.controleConsultaOtimizado.page}" scrollListener="#{DocumentoAssinadoControle.scrollerListener}" rendered="#{DocumentoAssinadoControle.controleConsultaOtimizado.apresentarDatascroller}" />
						</h:panelGroup>
						<h:panelGroup layout="block">
							<otm:mensagem bean="#{DocumentoAssinadoControle}"></otm:mensagem>
						</h:panelGroup>
					</h:panelGroup>
				</rich:tab>
				<ui:insert name="diploma">
					<ui:include src="/visaoAdministrativo/academico/documentoAssinado/diplomaAux.xhtml" />
				</ui:insert>
				<ui:insert name="historico">
					<ui:include src="/visaoAdministrativo/academico/documentoAssinado/historicoAux.xhtml" />
				</ui:insert>
				<rich:tab id="richTabCurriculoDigital" name="richTabCurriculoDigital" action="#{DocumentoAssinadoControle.setAbaAtiva('richTabCurriculoDigital')}" header="Currículos Escolares Digitais" render="formCadastro" switchType="ajax">
					<h:panelGroup layout="block" styleClass="row mn">
						<h:panelGroup layout="block" styleClass="col-md-2">
							<h:outputText styleClass="field control-label tituloCampos" value="#{msg.msg_consultar_por}" />
							<h:selectOneMenu styleClass="form-control campos" id="consultaCurriculos" required="true" value="#{DocumentoAssinadoControle.campoConsultarCurriculo}">
								<a4j:ajax event="change" execute="@form" render="@form" />
								<f:selectItems value="#{DocumentoAssinadoControle.tipoConsultaComboCurriculo}" />
							</h:selectOneMenu>
						</h:panelGroup>
						<h:panelGroup id="panelGroupCurriculos">
							<h:panelGroup layout="block" styleClass="col-md-4">
								<h:panelGroup layout="block" rendered="#{DocumentoAssinadoControle.campoConsultarCurriculo ne 'codigoValidacaoCurriculo'}">
									<h:outputText styleClass="tituloCampos" value="Valor Consulta" />
								</h:panelGroup>
								<h:panelGroup layout="block" rendered="#{DocumentoAssinadoControle.campoConsultarCurriculo eq 'codigoValidacaoCurriculo'}">
									<otm:outputHelp tooltip="Deve ser informado o código gerado no momento da validação do curriculo digital" id="codigoValidacaoCurriculo" styleClass="field control-label tituloCampos" value="Código Validação Curriculo Digital" />
								</h:panelGroup>
								<h:inputText autocomplete="off" id="valorConsultarCurriculo" styleClass="form-control campos" value="#{DocumentoAssinadoControle.valorConsultarCurriculo}" />
							</h:panelGroup>
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="col-md-12 text-center m10">
							<otm:commandButton id="consultarCurriculos" render="formCadastro" value="#{msg_botoes.btn_consultar}" action="#{DocumentoAssinadoControle.consultarCurriculos}" accesskey="2" styleClass="btn btn-default btn-consultar" />
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="row mn">
							<a4j:repeat rowKeyVar="row" id="itemsCurriculo" value="#{DocumentoAssinadoControle.listaDocumentoAssinadoCurriculoVO}" rendered="#{!empty DocumentoAssinadoControle.listaDocumentoAssinadoCurriculoVO}" var="curriculoItesn">
								<otm2:panel name="panelCurriculo_#{row+1}" styleClassHeader="row mn rounded-top bg-gray-100 p10" styleClassBody="row mn p5" stylePanel=" " styleClassFooter="row mn text-center p5" opened="true">
									<ui:define name="header">
										<h:panelGroup layout="block" styleClass="col-md-4 pn">
											<h:outputText value="Curso" styleClass="field control-label tituloCampos" />
											<h:outputText styleClass="btn-block" value="#{curriculoItesn.cursoVO.nome}" />
										</h:panelGroup>
										<h:panelGroup layout="block" styleClass="col-md-4 pn">
											<h:outputText value="Matriz Curricular" styleClass="field control-label tituloCampos" />
											<h:outputText styleClass="btn-block" value="#{curriculoItesn.gradeCurricular.nome}" />
										</h:panelGroup>
										<h:panelGroup layout="block" styleClass="col-md-4 pn">
											<h:outputText value="Unidade de Ensino" styleClass="field control-label tituloCampos" />
											<h:outputText styleClass="btn-block" value="#{curriculoItesn.unidadeEnsinoVO.nome}" />
										</h:panelGroup>
									</ui:define>
									<ui:define name="body">
										<h:panelGroup layout="block" styleClass="row mn">
											<h:panelGroup layout="block" styleClass="col-md-3 pn">
												<h:panelGroup layout="block" styleClass="col-md-12 mb5 pb5">
													<h:outputText value="Código" styleClass="field control-label tituloCampos btn-block" />
													<h:outputText value="#{curriculoItesn.numeroDocumentoAssinado}" />
												</h:panelGroup>
											</h:panelGroup>
											<h:panelGroup layout="block" styleClass="col-md-3 pn">
												<h:panelGroup layout="block" styleClass="col-md-12 mb5 pb5">
													<h:outputText value="Descrição" styleClass="field control-label tituloCampos btn-block" />
													<h:outputText value="#{curriculoItesn.arquivo.descricao}" />
												</h:panelGroup>
											</h:panelGroup>
											<h:panelGroup layout="block" styleClass="col-md-3 pn">
												<h:panelGroup layout="block" styleClass="col-md-12 mb5 pb5">
													<h:outputText value="Tipo Origem" styleClass="field control-label tituloCampos btn-block" />
													<h:outputText value="#{curriculoItesn.tipoOrigemDocumentoAssinadoEnum.descricao}" />
												</h:panelGroup>
											</h:panelGroup>
											<h:panelGroup layout="block" styleClass="col-md-3 pn">
												<h:panelGroup layout="block" styleClass="col-md-12 mb5 pb5">
													<h:outputText value="Data Registro" styleClass="field control-label tituloCampos btn-block" />
													<h:outputText value="#{curriculoItesn.dataRegistro}">
														<f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss"></f:convertDateTime>
													</h:outputText>
												</h:panelGroup>
											</h:panelGroup>
										</h:panelGroup>
									</ui:define>
									<ui:define name="footer">
										<otm:commandButton styleClass="btn btn-success" oncomplete="#{DocumentoAssinadoControle.urlDownloadSV}" render="form" tooltip="Download XML" icon="#{msg_botoes.btn_icon_download_embutido}" action="#{DocumentoAssinadoControle.realizarDownloadArquivoXmlCurriculoEscolar}" value="Download XML" rendered="#{curriculoItesn.arquivo.codigo gt 0}" marginButton="2px" />
										<otm:commandButton styleClass="btn btn-info" oncomplete="#{rich:component('panelPreview')}.show()" render="formPreview" tooltip="Visualizar Arquivo" icon="#{msg_botoes.btn_icon_verificar_embutido}" action="#{DocumentoAssinadoControle.realizarPreviewCurriculoEscolarDigital}" value="Visualizar Arquivo" rendered="#{curriculoItesn.arquivoVisual.codigo gt 0}" marginButton="2px" />
									</ui:define>
								</otm2:panel>
								<h:panelGroup layout="block" styleClass="col-md-12 mt5" />
							</a4j:repeat>
						</h:panelGroup>
						<h:panelGroup layout="block">
							<otm:mensagem bean="#{DocumentoAssinadoControle}"></otm:mensagem>
						</h:panelGroup>
					</h:panelGroup>
				</rich:tab>
				<rich:tab id="arquivosInstitucionais" name="arquivosInstitucionais" header="Arquivos Institucionais" render="formCadastro" action="#{DocumentoAssinadoControle.inicializarDadosArquivosInstitucionais}" switchType="ajax">
					<h:panelGroup layout="block" styleClass="row mn">
						<h:panelGroup layout="block" styleClass="col-md-12 text-center m5 p10" rendered="#{empty DocumentoAssinadoControle.controleConsultaOtimizado.listaConsulta}">
							<h:outputText styleClass="tituloCampos" style="font-size: 16px !important" value="Arquivos Institucionais não encontrados." />
						</h:panelGroup>
						<rich:dataTable id="itemsArquivoInstitucional" width="100%" headerClass="consulta" columnClasses="colunaAlinhamento" value="#{DocumentoAssinadoControle.controleConsultaOtimizado}" rendered="#{!empty DocumentoAssinadoControle.controleConsultaOtimizado.listaConsulta}" rows="10" var="documentoAssinado1">
							<rich:column sortBy="#{documentoAssinado1.numeroDocumentoAssinado}">
								<f:facet name="header">
									<h:outputText value="#{msg_aplic.prt_ArquivoAssinado_numeroDocumentoAssinado}" />
								</f:facet>
								<h:outputText id="codigoDocAssinado" value="#{documentoAssinado1.numeroDocumentoAssinado}" />
							</rich:column>
							<rich:column sortBy="#{documentoAssinado1.arquivo.descricao}">
								<f:facet name="header">
									<h:outputText value="#{msg_aplic.prt_ArquivoAssinado_descricao}" />
								</f:facet>
								<h:outputText id="descricaoArquivo" value="#{documentoAssinado1.arquivo.descricaoArquivo_Apresentar}" />
							</rich:column>
							<rich:column sortBy="#{documentoAssinado1.arquivo.dataUpload_Apresentar}">
								<f:facet name="header">
									<h:outputText value="#{msg_aplic.prt_UploadArquivos_dataUpload}" />
								</f:facet>
								<h:outputText id="dataUpload" value="#{documentoAssinado1.arquivo.dataUpload_Apresentar}" />
							</rich:column>
							<rich:column>
								<f:facet name="header">
									<h:outputText value="#{msg_aplic.prt_UploadArquivo_download}" />
								</f:facet>
								<otm:commandIcon oncomplete="#{documentoAssinado1.arquivo.servidorArquivoOnline eq 'APACHE'} ? location.href='../../DownloadSV' : abrirPopup('../../DownloadSV', 'DownloadSV_#{documentoAssinado1.arquivo.codigo}',950,595)" tootlip="Download Arquivo" icon="#{msg_botoes.btn_icon_download} iconePequeno" action="#{DocumentoAssinadoControle.realizarDownloadArquivo(documentoAssinado1.arquivo)}" />
							</rich:column>
							<f:facet name="footer">
								<rich:dataScroller align="center" for="items" id="paginador1" render="form" page="#{DocumentoAssinadoControle.controleConsultaOtimizado.page}" scrollListener="#{DocumentoAssinadoControle.scrollerListener}" rendered="#{DocumentoAssinadoControle.controleConsultaOtimizado.apresentarDatascroller}" />
							</f:facet>
						</rich:dataTable>
					</h:panelGroup>
				</rich:tab>
			</rich:tabPanel>
		</h:form>
	</ui:define>
</ui:composition>
</html>