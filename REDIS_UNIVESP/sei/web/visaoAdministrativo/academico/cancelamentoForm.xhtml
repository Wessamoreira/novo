<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" xmlns:otm="http://java.sun.com/jsf/composite/otm">
<h:head>
</h:head>
<ui:composition template="/visaoAdministrativo/template/visaoAdministrativa.xhtml">
	<ui:define name="tituloPagina">
		<h:outputText value="#{msg_aplic.prt_Cancelamento_tituloForm}" />
	</ui:define>
	<ui:define name="conteudo">

		<rich:popupPanel styleClass="modalMaximizado" id="panelRequerimento" onshow="document.getElementById('formRequerimento:valorConsultaRequerimento').focus();" shadowOpacity="true" width="750" height="500">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="#{msg_aplic.prt_Requerimento_tituloForm}"></h:outputText>
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelink3" />
					<rich:componentControl target="panelRequerimento" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formRequerimento">
				<h:panelGroup layout="block" styleClass="col-md-12">
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg.msg_consultar_por}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-5">
					<h:selectOneMenu styleClass="form-control campos" id="consultaRequerimento" value="#{CancelamentoControle.campoConsultaRequerimento}">
						<a4j:ajax event="change" execute="@this" render="formRequerimento:dadosConsulta" />
						<f:selectItems value="#{CancelamentoControle.tipoConsultaComboRequerimento}" />
					</h:selectOneMenu>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-5" rendered="#{!CancelamentoControle.situcaoRequerimento and !CancelamentoControle.situcaoFinanceiraRequerimento}">
					<h:inputText id="valorConsultaRequerimento" rendered="#{!CancelamentoControle.situcaoRequerimento and !CancelamentoControle.situcaoFinanceiraRequerimento}" size="14" styleClass="form-control campos" onkeypress="#{CancelamentoControle.mascaraRequerimento}" value="#{CancelamentoControle.valorConsultaRequerimento}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-5" rendered="#{CancelamentoControle.situcaoRequerimento}">
					<h:selectOneMenu styleClass="form-control campos" rendered="#{CancelamentoControle.situcaoRequerimento}" value="#{CancelamentoControle.valorConsultaRequerimento}">
						<f:selectItems value="#{CancelamentoControle.listaSelectItemSituacaoRequerimento}" />
					</h:selectOneMenu>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-5" rendered="#{CancelamentoControle.situcaoFinanceiraRequerimento}">
					<h:selectOneMenu styleClass="form-control campos" rendered="#{CancelamentoControle.situcaoFinanceiraRequerimento}" value="#{CancelamentoControle.valorConsultaRequerimento}">
						<f:selectItems value="#{CancelamentoControle.listaSelectItemSituacaoFinanceiraRequerimento}" />
					</h:selectOneMenu>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-2">
					<otm:commandButton id="btnConsultar" render="formRequerimento:mensagemConsultaRequerimento, formRequerimento:resultadoConsultaRequerimento, formRequerimento:scResultadoRequerimento" action="#{CancelamentoControle.consultarRequerimento}" value="#{msg_botoes.btn_consultar}" styleClass="btn btn-default btn-consultar" alt="#{msg.msg_consultar_dados}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-12 mt5" />
				<rich:dataTable id="resultadoConsultaRequerimento" width="100%" headerClass="consulta" rowClasses="linhaImpar, linhaPar" columnClasses="colunaAlinhamento" value="#{CancelamentoControle.listaConsultaRequerimento}" rows="5" var="requerimentoItens">
					<rich:column>
						<f:facet name="header">
							<h:outputText value="#{msg_aplic.prt_Requerimento_codigo}" />
						</f:facet>
						<h:panelGroup>
							<a4j:commandLink action="#{CancelamentoControle.selecionarRequerimento}" render="form" oncomplete="#{rich:component('panelRequerimento')}.hide()" value="#{requerimentoItens.codigo}" />
						</h:panelGroup>
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="#{msg_aplic.prt_Requerimento_tipoRequerimento}" />
						</f:facet>
						<h:panelGroup>
							<a4j:commandLink action="#{CancelamentoControle.selecionarRequerimento}" render="form" oncomplete="#{rich:component('panelRequerimento')}.hide()" value="#{requerimentoItens.tipoRequerimento.nome}" />
						</h:panelGroup>
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="#{msg_aplic.prt_Requerimento_situacao}" />
						</f:facet>
						<h:panelGroup>
							<a4j:commandLink action="#{CancelamentoControle.selecionarRequerimento}" render="form" oncomplete="#{rich:component('panelRequerimento')}.hide()" value="#{requerimentoItens.situacao_Apresentar}" />
						</h:panelGroup>
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="#{msg_aplic.prt_Requerimento_situacaoFinanceira}" />
						</f:facet>
						<h:panelGroup>
							<a4j:commandLink action="#{CancelamentoControle.selecionarRequerimento}" render="form" oncomplete="#{rich:component('panelRequerimento')}.hide()" value="#{requerimentoItens.situacaoFinanceira_Apresentar}" />
						</h:panelGroup>
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="#{msg_botoes.btn_opcoes}" />
						</f:facet>
						<otm:commandIcon action="#{CancelamentoControle.selecionarRequerimento}" render="form" oncomplete="#{rich:component('panelRequerimento')}.hide()" icon="#{msg_botoes.btn_icon_selecionar} iconePequeno" tooltip="Selecionar" alt="#{msg.msg_selecionar_dados}" />
					</rich:column>
					<f:facet name="footer">
						<div style="text-align: center !important">
							<rich:dataScroller align="center" boundaryControls="auto" stepControls="auto" fastControls="hide" for="formRequerimento:resultadoConsultaRequerimento" maxPages="10" id="scResultadoRequerimento" />
						</div>
					</f:facet>
				</rich:dataTable>
				<h:panelGroup id="mensagemConsultaRequerimento" columns="1" width="100%" styleClass="tabMensagens">
					<otm:mensagem bean="#{CancelamentoControle}"></otm:mensagem>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
		<rich:popupPanel styleClass="modalMaximizado" id="panelMatricula" onshow="document.getElementById('formMatricula:valorConsultaAluno').focus();" shadowOpacity="true" width="750" height="500">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="#{msg_aplic.prt_Curso_consultarAluno}"></h:outputText>
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelinkAluno" />
					<rich:componentControl target="panelMatricula" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formMatricula">
				<h:panelGroup layout="block" styleClass="col-md-12">
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg.msg_consultar_por}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-5">
					<h:selectOneMenu styleClass="form-control campos" id="consultaAluno" value="#{CancelamentoControle.campoConsultaAluno}">
						<f:selectItems value="#{CancelamentoControle.tipoConsultaComboAluno}" />
					</h:selectOneMenu>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-5">
					<h:inputText id="valorConsultaAluno" size="30" styleClass="form-control campos" value="#{CancelamentoControle.valorConsultaAluno}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-2">
					<otm:commandButton id="btnConsultar" render="formMatricula:mensagemConsultaAluno, formMatricula:resultadoConsultaAluno, formMatricula:scResultadoAluno" action="#{CancelamentoControle.consultarAluno}" value="#{msg_botoes.btn_consultar}" styleClass="btn btn-default btn-consultar" alt="#{msg.msg_consultar_dados}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-12 mt5" />
				<rich:dataTable id="resultadoConsultaAluno" width="100%" headerClass="consulta" rowClasses="linhaImpar, linhaPar" columnClasses="colunaAlinhamento" value="#{CancelamentoControle.listaConsultaAluno}" rows="7" var="matriculaItens">
					<rich:column>
						<f:facet name="header">
							<h:outputText value="Nome" />
						</f:facet>
						<h:panelGroup>
							<a4j:commandLink action="#{CancelamentoControle.selecionarAluno}" render="form" oncomplete="#{rich:component('panelMatricula')}.hide()" value="#{matriculaItens.aluno.nome}" />
						</h:panelGroup>
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="Matrícula" />
						</f:facet>
						<h:panelGroup>
							<a4j:commandLink action="#{CancelamentoControle.selecionarAluno}" render="form" oncomplete="#{rich:component('panelMatricula')}.hide()" value="#{matriculaItens.matricula}" />
						</h:panelGroup>
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="#{msg_aplic.prt_Pessoa_registroAcademico}" />
						</f:facet>
						<h:panelGroup>
							<a4j:commandLink action="#{CancelamentoControle.selecionarAluno}" render="form" oncomplete="#{rich:component('panelMatricula')}.hide()" value="#{matriculaItens.aluno.registroAcademico}" />
						</h:panelGroup>
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="Curso" />
						</f:facet>
						<h:panelGroup>
							<a4j:commandLink action="#{CancelamentoControle.selecionarAluno}" render="form" oncomplete="#{rich:component('panelMatricula')}.hide()" value="#{matriculaItens.curso.nome}" />
						</h:panelGroup>
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="Situação Atual Matrícula" />
						</f:facet>
						<h:panelGroup>
							<a4j:commandLink action="#{CancelamentoControle.selecionarAluno}" render="form" oncomplete="#{rich:component('panelMatricula')}.hide()" value="#{matriculaItens.situacao_Apresentar}" />
						</h:panelGroup>
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="#{msg_botoes.btn_opcoes}" />
						</f:facet>
						<otm:commandIcon action="#{CancelamentoControle.selecionarAluno}" render="form" oncomplete="#{rich:component('panelMatricula')}.hide()" icon="#{msg_botoes.btn_icon_selecionar} iconePequeno" tooltip="Selecionar" alt="#{msg.msg_selecionar_dados}" />
					</rich:column>
					<f:facet name="footer">
						<div style="text-align: center !important">
							<rich:dataScroller align="center" for="formMatricula:resultadoConsultaAluno" maxPages="10" id="scResultadoAluno" boundaryControls="auto" stepControls="auto" fastControls="hide" />
						</div>
					</f:facet>
				</rich:dataTable>
				<h:panelGroup id="mensagemConsultaAluno" columns="1" width="100%" styleClass="tabMensagens">
					<otm:mensagem bean="#{CancelamentoControle}"></otm:mensagem>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
		<rich:popupPanel styleClass="modalMaximizado" id="panelTextoPadraoDeclaracao" shadowOpacity="true" width="750" height="500">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="#{msg_aplic.prt_TextoPadraoDeclaracao_tituloForm}" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelinkTextoPadraoDeclaracao" />
					<rich:componentControl target="panelTextoPadraoDeclaracao" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formTextoPadraoDeclaracao">
				<h:panelGroup columns="1" width="100%" columnClasses="colunaCentralizada">
					<h:panelGroup columns="2" columnClasses="colunaEsquerda, colunaEsquerda" width="100%">
						<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_TextoPadraoDeclaracao_tituloForm}" />
						<h:panelGroup>
							<h:selectOneMenu id="textoPadrao" styleClass="form-control camposObrigatorios" value="#{CancelamentoControle.textoPadraoDeclaracao}">
								<f:selectItems value="#{CancelamentoControle.listaSelectItemTipoTextoPadrao}" />
							</h:selectOneMenu>
						</h:panelGroup>
					</h:panelGroup>
					<br />
					<h:panelGroup columns="2" columnClasses="colunaCentralizada, colunaCentralizada" width="100%">
						<otm:commandButton id="imprimirPDF" render="formTextoPadraoDeclaracao" oncomplete="#{CancelamentoControle.contrato}" action="#{CancelamentoControle.imprimirPDF2}" styleClass="btn btn-default dark btn-imprimir" />
						<otm:commandButton id="visualizarDeclaracoes" render="formTextoPadraoDeclaracao" action="#{CancelamentoControle.visualizarImpressaoDeclaracaoAluno}" value="#{msg_aplic.prt_ImpressaoDeclaracao_visualizarDeclaracao}" image="#{resource['/imagens/botaoVisualizarDeclaracoes.png']}" />
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-12 mt5" />
					<h:panelGroup columns="1" width="100%" columnClasses="colunaCentralizada">
						<rich:dataTable id="listaImpressaoDeclaracao" width="100%" headerClass="consulta" rowClasses="linhaImpar, linhaPar" columnClasses="colunaAlinhamento" value="#{CancelamentoControle.listaImpressaoDeclaracaoVOs}" rows="5" var="impressaoDeclaracaoItens" rendered="#{!empty CancelamentoControle.listaImpressaoDeclaracaoVOs}">
							<rich:column>
								<f:facet name="header">
									<h:outputText value="Data Geração" />
								</f:facet>
								<h:panelGroup>
									<h:outputText value="#{impressaoDeclaracaoItens.dataGeracao}">
										<f:convertDateTime pattern="dd/MM/yyyy HH:mm" type="date" />
									</h:outputText>
								</h:panelGroup>
							</rich:column>
							<rich:column>
								<f:facet name="header">
									<h:outputText value="#{msg_aplic.prt_ImpressaoDeclaracao_matricula}" />
								</f:facet>
								<h:panelGroup>
									<h:outputText value="#{impressaoDeclaracaoItens.matricula.matricula}" rendered="#{impressaoDeclaracaoItens.isApresentarDadosAluno}" />
									<h:outputText value="#{impressaoDeclaracaoItens.professor.matricula}" rendered="#{impressaoDeclaracaoItens.isApresentarDadosProfessor}" />
								</h:panelGroup>
							</rich:column>
							<rich:column>
								<f:facet name="header">
									<h:outputText value="#{msg_aplic.prt_ImpressaoDeclaracao_nome}" />
								</f:facet>
								<h:panelGroup>
									<h:outputText value="#{impressaoDeclaracaoItens.matricula.aluno.nome}" rendered="#{impressaoDeclaracaoItens.isApresentarDadosAluno}" />
									<h:outputText value="#{impressaoDeclaracaoItens.professor.pessoa.nome}" rendered="#{impressaoDeclaracaoItens.isApresentarDadosProfessor}" />
								</h:panelGroup>
							</rich:column>
							<rich:column>
								<f:facet name="header">
									<h:outputText value="#{msg_aplic.prt_ImpressaoDeclaracao_declaracao}" />
								</f:facet>
								<h:panelGroup>
									<h:outputText value="#{impressaoDeclaracaoItens.textoPadraoDeclaracao.descricao}" />
								</h:panelGroup>
							</rich:column>
							<rich:column>
								<f:facet name="header">
									<h:outputText value="#{msg_bt.btn_opcoes}" />
								</f:facet>
								<h:panelGroup layout="block">
									<otm:commandButton id="imprimirDeclaracaoGeradas" render="form" action="#{CancelamentoControle.impressaoDeclaracaoContratoJaGerada}" value="#{msg_aplic.prt_Matricula_emitirContrato}" oncomplete="#{CancelamentoControle.contrato}" image="#{resource['/imagens/botaoImprimirResumido.png']}" title="Realizar dowload da declaração." />
								</h:panelGroup>
							</rich:column>
						</rich:dataTable>
						<rich:dataScroller align="center" for="formTextoPadraoDeclaracao:listaImpressaoDeclaracao" maxPages="10" id="scResultadoImpressaoDeclaracao" rendered="#{!empty CancelamentoControle.listaImpressaoDeclaracaoVOs}" />
					</h:panelGroup>
					<h:panelGroup id="mensagemConsultaTextoPadraoDeclaracao" columns="1" width="100%" styleClass="tabMensagens">
						<otm:mensagem bean="#{CancelamentoControle}"></otm:mensagem>
					</h:panelGroup>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
		<rich:popupPanel styleClass="modalMaximizado" id="panelAviso" shadowOpacity="true" width="400" height="200">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="AVISO" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelink" />
					<rich:componentControl target="panelAviso" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formAviso">
				<h:panelGroup columns="1" width="100%" columnClasses="colunaCentralizada">
					<h:panelGroup columns="1" width="100%">
						<h:outputText styleClass="field control-label tituloCampos" value="#{msg.msg_Trancamento_avisoConfirmacaoTrancamento}" />
					</h:panelGroup>
					<otm:spacer height="20" />
					<h:panelGroup layout="block" styleClass="col-md-12 text-center m10">
						<otm:commandButton styleClass="btn btn-dark mr5" id="gravacao" render="form" action="#{CancelamentoControle.persistir}" value="Gravar" icon="#{msg_botoes.btn_icon_gravar_embutido}" oncomplete="#{rich:component('panelAviso')}.hide(), #{rich:component('panelHistorico')}.hide()" />
						<otm:commandButton styleClass="btn btn-danger" id="fechar" value="Fechar" icon="#{msg_botoes.btn_icon_fechar_embutido}" oncomplete="#{rich:component('panelAviso')}.hide(), #{rich:component('panelHistorico')}.hide()" />
					</h:panelGroup>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
		<rich:popupPanel styleClass="modalMaximizado" id="panelHistorico" shadowOpacity="false" width="800" autosized="true">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Historico_tituloForm}" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelinkPanelHistorico" />
					<rich:componentControl target="panelHistorico" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formHistorico">
				<h:panelGroup columns="1" width="100%">
					<h:panelGroup columns="1" width="100%">
						<h:outputText styleClass="field control-label tituloCampos" value="#{msg.msg_Cancelamento_selecionarHistoricoCancelar}" />
					</h:panelGroup>
					<otm:spacer height="20" />
					<h:panelGroup width="100%">
						<rich:dataTable id="resultadoConsultaHistorico" width="100%" headerClass="consulta" rowClasses="linhaImpar, linhaPar" columnClasses="colunaAlinhamento" value="#{CancelamentoControle.cancelamentoVO.historicoVOs}" rows="10" var="historicoItens">
							<rich:column>
								<f:facet name="header">
									<h:panelGroup>
										<otm:selectBooleanCheckbox id="realizarMarcacaoDesmarcacaoTodos" value="#{CancelamentoControle.realizarMarcacaoDesmarcacaoTodos}" style="position:relative; top:-3px; left:0px;">
											<a4j:ajax event="change"  execute="@this" render="formHistorico" listener="#{CancelamentoControle.executarMarcacaoDesmarcacaoTodos}" />
										</otm:selectBooleanCheckbox>
										<otm:spacer width="5px" />
										<h:outputText value="#{msg_aplic.prt_Trancamento_alterarSituacaoHistorico}" />
									</h:panelGroup>
								</f:facet>
								<otm:selectBooleanCheckbox id="realizarAlteracaoSituacaoHistorico" disabled="#{!historicoItens.editavel}" value="#{historicoItens.realizarAlteracaoSituacaoHistorico}">
									<a4j:ajax event="change" execute="@this" render="formHistorico"  />
								</otm:selectBooleanCheckbox>
							</rich:column>
							<rich:column>
								<f:facet name="header">
									<h:outputText value="#{msg_aplic.prt_AbonoFalta_disciplina}" />
								</f:facet>
								<h:outputText value="#{historicoItens.disciplina.codigo} - #{historicoItens.disciplina.nome}" />
							</rich:column>
							<rich:column>
								<f:facet name="header">
									<h:outputText value="#{msg_aplic.prt_FichaAluno_frequencia}" />
								</f:facet>
								<h:outputText value="#{historicoItens.freguencia}" />
							</rich:column>
							<rich:column>
								<f:facet name="header">
									<h:outputText value="#{msg_aplic.prt_FichaAluno_mediaFinal}" />
								</f:facet>
								<h:outputText value="#{historicoItens.mediaFinal}" />
							</rich:column>
							<rich:column>
								<f:facet name="header">
									<h:outputText value="#{msg_aplic.prt_Historico_situacao}" />
								</f:facet>
								<h:outputText value="#{historicoItens.situacao_Apresentar}" />
							</rich:column>
							<f:facet name="footer">
								<div style="text-align: center !important">
									<rich:dataScroller align="center" for="formHistorico:resultadoConsultaHistorico" maxPages="10" id="scResultadoHistorico" boundaryControls="auto" stepControls="auto" fastControls="hide" />
								</div>
							</f:facet>
						</rich:dataTable>
					</h:panelGroup>
					<h:panelGroup id="mensagemFormHistorico" columns="1" width="100%" styleClass="tabMensagens">
						<otm:mensagem bean="#{CancelamentoControle}"></otm:mensagem>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-12 text-center">
						<otm:commandButton id="deferirRequerimentoHistorico" oncomplete="#{rich:component('panelAviso')}.show()" styleClass="btn btn-dark" icon="#{msg_botoes.btn_icon_gravar_embutido}" value="Gravar" render="form, formAviso" />
					</h:panelGroup>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
		<rich:popupPanel styleClass="modalMaximizado50" id="panelEstorno" shadowOpacity="false" width="600" height="200">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Cancelamento_estornar}" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelinkpanelEstorno" />
					<rich:componentControl target="panelEstorno" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formEstorno">
				<h:panelGroup layout="block" styleClass="col-md-12 text-center">
					<h:outputText escape="false" styleClass="field control-label mensagemDetalhada col-md-12" value="#{msg.msg_Cancelamento_EstornarCancelamento}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="barra-btn-flutuante-modal-50">
					<otm:commandButton id="cancelarEstornarCancelamento" oncomplete="#{rich:component('panelEstorno')}.hide()" styleClass="btn btn-danger light btn-cancelar" value="cancelar" icon="#{msg_botoes.btn_icon_cancelar_embutido}" />
					<otm:spacer width="5px" />
					<otm:commandButton id="estornarCancelamento" action="#{CancelamentoControle.executarEstorno}" oncomplete="#{rich:component('panelEstorno')}.hide()" icon="#{msg_botoes.btn_icon_estornar_embutido}" value="Estornar" styleClass="btn btn-warning" render="form" />
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
		<h:form id="form">
			<h:panelGroup layout="block" styleClass="col-md-12 pn">
				<h:panelGroup layout="block" styleClass="col-md-2">
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Trancamento_codigoRequerimento}" />
					<h:panelGroup layout="block" styleClass="col-md-6 pn">
						<h:inputText id="codigoRequerimento" disabled="#{!CancelamentoControle.cancelamentoVO.novoObj}" size="10" maxlength="10" styleClass="form-control campos" value="#{CancelamentoControle.cancelamentoVO.codigoRequerimento.codigo}">
							<a4j:ajax event="change" execute="@this" listener="#{CancelamentoControle.consultarRequerimentoPorChavePrimaria}" render="form" />
						</h:inputText>
						<span class="append-icon right"> <otm:commandIcon rendered="#{CancelamentoControle.cancelamentoVO.novoObj}" alt="Consultar Requerimento" render="formRequerimento" icon="#{msg_botoes.btn_icon_lupa_embutido}" oncomplete="#{rich:component('panelRequerimento')}.show()" />
						</span>
					</h:panelGroup>
				</h:panelGroup>
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="col-md-6 pn">
				<h:panelGroup layout="block" styleClass="col-md-12">
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Trancamento_matricula}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-4">
					<otm:sugestionBox id="sugestionRAMAtricula"   disabled="#{!CancelamentoControle.cancelamentoVO.novoObj}"  bean="#{CancelamentoControle}" autoCompleteMatricula="true"  value="#{CancelamentoControle.cancelamentoVO.matricula.matricula}"  action="#{CancelamentoControle.consultarMatriculaPorChavePrimaria}"   ></otm:sugestionBox>
				
					<!-- <h:inputText id="alunoMatricula" size="20" styleClass="form-control camposObrigatorios" value="#{CancelamentoControle.cancelamentoVO.matricula.matricula}" disabled="#{!CancelamentoControle.cancelamentoVO.novoObj}">
						<a4j:ajax event="change" listener="#{CancelamentoControle.consultarMatriculaPorChavePrimaria}" render="form" />
					</h:inputText> -->
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-8">
					<h:inputText id="alunoNome" size="48" styleClass="form-control camposSomenteLeitura" readonly="true" value="#{CancelamentoControle.cancelamentoVO.matricula.aluno.nome}" />
					<span class="append-icon right"> <otm:commandIcon id="consultaDadosAluno" alt="Localizar Aluno" render="formAluno" oncomplete="#{rich:component('panelMatricula')}.show()" icon="#{msg_botoes.btn_icon_lupa_embutido}" rendered="#{CancelamentoControle.cancelamentoVO.novoObj}" /> <otm:commandIcon id="limparDadosAluno" alt="Limpas Dados" action="#{CancelamentoControle.limparDadosAluno}" render="form" icon="#{msg_botoes.btn_icon_limpar_embutido}" rendered="#{CancelamentoControle.cancelamentoVO.novoObj}" />
					</span>
				</h:panelGroup>
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="col-md-3" rendered="#{CancelamentoControle.cancelamentoVO.codigoRequerimento.codigo ne 0}">
				<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Requerimento_data}" />
				<h:inputText id="codigoRequerimento_codigoRequerimento" size="11" maxlength="10" styleClass="form-control camposSomenteLeitura" readonly="true" value="#{CancelamentoControle.cancelamentoVO.codigoRequerimento.data_Apresentar}" />
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="col-md-3">
				<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Requerimento_situacao}" />
				<h:inputText id="codigoRequerimento_situacao" size="40" maxlength="30" styleClass="form-control camposSomenteLeitura" readonly="true" value="#{CancelamentoControle.cancelamentoVO.situacao_Apresentar}" />
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="col-md-12 pn">
				<h:panelGroup layout="block" styleClass="col-md-6">
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Trancamento_justificativa}" />
					<h:inputText disabled="#{!CancelamentoControle.cancelamentoVO.novoObj}" id="justificativa" size="68" styleClass="form-control camposObrigatorios" value="#{CancelamentoControle.cancelamentoVO.justificativa}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-6">
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Trancamento_motivoCancelamentoTrancamento}" />
					<h:selectOneMenu disabled="#{!CancelamentoControle.cancelamentoVO.novoObj}" id="tipoJustificativa" styleClass="form-control camposObrigatorios" value="#{CancelamentoControle.cancelamentoVO.motivoCancelamentoTrancamento.codigo}">
						<f:selectItems value="#{CancelamentoControle.listaSelectItemMotivoCancelamentoTrancamento}" />
					</h:selectOneMenu>
				</h:panelGroup>
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="col-md-6 pn">
				<h:panelGroup layout="block" styleClass="col-md-12 pn">
					<h:panelGroup layout="block" styleClass="col-md-8">
						<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Trancamento_responsavelAutorizacao}" />
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-4">
						<h:outputText styleClass="field control-label tituloCampos" value="Data Cancelamento" />
					</h:panelGroup>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-4">
					<h:inputText id="responsavelAutorizacao" readonly="true" size="8" styleClass="form-control camposSomenteLeitura" value="#{CancelamentoControle.cancelamentoVO.responsavelAutorizacao.codigo}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-4">
					<h:inputText id="responsavelAutorizacao_nomePessoa" styleClass="form-control camposSomenteLeitura" size="41" readonly="true" value="#{CancelamentoControle.cancelamentoVO.responsavelAutorizacao.nome}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-4">
					<h:inputText id="data" readonly="true" size="16" styleClass="form-control camposSomenteLeitura" value="#{CancelamentoControle.cancelamentoVO.data}">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</h:inputText>
				</h:panelGroup>
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="col-md-6 pn">
				<h:panelGroup layout="block" styleClass="col-md-12">
					<h:panelGroup layout="block" styleClass="col-md-8">
						<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Trancamento_responsavelEstorno}" />
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-4">
						<h:outputText styleClass="field control-label tituloCampos" value="Data Estorno" />
					</h:panelGroup>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-4">
					<h:inputText id="responsavelEstorno" readonly="true" size="8" styleClass="form-control camposSomenteLeitura" value="#{CancelamentoControle.cancelamentoVO.responsavelEstorno.codigo}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-4">
					<h:inputText id="responsavelEstorno_nomePessoa" styleClass="form-control camposSomenteLeitura" size="41" readonly="true" value="#{CancelamentoControle.cancelamentoVO.responsavelEstorno.nome}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-4">
					<h:inputText id="dataEstorno" readonly="true" size="16" styleClass="form-control camposSomenteLeitura" value="#{CancelamentoControle.cancelamentoVO.dataEstorno}">
						<f:convertDateTime pattern="dd/MM/yyyy HH:mm" />
					</h:inputText>
				</h:panelGroup>
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="col-md-6">
				<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Trancamento_descricao}" />
				<h:inputTextarea disabled="#{!CancelamentoControle.cancelamentoVO.novoObj}" id="descricao" styleClass="form-control campos" value="#{CancelamentoControle.cancelamentoVO.descricao}" />
			</h:panelGroup>
			<h:panelGroup columns="1" width="100%" styleClass="tabMensagens">
				<otm:mensagem bean="#{CancelamentoControle}"></otm:mensagem>
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="barraFlutuanteInferior">
				<otm:commandButton style="margin-right:5px" id="novo" action="#{CancelamentoControle.novo}" value="#{msg_botoes.btn_novo}" accesskey="1" styleClass="btn btn-info btn-novo" />
				<otm:commandButton style="margin-right:5px" id="salvar" rendered="#{CancelamentoControle.cancelamentoVO.novoObj}" action="#{CancelamentoControle.executarMontagemHistoricosParaRealizarAlteracaoSituacao}" oncomplete="#{CancelamentoControle.abrirModalPanelHistorico}" value="#{msg_botoes.btn_gravar}" render="formAviso, formHistorico, form" accesskey="2" styleClass="btn btn-dark btn-gravar" />
				<otm:commandButton style="margin-right:5px" id="estornar" rendered="#{CancelamentoControle.isPermiteEstorno}" onclick="#{rich:component('panelEstorno')}.show()" icon="#{msg_botoes.btn_icon_estornar_embutido}" value="Estornar" styleClass="btn btn-warning dark" accesskey="3" image="#{resource['/imagens/botaoEstornar.png']}" />
				<otm:commandButton style="margin-right:5px" id="consultar" action="#{CancelamentoControle.inicializarConsultar}" value="#{msg_botoes.btn_consultar}" accesskey="4" styleClass="btn btn-default btn-consultar" />
				<otm:commandButton rendered="#{!CancelamentoControle.cancelamentoVO.novoObj}" render="formTextoPadraoDeclaracao" id="imprimir" action="#{CancelamentoControle.iniciarlizarDadosParaImpressao}" oncomplete="#{rich:component('panelTextoPadraoDeclaracao')}.show()" value="Imprimir" icon="#{msg_botoes.btn_icon_imprimir_embutido}" styleClass="btn btn-default dark btn-imprimir" />
			</h:panelGroup>
		</h:form>
		<script>
    document.getElementById("form:codigoRequerimento").focus();
</script>
	</ui:define>
</ui:composition>
</html>
