<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" xmlns:otm="http://java.sun.com/jsf/composite/otm">
<h:head>
</h:head>
<ui:composition template="/visaoAdministrativo/template/visaoAdministrativa.xhtml">
	<ui:define name="tituloPagina">
		<h:outputText value="#{msg_aplic.prt_TransferenciaSaida_tituloForm}" />
	</ui:define>
	<ui:define name="conteudo">
		<rich:popupPanel styleClass="modalMaximizado" id="panelDesbloqData" onshow="document.getElementById('formDesbloqData:username').focus();" shadowOpacity="true" width="750" height="500">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="Liberar Acesso"></h:outputText>
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelinkDesbloqData" />
					<rich:componentControl target="panelDesbloqData" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formDesbloqData">
				<h:panelGroup id="dadosConsulta">
					<h:panelGroup layout="block" styleClass="col-md-6">
						<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Matricula_login}" />
						<h:inputText size="14" styleClass="form-control camposObrigatorios" value="#{TransferenciaSaidaControle.usuarioLiberarData.username}" />
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-6">
						<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Matricula_senha}" />
						<h:inputSecret styleClass="form-control camposObrigatorios" value="#{TransferenciaSaidaControle.usuarioLiberarData.senha}" size="14" />
					</h:panelGroup>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-12 text-center mt10">
					<otm:commandButton id="validar" render="form, formDesbloqData" action="#{TransferenciaSaidaControle.autenticarUsuario}" oncomplete="#{rich:component('formDesbloqData')}.hide()" icon="#{msg_botoes.btn_icon_cadeadoAberto_embutido}" value="#{msg_bt.btn_gravar}" accesskey="2" styleClass="btn btn-info" />
				</h:panelGroup>
				<h:panelGroup id="mensagemConsultaDesbloqData" columns="1" width="100%" styleClass="tabMensagens">
					<h:panelGroup columns="1" width="100%">
						<h:outputText styleClass="field control-label mensagem col-md-12" value="#{TransferenciaSaidaControle.mensagem}" />
						<h:outputText styleClass="field control-label mensagemDetalhada col-md-12" value="#{TransferenciaSaidaControle.mensagemDetalhada}" />
					</h:panelGroup>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
		<rich:popupPanel styleClass="modalMaximizado" id="panelRequerimento" onshow="document.getElementById('formRequerimento:valorConsultaRequerimento').focus();" shadowOpacity="true" width="750" height="500">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="#{msg_aplic.prt_Requerimento_tituloForm}"></h:outputText>
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelink3" />
					<rich:componentControl target="panelRequerimento" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formRequerimento">
				<h:panelGroup layout="block" styleClass="col-md-12">
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg.msg_consultar_por}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-5">
					<h:selectOneMenu styleClass="form-control campos" id="consultaRequerimento" value="#{TransferenciaSaidaControle.campoConsultaRequerimento}">
						<a4j:ajax event="change" execute="@this" render="formRequerimento:dadosConsulta" />
						<f:selectItems value="#{TransferenciaSaidaControle.tipoConsultaComboRequerimento}" />
					</h:selectOneMenu>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-5" rendered="#{!TransferenciaSaidaControle.situcaoRequerimento and !TransferenciaSaidaControle.situcaoFinanceiraRequerimento}">
					<h:inputText id="valorConsultaRequerimento" rendered="#{!TransferenciaSaidaControle.situcaoRequerimento and !TransferenciaSaidaControle.situcaoFinanceiraRequerimento}" size="14" styleClass="form-control campos" onkeypress="#{TransferenciaSaidaControle.mascaraRequerimento}" value="#{TransferenciaSaidaControle.valorConsultaRequerimento}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-5" rendered="#{TransferenciaSaidaControle.situcaoRequerimento}">
					<h:selectOneMenu styleClass="form-control campos" rendered="#{TransferenciaSaidaControle.situcaoRequerimento}" value="#{TransferenciaSaidaControle.valorConsultaRequerimento}">
						<f:selectItems value="#{TransferenciaSaidaControle.listaSelectItemSituacaoRequerimento}" />
					</h:selectOneMenu>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-5" rendered="#{TransferenciaSaidaControle.situcaoFinanceiraRequerimento}">
					<h:selectOneMenu styleClass="form-control campos" rendered="#{TransferenciaSaidaControle.situcaoFinanceiraRequerimento}" value="#{TransferenciaSaidaControle.valorConsultaRequerimento}">
						<f:selectItems value="#{TransferenciaSaidaControle.listaSelectItemSituacaoFinanceiraRequerimento}" />
					</h:selectOneMenu>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-2">
					<a4j:commandLink id="btnConsultar" render="formRequerimento:mensagemConsultaRequerimento, formRequerimento:resultadoConsultaRequerimento, formRequerimento:scResultadoRequerimento" action="#{TransferenciaSaidaControle.consultarRequerimento}" value="#{msg_botoes.btn_consultar}" styleClass="btn btn-default btn-consultar" alt="#{msg.msg_consultar_dados}">
						<span class="fa fa-search pull-left" style="margin-right: 0.8em; position: relative; top: 3px; font-size: 14px;"></span>
						<f:setPropertyActionListener target="#{TransferenciaSaidaControle.tipoRequerimento}" value="TS" />
					</a4j:commandLink>
				</h:panelGroup>
				<rich:dataTable id="resultadoConsultaRequerimento" width="100%" headerClass="consulta" rowClasses="linhaImpar, linhaPar" columnClasses="colunaAlinhamento" value="#{TransferenciaSaidaControle.listaConsultaRequerimento}" rows="5" var="requerimentoItens">
					<rich:column>
						<f:facet name="header">
							<h:outputText value="#{msg_aplic.prt_Requerimento_codigo}" />
						</f:facet>
						<h:panelGroup>
							<a4j:commandLink action="#{TransferenciaSaidaControle.selecionarRequerimento}" render="form, formMensagem" oncomplete="#{rich:component('panelRequerimento')}.hide();" value="#{requerimentoItens.codigo}" />
						</h:panelGroup>
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="#{msg_aplic.prt_Requerimento_tipoRequerimento}" />
						</f:facet>
						<h:panelGroup>
							<a4j:commandLink action="#{TransferenciaSaidaControle.selecionarRequerimento}" render="form, formMensagem" oncomplete="#{rich:component('panelRequerimento')}.hide();" value="#{requerimentoItens.tipoRequerimento.nome}" />
						</h:panelGroup>
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="#{msg_aplic.prt_Requerimento_situacao}" />
						</f:facet>
						<h:panelGroup>
							<a4j:commandLink action="#{TransferenciaSaidaControle.selecionarRequerimento}" render="form, formMensagem" oncomplete="#{rich:component('panelRequerimento')}.hide();" value="#{requerimentoItens.situacao_Apresentar}" />
						</h:panelGroup>
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="#{msg_aplic.prt_Requerimento_situacaoFinanceira}" />
						</f:facet>
						<h:panelGroup>
							<a4j:commandLink action="#{TransferenciaSaidaControle.selecionarRequerimento}" render="form, formMensagem" oncomplete="#{rich:component('panelRequerimento')}.hide();" value="#{requerimentoItens.situacaoFinanceira_Apresentar}" />
						</h:panelGroup>
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="#{msg_botoes.btn_opcoes}" />
						</f:facet>
						<otm:commandIcon action="#{TransferenciaSaidaControle.selecionarRequerimento}" render="form, formMensagem" oncomplete="#{rich:component('panelRequerimento')}.hide();" icon="#{msg_botoes.btn_icon_selecionar} iconePequeno" tooltip="Selecionar" alt="#{msg.msg_selecionar_dados}" />
					</rich:column>
					<f:facet name="footer">
						<div style="text-align: center !important">
							<rich:dataScroller align="center" boundaryControls="auto" stepControls="auto" fastControls="hide" for="formRequerimento:resultadoConsultaRequerimento" maxPages="10" id="scResultadoRequerimento" />
						</div>
					</f:facet>
				</rich:dataTable>
				<h:panelGroup id="mensagemConsultaRequerimento" columns="1" width="100%" styleClass="tabMensagens">
					<h:panelGroup columns="1" width="100%">
						<h:outputText styleClass="field control-label mensagem col-md-12" value="#{TransferenciaSaidaControle.mensagem}" />
						<h:outputText styleClass="field control-label mensagemDetalhada col-md-12" value="#{TransferenciaSaidaControle.mensagemDetalhada}" />
					</h:panelGroup>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
		<rich:popupPanel styleClass="modalMaximizado" id="panelAluno" shadowOpacity="true" width="750" height="500" onshow="document.getElementById('formAluno:valorConsultaAluno').focus();">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="#{msg_aplic.prt_AtualizacaoVencimento_consultarAluno}"></h:outputText>
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelink2" />
					<rich:componentControl target="panelAluno" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formAluno">
				<h:panelGroup layout="block" styleClass="col-md-12">
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg.msg_consultar_por}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-5">
					<h:selectOneMenu styleClass="form-control campos" id="consultaAluno" value="#{TransferenciaSaidaControle.campoConsultaAluno}">
						<f:selectItems value="#{TransferenciaSaidaControle.tipoConsultaComboAluno}" />
					</h:selectOneMenu>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-5">
					<h:inputText id="valorConsultaAluno" size="30" styleClass="form-control campos" value="#{TransferenciaSaidaControle.valorConsultaAluno}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-2">
					<otm:commandButton id="btnConsultar" render="formAluno:mensagemConsultaAluno, formAluno:resultadoConsultaAluno, formAluno:scResultadoAluno" action="#{TransferenciaSaidaControle.consultarAluno}" value="#{msg_botoes.btn_consultar}" styleClass="btn btn-default btn-consultar" alt="#{msg.msg_consultar_dados}" />
				</h:panelGroup>
				<rich:dataTable id="resultadoConsultaAluno" width="100%" headerClass="consulta" rowClasses="linhaImpar, linhaPar" columnClasses="colunaAlinhamento" value="#{TransferenciaSaidaControle.listaConsultaAluno}" rows="7" var="matriculaItens">
					<rich:column>
						<f:facet name="header">
							<h:outputText value="Matricula" />
						</f:facet>
						<h:panelGroup>
							<a4j:commandLink action="#{TransferenciaSaidaControle.selecionarAluno}" render="form, formMensagem" oncomplete="#{rich:component('panelAluno')}.hide();" value="#{matriculaItens.matricula}" />
						</h:panelGroup>
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="Nome" />
						</f:facet>
						<h:panelGroup>
							<a4j:commandLink action="#{TransferenciaSaidaControle.selecionarAluno}" render="form, formMensagem" oncomplete="#{rich:component('panelAluno')}.hide();" value="#{matriculaItens.aluno.nome}" />
						</h:panelGroup>
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="Curso" />
						</f:facet>
						<h:panelGroup>
							<a4j:commandLink action="#{TransferenciaSaidaControle.selecionarAluno}" render="form, formMensagem" oncomplete="#{rich:component('panelAluno')}.hide();" value="#{matriculaItens.curso.nome}" />
						</h:panelGroup>
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="Situação Atual Matrícula" />
						</f:facet>
						<h:panelGroup>
							<a4j:commandLink action="#{TransferenciaSaidaControle.selecionarAluno}" render="form, formMensagem" oncomplete="#{rich:component('panelAluno')}.hide();" value="#{matriculaItens.situacao_Apresentar}" />
						</h:panelGroup>
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<h:outputText value="#{msg_botoes.btn_opcoes}" />
						</f:facet>
						<otm:commandIcon action="#{TransferenciaSaidaControle.selecionarAluno}" render="form, formMensagem" oncomplete="#{rich:component('panelAluno')}.hide();" icon="#{msg_botoes.btn_icon_selecionar} iconePequeno" tooltip="Selecionar" alt="#{msg.msg_selecionar_dados}" />
					</rich:column>
					<f:facet name="footer">
						<div style="text-align: center !important">
							<rich:dataScroller align="center" for="formAluno:resultadoConsultaAluno" maxPages="10" id="scResultadoAluno" boundaryControls="auto" stepControls="auto" fastControls="hide" />
						</div>
					</f:facet>
				</rich:dataTable>
				<h:panelGroup id="mensagemConsultaAluno" columns="1" width="100%" styleClass="tabMensagens">
					<h:panelGroup columns="1" width="100%">
						<h:outputText styleClass="field control-label mensagem col-md-12" value="#{TransferenciaSaidaControle.mensagem}" />
						<h:outputText styleClass="field control-label mensagemDetalhada col-md-12" value="#{TransferenciaSaidaControle.mensagemDetalhada}" />
					</h:panelGroup>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>

		<rich:popupPanel styleClass="modalMaximizado" id="panelTextoPadraoDeclaracao" shadowOpacity="true" width="750" height="500">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="#{msg_aplic.prt_TextoPadraoDeclaracao_tituloForm}" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelinkTextoPadraoDeclaracao" />
					<rich:componentControl target="panelTextoPadraoDeclaracao" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formTextoPadraoDeclaracao">
				<h:panelGroup columns="1" width="100%" columnClasses="colunaCentralizada">
					<h:panelGroup columns="2" columnClasses="colunaCentralizada, colunaCentralizada" width="100%">
						<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_TextoPadraoDeclaracao_tituloForm}" />
						<h:panelGroup>
							<h:selectOneMenu id="textoPadrao" styleClass="form-control camposObrigatorios" value="#{TransferenciaSaidaControle.textoPadraoDeclaracao}">
								<f:selectItems value="#{TransferenciaSaidaControle.listaSelectItemTipoTextoPadrao}" />
							</h:selectOneMenu>
						</h:panelGroup>
					</h:panelGroup>
					<br />
					<h:panelGroup layout="block" styleClass="col-md-12 text-center mt10">
						<otm:commandButton id="imprimirPDF" render="formTextoPadraoDeclaracao" oncomplete="#{TransferenciaSaidaControle.contrato}" action="#{TransferenciaSaidaControle.imprimirPDF2}" styleClass="btn btn-danger" icon="#{msg_botoes.btn_icon_pdf_embutido}" value="Gerar Relatorio (PDF)" />
						<otm:commandButton id="visualizarDeclaracoes" render="formTextoPadraoDeclaracao" action="#{TransferenciaSaidaControle.visualizarImpressaoDeclaracaoAluno}" value="#{msg_aplic.prt_ImpressaoDeclaracao_visualizarDeclaracao}" icon="#{msg_botoes.btn_icon_lupa_embutido}" styleClass="btn btn-default ml5" />
					</h:panelGroup>
					<h:panelGroup columns="1" width="100%" columnClasses="colunaCentralizada">
						<rich:dataTable id="listaImpressaoDeclaracao" width="100%" headerClass="consulta" rowClasses="linhaImpar, linhaPar" columnClasses="colunaAlinhamento" value="#{TransferenciaSaidaControle.listaImpressaoDeclaracaoVOs}" rows="5" var="impressaoDeclaracaoItens" rendered="#{!empty TransferenciaSaidaControle.listaImpressaoDeclaracaoVOs}">
							<rich:column>
								<f:facet name="header">
									<h:outputText value="Data Geração" />
								</f:facet>
								<h:panelGroup>
									<h:outputText value="#{impressaoDeclaracaoItens.dataGeracao}">
										<f:convertDateTime pattern="dd/MM/yyyy HH:mm" type="date" />
									</h:outputText>
								</h:panelGroup>
							</rich:column>
							<rich:column>
								<f:facet name="header">
									<h:outputText value="#{msg_aplic.prt_ImpressaoDeclaracao_matricula}" />
								</f:facet>
								<h:panelGroup>
									<h:outputText value="#{impressaoDeclaracaoItens.matricula.matricula}" rendered="#{impressaoDeclaracaoItens.isApresentarDadosAluno}" />
									<h:outputText value="#{impressaoDeclaracaoItens.professor.matricula}" rendered="#{impressaoDeclaracaoItens.isApresentarDadosProfessor}" />
								</h:panelGroup>
							</rich:column>
							<rich:column>
								<f:facet name="header">
									<h:outputText value="#{msg_aplic.prt_ImpressaoDeclaracao_nome}" />
								</f:facet>
								<h:panelGroup>
									<h:outputText value="#{impressaoDeclaracaoItens.matricula.aluno.nome}" rendered="#{impressaoDeclaracaoItens.isApresentarDadosAluno}" />
									<h:outputText value="#{impressaoDeclaracaoItens.professor.pessoa.nome}" rendered="#{impressaoDeclaracaoItens.isApresentarDadosProfessor}" />
								</h:panelGroup>
							</rich:column>
							<rich:column>
								<f:facet name="header">
									<h:outputText value="#{msg_aplic.prt_ImpressaoDeclaracao_declaracao}" />
								</f:facet>
								<h:panelGroup>
									<h:outputText value="#{impressaoDeclaracaoItens.textoPadraoDeclaracao.descricao}" />
								</h:panelGroup>
							</rich:column>
							<rich:column>
								<f:facet name="header">
									<h:outputText value="#{msg_bt.btn_opcoes}" />
								</f:facet>
								<h:panelGroup layout="block">
									<otm:commandIcon id="imprimirDeclaracaoGeradas" render="form" action="#{TransferenciaSaidaControle.impressaoDeclaracaoContratoJaGerada}" value="#{msg_aplic.prt_Matricula_emitirContrato}" oncomplete="#{TransferenciaSaidaControle.contrato}" icon="#{msg_botoes.btn_icon_download} iconePequeno" tooltip="Realizar dowload da declaração." />
								</h:panelGroup>
							</rich:column>
						</rich:dataTable>
						<rich:dataScroller align="center" for="formTextoPadraoDeclaracao:listaImpressaoDeclaracao" maxPages="10" id="scResultadoImpressaoDeclaracao" rendered="#{!empty TransferenciaSaidaControle.listaImpressaoDeclaracaoVOs}" />
					</h:panelGroup>
					<h:panelGroup id="mensagemConsultaTextoPadraoDeclaracao" columns="1" width="100%" styleClass="tabMensagens">
						<h:panelGroup columns="1" width="100%">
							<h:outputText styleClass="field control-label mensagem col-md-12" value="#{TransferenciaSaidaControle.mensagem}" />
							<h:outputText styleClass="field control-label mensagemDetalhada col-md-12" value="#{TransferenciaSaidaControle.mensagemDetalhada}" />
						</h:panelGroup>
					</h:panelGroup>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>

		<rich:popupPanel styleClass="modalMaximizado50" id="panelAviso" shadowOpacity="true" width="400" height="200">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="AVISO" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelink" />
					<rich:componentControl target="panelAviso" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formAviso">
				<h:panelGroup columns="1" width="100%" columnClasses="colunaCentralizada">
					<h:panelGroup columns="1" width="100%">
						<h:outputText styleClass="field control-label tituloCampos" value="#{msg.msg_TransferenciaSaida_avisoConfirmacao}" />
					</h:panelGroup>
					<otm:spacer height="20" />
					<h:panelGroup layout="block" styleClass="colunaCentralizada">
						
						<otm:commandButton style="margin-right:5px" styleClass="btn btn-dark btn-sim" id="gravacao" render="form" action="#{TransferenciaSaidaControle.persistir}" alt="#{msg_botoes.btn_gravar}" oncomplete="#{rich:component('panelAviso')}.hide(), #{rich:component('panelHistorico')}.hide()" value="Gravar"/>
						<otm:commandButton style="margin-right:5px" styleClass="btn btn-danger btn-nao" id="fechar" alt="Fechar" oncomplete="#{rich:component('panelAviso')}.hide(), #{rich:component('panelHistorico')}.hide()" value="Fechar"/>
					</h:panelGroup>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>

		<rich:popupPanel styleClass="modalMaximizado" id="panelHistorico" shadowOpacity="false" width="800" height="400">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Historico_tituloForm}" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelinkPanelHistorico" />
					<rich:componentControl target="panelHistorico" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formHistorico">
				<h:panelGroup columns="1" width="100%">
					<h:panelGroup columns="1" width="100%">
						<h:outputText styleClass="field control-label tituloCampos" value="#{msg.msg_TransferenciaSaida_selecionarHistoricoTranferir}" />
					</h:panelGroup>
					<otm:spacer height="20" />
					<h:panelGroup width="100%">
						<rich:dataTable id="resultadoConsultaHistorico" width="100%" headerClass="consulta" rowClasses="linhaImpar, linhaPar" columnClasses="colunaAlinhamento" value="#{TransferenciaSaidaControle.transferenciaSaidaVO.historicoVOs}" rows="10" var="historicoItens">
							<rich:column>
								<f:facet name="header">
									<h:panelGroup>
										<h:outputText value="#{msg_aplic.prt_Trancamento_alterarSituacaoHistorico}" />
										<otm:selectBooleanCheckbox value="#{TransferenciaSaidaControle.realizarMarcacaoDesmarcacaoTodos}" style="position:relative; top:-1px; left:-5px;">
											<a4j:ajax event="change" render="formHistorico:resultadoConsultaHistorico:realizarAlteracaoSituacaoHistorico" listener="#{TransferenciaSaidaControle.executarMarcacaoDesmarcacaoTodos}" />
										</otm:selectBooleanCheckbox>
									</h:panelGroup>
								</f:facet>
								<otm:selectBooleanCheckbox id="realizarAlteracaoSituacaoHistorico" value="#{historicoItens.realizarAlteracaoSituacaoHistorico}">
									<a4j:ajax event="change" execute="@this" render="formHistorico:resultadoConsultaHistorico:realizarAlteracaoSituacaoHistorico" />
								</otm:selectBooleanCheckbox>
							</rich:column>
							<rich:column>
								<f:facet name="header">
									<h:outputText value="#{msg_aplic.prt_AbonoFalta_disciplina}" />
								</f:facet>
								<h:outputText value="#{historicoItens.disciplina.codigo} - #{historicoItens.disciplina.nome}" />
							</rich:column>
							<rich:column>
								<f:facet name="header">
									<h:outputText value="#{msg_aplic.prt_FichaAluno_frequencia}" />
								</f:facet>
								<h:outputText value="#{historicoItens.freguencia}" />
							</rich:column>
							<rich:column>
								<f:facet name="header">
									<h:outputText value="#{msg_aplic.prt_FichaAluno_mediaFinal}" />
								</f:facet>
								<h:outputText value="#{historicoItens.mediaFinal}" />
							</rich:column>
							<rich:column>
								<f:facet name="header">
									<h:outputText value="#{msg_aplic.prt_Historico_situacao}" />
								</f:facet>
								<h:outputText value="#{historicoItens.situacao_Apresentar}" />
							</rich:column>
							<f:facet name="footer">
								<div style="text-align: center !important">
									<rich:dataScroller align="center" for="formHistorico:resultadoConsultaHistorico" maxPages="10" id="scResultadoHistorico" boundaryControls="auto" stepControls="auto" fastControls="hide" />
								</div>
							</f:facet>
						</rich:dataTable>
					</h:panelGroup>
					<h:panelGroup id="mensagemFormHistorico" columns="1" width="100%" styleClass="tabMensagens">
						<h:panelGroup columns="1" width="100%">
							<h:outputText styleClass="field control-label mensagem col-md-12" value="#{TransferenciaSaidaControle.mensagem}" />
							<h:outputText styleClass="field control-label mensagemDetalhada col-md-12" value="#{TransferenciaSaidaControle.mensagemDetalhada}" />
						</h:panelGroup>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="colunaCentralizada">
						<otm:commandButton id="deferirRequerimentoHistorico" oncomplete="#{rich:component('panelAviso')}.show()" styleClass="btn btn-dark btn-gravar" render="form, formHistorico, formAviso" value="Gravar Histórico"/>
					</h:panelGroup>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>

		<rich:popupPanel styleClass="modalMaximizado" id="panelEstorno" autosized="true" shadowOpacity="false" width="600" height="200">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Trancamento_estornar}" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelinkpanelEstorno" />
					<rich:componentControl target="panelEstorno" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formEstorno">
				<h:panelGroup columns="2" width="100%">
					<h:outputText styleClass="field control-label tituloCampos" value="Motivo Estorno" />
					<h:inputTextarea styleClass="form-control camposObrigatorios" style="height:90px; width:98%" value="#{TransferenciaSaidaControle.transferenciaSaidaVO.motivoEstorno}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-12 m20">
					<h:outputText escape="false" styleClass="field control-label mensagemDetalhada col-md-12" value="#{msg.msg_TransferenciaInterna_EstornarTransferenciaInterna}" />
				</h:panelGroup>
				<otm:spacer height="8px" />
				<h:panelGroup layout="block" styleClass="col-md-12 text-center mt20">
					<otm:commandButton style="margin-right:5px" id="cancelarEstornarTrancamento" oncomplete="#{rich:component('panelEstorno')}.hide()" styleClass="btn btn-danger" value="Cancelar" icon="#{msg_botoes.btn_icon_cancelar_embutido}" />
					<otm:commandButton value="Estornar" icon="#{msg_botoes.btn_icon_estornar_embutido}" styleClass="btn btn-info" id="estornarTrancamento" action="#{TransferenciaSaidaControle.executarEstorno}" oncomplete="#{rich:component('panelEstorno')}.hide()" image="#{resource['./imagens/botaoEstornar.png']}" render="form" />
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
		<h:form id="form">
			<h:commandLink action="#{TransferenciaSaidaControle.liberarBackingBeanMemoria}" immediate="true" id="idLiberarBackingBeanMemoria" style="display: none" />
			<h:panelGroup layout="block" styleClass="col-md-12">
				<h:panelGroup layout="block" styleClass="col-md-1">
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_TransferenciaSaida_codigo}" />
					<h:inputText id="codigo" size="10" readonly="true" styleClass="form-control camposSomenteLeitura" value="#{TransferenciaSaidaControle.transferenciaSaidaVO.codigo}" />
				</h:panelGroup>
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="col-md-6 pn">
				<h:panelGroup layout="block" styleClass="col-md-12">
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_Trancamento_matricula}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-6">
					<h:inputText id="alunoMatricula" size="20" styleClass="form-control camposObrigatorios" value="#{TransferenciaSaidaControle.transferenciaSaidaVO.matricula.matricula}" disabled="#{!TransferenciaSaidaControle.transferenciaSaidaVO.novoObj}">
						<a4j:ajax event="change" listener="#{TransferenciaSaidaControle.consultarMatriculaPorChavePrimaria}" render="form" />
					</h:inputText>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-6">
					<h:inputText id="alunoNome" size="50" styleClass="form-control camposSomenteLeitura" readonly="true" value="#{TransferenciaSaidaControle.transferenciaSaidaVO.matricula.aluno.nome}" />
					<span class="append-icon right"> <otm:commandIcon id="consultaDadosAluno" alt="Localizar Aluno" render="formAluno" oncomplete="#{rich:component('panelAluno')}.show()" icon="#{msg_botoes.btn_icon_lupa_embutido}" rendered="#{TransferenciaSaidaControle.transferenciaSaidaVO.novoObj}" /> <otm:commandIcon id="limparDadosAluno" alt="Limpas Dados" action="#{TransferenciaSaidaControle.limparDadosAluno}" render="form" icon="#{msg_botoes.btn_icon_limpar_embutido}" rendered="#{TransferenciaSaidaControle.transferenciaSaidaVO.novoObj}" />
					</span>
				</h:panelGroup>
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="col-md-2">
				<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_TransferenciaSaida_codigoRequrimento}" />
				<h:panelGroup layout="block" styleClass="col-md-12 pn">
					<h:inputText id="codigoRequerimento" size="10" disabled="#{!TransferenciaSaidaControle.transferenciaSaidaVO.novoObj}" styleClass="form-control campos camposObrigatorios" value="#{TransferenciaSaidaControle.transferenciaSaidaVO.codigoRequerimento.codigo}">
						<a4j:ajax event="change" execute="@this" listener="#{TransferenciaSaidaControle.consultarRequerimentoPorChavePrimaria}" render="form" />
					</h:inputText>
					<span class="append-icon right"> <otm:commandIcon rendered="#{TransferenciaSaidaControle.transferenciaSaidaVO.novoObj}" execute="@this" alt="Consultar Requerimento" render="formRequerimento" icon="#{msg_botoes.btn_icon_lupa_embutido}" oncomplete="#{rich:component('panelRequerimento')}.show()" />
					</span>
				</h:panelGroup>
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="col-md-4">
				<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_TransferenciaSaida_descricao}" />
				<h:inputText id="descricao" size="70" maxlength="100" styleClass="form-control campos" value="#{TransferenciaSaidaControle.transferenciaSaidaVO.descricao}" />
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="col-md-6">
				<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_TransferenciaSaida_instituicaoDestino}" />
				<h:inputText id="instituicaoDestino" size="70" maxlength="100" styleClass="form-control campos" value="#{TransferenciaSaidaControle.transferenciaSaidaVO.instituicaoDestino}" />
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="col-md-6">
				<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_TransferenciaSaida_cursoDestino}" />
				<h:inputText id="cursoDestino" size="70" maxlength="100" styleClass="form-control campos" value="#{TransferenciaSaidaControle.transferenciaSaidaVO.cursoDestino}" />
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="col-md-12 pn">
				<h:panelGroup layout="block" styleClass="col-md-6">
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_TransferenciaSaida_justiticativa}" />
					<h:inputText id="justiticativa" size="70" maxlength="100" styleClass="form-control campos" value="#{TransferenciaSaidaControle.transferenciaSaidaVO.justiticativa}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-6">
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_TransferenciaSaida_tipoJustificativa}" />
					<h:selectOneMenu id="tipoJustificativa" styleClass="form-control camposObrigatorios" value="#{TransferenciaSaidaControle.transferenciaSaidaVO.tipoJustificativa}">
						<f:selectItems value="#{TransferenciaSaidaControle.listaSelectItemTipoJustificativaTransferenciaSaida}" />
					</h:selectOneMenu>
				</h:panelGroup>
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="col-md-6">
				<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_TransferenciaSaida_responsavelAutorizacao}" />
				<h:inputText id="responsavelAutorizacao_nomePessoa" styleClass="form-control camposSomenteLeitura" readonly="true" size="54" value="#{TransferenciaSaidaControle.transferenciaSaidaVO.responsavelAutorizacao.nome}" />
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="col-md-2" rendered="#{!TransferenciaSaidaControle.permiteAlterarData}">
				<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_TransferenciaSaida_data}" />
				<otm:calendar id="data" readonly="true" value="#{TransferenciaSaidaControle.transferenciaSaidaVO.data}" disabled="true" rendered="#{!TransferenciaSaidaControle.permiteAlterarData}" />
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="col-md-2" rendered="#{TransferenciaSaidaControle.permiteAlterarData}">
				<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_TransferenciaSaida_data}" />
				<otm:calendar id="dataAlteracao" value="#{TransferenciaSaidaControle.transferenciaSaidaVO.data}" rendered="#{TransferenciaSaidaControle.permiteAlterarData}" />
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="row"/>
			<h:panelGroup layout="block" styleClass="col-md-12 text-center" rendered="#{!TransferenciaSaidaControle.permiteAlterarData}">
				<otm:commandButton id="desbloq" icon="#{msg_botoes.btn_icon_cadeadoAberto_embutido}" value="Liberar Acesso" styleClass="btn btn-primary dark" action="#{TransferenciaSaidaControle.executaDesbloqueioAlterarData}" oncomplete="#{rich:component('panelDesbloqData')}.show()" render="formDesbloqData, form" rendered="#{!TransferenciaSaidaControle.permiteAlterarData}" image="#{resource['/imagens/botaoPermitirRed.png']}" />
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="col-md-3" rendered="#{TransferenciaSaidaControle.transferenciaSaidaVO.estornado}">
				<h:outputText rendered="#{TransferenciaSaidaControle.transferenciaSaidaVO.estornado}" styleClass="field control-label tituloCampos" value="Data Estorno" />
				<h:inputText readonly="true" styleClass="form-control camposSomenteLeitura" size="10" value="#{TransferenciaSaidaControle.transferenciaSaidaVO.dataEstorno}">
					<f:convertDateTime pattern="dd/MM/yyyy" />
				</h:inputText>
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="col-md-3" rendered="#{TransferenciaSaidaControle.transferenciaSaidaVO.estornado}">
				<h:outputText styleClass="field control-label tituloCampos" value="Resp. Estorno" />
				<h:inputText readonly="true" styleClass="form-control camposSomenteLeitura" size="40" value="#{TransferenciaSaidaControle.transferenciaSaidaVO.responsavelEstorno.nome}" />
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="col-md-6" rendered="#{TransferenciaSaidaControle.transferenciaSaidaVO.estornado}">
				<h:outputText rendered="#{TransferenciaSaidaControle.transferenciaSaidaVO.estornado}" styleClass="field control-label tituloCampos" value="Motivo Estorno" />
				<h:inputTextarea rendered="#{TransferenciaSaidaControle.transferenciaSaidaVO.estornado}" styleClass="form-control camposSomenteLeitura" style="height:90px; width:450px" value="#{TransferenciaSaidaControle.transferenciaSaidaVO.motivoEstorno}" readonly="true" />
			</h:panelGroup>
			<h:panelGroup id="msgs" columns="1" width="100%" styleClass="tabMensagens">
				<h:panelGroup columns="1" width="100%" columnClasses="colunaEsquerda">
					<h:outputText styleClass="field control-label mensagem col-md-12" value="#{TransferenciaSaidaControle.mensagem}" />
					<h:outputText styleClass="field control-label mensagemDetalhada col-md-12" value="#{TransferenciaSaidaControle.mensagemDetalhada}" />
				</h:panelGroup>
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="barraFlutuanteInferior">
				<otm:commandButton style="margin-right:5px" id="novo" immediate="true" action="#{TransferenciaSaidaControle.novo}" value="#{msg_botoes.btn_novo}" accesskey="1" styleClass="btn btn-info btn-novo" />
				<otm:commandButton style="margin-right:5px" id="salvar" rendered="#{!TransferenciaSaidaControle.transferenciaSaidaVO.estornado}" action="#{TransferenciaSaidaControle.executarMontagemHistoricosParaRealizarAlteracaoSituacao}" oncomplete="#{TransferenciaSaidaControle.abrirModalPanelHistorico}" render="formHistorico, form" value="#{msg_botoes.btn_gravar}" accesskey="2" styleClass="btn btn-dark btn-gravar" />
				<otm:commandButton style="margin-right:5px" id="consultar" immediate="true" action="#{TransferenciaSaidaControle.inicializarConsultar}" value="#{msg_botoes.btn_consultar}" accesskey="4" styleClass="btn btn-default btn-consultar" />
				<otm:commandButton style="margin-right:5px" rendered="#{TransferenciaSaidaControle.apresentarBotaoEstornar}" render="formEstorno" id="estornar" icon="#{msg_botoes.btn_icon_estornar_embutido}" styleClass="btn btn-info" value="Estornar" oncomplete="#{rich:component('panelEstorno')}.show()" image="#{resource['./imagens/botaoEstornar.png']}" />
				<otm:commandButton rendered="#{!TransferenciaSaidaControle.transferenciaSaidaVO.novoObj}" render="formTextoPadraoDeclaracao" id="imprimir" onclick="#{rich:component('panelTextoPadraoDeclaracao')}.show()" icon="#{msg_botoes.btn_icon_imprimir_embutido}" value="Imprimir" styleClass="btn btn-success" />
			</h:panelGroup>
		</h:form>
		<script>
    document.getElementById("form:codigoRequerimento").focus();
</script>
	</ui:define>
</ui:composition>
</html>
