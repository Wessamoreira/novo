<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" xmlns:otm="http://java.sun.com/jsf/composite/otm">
<h:head>
	<script>
		window.onload = function() {
			document.getElementById("form:local").focus();
		}
	</script>
</h:head>
<ui:composition template="/visaoAdministrativo/template/visaoAdministrativa.xhtml">
	<ui:define name="tituloPagina">
		<h:outputText value="#{msg_aplic.prt_LocalAula_tituloForm}" />
	</ui:define>

	<ui:define name="conteudo">
		<h:form id="form">
			<h:panelGroup layout="block" styleClass="row" id="panelGridForm">
				<h:panelGroup layout="block" styleClass="row">
					<rich:tabPanel id="richTab" width="100%" activeTabClass="true" headerAlignment="left" switchType="client">
						<rich:tab header="Dados Básicos">
							<h:panelGroup layout="block" styleClass="row" id="dados">
								<h:panelGroup layout="block" styleClass="col-md-6">
									<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_MapaLocalAulaTurma_unidadeEnsino}" />
									<h:selectOneMenu styleClass="form-control campos" value="#{LocalAulaControle.localAulaVO.unidadeEnsino.codigo}">
										<f:selectItems value="#{LocalAulaControle.listaSelectItemUnidadeEnsino}" />
									</h:selectOneMenu>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-6">
									<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_LocalAula_local}" />
									<h:inputText id="local" size="70" maxlength="100" styleClass="form-control camposObrigatorios" value="#{LocalAulaControle.localAulaVO.local}" />
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-4">
									<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_LocalAula_endereco}" />
									<h:inputText size="70" maxlength="100" styleClass="form-control camposObrigatorios" value="#{LocalAulaControle.localAulaVO.endereco}" />
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-2">
									<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_LocalAula_telefone}" />
									<h:inputText size="14" id="telefone" maxlength="14" onkeypress="return mascara(this.form, 'form:telefone', '(99)9990-99999', event);" styleClass="form-control campos" value="#{LocalAulaControle.localAulaVO.telefone}" />
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-2">
									<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_LocalAula_situacao}" />
									<h:inputText size="20" maxlength="100" id="situacao" readonly="true" styleClass="form-control camposSomenteLeitura" value="#{LocalAulaControle.localAulaVO.situacao.valorApresentar}" />
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="col-md-4">
									<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_LocalAula_observacao}" />
									<h:inputText size="70" maxlength="255" styleClass="form-control campos" value="#{LocalAulaControle.localAulaVO.observacao}" />
								</h:panelGroup>
								<h:panelGroup id="salas" columns="1" headerClass="consulta" width="100%">
									<h:panelGroup layout="block" styleClass="col-md-12 title mt10">
										<h:outputText value="#{msg_aplic.prt_SalaLocalAula_tituloForm}" />
									</h:panelGroup>
									<h:panelGroup columns="6" id="sala" columnClasses="colunaVerticalmenteCentralizada, colunaVerticalmenteCentralizada, colunaVerticalmenteCentralizada, colunaVerticalmenteCentralizada, colunaVerticalmenteCentralizada" width="100%">
										<h:panelGroup layout="block" styleClass="col-md-4">
											<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_SalaLocalAula_sala}" />
											<h:inputText size="30" maxlength="100" styleClass="form-control camposObrigatorios" value="#{LocalAulaControle.salaLocalAulaVO.sala}" />
										</h:panelGroup>
										<h:panelGroup layout="block" styleClass="col-md-2">
											<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_SalaLocalAula_capacidade}" />
											<h:inputText size="10" onkeypress="return somenteNumero(event);" maxlength="12" styleClass="form-control camposObrigatorios" value="#{LocalAulaControle.salaLocalAulaVO.capacidade}" />
										</h:panelGroup>
										<h:panelGroup layout="block" styleClass="col-md-4">
											<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_SalaLocalAula_naoControlarChoqueSala}" />
											<h:panelGroup layout="block" styleClass="col-md-12 pn">
												<otm:selectBooleanCheckbox id="naoControlarChoqueSala" value="#{LocalAulaControle.salaLocalAulaVO.naoControlarChoqueSala}">
												</otm:selectBooleanCheckbox>
											</h:panelGroup>
										</h:panelGroup>
										<h:panelGroup style="margin:10px" layout="block" styleClass="col-md-12 text-center">
											<otm:commandButton render="salas, panelGridMensagens" action="#{LocalAulaControle.adicionarSalaLocaAula}" icon="#{msg_botoes.btn_icon_adicionar_embutido}" styleClass="btn btn-primary dark" value="adicionar Sala local aula" title="#{msg.msg_adicionar_dados}" />
										</h:panelGroup>
									</h:panelGroup>
									<rich:dataTable id="salasList" width="100%" headerClass="consulta" rowClasses="linhaImpar, linhaPar" columnClasses="colunaAlinhamento" value="#{LocalAulaControle.localAulaVO.salaLocalAulaVOs}" rendered="#{!empty LocalAulaControle.localAulaVO.salaLocalAulaVOs}" var="salaLocalAulaItem">
										<rich:column>
											<f:facet name="header">
												<h:outputText value="#{msg_aplic.prt_LayoutEtiqueta_ordem}" />
											</f:facet>
											<h:panelGroup layout="block">
												<h:outputText styleClass="field control-label tituloCampos" value="#{salaLocalAulaItem.ordem}" />
											</h:panelGroup>
										</rich:column>
										<rich:column>
											<f:facet name="header">
												<h:outputText value="#{msg_aplic.prt_SalaLocalAula_sala}" />
											</f:facet>
											<h:outputText value="#{salaLocalAulaItem.sala}" />
										</rich:column>
										<rich:column>
											<f:facet name="header">
												<h:outputText value="#{msg_aplic.prt_SalaLocalAula_capacidade}" />
											</f:facet>
											<h:inputText id="capacidade" size="10" onkeypress="return somenteNumero(event);" maxlength="12" styleClass="form-control camposObrigatorios" value="#{salaLocalAulaItem.capacidade}" />
										</rich:column>
										<rich:column>
											<f:facet name="header">
												<h:outputText value="#{msg_aplic.prt_SalaLocalAula_naoControlarChoqueSala}" />
											</f:facet>
											<otm:selectBooleanCheckbox id="naoControlarChoqueSalaList" value="#{salaLocalAulaItem.naoControlarChoqueSala}">
												<a4j:ajax event="click" render="form:salasList:naoControlarChoqueSalaList" />
											</otm:selectBooleanCheckbox>
										</rich:column>
										<rich:column>
											<f:facet name="header">
												<h:outputText value="#{msg_aplic.prt_SalaLocalAula_inativo}" />
											</f:facet>
											<otm:selectBooleanCheckbox id="inativo" disabled="#{LocalAulaControle.localAulaVO.situacao eq 'INATIVO'}" value="#{salaLocalAulaItem.inativo}">
												<a4j:ajax event="click" render="form:salasList:naoControlarChoqueSalaList" />
											</otm:selectBooleanCheckbox>
										</rich:column>
										<rich:column style="text-align:center">
											<f:facet name="header">
												<h:outputText value="#{msg_bt.btn_opcoes}" />
											</f:facet>
<!-- 											#{row ne 0} -->
<!-- 											#{row ne (LocalAulaControle.tamanhoListaSalaLocalAula - 1)} -->
											<otm:commandIcon rendered="#{row ne 0}" render="form" icon="#{msg_botoes.btn_icon_subir} iconePequeno" tooltip="Subir" action="#{LocalAulaControle.realizarSubirOrdem}" />
											<otm:commandIcon rendered="#{row ne (LocalAulaControle.tamanhoListaSalaLocalAula - 1)}" render="form" tooltip="Descer" icon="#{msg_botoes.btn_icon_descer} iconePequeno" action="#{LocalAulaControle.realizarDescerOrdem}" />
											<otm:commandIcon render="salas, panelGridMensagens" action="#{LocalAulaControle.removerSalaLocaAula}" icon="#{msg_botoes.btn_icon_remover} iconePequeno" title="#{msg.msg_excluir_dados}" />
										</rich:column>
									</rich:dataTable>
								</h:panelGroup>
							</h:panelGroup>
						</rich:tab>
						<rich:tab id="richTabArquivosAluno" header="Arquivos Diponibilizados para Alunos">
							<h:panelGroup layout="block" styleClass="col-md-6">
								<h:outputText styleClass="field control-label tituloCampos" value="Descrição" />
								<h:inputText id="descricaoMaterialAluno" size="80" maxlength="160" styleClass="form-control camposObrigatorios" value="#{LocalAulaControle.materialAlunoVO.descricao}" />
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="col-md-12">
								<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_UploadArquivos_escolherArquivo}" />
								<rich:fileUpload listHeight="100" listWidth="300" allowFlash="false" noDuplicate="true" fileUploadListener="#{LocalAulaControle.upLoadArquivoAluno}" addLabel="Selecionar Arquivo" acceptedTypes="gif, png, jpg, jpeg, bmp, JPEG, JPG, PNG, GIF, BMP, pdf, txt, doc, docx, xls, xlsx" maxFilesQuantity="1" cancelEntryControlLabel="Cancelar" doneLabel="Pronto" sizeErrorLabel="Arquivo não Enviado. Tamanho Máximo Permitido #{LocalAulaControle.configuracaoGeralPadraoSistema.tamanhoMaximoUpload}MB." progressLabel="Enviando" stopControlLabel="Parar" uploadControlLabel="Enviar" clearAllControlLabel="Limpar lista" transferErrorLabel="Falha de Transmissão" stopEntryControlLabel="Parar" immediateUpload="true" id="uploadAluno" onupload="return validarTamanhoUploadArquivoExtensao(event, 'form:upload', #{LocalAulaControle.configuracaoGeralPadraoSistema.tamanhoMaximoUpload}, 'gif, png, jpg, jpeg, bmp, JPEG, JPG, PNG, GIF, BMP, pdf, txt, doc, docx, xls, xlsx');" clearLabel=""
									ontyperejected="alert('Arquivo não Enviado. Formato inválido do arquivo.');" sizeExceededLabel="alert('Arquivo não Enviado. Tamanho Máximo Permitido #{LocalAulaControle.configuracaoGeralPadraoSistema.tamanhoMaximoUpload}MB.');">
									<a4j:ajax event="uploadcomplete" render="assinatura, mensagem" />
									<a4j:ajax event="typerejected" oncomplete="alert('Arquivo não Enviado. Formato inválido do arquivo.');" render="upload" />
								</rich:fileUpload>
								<otm:spacer width="30px" />
								<h:outputText styleClass="field control-label tituloCampos" value="#{LocalAulaControle.tamanhoMaximoUpload}" />
							</h:panelGroup>
							<h:panelGroup style="margin:10px" layout="block" styleClass="col-md-12 text-center">
								<otm:commandButton id="adicionarMaterialAluno" title="Adicionar" render="form:richTabArquivosAluno, panelGridMensagens" action="#{LocalAulaControle.adicionarMaterialAluno}" value="adicionar Material Aluno" icon="#{msg_botoes.btn_icon_adicionar_embutido}" styleClass="btn btn-primary dark " />
							</h:panelGroup>
							<h:panelGroup columns="1" width="100%" styleClass="tabFormSubordinada">
								<rich:dataTable id="listaMaterialAluno" width="100%" headerClass="subordinado" styleClass="tabFormSubordinada" rowClasses="linhaImparSubordinado, linhaParSubordinado" rows="10" columnClasses="colunaAlinhamento" value="#{LocalAulaControle.localAulaVO.materialAlunoVOs}" var="materialAlunoVOItem">
									<rich:column>
										<f:facet name="header">
											<h:outputText value="#{msg_aplic.prt_Curso_nrRegistroInterno}" />
										</f:facet>
										<h:outputText value="#{materialAlunoVOItem.descricao}" />
									</rich:column>
									<rich:column>
										<f:facet name="header">
											<h:outputText value="#{msg_aplic.prt_Curso_arquivo}" />
										</f:facet>
										<h:outputText value="#{materialAlunoVOItem.arquivoVO.descricao}" />
									</rich:column>
									<rich:column>
										<f:facet name="header">
											<h:outputText value="Download" style="campos" />
										</f:facet>
										<otm:commandIcon oncomplete="location.href='../../DownloadSV'" title="Download Arquivo" icon="#{msg_botoes.btn_icon_pdf} iconePequeno" action="#{LocalAulaControle.getCaminhoServidorDownloadAluno}" />
									</rich:column>
									<rich:column>
										<f:facet name="header">
											<h:outputText value="#{msg_bt.btn_opcoes}" />
										</f:facet>
										<h:panelGroup>
											<otm:commandIcon id="removerMaterialAluno" title="Remover" render="form" action="#{LocalAulaControle.removerMaterialAluno}" accesskey="8" icon="#{msg_botoes.btn_icon_remover} iconePequeno" />
										</h:panelGroup>
									</rich:column>
								</rich:dataTable>
							</h:panelGroup>
						</rich:tab>
						<rich:tab header="Arquivos Disponibilizados para Professores">
							<h:panelGroup layout="block" styleClass="col-md-6">
								<h:outputText styleClass="field control-label tituloCampos" value="Descrição" />
								<h:inputText id="descricaoMaterialProfessor" size="80" maxlength="160" styleClass="form-control camposObrigatorios" value="#{LocalAulaControle.materialProfessorVO.descricao}" />
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="col-md-12">
								<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_UploadArquivos_escolherArquivo}" />
								<rich:fileUpload listHeight="100" listWidth="300" allowFlash="false" noDuplicate="true" fileUploadListener="#{LocalAulaControle.upLoadArquivoProfessor}" addLabel="Selecionar Arquivo" acceptedTypes="gif, png, jpg, jpeg, bmp, JPEG, JPG, PNG, GIF, BMP, pdf, txt, doc, docx, xls, xlsx" maxFilesQuantity="1" cancelEntryControlLabel="Cancelar" doneLabel="Pronto" sizeErrorLabel="Arquivo não Enviado. Tamanho Máximo Permitido #{LocalAulaControle.configuracaoGeralPadraoSistema.tamanhoMaximoUpload}MB." progressLabel="Enviando" stopControlLabel="Parar" uploadControlLabel="Enviar" clearAllControlLabel="Limpar lista" transferErrorLabel="Falha de Transmissão" stopEntryControlLabel="Parar" immediateUpload="true" id="uploadProfessor" onupload="return validarTamanhoUploadArquivoExtensao(event, 'form:upload', #{LocalAulaControle.configuracaoGeralPadraoSistema.tamanhoMaximoUpload}, 'gif, png, jpg, jpeg, bmp, JPEG, JPG, PNG, GIF, BMP, pdf, txt, doc, docx, xls, xlsx');" clearLabel=""
									ontyperejected="alert('Arquivo não Enviado. Formato inválido do arquivo.');" sizeExceededLabel="alert('Arquivo não Enviado. Tamanho Máximo Permitido #{LocalAulaControle.configuracaoGeralPadraoSistema.tamanhoMaximoUpload}MB.');">
									<a4j:ajax event="uploadcomplete" render="assinatura, mensagem" />
									<a4j:ajax event="typerejected" oncomplete="alert('Arquivo não Enviado. Formato inválido do arquivo.');" render="upload" />
								</rich:fileUpload>
								<otm:spacer width="30px" />
								<h:outputText styleClass="field control-label tituloCampos" value="#{LocalAulaControle.tamanhoMaximoUpload}" />
							</h:panelGroup>
							<h:panelGroup style="margin:10px" layout="block" styleClass="col-md-12 text-center">
								<otm:commandButton id="adicionarMaterialProfessor" title="Adicionar" render="form" action="#{LocalAulaControle.adicionarMaterialProfessor}" accesskey="8" value="adicionar Material Aluno" icon="#{msg_botoes.btn_icon_adicionar_embutido}" styleClass="btn btn-primary dark " />
							</h:panelGroup>
							<h:panelGroup columns="1" width="100%" styleClass="tabFormSubordinada">
								<rich:dataTable id="listaMaterialProfessor" width="100%" headerClass="subordinado" styleClass="tabFormSubordinada" rowClasses="linhaImparSubordinado, linhaParSubordinado" rows="10" columnClasses="colunaAlinhamento" value="#{LocalAulaControle.localAulaVO.materialProfessorVOs}" var="materialProfessorVOItem">
									<rich:column>
										<f:facet name="header">
											<h:outputText value="#{msg_aplic.prt_Curso_nrRegistroInterno}" />
										</f:facet>
										<h:outputText value="#{materialProfessorVOItem.descricao}" />
									</rich:column>
									<rich:column>
										<f:facet name="header">
											<h:outputText value="#{msg_aplic.prt_Curso_arquivo}" />
										</f:facet>
										<h:outputText value="#{materialProfessorVOItem.arquivoVO.descricao}" />
									</rich:column>
									<rich:column>
										<f:facet name="header">
											<h:outputText value="Download" style="campos" />
										</f:facet>
										<otm:commandIcon oncomplete="location.href='../../DownloadSV'" title="Download Arquivo" icon="#{msg_botoes.btn_icon_pdf} iconePequeno" action="#{LocalAulaControle.getCaminhoServidorDownloadProfessor}" />
									</rich:column>
									<rich:column>
										<f:facet name="header">
											<h:outputText value="#{msg_bt.btn_opcoes}" />
										</f:facet>
										<h:panelGroup>
											<otm:commandIcon id="removerMaterialProfessor" title="Remover" render="form" action="#{LocalAulaControle.removerMaterialProfessor}" accesskey="8" icon="#{msg_botoes.btn_icon_remover} iconePequeno" />
										</h:panelGroup>
									</rich:column>
								</rich:dataTable>
							</h:panelGroup>
						</rich:tab>
					</rich:tabPanel>
				</h:panelGroup>
				<h:panelGroup id="panelGridMensagens" layout="block" styleClass="row">
					<otm:mensagem bean="#{LocalAulaControle}"></otm:mensagem>
				</h:panelGroup>
				<h:panelGroup id="btns" layout="block" styleClass="barraFlutuanteInferior">
					<otm:commandButton id="novo" render="form" action="#{LocalAulaControle.novo}" styleClass="btn btn-info btn-novo" value="#{msg_botoes.btn_novo}" accesskey="1" />
					<otm:spacer width="5px"></otm:spacer>
					<otm:commandButton id="gravar" render="form:panelGridMensagens" icon="#{msg_botoes.btn_icon_gravar_embutido}" action="#{LocalAulaControle.persistir}" styleClass="btn btn-dark btn-gravar" value="#{msg.msg_gravar_dados}" accesskey="2" />
					<otm:spacer width="5px"></otm:spacer>
					<otm:commandButton id="ativar" rendered="#{LocalAulaControle.localAulaVO.situacao eq'INATIVO'}" render="panelGridMensagens, situacao, salasList" icon="#{msg_botoes.btn_icon_ativar_embutido}" styleClass="btn btn-info" action="#{LocalAulaControle.ativar}" value="Ativar" accesskey="3" />
					<otm:spacer width="5px" rendered="#{LocalAulaControle.localAulaVO.situacao eq'INATIVO'}"></otm:spacer>
					<otm:commandButton id="inativar" rendered="#{LocalAulaControle.localAulaVO.situacao eq 'ATIVO' and !LocalAulaControle.localAulaVO.novoObj}" render="panelGridMensagens, situacao, salasList" icon="#{msg_botoes.btn_icon_inativar_embutido}" styleClass="btn btn-danger" action="#{LocalAulaControle.inativar}" value="Inativar" accesskey="4" />
					<otm:spacer width="5px" rendered="#{LocalAulaControle.localAulaVO.situacao eq 'ATIVO' and !LocalAulaControle.localAulaVO.novoObj}"></otm:spacer>
					<otm:commandButton id="consultar" value="#{msg_bt.btn_consultar}" action="#{LocalAulaControle.irPaginaConsulta}" styleClass="btn btn-default btn-consultar" alt="#{msg.msg_consultar_dados}" accesskey="5" />
				</h:panelGroup>
			</h:panelGroup>
		</h:form>
	</ui:define>
</ui:composition>
</html>