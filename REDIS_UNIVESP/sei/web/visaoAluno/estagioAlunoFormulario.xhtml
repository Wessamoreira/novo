<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" xmlns:otm="http://java.sun.com/jsf/composite/otm" xmlns:otm2="http://www.otimize-ti.com.br">
<h:head>
</h:head>
<ui:composition template="/visaoAluno/template/visaoAluno.xhtml">
	<ui:define name="tituloNavegador">
		<h:outputText value="#{msg_aplic.prt_Estagio_tituloForm}" />
	</ui:define>
	<ui:define name="subTituloPagina">
		<h:form id="formTitulo">
			<h:panelGroup layout="block" styleClass="row">
				<h:panelGroup layout="block" styleClass="col-md-11">
					<h1 class="#{LoginControle.appMovel ? 'h5 pl-3' :'h4'} mb-0 pb-2 w-100">
						<h:outputText value="#{msg_aplic.prt_Estagio_tituloForm}" />
					</h1>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-1" rendered="#{!empty EstagioObrigatorioControle.matricula.salaAulaBlackboardVO.linkSalaAulaBlackboard}">
					<a4j:commandButton image="#{resource['/imagens/blackboard_logo.png']}" style="width:40px; height:40px;" action="#{EstagioObrigatorioControle.realizarNavegacaoSalaAulaBlackboardPorEstagio}" oncomplete="navegacaoGoogleMeet('#{EstagioObrigatorioControle.matricula.salaAulaBlackboardVO.linkSalaAulaBlackboard}')" />
				</h:panelGroup>
			</h:panelGroup>
		</h:form>
	</ui:define>
	<ui:define name="conteudo">
		<h:form id="form">

			<h:panelGroup id="formEstagioRelatorioFinal" rendered="#{EstagioObrigatorioControle.estagioVO.tipoEstagio.tipoObrigatorio}">
				<h:panelGroup layout="block" styleClass="row">
					<h:panelGroup layout="block" styleClass="col-md-4">
						<h:outputText styleClass="field control-label tituloCampos" value="Aluno" />
						<!-- 				<h:inputText styleClass="form-control camposSomenteLeitura" disabled="true" value="#{EstagioObrigatorioControle.estagioVO.matriculaVO.matricula}" /> -->
						<h:inputText styleClass="form-control camposSomenteLeitura" disabled="true" value="#{EstagioObrigatorioControle.estagioVO.matriculaVO.aluno.nome}" />
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-4">
						<h:outputText styleClass="field control-label tituloCampos" value="Componente Estágio" />
						<h:inputText styleClass="form-control camposSomenteLeitura" disabled="true" value="#{EstagioObrigatorioControle.estagioVO.tipoEstagio.valorApresentar}" />
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-4">
						<h:outputText styleClass="field control-label tituloCampos" value="Situação Estágio" />
						<h:inputText styleClass="form-control camposSomenteLeitura" disabled="true" value="#{EstagioObrigatorioControle.estagioVO.situacaoEstagioEnum.valorApresentar}" />
					</h:panelGroup>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-12">
					<otm:spacer width="100%" />
				</h:panelGroup>


				<h:panelGroup layout="block" styleClass="col-md-12 text-left">
					<otm2:questionarioRespostaPaginador bean="#{EstagioObrigatorioControle}" page="#{EstagioObrigatorioControle.page}" objetoOrigem="#{EstagioObrigatorioControle.estagioVO.questionarioRespostaOrigemUltimaVersao}" disabled="#{!EstagioObrigatorioControle.estagioVO.situacaoEstagioEnum.realizando and !EstagioObrigatorioControle.estagioVO.situacaoEstagioEnum.emCorrecao}" renderedChecklist="#{EstagioObrigatorioControle.estagioVO.situacaoEstagioEnum.emCorrecao}" desabilitarRespostaChecklist="true" renderedAnexoPergunta="#{EstagioObrigatorioControle.estagioVO.situacaoEstagioEnum.realizando or EstagioObrigatorioControle.estagioVO.situacaoEstagioEnum.emCorrecao}" renderedPrefixo="true" rowTextArea="15" />
				</h:panelGroup>

				<h:panelGroup layout="block" styleClass="col-md-12" rendered="#{!EstagioObrigatorioControle.estagioVO.tipoEstagio.tipoObrigatorio and !EstagioObrigatorioControle.estagioVO.situacaoEstagioEnum.emAnalise and !EstagioObrigatorioControle.estagioVO.situacaoEstagioEnum.emCorrecao}">
					<h:outputText styleClass="field control-label btn-block border-bottom" value="Motivo Retorno" />
					<a4j:repeat type="definitions" rowKeyVar="rowlistaMotivos" id="listaMotivos" var="itensMotivos" value="#{EstagioObrigatorioControle.estagioVO.questionarioRespostaOrigemUltimaVersao.questionarioRespostaOrigemMotivosPadroesEstagioVOs}">
						<h:panelGroup layout="block" styleClass="col-md-6">
							<h:outputText value="#{itensMotivos.motivosPadroesEstagioVO.descricao}" styleClass="field control-label tituloCampos" />
							<otm:selectBooleanCheckbox id="#{id}_checklist" styleClass="form-control camposSomenteLeitura" disabled="true" value="#{itensMotivos.selecionado}" />
						</h:panelGroup>
					</a4j:repeat>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-12">
					<otm:spacer width="100%" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-12" rendered="#{!EstagioObrigatorioControle.estagioVO.tipoEstagio.tipoObrigatorio and !EstagioObrigatorioControle.estagioVO.situacaoEstagioEnum.emAnalise and !EstagioObrigatorioControle.estagioVO.situacaoEstagioEnum.emCorrecao}">
					<h:outputText styleClass="field control-label btn-block border-bottom" value="Consideração Final" />
					<h:inputTextarea styleClass="form-control camposSomenteLeitura" value="#{EstagioObrigatorioControle.estagioVO.questionarioRespostaOrigemUltimaVersao.observacaoFinal}" disabled="true" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-12">
					<otm:spacer width="100%" />
					<otm:spacer width="100%" />
				</h:panelGroup>


				<h:panelGroup styleClass="barraFlutuanteInferior " layout="block">
					<h:panelGroup styleClass="float-left mr20">
						<otm:commandButton id="btnVoltar" render="form:formEstagioRelatorioFinal" action="#{EstagioObrigatorioControle.voltarPaginadorQuestionario(EstagioObrigatorioControle.estagioVO.questionarioRespostaOrigemUltimaVersao, EstagioObrigatorioControle.page)}" value="Pergunta Anterior" icon="#{msg_botoes.btn_icon_anterior}"  rendered="#{EstagioObrigatorioControle.page > 1}" />
					</h:panelGroup>
					<otm:commandButton id="btnGravaRelatorioFinalEstagio" render="formEstagioRelatorioFinal" action="#{EstagioObrigatorioControle.realizarPersitenciaFormularioAluno}" value="#{msg_botoes.btn_gravar}" styleClass="btn btn-dark btn-gravar" style="margin-left:10px" rendered="#{EstagioObrigatorioControle.estagioVO.situacaoEstagioEnum.realizando or EstagioObrigatorioControle.estagioVO.situacaoEstagioEnum.emCorrecao}" />
					<otm:commandButton id="btnConfirmaRelatorioFinalEstagio" render="formEstagioRelatorioFinal" action="#{EstagioObrigatorioControle.realizarConfirmacaoRelatorioFinalEstagio}" value="Solicitar Avaliação" styleClass="btn btn-dark btn-gravar" style="margin-left:10px" rendered="#{EstagioObrigatorioControle.estagioVO.situacaoEstagioEnum.realizando or EstagioObrigatorioControle.estagioVO.situacaoEstagioEnum.emCorrecao}" />
					<otm:commandButton id="fecharRelatorioFinalEstagio" value="Voltar" action="#{EstagioObrigatorioControle.fecharFormularioFinalEstagio}" icon="#{msg_botoes.btn_icon_voltar}" style="margin-left:10px" tooltip="Voltar para Pagina Inicial Estágio" />
					<h:panelGroup styleClass="float-right mr20">
						<otm:commandButton id="btnAvancar" render="form:formEstagioRelatorioFinal" action="#{EstagioObrigatorioControle.avancarPaginadorQuestionario(EstagioObrigatorioControle.estagioVO.questionarioRespostaOrigemUltimaVersao,EstagioObrigatorioControle.page)}" value="Próxima Pergunta" styleClass="btn btn-default" icon="#{msg_botoes.btn_icon_proximo}" rendered="#{EstagioObrigatorioControle.estagioVO.questionarioRespostaOrigemUltimaVersao.perguntaRespostaOrigemVOs.size() gt EstagioObrigatorioControle.page }"/>
					</h:panelGroup>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-12">
					<otm:mensagem bean="#{EstagioObrigatorioControle}"></otm:mensagem>
				</h:panelGroup>
			</h:panelGroup>
			<h:panelGroup id="formVisualizarFormAproveitamentoEquivalencia" rendered="#{!EstagioObrigatorioControle.estagioVO.tipoEstagio.tipoObrigatorio}">
				<h:panelGroup layout="block" styleClass="row">
					<h:panelGroup layout="block" styleClass="col-md-4">
						<h:outputText styleClass="field control-label tituloCampos" value="Aluno" />
						<h:inputText styleClass="form-control camposSomenteLeitura" disabled="true" value="#{EstagioObrigatorioControle.estagioVO.matriculaVO.aluno.nome}" />
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-4">
						<h:outputText styleClass="field control-label tituloCampos" value="Tipo Estágio" />
						<h:inputText styleClass="form-control camposSomenteLeitura" disabled="true" value="#{EstagioObrigatorioControle.estagioVO.tipoEstagio.valorApresentar}" />
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-4">
						<h:outputText styleClass="field control-label tituloCampos" value="Componente Estágio" />
						<h:inputText styleClass="form-control camposSomenteLeitura" disabled="true" value="#{EstagioObrigatorioControle.estagioVO.gradeCurricularEstagioVO.nome}" />
					</h:panelGroup>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="row" rendered="#{EstagioObrigatorioControle.estagioVO.tipoEstagio.tipoObrigatorioAproveitamento}">
					<h:panelGroup layout="block" styleClass="col-md-4">
						<h:outputText styleClass="field control-label tituloCampos" value="Aproveitamento Por" />
						<h:selectOneMenu styleClass="form-control  #{EstagioObrigatorioControle.estagioVO.situacaoEstagioEnum.aguardandoAssinatura ? 'camposObrigatorios':'camposSomenteLeitura'}" disabled="#{!EstagioObrigatorioControle.estagioVO.situacaoEstagioEnum.aguardandoAssinatura}" value="#{EstagioObrigatorioControle.estagioVO.tipoSituacaoAproveitamentoEnum}">
							<f:selectItems value="#{EnumControle.tipoConsultaComboSituacaoAproveitamento}" />
							<a4j:ajax event="change" execute="@form" render="formVisualizarFormAproveitamentoEquivalencia" listener="#{EstagioObrigatorioControle.selecionarTipoSituacaoAproveitamento}" />
						</h:selectOneMenu>
					</h:panelGroup>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="row" rendered="#{EstagioObrigatorioControle.estagioVO.tipoEstagio.tipoObrigatorioEquivalencia or (EstagioObrigatorioControle.estagioVO.tipoEstagio.tipoObrigatorioAproveitamento and !EstagioObrigatorioControle.estagioVO.tipoSituacaoAproveitamentoEnum.nenhum)}">
					<a4j:repeat id="repeatQuestionarioRespostaFormularioAprovEquiv_#{row}" value="#{EstagioObrigatorioControle.estagioVO.questionarioRespostaOrigemUltimaVersao}" var="questionarioRespostaOrigemItens" rows="1" rowKeyVar="row">
						<h:panelGroup layout="row" styleClass="col-md-12">
							<otm2:panel name="panelVersaoFormularioAprovEquiv" styleClass="border rounded " styleClassFooter="pn" stylePanel="width: 100% !important; margin-bottom: 10px !important; padding:10px !important; background: #f2f2f2;">
								<ui:define name="body">
<!-- 									<otm2:questionarioResposta bean="#{EstagioObrigatorioControle}" objetoOrigem="#{questionarioRespostaOrigemItens}" renderedChecklist="true" desabilitarRespostaChecklist="true" /> -->
									<otm2:questionarioRespostaPaginador bean="#{EstagioObrigatorioControle}" page="#{EstagioObrigatorioControle.page}" objetoOrigem="#{EstagioObrigatorioControle.estagioVO.questionarioRespostaOrigemUltimaVersao}" renderedChecklist="true" desabilitarRespostaChecklist="true" renderedPrefixo="true" rowTextArea="15" />
								</ui:define>
							</otm2:panel>
						</h:panelGroup>
					</a4j:repeat>
				</h:panelGroup>
				<h:panelGroup styleClass="barraFlutuanteInferior " layout="block">
					<h:panelGroup styleClass="float-left mr20">
						<otm:commandButton id="btnVoltarAprovEqui" render="formVisualizarFormAproveitamentoEquivalencia" action="#{EstagioObrigatorioControle.voltarPaginadorQuestionario(EstagioObrigatorioControle.estagioVO.questionarioRespostaOrigemUltimaVersao, EstagioObrigatorioControle.page)}" value="Pergunta Anterior" icon="#{msg_botoes.btn_icon_anterior}"  rendered="#{EstagioObrigatorioControle.page > 1}" />
					</h:panelGroup>
					<otm:commandButton id="btnGravaNovoEstagioAprovEqui" render="formVisualizarFormAproveitamentoEquivalencia" action="#{EstagioObrigatorioControle.persistirEstagioAprovEquiv}" value="Solicitar" styleClass="btn btn-dark btn-gravar" style="margin-left:10px" rendered="#{(EstagioObrigatorioControle.estagioVO.situacaoEstagioEnum.aguardandoAssinatura or EstagioObrigatorioControle.estagioVO.situacaoEstagioEnum.emCorrecao) and (EstagioObrigatorioControle.estagioVO.tipoEstagio.tipoObrigatorioEquivalencia or (EstagioObrigatorioControle.estagioVO.tipoEstagio.tipoObrigatorioAproveitamento and !EstagioObrigatorioControle.estagioVO.tipoSituacaoAproveitamentoEnum.nenhum))}" />
					<otm:commandButton id="fecharPanelVisualizarFormAproveitamentoEquivalencia" render="formVisualizarFormAproveitamentoEquivalencia" value="Voltar" action="#{EstagioObrigatorioControle.fecharFormularioFinalEstagio}" icon="#{msg_botoes.btn_icon_voltar}" style="margin-left:10px" tooltip="Voltar para Pagina Inicial Estágio" />
					<h:panelGroup styleClass="float-right mr20">
						<otm:commandButton id="btnAvancarAprovEqui" render="formVisualizarFormAproveitamentoEquivalencia" action="#{EstagioObrigatorioControle.avancarPaginadorQuestionario(EstagioObrigatorioControle.estagioVO.questionarioRespostaOrigemUltimaVersao,EstagioObrigatorioControle.page)}" value="Próxima Pergunta" styleClass="btn btn-default" icon="#{msg_botoes.btn_icon_proximo}" rendered="#{EstagioObrigatorioControle.estagioVO.questionarioRespostaOrigemUltimaVersao.perguntaRespostaOrigemVOs.size() gt EstagioObrigatorioControle.page }"/>
					</h:panelGroup>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-12">
					<otm:mensagem bean="#{EstagioObrigatorioControle}"></otm:mensagem>
				</h:panelGroup>
			</h:panelGroup>
		</h:form>

	</ui:define>
</ui:composition>
</html>
