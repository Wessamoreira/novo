<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" xmlns:otm="http://java.sun.com/jsf/composite/otm">
<h:head>
</h:head>
<ui:composition template="/visaoAluno/template/visaoAluno.xhtml">
	<ui:define name="tituloPagina">
		<h:outputText value="Download de Arquivos" />
	</ui:define>
	<ui:define name="conteudo">
		<!-- 		<ui:include src="./richPanelImagem.xhtml" /> -->
		<script>
			$('#conteudo').css('width', '98%');
		</script>
		<h:form id="form">
			<h:panelGroup id="downloadArquivo" layout="block" styleClass="row">
				<h:panelGroup id="panelArquivo" layout="block" styleClass="row">
					<h:panelGroup layout="block" styleClass="col-md-1" rendered="#{ArquivoControle.apresentarComboboxPeriodoVisaoAluno and ArquivoControle.matriculaVO.curso.periodicidade ne 'IN'}">
						<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_BibliotecaEmprestimo_periodo}" />
						<h:selectOneMenu styleClass="form-control camposObrigatorios" value="#{ArquivoControle.anoSemestre}">
							<a4j:ajax event="change" listener="#{ArquivoControle.montarListaDisciplinaTurmaVisaoAluno}" render="form:panelArquivo, form:downloadArquivo, form:mensagem, form:panelAbasConsulta" />
							<f:selectItems value="#{ArquivoControle.listaSelectItemAnoSemestre}" />
						</h:selectOneMenu>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="col-md-6">
						<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_ProgramacaoAula_disciplina}" />
						<h:selectOneMenu id="disciplina" styleClass="form-control camposObrigatorios" value="#{ArquivoControle.disciplinaVO.codigo}">
							<a4j:ajax event="change" listener="#{ArquivoControle.consultarArquivos}" render="form:downloadArquivo,form:panelAbasConsulta,form:arquivos2,form:dlMsg" />
							<f:selectItems value="#{ArquivoControle.listaSelectItemDisciplinasTurma}" />
						</h:selectOneMenu>
					</h:panelGroup>
				</h:panelGroup>
				<h:panelGroup style="margin-top: 15px" layout="block" styleClass="row" rendered="#{ArquivoControle.isApresentarDadosArquivoAposSelecionarDisciplina and ArquivoControle.dentroDataMaximaLimiteDownload}" id="panelAbasConsulta">
					<h:panelGroup layout="block" styleClass="row" rendered="#{ArquivoControle.apresentarListaArquivosAnexadosProfessor}" id="arquivosProf">
						<rich:dataTable style="border:none; width:100%;" border="none" rowClasses="linhaSemBorda" columnClasses="columnSemBorda" id="arquivoDisciplinaTurmaProfessorVOs" value="#{ArquivoControle.arquivoVOs}" var="arquivoDisciplinaTurmaProfessor">
							<rich:column>
								<rich:dataTable style="border:none; width:100%; border:0;" rowClasses="linhaSemBorda" columnClasses="columnSemBorda" id="arquivoVOs" value="#{arquivoDisciplinaTurmaProfessor.arquivoFilhoVOs}" var="arquivoItens">
									<f:facet name="header">
										<h:panelGrid columns="2" width="100%">
											<h:panelGroup layout="block" style="width:100%;text-align:left;">
												<h:outputText styleClass="tituloCampos" value="Turma: #{arquivoDisciplinaTurmaProfessor.turma.identificadorTurma}" />
											</h:panelGroup>
											<h:panelGroup layout="block" style="width:100%;text-align:left;">
												<h:outputText styleClass="tituloCampos" value="Professor(a): #{arquivoDisciplinaTurmaProfessor.professor.nome}" />
											</h:panelGroup>
										</h:panelGrid>
									</f:facet>
									<rich:column style="width:90%">
										<h:panelGrid columns="1" width="100%">
											<h:panelGroup>
												<h:outputText styleClass="tituloCampos" value="#{arquivoItens.indiceAgrupador} - " />
												<h:outputText style="text-decoration:none;margin-left:5px" styleClass="tituloCampos" rendered="#{!empty arquivoItens.arquivoFilhoVOs}" value="#{arquivoItens.agrupador}" />
												<h:outputText style="text-decoration:none;margin-left:5px" styleClass="tituloCampos" rendered="#{empty arquivoItens.arquivoFilhoVOs}" value="#{arquivoItens.descricaoApresentar}" />
												<h:panelGroup style="float:right;">
													<h:outputText rendered="#{empty arquivoItens.arquivoFilhoVOs}" value="Disponibilizado em: #{arquivoItens.dataUpload_Apresentar}" styleClass="tituloCampos" />
													<otm:spacer width="5px" />
													<h:panelGroup id="download1">
														<h:commandLink target="#{arquivoItens.servidorArquivoOnline ne 'APACHE' ? '_blank' : '' }" action="#{ArquivoControle.selecionarArquivoParaDownload}" rendered="#{empty arquivoItens.arquivoFilhoVOs}" style="position:relative;" styleClass="iconeOpcoesUnidade" title="Download Arquivo">
															<span class="#{msg_botoes.btn_icon_download_embutido}" />
															<!-- 														<h:graphicImage url="#{resource['/imagens/botaoDownloadResumido.png']}" /> -->
														</h:commandLink>
													</h:panelGroup>
													<rich:tooltip value="Download Arquivo" target="download1" />
												</h:panelGroup>
											</h:panelGroup>
										</h:panelGrid>
									</rich:column>
									<rich:collapsibleSubTable id="arquivoFilhoVOs" value="#{arquivoItens.arquivoFilhoVOs}" var="arquivoFilhoVOItens">
										<rich:column style="padding-left:30px;text-align:left">
											<h:panelGrid columns="1" width="100%">
												<h:panelGroup>
													<h:outputText styleClass="itemIndicePagina" style="text-decoration:none;margin-left:5px" value="#{arquivoItens.indiceAgrupador}.#{arquivoFilhoVOItens.indice} - #{arquivoFilhoVOItens.descricaoApresentar}" />
													<h:panelGroup style="float:right;">
														<h:outputText value="Disponibilizado em: #{arquivoFilhoVOItens.dataUpload_Apresentar}" styleClass="tituloCampos" />
														<otm:spacer width="5px" />
														<h:panelGroup id="download">
															<h:commandLink action="#{ArquivoControle.selecionarArquivoFilhoParaDownload}" style="position:relative;" styleClass="iconeOpcoesUnidade" target="#{arquivoFilhoVOItens.servidorArquivoOnline ne 'APACHE' ? '_blank' : '' }" title="Download Arquivo">
																<span class="#{msg_botoes.btn_icon_download_embutido}" />
																<!-- 															<h:graphicImage url="#{resource['/imagens/botaoDownloadResumido.png']}" /> -->
															</h:commandLink>
														</h:panelGroup>
														<rich:tooltip value="Download Arquivo" target="download" />
													</h:panelGroup>
												</h:panelGroup>
											</h:panelGrid>
										</rich:column>
									</rich:collapsibleSubTable>
								</rich:dataTable>
							</rich:column>
						</rich:dataTable>
						<a4j:jsFunction name="render" render="form">
						</a4j:jsFunction>
					</h:panelGroup>
					<h:panelGroup style="margin-top: 20px" layout="block" styleClass="row" id="arquivosInst" rendered="#{ArquivoControle.apresentarListaArquivosAnexadosInstituicao}">
						<h:panelGroup layout="block" styleClass="col-md-12 text-center">
							<h:outputText styleClass="field control-label tituloCamposNegrito" style="font-size: 15px" value="Arquivos anexados pela Instituição" />
						</h:panelGroup>
						<rich:dataTable id="arquivos3" width="100%" headerClass="consulta" styleClass="tabConsulta" rowClasses="linhaImpar, linhaPar" columnClasses="colunaEsquerda" value="#{ArquivoControle.arquivosAnexadosInstituicao}" var="arquivoItens">
							<rich:column style="text-align: center !important">
								<f:facet name="header">
									<h:outputText value="Descrição" />
								</f:facet>
								<h:outputText style="border:none;width:100%;height:auto;resize:auto;word-wrap: break-word;display:block;word-break:break-all;text-align: justify;" value="#{arquivoItens.descricaoArquivo}" />
							</rich:column>
							<rich:column style="text-align: center !important">
								<f:facet name="header">
									<h:outputText value="Nome" />
								</f:facet>
								<h:outputText id="inputNome" styleClass="field control-label tituloCampos" value="#{arquivoItens.descricao}" />
							</rich:column>
							<rich:column style="text-align: center !important">
								<f:facet name="header">
									<h:outputText value="#{msg_botoes.btn_opcoes}" />
								</f:facet>
								<h:panelGroup>
									<otm:commandIcon id="cmdDownload" execute="@this" oncomplete="#{ArquivoControle.caminhoServidorDownloadArquivo}" action="#{ArquivoControle.registrarDownloadVisaoAluno}" tooltip="Baixar Arquivo" icon="#{msg_botoes.btn_icon_download} iconePequeno" />
								</h:panelGroup>
							</rich:column>
						</rich:dataTable>
					</h:panelGroup>
				</h:panelGroup>
				<otm:mensagem bean="#{ArquivoControle}"></otm:mensagem>
			</h:panelGroup>
		</h:form>
	</ui:define>
</ui:composition>
</html>
