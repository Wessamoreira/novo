<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" xmlns:otm="http://java.sun.com/jsf/composite/otm">
<h:head>
</h:head>
<ui:composition template="/visaoAluno/template/visaoAluno.xhtml">
	<ui:define name="tituloPagina">
		<h:outputText rendered="#{VisaoAlunoControle.ambienteVisaoAluno}" value="Atividade Discursiva" />
		<h:outputText rendered="#{!VisaoAlunoControle.ambienteVisaoAluno}" value="Atividade Discursiva - #{ListaExercicioControle.matriculaPeriodoTurmaDisciplinaVO.disciplina.nome}" />
	</ui:define>
	<ui:define name="conteudo">
		<style type="text/css">
.rich-dtascroller-table {
	-moz-border-radius: 5px;
	-webkit-border-radius: 5px;
	border-radius: 5px;
}

.rich-datascr-button {
	border: none;
}

.rich-datascr-button-dsbld {
	background-color: transparent;
}
</style>
		<!-- 		<ui:include src="./richPanelImagem.xhtml" /> -->
		<h:form id="form">
			<h:commandLink action="#{AtividadeDiscursivaControle.liberarBackingBeanMemoria}" id="idLiberarBackingBeanMemoria" style="display: none" />
			<h:panelGroup layout="block" styleClass="row">
				<h:panelGroup layout="block" styleClass="col-md-2">
					<h:outputText rendered="#{VisaoAlunoControle.isApresentarCampoAno and VisaoAlunoControle.isApresentarCampoSemestre}" styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_MatriculaPeriodo_anoSemestre}" />
					<h:outputText rendered="#{VisaoAlunoControle.isApresentarCampoAno and !VisaoAlunoControle.isApresentarCampoSemestre}" styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_MatriculaPeriodo_ano}" />
					<h:selectOneMenu id="selectItemAnoSemestre1" rendered="#{VisaoAlunoControle.isApresentarCampoAno or VisaoAlunoControle.isApresentarCampoSemestre}" styleClass="form-control campos" value="#{AtividadeDiscursivaControle.filterAnoSemestre}">
						<f:selectItems value="#{AtividadeDiscursivaControle.listaSelectItemAnoSemestre}" />
						<a4j:ajax event="change" render="form" listener="#{AtividadeDiscursivaControle.consultarAtividadesDiscursivasVisaoAluno}" />
					</h:selectOneMenu>
				</h:panelGroup>
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="row">
				<!-- 				<h:panelGroup layout="block" styleClass="row-table"> -->
				<rich:dataTable id="items" headerClass="consulta" rowKeyVar="row" value="#{AtividadeDiscursivaControle.controleConsultaOtimizado.listaConsulta}" rows="10" var="atividadeItens" rendered="#{!empty AtividadeDiscursivaControle.controleConsultaOtimizado.listaConsulta}">
					<rich:column style="text-align: center !important" filterType="custom" filter="#{FilterFactory.filter('itemsCodigo', 'atividadeDiscursivaVO.codigo', 'INTEIRO')}">
						<f:facet name="header">
							<h:outputText value="#{msg_aplic.prt_AtividadeDiscursiva_codigo}" />
							<h:panelGroup layout="block" styleClass="pn col-md-12">
								<span class="append-icon right"> <otm:commandIcon icon="#{msg_botoes.btn_icon_limpar_embutido}" render="items" action="#{FilterFactory.limparFiltro('itemsCodigo')}" tooltip="Limpar Filtro" />
								</span>
								<h:inputText styleClass="form-control campos" value="#{FilterFactory.filter('itemsCodigo', 'atividadeDiscursivaVO.codigo', 'INTEIRO').filtro}" onkeydown="aceitarSomenteValorNumerico(this)">
									<a4j:ajax event="change" execute="@this" render="items" />
								</h:inputText>
							</h:panelGroup>
						</f:facet>
						<a4j:commandLink render="form:panelGridMensagens" action="#{AtividadeDiscursivaControle.editarAtvidadeDiscursivaRespostaAluno}" title="#{msg_botoes.btn_editar}">
							<h:outputText value="#{atividadeItens.atividadeDiscursivaVO.codigo}" />
						</a4j:commandLink>
					</rich:column>
					<rich:column style="text-align: center !important" width="40%" filterType="custom" filter="#{FilterFactory.filter('items', 'atividadeDiscursivaVO.enunciado', 'TEXTO')}">
						<f:facet name="header">
							<h:outputText value="#{msg_aplic.prt_Questao_enunciado}" />
							<h:panelGroup layout="block" styleClass="pn col-md-12">
								<span class="append-icon right"> <otm:commandIcon icon="#{msg_botoes.btn_icon_limpar_embutido}" render="items" action="#{FilterFactory.limparFiltro('items')}" tooltip="Limpar Filtro" />
								</span>
								<h:inputText styleClass="form-control campos" value="#{FilterFactory.filter('items', 'atividadeDiscursivaVO.enunciado', 'TEXTO').filtro}">
									<a4j:ajax event="change" execute="@this" render="items" />
								</h:inputText>
							</h:panelGroup>
						</f:facet>
						<a4j:commandLink render="form:panelGridMensagens" action="#{AtividadeDiscursivaControle.editarAtvidadeDiscursivaRespostaAluno}" title="#{msg_botoes.btn_editar}">
							<h:panelGroup layout="block" style="max-width:400px; max-height:100px;overflow:auto;text-align: left">
								<h:outputText value="#{atividadeItens.atividadeDiscursivaVO.enunciado}" />
							</h:panelGroup>
						</a4j:commandLink>
					</rich:column>
					<rich:column style="text-align: center !important" filterType="custom" filter="#{FilterFactory.filter('items2', 'atividadeDiscursivaVO.turmaVO.identificadorTurma', 'TEXTO')}">
						<f:facet name="header">
							<h:outputText value="#{msg_aplic.prt_AtividadeDiscursiva_turma}" />
							<h:panelGroup layout="block" styleClass="pn col-md-12">
								<span class="append-icon right"> <otm:commandIcon icon="#{msg_botoes.btn_icon_limpar_embutido}" render="items" action="#{FilterFactory.limparFiltro('items2')}" tooltip="Limpar Filtro" />
								</span>
								<h:inputText styleClass="form-control campos" value="#{FilterFactory.filter('items2', 'atividadeDiscursivaVO.turmaVO.identificadorTurma', 'TEXTO').filtro}">
									<a4j:ajax event="change" execute="@this" render="items" />
								</h:inputText>
							</h:panelGroup>
						</f:facet>
						<a4j:commandLink render="form:panelGridMensagens" action="#{AtividadeDiscursivaControle.editarAtvidadeDiscursivaRespostaAluno}" title="#{msg_botoes.btn_editar}" value="#{atividadeItens.atividadeDiscursivaVO.turmaVO.identificadorTurma}" />
					</rich:column>
					<rich:column style="text-align: center !important" filterType="custom" filter="#{FilterFactory.filter('items3', 'atividadeDiscursivaVO.disciplinaVO.nome', 'TEXTO')}">
						<f:facet name="header">
							<h:outputText value="#{msg_aplic.prt_AtividadeDiscursiva_disciplina}" />
							<h:panelGroup layout="block" styleClass="pn col-md-12">
								<span class="append-icon right"> <otm:commandIcon icon="#{msg_botoes.btn_icon_limpar_embutido}" render="items" action="#{FilterFactory.limparFiltro('items3')}" tooltip="Limpar Filtro" />
								</span>
								<h:inputText styleClass="form-control campos" value="#{FilterFactory.filter('items3', 'atividadeDiscursivaVO.disciplinaVO.nome', 'TEXTO').filtro}">
									<a4j:ajax event="change" execute="@this" render="items" />
								</h:inputText>
							</h:panelGroup>
						</f:facet>
						<a4j:commandLink render="form:panelGridMensagens" action="#{AtividadeDiscursivaControle.editarAtvidadeDiscursivaRespostaAluno}" title="#{msg_botoes.btn_editar}" value="#{atividadeItens.atividadeDiscursivaVO.disciplinaVO.nome}" />
					</rich:column>
					<rich:column style="text-align: center !important" filterType="custom" filter="#{FilterFactory.filter('dataLimite', 'atividadeDiscursivaVO.dataLimiteEntregaApresentar', 'TEXTO')}">
						<f:facet name="header">
							<h:outputText value="Data Limite" />
							<h:panelGroup layout="block" styleClass="pn col-md-12">
								<span class="append-icon right"> <otm:commandIcon icon="#{msg_botoes.btn_icon_limpar_embutido}" render="items" action="#{FilterFactory.limparFiltro('dataLimite')}" tooltip="Limpar Filtro" />
								</span>
								<h:inputText onkeypress="return mascaraData(this.form, this.id, 'dd/MM/yyyy HH:mm:ss', event);" styleClass="form-control campos" value="#{FilterFactory.filter('dataLimite', 'atividadeDiscursivaVO.dataLimiteEntregaApresentar', 'TEXTO').filtro}">
									<a4j:ajax event="change" execute="@this" render="items" />
								</h:inputText>
							</h:panelGroup>
						</f:facet>
						<a4j:commandLink render="form:panelGridMensagens" action="#{AtividadeDiscursivaControle.editarAtvidadeDiscursivaRespostaAluno}" title="#{msg_botoes.btn_editar}">
							<h:outputText value="#{atividadeItens.atividadeDiscursivaVO.dataLimiteEntrega}">
								<f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss" />
							</h:outputText>
						</a4j:commandLink>
					</rich:column>
					<rich:column style="text-align: center !important" filterType="custom" filter="#{FilterFactory.filter('items4', 'situacaoRespostaAtividadeDiscursiva_Apresentar', 'TEXTO')}">
						<f:facet name="header">
							<h:outputText value="Situação" />
							<h:panelGroup layout="block" styleClass="pn col-md-12">
								<span class="append-icon right mr10"> <otm:commandIcon icon="#{msg_botoes.btn_icon_limpar_embutido}" render="items" action="#{FilterFactory.limparFiltro('items4')}" tooltip="Limpar Filtro" />
								</span>
								<h:inputText styleClass="form-control campos" value="#{FilterFactory.filter('items4', 'situacaoRespostaAtividadeDiscursiva_Apresentar', 'TEXTO').filtro}">
									<a4j:ajax event="change" execute="@this" render="items" />
								</h:inputText>
							</h:panelGroup>
						</f:facet>
						<a4j:commandLink render="form:panelGridMensagens" action="#{AtividadeDiscursivaControle.editarAtvidadeDiscursivaRespostaAluno}" title="#{msg_botoes.btn_editar}" value="#{atividadeItens.situacaoRespostaAtividadeDiscursiva_Apresentar}" />
					</rich:column>
					<rich:column style="text-align: center !important">
						<f:facet name="header">
							<h:outputText value="Nova Interação" />
						</f:facet>
						<a4j:commandLink render="form:panelGridMensagens" action="#{AtividadeDiscursivaControle.editarAtvidadeDiscursivaRespostaAluno}" title="#{msg_botoes.btn_editar}" value="#{atividadeItens.interacao}" />
					</rich:column>
					<rich:column style="text-align: center !important">
						<f:facet name="header">
							<h:outputText value="#{msg_botoes.btn_opcoes}  " />
						</f:facet>
						<otm:commandIcon icon="#{msg_botoes.btn_icon_editar} iconePequeno" action="#{AtividadeDiscursivaControle.editarAtvidadeDiscursivaRespostaAluno}" tooltip="Editar Atvidade Discursiva Resposta Aluno" render="form:panelGridMensagens" rendered="#{atividadeItens.situacaoRespostaAtividadeDiscursiva.responder}" />
					</rich:column>
					<f:facet name="footer">
						<div style="text-align: center !important">
							<rich:dataScroller align="center" for="form:items" render="itens, panelGridMensagens" id="scResultadoConsulta" boundaryControls="auto" stepControls="auto" fastControls="hide" />
						</div>
					</f:facet>
				</rich:dataTable>
				<!-- 				</h:panelGroup> -->
			</h:panelGroup>
			<h:panelGroup id="panelGridMensagens" layout="block" styleClass="row">
				<otm:mensagem bean="#{AtividadeDiscursivaControle}"></otm:mensagem>
			</h:panelGroup>
		</h:form>
	</ui:define>
</ui:composition>
</html>
