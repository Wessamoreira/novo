<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" xmlns:otm="http://java.sun.com/jsf/composite/otm" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
<h:head>
</h:head>
<ui:composition template="/visaoProfessor/template/visaoProfessor.xhtml">
	<ui:define name="conteudo">
		<h:outputScript name="autoresize.js" library="script" />
		<style type="text/css">
.rich-dtascroller-table {
	-moz-border-radius: 5px;
	-webkit-border-radius: 5px;
	border-radius: 5px;
}

.rich-datascr-button {
	border: none;
}

.rich-datascr-button-dsbld {
	background-color: transparent;
}
</style>
		<h:form id="form">
			<h1 class="title1">Gestão Evento Conteúdo Nota Final</h1>
			<h:commandLink action="#{GestaoEventoConteudoTurmaControle.liberarBackingBeanMemoria}" id="idLiberarBackingBeanMemoria" style="display: none" />
			<h:panelGroup id="panelGridForm">
				<h:panelGroup layout="block" styleClass="col-md-6">
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_DisciplinaConteudoPlanejamento_Conteudo}" />
					<h:inputText styleClass="form-control camposSomenteLeitura" readonly="true" value="#{GestaoEventoConteudoTurmaControle.conteudoVO.descricao}" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-3">
					<otm:outputHelp tooltip="* As variáveis utilizadas para a fórmula do cálculo da gestão evento conteúdo nota final deve seguir o padrão dos nomes das colunas que começa com a letra P. * Exemplo: (P1+P2+P3+P4+P5+P6+P7+P8+P9+P10)/10" id="GradeDisciplina_formulaCalculo" styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_GradeDisciplina_formulaCalculo}" />
					<h:inputText styleClass="form-control camposObrigatorios" value="#{GestaoEventoConteudoTurmaControle.conteudoVO.gestaoEventoConteudoTurmaVO.formulaCalculoNotaFinalGeral}">
						<a4j:ajax event="change" render="panelGridForm" listener="#{GestaoEventoConteudoTurmaControle.realizarValidacaoDaFormulaParaNotaFinal}" oncomplete="resize();" />
					</h:inputText>
				</h:panelGroup>
				<h:panelGroup styleClass="autoresize" layout="block" style="width:100%; overflow:auto;">
					<rich:dataTable id="tabelaAlunos" width="100%" headerClass="consulta" columnClasses="colunaAlinhamento" rowKeyVar="rowAluno" value="#{GestaoEventoConteudoTurmaControle.conteudoVO.gestaoEventoConteudoTurmaVO.gestaoEventoConteudoTurmaAvaliacaoPBLVOs}" var="gestaoEventoConteudoItem">
						<rich:column style="text-align: center;">
							<f:facet name="header">
								<h:outputText value="Matrícula" />
							</f:facet>
							<h:panelGroup>
								<h:outputText styleClass="field control-label tituloCampos" value="#{gestaoEventoConteudoItem.matriculaVO.matricula}" />
							</h:panelGroup>
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="Alunos" />
							</f:facet>
							<h:panelGroup>
								<h:outputText styleClass="field control-label tituloCampos" value="#{gestaoEventoConteudoItem.avaliado.nome}" />
							</h:panelGroup>
						</rich:column>
						<c:forEach items="#{GestaoEventoConteudoTurmaControle.conteudoVO.gestaoEventoConteudoTurmaVO.gestaoEventoConteudoTurmaAvaliacaoPBLVOs[0].gestaoEventoConteudoTurmaAvaliacaoPBLVOs}" varStatus="meuIndex">
							<rich:column style="text-align: center;">
								<f:facet name="header">
									<h:panelGroup>
										<h:outputText value="P#{meuIndex.index+1}" />
									</h:panelGroup>
								</f:facet>
								<a4j:outputPanel layout="block">
									<rich:tooltip direction="topRight" followMouse="true" showDelay="300" styleClass="panelTooltipAvaliacao" layout="block">
										<h:panelGroup columns="1" width="100%">
											<f:facet name="header">
												<h:outputText value="#{GestaoEventoConteudoTurmaControle.conteudoVO.gestaoEventoConteudoTurmaVO.gestaoEventoConteudoTurmaAvaliacaoPBLVOs[rowAluno].gestaoEventoConteudoTurmaAvaliacaoPBLVOs[meuIndex.index].nomeRecursoEducacional}" />
											</f:facet>
											<h:panelGroup layout="block">
												<h:outputText value="Assunto Disciplina: " />
												<otm:spacer width="5px;" />
												<h:outputText value="#{GestaoEventoConteudoTurmaControle.conteudoVO.gestaoEventoConteudoTurmaVO.gestaoEventoConteudoTurmaAvaliacaoPBLVOs[rowAluno].gestaoEventoConteudoTurmaAvaliacaoPBLVOs[meuIndex.index].nomeAssuntoUnidadeConteudo}" />
											</h:panelGroup>
											<h:panelGroup layout="block">
												<h:outputText value="Situação: " />
												<otm:spacer width="5px;" />
												<h:outputText value="#{GestaoEventoConteudoTurmaControle.conteudoVO.gestaoEventoConteudoTurmaVO.gestaoEventoConteudoTurmaAvaliacaoPBLVOs[rowAluno].gestaoEventoConteudoTurmaAvaliacaoPBLVOs[meuIndex.index].situacao.valorApresentar}" />
											</h:panelGroup>
										</h:panelGroup>
									</rich:tooltip>
									<h:inputText styleClass="camposSomenteLeituraObrigatorio" style="width: 50px; text-align: center;" readonly="true" value="#{GestaoEventoConteudoTurmaControle.conteudoVO.gestaoEventoConteudoTurmaVO.gestaoEventoConteudoTurmaAvaliacaoPBLVOs[rowAluno].gestaoEventoConteudoTurmaAvaliacaoPBLVOs[meuIndex.index].nota}">
										<f:converter converterId="FormatadorNumericoPermitindoValoresNulos" />
										<f:attribute name="quantidadeCasasDecimaisPermitirAposVirgula" value="2" />
									</h:inputText>
								</a4j:outputPanel>
							</rich:column>
						</c:forEach>
						<rich:column style="text-align: center;">
							<f:facet name="header">
								<h:outputText value="NOTA FINAL" />
							</f:facet>
							<h:panelGroup>
								<h:inputText styleClass="form-control camposSomenteLeitura" readonly="true" onkeydown="aceitarSomenteValorDecimal(this);" style="width: 50px; text-align: center;" value="#{gestaoEventoConteudoItem.nota}">
									<f:converter converterId="FormatadorNumericoPermitindoValoresNulos" />
									<f:attribute name="quantidadeCasasDecimaisPermitirAposVirgula" value="2" />
								</h:inputText>
							</h:panelGroup>
						</rich:column>
					</rich:dataTable>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-12 text-center" style="margin:10px" id="panelGridBotoesBottom">
					<h:panelGroup>
						<otm:commandButton action="#{GestaoEventoConteudoTurmaControle.voltarGestaoEventoConteudoTurma}" value="Voltar Gestão Evento" icon="#{msg_botoes.btn_icon_voltar}" styleClass="btn btn-default" image="#{resource['/imagens/voltar.png']}" />
						<otm:spacer width="5px" />
						<otm:commandButton render="panelGridForm" action="#{GestaoEventoConteudoTurmaControle.calcularNotaFinalGeral}" value="Calcular Nota Final Geral" styleClass="btn btn-default" icon="#{msg_botoes.btn_icon_calculadora}" image="#{resource['/imagens/ead/botaoCalcularNotaFinal.png']}" oncomplete="resize();" />
						<otm:spacer width="5px" />
						<otm:commandButton render="panelGridForm, panelLancarNotaHistorico" action="#{GestaoEventoConteudoTurmaControle.montarListaDeNotasDaConfiguracaoAcademico}" icon="#{msg_botoes.btn_icon_engrenagem_embutido}" value="Montar Lista De Notas Da Configuração Academico" styleClass="btn btn-default" oncomplete="#{rich:component('panelLancarNotaHistorico')}.show(), resize()" rendered="#{GestaoEventoConteudoTurmaControle.conteudoVO.gestaoEventoConteudoTurmaVO.situacao != 'REALIZADO'}" image="#{resource['/imagens/ead/botaoLancarNotaHistorico.png']}" />
					</h:panelGroup>
				</h:panelGroup>
				<h:panelGroup id="panelGridMensagens" columns="1" width="100%" styleClass="tabMensagens">
					<otm:mensagem bean="#{GestaoEventoConteudoTurmaControle}"></otm:mensagem>
				</h:panelGroup>
			</h:panelGroup>
		</h:form>
		<rich:popupPanel styleClass="modalMaximizado" id="panelAlertaNotasNaoLancadasRecursoEducacional" domElementAttachment="parent" shadowOpacity="true" width="750" height="500">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="#{msg_aplic.prt_GestaoEventoConteudo_finalizarRecursoEducacional}" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelinkAlertaNotasNaoLancadasRecursoEducacional" />
					<rich:componentControl target="panelAlertaNotasNaoLancadasRecursoEducacional" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formLiberacaoRecursoEducacional">
				<h:panelGroup columns="1" width="100%">
					<h:outputText value="#{msg.msg_GestaoEventoConteudo_finalizarRecursoNotasNaoLancadas}" />
				</h:panelGroup>
				<h:panelGroup id="panelGridBotoesFinalizarRecursoEducacional" style="text-align: center;position: relative; top: 10px;" columns="1" styleClass="colunaVerticalmenteCentralizada" width="100%">
					<h:panelGroup layout="block">
						<a4j:commandButton render="formLiberacaoRecursoEducacional" action="#{GestaoEventoConteudoTurmaControle.gravarGestaoEventoConteudoTurmaFinalizado}" oncomplete="resize(); #{rich:component('panelAlertaNotasNaoLancadasRecursoEducacional')}.hide();" image="#{resource['/imagens/ead/botaoFinalizar.png']}" />
					</h:panelGroup>
				</h:panelGroup>
				<h:panelGroup id="mensagemFinalizarRecursoEducacional" columns="1" width="100%" style="position: relative; top: 10px;" styleClass="tabMensagens">
					<otm:mensagem bean="#{GestaoEventoConteudoTurmaControle}"></otm:mensagem>
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
		<rich:popupPanel styleClass="modalMaximizado" id="panelLancarNotaHistorico" domElementAttachment="parent" shadowOpacity="true" width="550" height="200">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="#{msg_aplic.prt_GestaoEventoConteudoTurma_lancarNotaEvento}" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal" style="cursor:pointer" id="hidelinkPanelLancarNotaHistorico" />
					<rich:componentControl target="panelLancarNotaHistorico" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formPanelLancarNotaHistorico">
				<h:panelGroup layout="block" styleClass="col-md-6">
					<h:outputText styleClass="field control-label tituloCampos" value="#{msg_aplic.prt_GestaoEventoConteudoTurma_escolhaANotaALancar}" />
					<h:selectOneMenu styleClass="form-control camposObrigatorios" value="#{GestaoEventoConteudoTurmaControle.conteudoVO.gestaoEventoConteudoTurmaVO.tipoVariavelNota}">
						<f:selectItems value="#{GestaoEventoConteudoTurmaControle.listSelectItemVariavelNota}" />
					</h:selectOneMenu>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="col-md-12 text-center" style="margin:10px" id="panelBotoes">
					<otm:commandButton id="fecharModal" render="form, formPanelLancarNotaHistorico" action="#{GestaoEventoConteudoTurmaControle.gravarNotasHistoricoAlunos}" value="#{msg_bt.btn_gravar}" oncomplete="resize(); #{GestaoEventoConteudoTurmaControle.modalPanelLancarNotaHistorico}" styleClass="btn btn-dark btn-gravar" alt="#{msg.msg_gravar_dados}" accesskey="2" />
				</h:panelGroup>
				<otm:spacer height="10px" />
				<h:panelGroup columns="1" width="100%" id="panelGridAvaliado">
					<h:panelGroup>
						<h:graphicImage id="imgIconeAvaliado" url="#{GestaoEventoConteudoTurmaControle.iconeMensagem}" rendered="#{GestaoEventoConteudoTurmaControle.sucesso}" />
						<otm:spacer width="10" />
						<h:outputText styleClass="field control-label mensagem col-md-12" value="#{GestaoEventoConteudoTurmaControle.mensagem}" />
					</h:panelGroup>
					<h:outputText styleClass="field control-label mensagemDetalhada col-md-12" value="#{GestaoEventoConteudoTurmaControle.mensagemDetalhada}" />
				</h:panelGroup>
			</h:form>
		</rich:popupPanel>
	</ui:define>
</ui:composition>
</html>