<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:otm="http://java.sun.com/jsf/composite/otm">
	<ui:composition template="/visaoAdministrador/template/visaoAdministrador.xhtml">
		<ui:define name="tituloPagina">
			<h:outputText value="Atualização" />
		</ui:define>
		<ui:define name="conteudo">
			<h:panelGrid columns="1" width="100%" styleClass="background:#fff;">
				<h:form id="formAtualizacao" acceptcharset="ISO-8859-1" lang="pt-BR">
					<h:panelGrid columns="1" width="100%">
						<h:panelGrid columns="1" width="100%" columnClasses="colunaCentralizada">
							<h:panelGroup>
								<h:outputText styleClass="field control-label tituloCampos" value="Versão" />
								<h:selectOneMenu styleClass="form-control campos" id="versao" value="#{AtualizacaoControle.versaoSelecionadaComScriptsParaExecucao}">
									<a4j:ajax event="change" listener="#{AtualizacaoControle.consultarScriptsParaExecucao}" render="formAtualizacao" />
									<f:selectItems value="#{AtualizacaoControle.versoesComScriptsParaExecucao}" />
								</h:selectOneMenu>
							</h:panelGroup>
						</h:panelGrid>
						<h:panelGrid columns="1" width="100%" columnClasses="colunaCentralizada">
							<rich:dataScroller rendered="#{AtualizacaoControle.exibirListaScriptsParaExecucao}" boundaryControls="auto" fastControls="auto" stepControls="auto" align="center" for="versoes"/>
							<h:panelGrid columns="1" rendered="#{!AtualizacaoControle.exibirListaScriptsParaExecucao}">
								<h:graphicImage value="#{resource['imagens/deferido.png']}" style="width:64px" />
								<h:outputText value="Sistema Atualizado" style="color:#006400" />
							</h:panelGrid>
						</h:panelGrid>
						<rich:dataGrid id="versoes" rendered="#{AtualizacaoControle.exibirListaScriptsParaExecucao}" value="#{AtualizacaoControle.listaScriptsParaExecucao}" style="width:100%;background-color:#bdc3c7;" align="center" columnClasses="colunaAlinhamento" var="versao" columns="1" elements="1">
							<h:panelGrid columns="1" width="100%">
								<h:panelGroup>
									<h:outputText value="#{versao.numero}" style="font-size:20px;font-weight:bold;padding-right:16px;" />
									<h:outputText value="#{versao.criadaApresentar}" style="color:#666666;padding-right:16px;" />
									<h:outputText value="#{versao.responsavel}" style="color:#666666;" />
								</h:panelGroup>
								<rich:dataGrid id="especificacoes" value="#{versao.especificacoes}" style="width:100%;background-color:#ecf0f1;" align="center" columnClasses="colunaAlinhamento" var="especificacao" columns="1">
									<h:panelGrid columns="1" width="100%">
										<h:panelGroup>
											<h:outputText value="#{especificacao.identificador}" style="font-size:14px;padding-right:16px;" />
											<h:outputText value="#{especificacao.descricao}" style="font-size:14px;" />
										</h:panelGroup>
										<rich:dataTable id="scripts" width="100%" value="#{especificacao.scripts}" var="script">
											<rich:column style="width:99%;text-align:left;background-color:#{script.estilo};">
												<h:panelGrid columns="1" width="100%">
													<h:panelGroup>
														<otm:selectBooleanCheckbox value="#{script.selecionado}" />
														<h:outputText value="#{script.script}" style="font-size:11px;padding-left:4px;" />
													</h:panelGroup>
													<h:outputText value="#{script.excessao}" style="font-size:11px;font-weight:bold;color:#ffffff;" rendered="#{not empty script.excessao}" />
												</h:panelGrid>
											</rich:column>
											<rich:column style="width:1%;text-align:left;">
												<h:panelGrid columns="2">
													<otm:commandButton id="executarIndividual" action="#{AtualizacaoControle.executarScript}" title="Executar"  image="#{resource['imagens/botaoProcessar.png']}" render="formAtualizacao" />
													<otm:commandButton id="marcarComoResolvido" action="#{AtualizacaoControle.executarMarcacaoComoResolvido}" title="Marcar como Resolvido"  styleClass="btn btn-danger light btn-cancelar" icon="#{msg_botoes.btn_icon_cancelar_embutido}" render="formAtualizacao" />
												</h:panelGrid>
											</rich:column>
										</rich:dataTable>
									</h:panelGrid>
								</rich:dataGrid>
							</h:panelGrid>
						</rich:dataGrid>
						<h:panelGrid columns="1" width="100%" styleClass="tabMensagens">
							<h:panelGrid columns="1" width="100%" columnClasses="colunaEsquerda">
								<h:outputText styleClass="field control-label mensagem col-md-12" value="#{AtualizacaoControle.mensagem}" />
								<h:outputText styleClass="field control-label mensagemDetalhada col-md-12" value="#{AtualizacaoControle.mensagemDetalhada}" />
							</h:panelGrid>
							<h:panelGrid columns="1" width="100%" columnClasses="colunaCentralizada">
								<h:panelGroup>
									<otm:commandButton id="sincronizar" action="#{AtualizacaoControle.executarSincronismoScripts}" title="Atualizar"  image="#{resource['imagens/botaoAtualizar.png']}" accesskey="1" render="formAtualizacao" />
									<otm:commandButton id="executar" action="#{AtualizacaoControle.executarScripts}" title="Executar"  image="#{resource['imagens/botaoProcessar.png']}" accesskey="2" render="formAtualizacao" />
									<otm:commandButton id="consultar" action="#{AtualizacaoControle.navegarConsultar}" title="Consultar"  styleClass="btn btn-default btn-consultar" accesskey="3" />
								</h:panelGroup>
							</h:panelGrid>
						</h:panelGrid>
					</h:panelGrid>
				</h:form>
			</h:panelGrid>
		</ui:define>
	</ui:composition>
</html>