<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" xmlns:otm="http://java.sun.com/jsf/composite/otm">
<h:head>
</h:head>
<ui:composition template="/visaoCoordenador/template/visaoCoordenador.xhtml">
	<ui:define name="conteudo">

		<rich:popupPanel styleClass="modalMaximizado" id="panelImagem" zindex="2000" overlapEmbedObjects="true" shadowOpacity="false" width="800" height="600">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText style="color:#006285; font-size:20px;" value="#{msg_aplic.prt_AlterarFoto}" />
				</h:panelGroup>
			</f:facet>

			<h:form id="formImagem">
				<script type="text/javascript">
					jQuery(function($) {
						$(document).ready(function() {
							$("#formImagem\\:foto2").Jcrop({
								onSelect : showCoords,
								onChange : showCoords,
								bgColor : 'black',
								bgOpacity : .3,
								setSelect : [ 1, 1, 85, 113 ],
								minSize : [ 31, 21 ],
								maxSize : [ 600, 450 ]
							});
						});
					});
					function showCoords(c) {
						var valorX = document.getElementById('formImagem:x');
						valorX.value = c.x;

						var valorY = document.getElementById('formImagem:y');
						valorY.value = c.y;

						var valorW = document.getElementById('formImagem:w');
						valorW.value = c.w;

						var valorH = document.getElementById('formImagem:h');
						valorH.value = c.h;

					};
				</script>

				<h:panelGroup rendered="#{VisaoCoordenadorControle.exibirBotao}" layout="block" style="float:left; clear:both;overflow:auto; min-width:455px; min-height:120px ; width:600px; height:500px;">
					<h:graphicImage url="#{VisaoCoordenadorControle.showFotoCrop}" id="foto2" />
				</h:panelGroup>
				<h:panelGroup style="display:none" layout="block">
					<h:panelGrid style="display:none" columns="6">
						<h:panelGroup>
							<h:outputText value="X" />
							<h:inputText size="4" id="x" value="#{VisaoCoordenadorControle.x}" />
						</h:panelGroup>
						<h:panelGroup>
							<h:outputText value="Y" />
							<h:inputText size="4" id="y" value="#{VisaoCoordenadorControle.y}" />
						</h:panelGroup>
						<h:panelGroup>
							<h:outputText value="largura" />
							<h:inputText size="4" id="w" value="#{VisaoCoordenadorControle.largura}" />
						</h:panelGroup>
						<h:panelGroup>
							<h:outputText value="altura" />
							<h:inputText size="4" id="h" value="#{VisaoCoordenadorControle.altura}" />
						</h:panelGroup>
					</h:panelGrid>
				</h:panelGroup>


				<h:panelGroup rendered="#{VisaoCoordenadorControle.exibirUpload}" style="float:left" layout="block">
					<rich:fileUpload acceptedTypes="jpg, jpeg, png" listHeight="15" listWidth="600" noDuplicate="true" fileUploadListener="#{VisaoCoordenadorControle.upLoadImagem}" maxFilesQuantity="1" addLabel="Selecionar Arquivo" doneLabel="Pronto" sizeExceededLabel="Arquivo não Enviado. Tamanho Máximo 2MB" uploadLabel="Enviar" id="uploadImagemBanner" immediateUpload="true">
						<a4j:ajax listener="#{VisaoCoordenadorControle.renderizarUpload}" event="uploadcomplete" render="formImagem, form:imagem" />
					</rich:fileUpload>
				</h:panelGroup>
				<h:panelGroup rendered="#{VisaoCoordenadorControle.exibirUpload}" style="float:left" layout="block">
					<h:panelGrid width="100%" columnClasses="colunaCentralizada" columns="1">
						<h:outputText style="color:#006285; font-size:14px;" value="Você pode enviar arquivos JPG ou PNG (tamanho máximo de 2MB)" />
					</h:panelGrid>
				</h:panelGroup>

				<br />
				<h:panelGrid columns="7">
					<otm:commandButton style="float: left;" oncomplete="#{VisaoCoordenadorControle.oncompleteModal}" rendered="#{VisaoCoordenadorControle.exibirBotao}" image="#{resource['/imagens/botaoRecorteFoto.png']}"  action="#{VisaoCoordenadorControle.recortarFoto}" render="@all" value="Recorte a foto" />
					<otm:commandButton style="float: right;"  styleClass="btn btn-danger light btn-cancelar" icon="#{msg_botoes.btn_icon_cancelar_embutido}" value="Cancelar" action="#{VisaoCoordenadorControle.cancelar}" oncomplete="#{rich:component('panelImagem')}.hide();" render="formFotoUsuario, panelGridFoto, formImagem" title="Cancelar" />

					<otm:commandButton rendered="#{VisaoCoordenadorControle.exibirBotao}" styleClass="button1" action="#{VisaoCoordenadorControle.executarZoomIn}" image="#{resource['/imagens/botaoZoomIn.png']}" render="formImagem" />
					<otm:commandButton rendered="#{VisaoCoordenadorControle.exibirBotao}" styleClass="button1" action="#{VisaoCoordenadorControle.executarZoomOut}" image="#{resource['/imagens/botaoZoomOut.png']}" render="formImagem" />
					<otm:commandButton rendered="#{VisaoCoordenadorControle.exibirBotao}" image="#{resource['/imagens/girar90Esquerda.png']}" styleClass="button1" action="#{VisaoCoordenadorControle.rotacionar90GrausParaEsquerda}" render="formImagem" value="Girar 90º para Esquerda" />
					<otm:commandButton rendered="#{VisaoCoordenadorControle.exibirBotao}" image="#{resource['/imagens/girar90Direita.png']}" styleClass="button1" action="#{VisaoCoordenadorControle.rotacionar90GrausParaDireita}" render="formImagem" value="Girar 90º para Direita" />
					<otm:commandButton rendered="#{VisaoCoordenadorControle.exibirBotao}" image="#{resource['/imagens/gerar180.png']}" styleClass="button1" action="#{VisaoCoordenadorControle.rotacionar180Graus}" render="formImagem" value="Girar 180º" />
				</h:panelGrid>

				<a4j:outputPanel id="panelMensagem">
					<h:panelGrid width="100%" styleClass="tabMensagens" style="float: left; clear: left; margin-bottom: 10px; margin-left: 0px;">
						<h:panelGroup>
							<h:graphicImage url="#{VisaoCoordenadorControle.iconeMensagem}" rendered="#{VisaoCoordenadorControle.sucesso}" />
							<otm:spacer width="10" />
							<h:outputText styleClass="field control-label mensagem col-md-12" value="#{VisaoCoordenadorControle.mensagem}" />
							<h:outputText styleClass="field control-label mensagemDetalhada col-md-12" value="#{VisaoCoordenadorControle.mensagemDetalhada}" />
						</h:panelGroup>
					</h:panelGrid>
				</a4j:outputPanel>

			</h:form>
		</rich:popupPanel>


		<rich:popupPanel styleClass="modalMaximizado" id="alterarSenha" onshow="javascript:verifica('formAlterarSenha:senha')" shadowOpacity="false" width="650" height="300">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value="Alterar Senha"></h:outputText>
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:graphicImage value="#{resource['imagens/close.png']}" styleClass="icon-close-modal"  style="cursor:pointer" id="hidelinkFoto" />
					<rich:componentControl target="alterarSenha" operation="hide" event="click" />
				</h:panelGroup>
			</f:facet>
			<h:form id="formAlterarSenha">

				<h:panelGrid columns="4" id="mcConf" columnClasses="colunaAlinhamento" width="100%" style="background-color: transparent">
					<h:outputText styleClass="field control-label tituloCampos" value="Usuário Atual" />
					<h:inputText styleClass="form-control camposObrigatorios" size="20" maxlength="50" disabled="#{VisaoCoordenadorControle.permitirAlterarUsername}" value="#{VisaoCoordenadorControle.loginAnterior}" />
					<h:outputText styleClass="field control-label tituloCampos" value="Senha Atual" />
					<h:inputSecret styleClass="form-control camposObrigatorios" size="20" maxlength="50" value="#{VisaoCoordenadorControle.senhaAnterior}" />
					<h:outputText styleClass="field control-label tituloCampos" value="Usuário Novo" />
					<h:inputText styleClass="form-control camposObrigatorios" size="20" maxlength="50" disabled="#{VisaoCoordenadorControle.permitirAlterarUsername}" value="#{VisaoCoordenadorControle.login}" />
					<h:outputText styleClass="field control-label tituloCampos" value="Senha Nova" />
					<h:inputSecret styleClass="form-control camposObrigatorios" id="senha" size="20" maxlength="50" value="#{VisaoCoordenadorControle.senha}"  onkeyup="javascript:verifica('formAlterarSenha:senha')" />
					<h:outputText styleClass="tituloCampos" value="Alterar Senha Conta Gsuite" rendered="#{VisaoCoordenadorControle.existeConfiguracaoSeiGsuite}" />
					<h:selectBooleanCheckbox value="#{VisaoCoordenadorControle.alterarSenhaContaGsuite}" rendered="#{VisaoCoordenadorControle.existeConfiguracaoSeiGsuite}"/>
					<otm:spacer height="1" rendered="#{!VisaoCoordenadorControle.existeConfiguracaoSeiGsuite}"/>
					<otm:spacer height="1" rendered="#{!VisaoCoordenadorControle.existeConfiguracaoSeiGsuite}"/>
					<h:outputText styleClass="field control-label tituloCampos" value="Nível Segurança" />
					<div id="page-wrap" style="width:177px; margin-top: 2px;"></div>
				</h:panelGrid>
				<h:panelGrid columns="1" columnClasses="colunaCentralizada" width="100%" style="background-color: transparent">
					<otm:spacer height="15px" />
					<otm:commandButton oncomplete="#{rich:component('alterarSenha')}.hide()" image="#{resource['/imagens/botaoAlterar.png']}" render="form,formAlterarSenha" action="#{VisaoCoordenadorControle.alterarSenha}" />
				</h:panelGrid>

				<h:panelGrid columns="1" width="100%">
					<h:panelGroup>
						<h:graphicImage id="imgIcone" url="#{VisaoCoordenadorControle.iconeMensagem}" rendered="#{VisaoCoordenadorControle.sucesso}" />
						<otm:spacer width="10" />
						<h:outputText styleClass="field control-label mensagem col-md-12" value="#{VisaoCoordenadorControle.mensagem}" />
						<h:dataTable id="mensagens" width="100%" headerClass="rich-panel-header" styleClass="field control-label mensagemDetalhada col-md-12" columnClasses="colunaEsquerda" value="#{VisaoCoordenadorControle.listaMensagemErro}" var="mensagem" rows="3">
							<rich:column>
								<h:outputText value="#{mensagem}" />
							</rich:column>
						</h:dataTable>
					</h:panelGroup>

				</h:panelGrid>
			</h:form>
		</rich:popupPanel>

		<h:outputScript name="jquery.color.js" library="script/crop" />
		<h:outputScript name="jquery.Jcrop.js" library="script/crop" />
		<h:outputStylesheet name="jquery.Jcrop.css" library="script/crop" />

		<h:form id="form">

			<h1 class="title1">Configuração</h1>
			<h:panelGrid id="configuracao" columns="1" headerClass="consulta" columnClasses="colunaEsquerda" style="background-color: transparent;position:relative; top:0; left:0" width="100%">
				<h:panelGrid columns="1" id="mcMenu" width="100%" columnClasses="colunaCentralizada">
					<h:panelGroup>
						<otm:spacer height="60" />
						<otm:commandButton action="#{VisaoCoordenadorControle.inicializarMenuSenha}"  oncomplete="#{rich:component('alterarSenha')}.show()" render="formAlterarSenha" image="#{resource['/imagens/botaoAlterarSenha.png']}" />
						<otm:spacer width="15px" />
						<otm:commandButton action="#{VisaoCoordenadorControle.limparMensagem}"  oncomplete="#{rich:component('panelImagem')}.show()" render="formImagem" image="#{resource['/imagens/botaoAlterarFoto.png']}" />
					</h:panelGroup>
				</h:panelGrid>
			</h:panelGrid>
			<script type="text/javascript">
				$('document').ready(function() {
					colorPicker();
					verifica('formAlterarSenha:senha');
				});
			</script>
		</h:form>
	</ui:define>
</ui:composition>
</html>
